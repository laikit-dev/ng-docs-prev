{"version":3,"file":"index.min.js","sources":["../src/version.js","../src/utils/debug.js","../src/utils/xgplayerTimeRange.js","../src/utils/util.js","../src/error.js","../src/events.js","../../../node_modules/eventemitter3/index.js","../src/instManager.js","../src/lang/en.js","../src/lang/i18n.js","../src/utils/sniffer.js","../src/mediaProxy.js","../src/utils/database.js","../src/constant.js","../src/plugin/hooksDescriptor.js","../src/plugin/basePlugin.js","../../../node_modules/delegate/src/closest.js","../../../node_modules/delegate/src/delegate.js","../src/plugin/plugin.js","../src/plugin/resizeObserver.js","../src/plugin/pluginsManager.js","../src/stateClassMap.js","../src/defaultConfig.js","../src/plugin/preset.js","../src/state.js","../src/plugins/controls/index.js","../src/player.js","../src/plugins/common/iconTools.js","../src/plugins/common/iconPlugin.js","../src/plugins/cssFullScreen/index.js","../src/plugins/fullscreen/backicon.js","../src/plugins/fullscreen/index.js","../src/plugins/play/index.js","../src/plugins/progress/innerList.js","../src/plugins/progress/index.js","../src/plugins/time/index.js","../src/plugins/volume/index.js","../src/plugins/logger/index.js","../src/plugins/replay/index.js","../src/plugins/poster/index.js","../src/plugins/start/index.js","../src/plugins/enter/index.js","../src/plugins/miniScreen/miniScreenIcon.js","../src/utils/draggabilly.js","../src/plugins/miniScreen/index.js","../src/plugins/pc/index.js","../src/plugins/mobile/touch.js","../src/plugins/mobile/index.js","../src/plugins/keyboard/index.js","../src/plugins/loading/index.js","../src/plugins/time/timesegments.js","../src/plugins/rotate/index.js","../src/plugins/pip/index.js","../src/plugins/playNext/index.js","../../../node_modules/downloadjs/download.js","../src/plugins/download/index.js","../src/plugins/screenShot/index.js","../src/plugins/common/optionList.js","../src/plugins/common/optionsIcon.js","../src/plugins/definition/index.js","../src/plugins/playbackRate/index.js","../src/plugins/error/index.js","../src/plugins/prompt/index.js","../src/plugins/progressPreview/dotsApi.js","../src/plugins/progressPreview/index.js","../src/plugins/common/thumbnail.js","../src/plugins/progress/miniProgress.js","../src/plugins/dynamicBg/index.js","../src/plugins/stats/index.js","../src/plugins/gapJump/index.js","../src/plugins/waitingTimeoutJump/index.js","../src/plugins/testspeed/index.js","../src/plugins/fpsDetect/index.js","../src/presets/default.js","../src/lang/zh-cn.js","../src/index.umd.js"],"sourcesContent":["/**\n * @type {string}\n * */\nexport default __VERSION__\n","\nconst XG_DEBUG_OPEN = typeof (window) !== 'undefined' && window.location && window.location.href.indexOf('xgplayerdebugger=1') > -1\n\nconst STYLE = {\n  info: 'color: #525252; background-color: #90ee90;',\n  error: 'color: #525252; background-color: red;',\n  warn: 'color: #525252; background-color: yellow; '\n}\n\nconst XGTAG = '%c[xgplayer]'\n\nconst XG_DEBUG = {\n  config: {\n    debug: XG_DEBUG_OPEN ? 3 : 0\n  },\n\n  logInfo: function (message, ...optionalParams) {\n    this.config.debug >= 3 && console.log(XGTAG, STYLE.info, message, ...optionalParams)\n  },\n\n  logWarn: function (message, ...optionalParams) {\n    this.config.debug >= 1 && console.warn(XGTAG, STYLE.warn, message, ...optionalParams)\n  },\n\n  logError: function (message, ...optionalParams) {\n    if (this.config.debug < 1) {\n      return\n    }\n    const _fun = this.config.debug >= 2 ? 'trace' : 'error'\n    console[_fun](XGTAG, STYLE.error, message, ...optionalParams)\n  }\n}\n\nfunction bindDebug (player) {\n  player.logInfo = XG_DEBUG.logInfo.bind(player)\n  player.logWarn = XG_DEBUG.logWarn.bind(player)\n  player.logError = XG_DEBUG.logError.bind(player)\n}\n\nexport {\n  XG_DEBUG as default,\n  bindDebug\n}\n","export default class XgplayerTimeRange {\n  constructor (bufferedList) {\n    this.bufferedList = bufferedList\n  }\n\n  start (index) {\n    return this.bufferedList[index].start\n  }\n\n  end (index) {\n    return this.bufferedList[index].end\n  }\n\n  get length () {\n    return this.bufferedList.length\n  }\n}\n","import XG_DEBUG from './debug'\nimport XgplayerTimeRange from './xgplayerTimeRange'\nconst util = {}\n\n/**\n *\n * @param { string } el\n * @param { string } [tpl=]\n * @param { {[propName: string]: any }} [attrs={}]\n * @param { string } [cname='']\n * @returns { HTMLElement | null }\n */\nutil.createDom = function (el = 'div', tpl = '', attrs = {}, cname = '') {\n  const dom = document.createElement(el)\n  dom.className = cname\n  dom.innerHTML = tpl\n  Object.keys(attrs).forEach(item => {\n    const key = item\n    const value = attrs[item]\n    if (el === 'video' || el === 'audio' || el === 'live-video') {\n      if (value) {\n        dom.setAttribute(key, value)\n      }\n    } else {\n      dom.setAttribute(key, value)\n    }\n  })\n  return dom\n}\n\n/**\n *\n * @param { string } html\n * @param { {[propName: string]: any} } [attrs={}]\n * @param { string } [classname=\"\"]\n * @returns { HTMLElement | null }\n */\nutil.createDomFromHtml = function (html, attrs = {}, classname = '') {\n  try {\n    let doc = document.createElement('div')\n    doc.innerHTML = html\n    let dom = doc.children\n    doc = null\n    if (dom.length > 0) {\n      dom = dom[0]\n      classname && util.addClass(dom, classname)\n      if (attrs) {\n        Object.keys(attrs).forEach(key => {\n          dom.setAttribute(key, attrs[key])\n        })\n      }\n      return dom\n    }\n    return null\n  } catch (err) {\n    XG_DEBUG.logError('util.createDomFromHtml', err)\n    return null\n  }\n}\n\n/**\n *\n * @param { HTMLElement } el\n * @param { string } className\n * @returns { boolean }\n */\nutil.hasClass = function (el, className) {\n  if (!el || !className) {\n    return false\n  }\n  try {\n    return Array.prototype.some.call(el.classList, item => item === className)\n  } catch (e) {\n    const orgClassName = el.className && typeof el.className === 'object' ? el.getAttribute('class') : el.className\n    return orgClassName && !!orgClassName.match(new RegExp('(\\\\s|^)' + className + '(\\\\s|$)'))\n  }\n}\n\n/**\n *\n * @param { HTMLElement } el\n * @param { string } className\n * @returns { void }\n */\nutil.addClass = function (el, className) {\n  if (!el || !className) {\n    return\n  }\n  try {\n    className.replace(/(^\\s+|\\s+$)/g, '').split(/\\s+/g).forEach(item => {\n      item && el.classList.add(item)\n    })\n  } catch (e) {\n    if (!util.hasClass(el, className)) {\n      if (el.className && typeof el.className === 'object') {\n        el.setAttribute('class', el.getAttribute('class') + ' ' + className)\n      } else {\n        el.className += ' ' + className\n      }\n    }\n  }\n}\n\n/**\n *\n * @param { HTMLElement } el\n * @param { string } className\n * @returns { void }\n */\nutil.removeClass = function (el, className) {\n  if (!el || !className) {\n    return\n  }\n  try {\n    className.replace(/(^\\s+|\\s+$)/g, '').split(/\\s+/g).forEach(item => {\n      item && el.classList.remove(item)\n    })\n  } catch (e) {\n    if (util.hasClass(el, className)) {\n      className.split(/\\s+/g).forEach(item => {\n        const reg = new RegExp('(\\\\s|^)' + item + '(\\\\s|$)')\n        if (el.className && typeof el.className === 'object') {\n          el.setAttribute('class', el.getAttribute('class').replace(reg, ' '))\n        } else {\n          el.className = el.className.replace(reg, ' ')\n        }\n      })\n    }\n  }\n}\n\n/**\n *\n * @param { HTMLElement } el\n * @param { string } className\n * @returns { void }\n */\nutil.toggleClass = function (el, className) {\n  if (!el) {\n    return\n  }\n\n  className.split(/\\s+/g).forEach(item => {\n    if (util.hasClass(el, item)) {\n      util.removeClass(el, item)\n    } else {\n      util.addClass(el, item)\n    }\n  })\n}\n\n/**\n *\n * @param { string | Object } args0\n * @param { string } [className]\n * @returns { string }\n */\nutil.classNames = function () {\n  const classname = []\n  for (let i = 0; i < arguments.length; i++) {\n    if (util.typeOf(arguments[i]) === 'String') {\n      // classname += `${arguments[i]}`\n      classname.push(arguments[i])\n    } else if (util.typeOf(arguments[i]) === 'Object') {\n      Object.keys(arguments[i]).map(key => {\n        if (arguments[i][key]) {\n          // classname += key\n          classname.push(key)\n        }\n      })\n    }\n    // if (i < arguments.length - 1) {\n    //   classname += ' '\n    // }\n  }\n  return classname.join(' ')\n}\n\n/**\n *\n * @param { HTMLElement } el\n * @param { string } sel\n * @returns { HTMLElement }\n */\nutil.findDom = function (el = document, sel) {\n  let dom\n  // fix querySelector IDs that start with a digit\n  // https://stackoverflow.com/questions/37270787/uncaught-syntaxerror-failed-to-execute-queryselector-on-document\n  try {\n    dom = el.querySelector(sel)\n  } catch (e) {\n    XG_DEBUG.logError('util.findDom', e)\n    if (sel.indexOf('#') === 0) {\n      dom = el.getElementById(sel.slice(1))\n    }\n  }\n  return dom\n}\n\n/**\n *\n * @param { HTMLElement } dom\n * @param { string } key\n * @returns { any }\n */\nutil.getCss = function (dom, key) {\n  return dom.currentStyle ? dom.currentStyle[key] : document.defaultView.getComputedStyle(dom, false)[key]\n}\n\nutil.padStart = function (str, length, pad) {\n  const charstr = String(pad)\n  const len = length >> 0\n  let maxlen = Math.ceil(len / charstr.length)\n  const chars = []\n  const r = String(str)\n  while (maxlen--) {\n    chars.push(charstr)\n  }\n  return chars.join('').substring(0, len - r.length) + r\n}\n\n/**\n *\n * @param { number } time\n * @returns { string }\n */\nutil.format = function (time) {\n  if (window.isNaN(time)) {\n    return ''\n  }\n  time = Math.round(time)\n  const hour = util.padStart(Math.floor(time / 3600), 2, 0)\n  const minute = util.padStart(Math.floor((time - hour * 3600) / 60), 2, 0)\n  const second = util.padStart(Math.floor((time - hour * 3600 - minute * 60)), 2, 0)\n  return (hour === '00' ? [minute, second] : [hour, minute, second]).join(':')\n}\n\n/**\n *\n * @param { Object } e\n * @returns { Object }\n */\nutil.event = function (e) {\n  if (e.touches) {\n    const touch = e.touches[0] || e.changedTouches[0]\n    e.clientX = touch.clientX || 0\n    e.clientY = touch.clientY || 0\n    e.offsetX = touch.pageX - touch.target.offsetLeft\n    e.offsetY = touch.pageY - touch.target.offsetTop\n  }\n  e._target = e.target || e.srcElement\n}\n\n/**\n *\n * @param { any } obj\n * @returns { string }\n */\nutil.typeOf = function (obj) {\n  // eslint-disable-next-line no-lookahead-lookbehind-regexp/no-lookahead-lookbehind-regexp\n  return Object.prototype.toString.call(obj).match(/([^\\s.*]+)(?=]$)/g)[0]\n}\n\n/**\n *\n * @param { any } dst\n * @param { any } src\n * @returns { any }\n */\nutil.deepCopy = function (dst, src) {\n  if (util.typeOf(src) === 'Object' && util.typeOf(dst) === 'Object') {\n    Object.keys(src).forEach(key => {\n      // eslint-disable-next-line no-undef\n      if (util.typeOf(src[key]) === 'Object' && !(src[key] instanceof Node)) {\n        if (dst[key] === undefined || dst[key] === undefined) {\n          dst[key] = src[key]\n        } else {\n          util.deepCopy(dst[key], src[key])\n        }\n      } else if (util.typeOf(src[key]) === 'Array') {\n        dst[key] = util.typeOf(dst[key]) === 'Array' ? dst[key].concat(src[key]) : src[key]\n      } else {\n        dst[key] = src[key]\n      }\n    })\n    return dst\n  }\n}\n\n/**\n *\n * @param { any } dst\n * @param { any } src\n * @returns { any }\n */\nutil.deepMerge = function (dst, src) {\n  Object.keys(src).map(key => {\n    if (util.typeOf(src[key]) === 'Array' && util.typeOf(dst[key]) === 'Array') {\n      if (util.typeOf(dst[key]) === 'Array') {\n        dst[key].push(...src[key])\n      }\n    } else if (util.typeOf(dst[key]) === util.typeOf(src[key]) && dst[key] !== null && util.typeOf(dst[key]) === 'Object' && !(src[key] instanceof window.Node)) {\n      util.deepMerge(dst[key], src[key])\n    } else {\n      src[key] !== null && (dst[key] = src[key])\n    }\n  })\n  return dst\n}\n\nutil.getBgImage = function (el) {\n  // fix: return current page url when url is none\n  const url = (el.currentStyle || window.getComputedStyle(el, null)).backgroundImage\n  if (!url || url === 'none') {\n    return ''\n  }\n  const a = document.createElement('a')\n  a.href = url.replace(/url\\(\"|\"\\)/g, '')\n  return a.href\n}\n\n/**\n *\n * @param {  HTMLElement } dom\n * @returns { HTMLElement | null }\n */\nutil.copyDom = function (dom) {\n  if (dom && dom.nodeType === 1) {\n    const back = document.createElement(dom.tagName)\n    Array.prototype.forEach.call(dom.attributes, (node) => {\n      back.setAttribute(node.name, node.value)\n    })\n    if (dom.innerHTML) {\n      back.innerHTML = dom.innerHTML\n    }\n    return back\n  } else {\n    return ''\n  }\n}\n\n/**\n *\n * @param { any } context\n * @param { string } eventName\n * @param { function } intervalFunc\n * @param { number } frequency\n */\nutil.setInterval = function (context, eventName, intervalFunc, frequency) {\n  if (!context._interval[eventName]) {\n    context._interval[eventName] = window.setInterval(intervalFunc.bind(context), frequency)\n  }\n}\n\n/**\n *\n * @param { any } context\n * @param { string } eventName\n * @returns { void }\n */\nutil.clearInterval = function (context, eventName) {\n  clearInterval(context._interval[eventName])\n  context._interval[eventName] = null\n}\n\n/**\n *\n * @param { any } context\n * @param { function } fun\n * @param { number } time\n * @returns { number }\n */\nutil.setTimeout = function (context, fun, time) {\n  if (!context._timers) {\n    context._timers = []\n  }\n  const id = setTimeout(() => {\n    fun()\n    util.clearTimeout(context, id)\n  }, time)\n  context._timers.push(id)\n  return id\n}\n\n/**\n *\n * @param { any } context\n * @param { number } id\n */\nutil.clearTimeout = function (context, id) {\n  const { _timers } = context\n  if (util.typeOf(_timers) === 'Array') {\n    for (let i = 0; i < _timers.length; i++) {\n      if (_timers[i] === id) {\n        _timers.splice(i, 1)\n        clearTimeout(id)\n        break\n      }\n    }\n  } else {\n    clearTimeout(id)\n  }\n}\n\n/**\n *\n * @param { any } context\n */\nutil.clearAllTimers = function (context) {\n  const { _timers } = context\n  if (util.typeOf(_timers) === 'Array') {\n    _timers.map(item => {\n      clearTimeout(item)\n    })\n    context._timerIds = []\n  }\n}\n\n/**\n *\n * @param { string } name\n * @param { string } imgUrl\n * @param { number } [width]\n * @param { number } [height]\n * @returns { HTMLElement }\n */\nutil.createImgBtn = function (name, imgUrl, width, height) {\n  const btn = util.createDom(`xg-${name}`, '', {}, `xgplayer-${name}-img`)\n  btn.style.backgroundImage = `url(\"${imgUrl}\")`\n  if (width && height) {\n    let w, h, unit\n    ['px', 'rem', 'em', 'pt', 'dp', 'vw', 'vh', 'vm', '%'].every((item) => {\n      if (width.indexOf(item) > -1 && height.indexOf(item) > -1) {\n        w = parseFloat(width.slice(0, width.indexOf(item)).trim())\n        h = parseFloat(height.slice(0, height.indexOf(item)).trim())\n        unit = item\n        return false\n      } else {\n        return true\n      }\n    })\n    btn.style.width = `${w}${unit}`\n    btn.style.height = `${h}${unit}`\n    btn.style.backgroundSize = `${w}${unit} ${h}${unit}`\n    if (name === 'start') {\n      btn.style.margin = `-${h / 2}${unit} auto auto -${w / 2}${unit}`\n    } else {\n      btn.style.margin = 'auto 5px auto 5px'\n    }\n  }\n  return btn\n}\n\n/**\n *\n * @param { string } hex\n * @param { string | number } alpha\n * @returns { string }\n */\nutil.Hex2RGBA = function (hex, alpha) {\n  const rgb = [] // 定义rgb数组\n  // eslint-disable-next-line no-useless-escape\n  if (/^\\#[0-9A-F]{3}$/i.test(hex)) {\n    let sixHex = '#'\n    hex.replace(/[0-9A-F]/ig, function (kw) {\n      sixHex += kw + kw\n    })\n    hex = sixHex\n  }\n  if (/^#[0-9A-F]{6}$/i.test(hex)) {\n    hex.replace(/[0-9A-F]{2}/ig, function (kw) {\n      rgb.push(parseInt(kw, 16))\n    })\n    return `rgba(${rgb.join(',')}, ${alpha})`\n  } else {\n    return 'rgba(255, 255, 255, 0.1)'\n  }\n}\n\n/**\n *\n * @returns { HTMLElement | null }\n */\nutil.getFullScreenEl = function () {\n  return document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement\n}\n\n/**\n * @param { any }\n * @returns { boolean }\n */\nutil.checkIsFunction = function (fun) {\n  return fun && typeof fun === 'function'\n}\n\n/**\n * @param { any }\n * @returns { boolean }\n */\nutil.checkIsObject = function (obj) {\n  return obj !== null && typeof obj === 'object'\n}\n\n/**\n * @param { HTMLElement }\n */\nutil.hide = function (dom) {\n  dom.style.display = 'none'\n}\n\n/**\n * @param { HTMLElement }\n * @param { block | flex | inline-block | inline-flex } [display]\n */\nutil.show = function (dom, display) {\n  dom.style.display = display || 'block'\n}\n\n/**\n *\n * @param { any } val\n * @returns { boolean }\n */\nutil.isUndefined = function (val) {\n  if (typeof val === 'undefined' || val === null) {\n    return true\n  }\n}\n\nutil.isNotNull = function (val) {\n  return !(val === undefined || val === null)\n}\n\n/**\n *\n * @param { HTMLElement } dom\n * @param { string } [text]\n * @returns\n */\nutil.setStyleFromCsstext = function (dom, text) {\n  // dom.setAttribute(style, text)\n  if (!text) {\n    return\n  }\n  if (util.typeOf(text) === 'String') {\n    const styleArr = text.replace(/\\s+/g, '').split(';')\n    styleArr.map(item => {\n      if (item) {\n        const arr = item.split(':')\n        if (arr.length > 1) {\n          dom.style[arr[0]] = arr[1]\n        }\n      }\n    })\n  } else {\n    Object.keys(text).map(key => {\n      dom.style[key] = text[key]\n    })\n  }\n}\n\n/**\n *\n * @param { string } key\n * @param { Array<any>} list\n * @returns { boolean }\n */\nfunction checkIsIn (key, list) {\n  for (let i = 0, len = list.length; i < len; i++) {\n    if (key.indexOf(list[i]) > -1) {\n      return true\n    }\n  }\n  return false\n}\n\n/**\n *\n * @param { HTMLElement } dom\n * @param { Array<string> } [list] attribute names to filter\n * @returns { {} | {[propName: string]: any;} }\n */\nutil.filterStyleFromText = function (dom, list = ['width', 'height', 'top', 'left', 'bottom', 'right', 'position', 'z-index', 'padding', 'margin', 'transform']) {\n  const _cssText = dom.style.cssText\n  if (!_cssText) {\n    return {}\n  }\n  const styleArr = _cssText.replace(/\\s+/g, '').split(';')\n  const ret = {}\n  const remain = {}\n  styleArr.map(item => {\n    if (item) {\n      const arr = item.split(':')\n      if (arr.length > 1) {\n        if (checkIsIn(arr[0], list)) {\n          ret[arr[0]] = arr[1]\n          // dom.style[arr[0]] = 'initial'\n        } else {\n          remain[arr[0]] = arr[1]\n        }\n      }\n    }\n  })\n  dom.setAttribute('style', '')\n  Object.keys(remain).map(key => {\n    // netStyle += `${key}: ${remain[key]};`\n    dom.style[key] = remain[key]\n  })\n  return ret\n}\n\n/**\n *\n * @param { HTMLElement } dom\n * @returns { {} | {[propName: string]: any;} }\n */\nutil.getStyleFromCsstext = function (dom) {\n  const _cssText = dom.style.cssText\n  if (!_cssText) {\n    return {}\n  }\n  const styleArr = _cssText.replace(/\\s+/g, '').split(';')\n  const ret = {}\n  styleArr.map(item => {\n    if (item) {\n      const arr = item.split(':')\n      if (arr.length > 1) {\n        ret[arr[0]] = arr[1]\n      }\n    }\n  })\n  return ret\n}\n\nutil.preloadImg = (url, onload = () => {}, onerror = () => {}) => {\n  if (!url) {\n    return\n  }\n  let img = new window.Image()\n  img.onload = (e) => {\n    img = null\n    onload && onload(e)\n  }\n  img.onerror = (e) => {\n    img = null\n    onerror && onerror(e)\n  }\n  img.src = url\n}\n\nutil.stopPropagation = (e) => {\n  if (e) {\n    e.stopPropagation()\n  }\n}\n\nutil.scrollTop = function () {\n  return window.pageYOffset ||\n  document.documentElement.scrollTop ||\n  document.body.scrollTop ||\n  0\n}\n\nutil.scrollLeft = function () {\n  return window.pageXOffset ||\n  document.documentElement.scrollLeft ||\n  document.body.scrollLeft ||\n  0\n}\n\nutil.checkTouchSupport = function () {\n  return 'ontouchstart' in window\n}\n\nutil.getBuffered2 = (vbuffered, maxHoleDuration = 0.5) => { // ref: hls.js\n  const buffered = []\n  for (let i = 0; i < vbuffered.length; i++) {\n    buffered.push({ start: vbuffered.start(i) < 0.5 ? 0 : vbuffered.start(i), end: vbuffered.end(i) })\n  }\n  buffered.sort(function (a, b) {\n    const diff = a.start - b.start\n    if (diff) {\n      return diff\n    } else {\n      return b.end - a.end\n    }\n  })\n  let buffered2 = []\n  if (maxHoleDuration) {\n    for (let i = 0; i < buffered.length; i++) {\n      const buf2len = buffered2.length\n      if (buf2len) {\n        const buf2end = buffered2[buf2len - 1].end\n        if ((buffered[i].start - buf2end) < maxHoleDuration) {\n          if (buffered[i].end > buf2end) {\n            buffered2[buf2len - 1].end = buffered[i].end\n          }\n        } else {\n          buffered2.push(buffered[i])\n        }\n      } else {\n        buffered2.push(buffered[i])\n      }\n    }\n  } else {\n    buffered2 = buffered\n  }\n  return new XgplayerTimeRange(buffered2)\n}\n\n/**\n * @description css中有zoom的时候，位移会等比缩放，但是元素的宽高不会等比缩放，所以通过该api做统一\n * https://bugs.chromium.org/p/chromium/issues/detail?id=429140#c8\n * @param {Event} e\n * @param {number} zoom\n * @returns\n */\nutil.getEventPos = function (e, zoom = 1) {\n  if (e.touches && e.touches.length > 0) {\n    e = e.touches[0]\n  }\n  return {\n    x: e.x / zoom,\n    y: e.y / zoom,\n    clientX: e.clientX / zoom,\n    clientY: e.clientY / zoom,\n    offsetX: e.offsetX / zoom,\n    offsetY: e.offsetY / zoom,\n    pageX: e.pageX / zoom,\n    pageY: e.pageY / zoom\n  }\n}\n\nutil.requestAnimationFrame = function (callback) {\n  const _fun = window.requestAnimationFrame ||\n  // Older versions Chrome/Webkit\n  window.webkitRequestAnimationFrame ||\n\n   // Firefox < 23\n   window.mozRequestAnimationFrame ||\n\n   // opera\n   window.oRequestAnimationFrame ||\n\n   // ie\n   window.msRequestAnimationFrame\n  if (_fun) {\n    return _fun(callback)\n  }\n}\n\nutil.getHostFromUrl = function (url) {\n  if (util.typeOf(url) !== 'String') {\n    return ''\n  }\n  const results = url.split('/') // 以“/”进行分割\n  let domain = ''\n  if (results.length > 3 && results[2]) {\n    domain = results[2]\n  }\n  return domain\n}\n\nutil.cancelAnimationFrame = function (frameId) {\n  const _fun = window.cancelAnimationFrame || window.mozCancelAnimationFrame || window.cancelRequestAnimationFrame\n  _fun && _fun(frameId)\n}\n\n/**\n * @desc Check whether it is MediaSource start\n * @param { HTMLVideoElement | HTMLAudioElement | HTMLElement } video\n * @returns { boolean }\n */\nutil.isMSE = function (video) {\n  if (video.media) {\n    video = video.media\n  }\n  if (!video || !(video instanceof HTMLMediaElement)) {\n    return false\n  }\n  return /^blob/.test(video.currentSrc) || /^blob/.test(video.src)\n}\n\nutil.isBlob = function (url) {\n  return typeof url === 'string' && /^blob/.test(url)\n}\n\n/**\n * @param { number } did\n * @returns { string }\n */\nutil.generateSessionId = function (did = 0) {\n  let d = new Date().getTime()\n  try {\n    did = parseInt(did)\n  } catch (e) {\n    did = 0\n  }\n  d += did\n  if (window.performance && typeof window.performance.now === 'function') {\n    d += parseInt(window.performance.now()) // use high-precision timer if available\n  }\n  const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    const r = (d + Math.random() * 16) % 16 | 0\n    d = Math.floor(d / 16)\n    return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16)\n  })\n  return uuid\n}\n\nutil.createEvent = function (eventName) {\n  let event\n  if (typeof window.Event === 'function') {\n    event = new Event(eventName)\n  } else {\n    event = document.createEvent('Event')\n    event.initEvent(eventName, true, true)\n  }\n  return event\n}\n\n/**\n * @description Adjust currentTime according to duration, when ended is true and currentTime is less than duration, or\n *              currentTime is greater than duration, return duration\n * @param { number } time\n * @param { number } duration\n * @param { boolean } isEnded\n * @returns { number } Adjusted time\n */\nutil.adjustTimeByDuration = function (time, duration, isEnded) {\n  if (!duration || !time) {\n    return time\n  }\n  if (time > duration || (isEnded && time < duration)) {\n    return duration\n  }\n  return time\n}\n\nutil.createPositionBar = function (className, root) {\n  const dom = util.createDom(\n    'xg-bar',\n    '',\n    { 'data-index': -1 },\n    className\n  )\n  root.appendChild(dom)\n  return dom\n}\n\nutil.getTransformStyle = function (pos = { x: 0, y: 0, scale: 1, rotate: 0 }, transformValue = '') {\n  const styles = {\n    scale: `${pos.scale || 1}`,\n    translate: `${pos.x || 0}%, ${pos.y || 0}%`,\n    rotate: `${pos.rotate || 0}deg`\n  }\n  const stylesKeys = Object.keys(styles)\n\n  // 只复写Transform中已知的函数，对于其他函数不修改。解决全屏或者rotate插件执行时，对于镜像插件的影响\n  stylesKeys.forEach((key) => {\n    const reg = new RegExp(`${key}\\\\([^\\\\(]+\\\\)`, 'g') // reg match: TransformFunc(values)\n    const fn = `${key}(${styles[key]})`\n    if (reg.test(transformValue)) {\n      reg.lastIndex = -1\n      transformValue = transformValue.replace(reg, fn)\n    } else {\n      transformValue += `${fn} `\n    }\n  })\n  return transformValue\n}\n\n/**\n * @description 角度换算\n * @param {number} val\n * @returns {number}\n */\nutil.convertDeg = function (val) {\n  if (Math.abs(val) <= 1) {\n    return val * 360\n  }\n  return val % 360\n}\n\nutil.getIndexByTime = function (time, segments) {\n  const _len = segments.length\n  let _index = -1\n  if (_len < 1) {\n    return _index\n  }\n  if (time <= segments[0].end || _len < 2) {\n    _index = 0\n  } else if (time > segments[_len - 1].end) {\n    _index = _len - 1\n  } else {\n    for (let i = 1; i < _len; i++) {\n      if (time > segments[i - 1].end && time <= segments[i].end){\n        _index = i\n        break\n      }\n    }\n  }\n  return _index\n}\nutil.getOffsetCurrentTime = function (currentTime, segments, index = -1) {\n  let _index = -1\n  if (index >= 0 && index < segments.length) {\n    _index = index\n  } else {\n    _index = util.getIndexByTime(currentTime, segments)\n  }\n  if (_index < 0) {\n    return -1\n  }\n  const _len = segments.length\n  const { start, end, cTime, offset } = segments[_index]\n  if (currentTime < start) {\n    return cTime\n  } else if (currentTime >= start && currentTime <= end) {\n    return currentTime - offset\n  } else if (currentTime > end && _index >= _len - 1) {\n    return end\n  }\n  return -1\n}\n\n/**\n *\n * @param {*} offsetTime\n * @param {*} segments\n * @returns\n */\nutil.getCurrentTimeByOffset = function (offsetTime, segments) {\n  let _index = -1\n  if (!segments || segments.length < 0) {\n    return offsetTime\n  }\n  for (let i = 0; i < segments.length; i++) {\n    if (offsetTime <= segments[i].duration) {\n      _index = i\n      break\n    }\n  }\n  if (_index !== -1) {\n    const { start } = segments[_index]\n    if (_index - 1 < 0) {\n      return start + offsetTime\n    } else {\n      return start + (offsetTime - segments[_index - 1].duration)\n    }\n  }\n  return offsetTime\n}\n\nfunction isObject (value) {\n  const type = typeof value\n  return value !== null && (type === 'object' || type === 'function')\n}\n\nfunction debounce (func, wait, options) {\n  let lastArgs,\n    lastThis,\n    maxWait,\n    result,\n    timerId,\n    lastCallTime\n\n  let lastInvokeTime = 0\n  let leading = false\n  let maxing = false\n  let trailing = true\n\n  // Bypass `requestAnimationFrame` by explicitly setting `wait=0`.\n  const useRAF = (!wait && wait !== 0 && typeof window.requestAnimationFrame === 'function')\n\n  if (typeof func !== 'function') {\n    throw new TypeError('Expected a function')\n  }\n  wait = +wait || 0\n  if (isObject(options)) {\n    leading = !!options.leading\n    maxing = 'maxWait' in options\n    maxWait = maxing ? Math.max(+options.maxWait || 0, wait) : maxWait\n    trailing = 'trailing' in options ? !!options.trailing : trailing\n  }\n\n  function invokeFunc (time) {\n    const args = lastArgs\n    const thisArg = lastThis\n\n    lastArgs = lastThis = undefined\n    lastInvokeTime = time\n    result = func.apply(thisArg, args)\n    return result\n  }\n\n  function startTimer (pendingFunc, wait) {\n    if (useRAF) {\n      window.cancelAnimationFrame(timerId)\n      return window.requestAnimationFrame(pendingFunc)\n    }\n    return setTimeout(pendingFunc, wait)\n  }\n\n  function cancelTimer (id) {\n    if (useRAF) {\n      return window.cancelAnimationFrame(id)\n    }\n    clearTimeout(id)\n  }\n\n  function leadingEdge (time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time\n    // Start the timer for the trailing edge.\n    timerId = startTimer(timerExpired, wait)\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result\n  }\n\n  function remainingWait (time) {\n    const timeSinceLastCall = time - lastCallTime\n    const timeSinceLastInvoke = time - lastInvokeTime\n    const timeWaiting = wait - timeSinceLastCall\n\n    return maxing\n      ? Math.min(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting\n  }\n\n  function shouldInvoke (time) {\n    const timeSinceLastCall = time - lastCallTime\n    const timeSinceLastInvoke = time - lastInvokeTime\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait))\n  }\n\n  function timerExpired () {\n    const time = Date.now()\n    if (shouldInvoke(time)) {\n      return trailingEdge(time)\n    }\n    // Restart the timer.\n    timerId = startTimer(timerExpired, remainingWait(time))\n  }\n\n  function trailingEdge (time) {\n    timerId = undefined\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time)\n    }\n    lastArgs = lastThis = undefined\n    return result\n  }\n\n  function cancel () {\n    if (timerId !== undefined) {\n      cancelTimer(timerId)\n    }\n    lastInvokeTime = 0\n    lastArgs = lastCallTime = lastThis = timerId = undefined\n  }\n\n  function flush () {\n    return timerId === undefined ? result : trailingEdge(Date.now())\n  }\n\n  function pending () {\n    return timerId !== undefined\n  }\n\n  function debounced (...args) {\n    const time = Date.now()\n    const isInvoking = shouldInvoke(time)\n\n    lastArgs = args\n    lastThis = this\n    lastCallTime = time\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime)\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = startTimer(timerExpired, wait)\n        return invokeFunc(lastCallTime)\n      }\n    }\n    if (timerId === undefined) {\n      timerId = startTimer(timerExpired, wait)\n    }\n    return result\n  }\n  debounced.cancel = cancel\n  debounced.flush = flush\n  debounced.pending = pending\n  return debounced\n}\n\nfunction throttle (func, wait, options) {\n  let leading = true\n  let trailing = true\n\n  if (typeof func !== 'function') {\n    throw new TypeError('Expected a function')\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading\n    trailing = 'trailing' in options ? !!options.trailing : trailing\n  }\n  return debounce(func, wait, {\n    leading,\n    trailing,\n    maxWait: wait\n  })\n}\n\n/**\n * @returns { string }\n */\nfunction getLang () {\n  let lang = (document.documentElement.getAttribute('lang') || navigator.language || 'zh-cn').toLocaleLowerCase()\n  if (lang === 'zh-cn') {\n    lang = 'zh'\n  }\n  return lang\n}\n\nfunction checkIsCurrentVideo (element, playerId, key) {\n  if (!element) {\n    return\n  }\n  const pid = element.getAttribute(key)\n  if (pid && pid === playerId && (element.tagName === 'VIDEO' || element.tagName === 'AUDIO')) {\n    return true\n  }\n  return false\n}\n\nexport {\n  util as default,\n  checkIsCurrentVideo,\n  debounce,\n  throttle,\n  getLang\n}\n","// eslint-disable-next-line no-undef\nimport version from './version'\nimport Util from './utils/util'\n/**\n * @typedef { import ('./player').default } Player\n */\n\nconst ERROR_TYPE_MAP = {\n  1: 'media',\n  2: 'media',\n  3: 'media',\n  4: 'media',\n  5: 'media',\n  6: 'media'\n}\n\nconst ERROR_MAP = {\n  1: 5101,\n  2: 5102,\n  3: 5103,\n  4: 5104,\n  5: 5105,\n  6: 5106\n}\n\nconst ErrorTypes = {\n  network: {\n    code: 1\n  },\n  mse: {\n    code: 2\n  },\n  parse: {\n    code: 3\n  },\n  format: {\n    code: 4\n  },\n  decoder: {\n    code: 5\n  },\n  runtime: {\n    code: 6\n  },\n  timeout: {\n    code: 7\n  },\n  drm: {\n    code: 8\n  },\n  ad: {\n    code: 9\n  },\n  other: {\n    code: 1000\n  }\n}\n\n/**\n * @typedef { {\n *   playerVersion: string,\n *   currentTime: number,\n *   duration: number,\n *   ended: boolean,\n *   readyState: number,\n *   networkState: number,\n *   src: any,\n *   errorType: string,\n *   errorCode: number,\n *   message: string,\n *   mediaError?: {\n *     code: number,\n *     message?: string\n *   },\n *   originError?: any,\n *   url?: any,\n *   host?: string,\n *   [propName: string]: any\n * } } IError\n */\n\n/**\n * @type { IError }\n */\nclass Errors {\n  /**\n   *\n   * @param { Player } player\n   * @param { {\n   * errorType: string,\n   * errorCode: number,\n   * errorMessage: string,\n   * originError: any,\n   * ext: { [propName: string]: any; }\n   * } } errorInfo\n   * @returns\n   */\n  constructor (player, errorInfo = { errorType: '', errorCode: 0, errorMessage: '', originError: '', ext: {}, mediaError: null }) {\n    const ERROR_TYPES = player && player.i18n ? player.i18n.ERROR_TYPES : null\n    if (player.media) {\n      const mediaError = errorInfo.mediaError ? errorInfo.mediaError : (player.media.error || {})\n      const { duration, currentTime, ended, src, currentSrc } = player\n      const { readyState, networkState } = player.media\n      let _errc = errorInfo.errorCode || mediaError.code\n      if (ERROR_MAP[_errc]) {\n        _errc = ERROR_MAP[_errc]\n      }\n      const r = {\n        playerVersion: version,\n        currentTime,\n        duration,\n        ended,\n        readyState,\n        networkState,\n        src: src || currentSrc,\n        errorType: errorInfo.errorType,\n        errorCode: _errc,\n        message: errorInfo.errorMessage || mediaError.message,\n        mediaError,\n        originError: errorInfo.originError ? errorInfo.originError.stack : '',\n        host: Util.getHostFromUrl(src || currentSrc)\n      }\n      errorInfo.ext && Object.keys(errorInfo.ext).map(key => {\n        r[key] = errorInfo.ext[key]\n      })\n      return r\n    } else {\n      if (arguments.length > 1) {\n        const r = {\n          playerVersion: version,\n          domain: document.domain\n        }\n        const arr = ['errorType', 'currentTime', 'duration', 'networkState', 'readyState', 'src', 'currentSrc', 'ended', 'errd', 'errorCode', 'mediaError']\n        for (let i = 0; i < arguments.length; i++) {\n          r[arr[i]] = arguments[i]\n        }\n        r.ex = ERROR_TYPES ? (ERROR_TYPES[arguments[0]] || {}).msg : ''// 补充信息\n        return r\n      }\n    }\n  }\n}\n\nexport {\n  Errors as default,\n  ErrorTypes,\n  ERROR_TYPE_MAP\n}\n","export const PLAY = 'play'\nexport const PLAYING = 'playing'\nexport const ENDED = 'ended'\nexport const PAUSE = 'pause'\nexport const ERROR = 'error'\nexport const SEEKING = 'seeking'\nexport const SEEKED = 'seeked'\nexport const TIME_UPDATE = 'timeupdate'\nexport const WAITING = 'waiting'\nexport const CANPLAY = 'canplay'\nexport const CANPLAY_THROUGH = 'canplaythrough'\nexport const DURATION_CHANGE = 'durationchange'\nexport const VOLUME_CHANGE = 'volumechange'\nexport const LOADED_DATA = 'loadeddata'\nexport const LOADED_METADATA = 'loadedmetadata'\nexport const RATE_CHANGE = 'ratechange'\nexport const PROGRESS = 'progress'\nexport const LOAD_START = 'loadstart'\nexport const EMPTIED = 'emptied'\nexport const STALLED = 'stalled'\nexport const SUSPEND = 'suspend'\nexport const ABORT = 'abort'\n\n// player events\nexport const BUFFER_CHANGE = 'bufferedChange'\nexport const PLAYER_FOCUS = 'focus'\nexport const PLAYER_BLUR = 'blur'\nexport const READY = 'ready'\nexport const URL_NULL = 'urlNull'\nexport const AUTOPLAY_STARTED = 'autoplay_started'\nexport const AUTOPLAY_PREVENTED = 'autoplay_was_prevented'\nexport const COMPLETE = 'complete'\nexport const REPLAY = 'replay'\nexport const DESTROY = 'destroy'\nexport const URL_CHANGE = 'urlchange'\nexport const DOWNLOAD_SPEED_CHANGE = 'download_speed_change'\nexport const LEAVE_PLAYER = 'leaveplayer'\nexport const ENTER_PLAYER = 'enterplayer'\nexport const LOADING = 'loading'\n\n// screen change evnets\nexport const FULLSCREEN_CHANGE = 'fullscreen_change'\nexport const CSS_FULLSCREEN_CHANGE = 'cssFullscreen_change'\nexport const MINI_STATE_CHANGE = 'mini_state_change'\n\nexport const DEFINITION_CHANGE = 'definition_change'\nexport const BEFORE_DEFINITION_CHANGE = 'before_definition_change'\nexport const AFTER_DEFINITION_CHANGE = 'after_definition_change'\n\n// transmuxer events\nexport const SEI_PARSED = 'SEI_PARSED'\n\nexport const RETRY = 'retry'\n\n// 容器宽高变化\nexport const VIDEO_RESIZE = 'video_resize'\n\n// picture-in-picture状态变化\nexport const PIP_CHANGE = 'pip_change'\n\n// rotate change\nexport const ROTATE = 'rotate'\n\n// screenShot\nexport const SCREEN_SHOT = 'screenShot'\n\n// play next\nexport const PLAYNEXT = 'playnext'\n\nexport const SHORTCUT = 'shortcut'\n\nexport const XGLOG = 'xglog'\n\nexport const USER_ACTION = 'user_action'\n\nexport const RESET = 'reset'\n\nexport const SOURCE_ERROR = 'source_error'\n\nexport const SOURCE_SUCCESS = 'source_success'\n\nexport const SWITCH_SUBTITLE = 'switch_subtitle'\n\nexport const VIDEO_EVENTS = [\n  'play',\n  'playing',\n  'ended',\n  'pause',\n  'error',\n  'seeking',\n  'seeked',\n  'timeupdate',\n  'waiting',\n  'canplay',\n  'canplaythrough',\n  'durationchange',\n  'volumechange',\n  'loadeddata',\n  'loadedmetadata',\n  'ratechange',\n  'progress',\n  'loadstart',\n  'emptied',\n  'stalled',\n  'suspend',\n  'abort',\n  'lowdecode'\n]\n\nexport const STATS_EVENTS = {\n  STATS_INFO: 'stats_info',\n  STATS_DOWNLOAD: 'stats_download',\n  STATS_RESET: 'stats_reset'\n}\n\nexport const FPS_STUCK = 'fps_stuck'","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","import { EventEmitter } from 'eventemitter3'\n\n/**\n * @typedef { (Player) => ?boolean } IterateFunction\n */\n/**\n * @typedef {  import('./player').default } Player\n */\n\n/**\n * global player instance memory\n * @type {{\n *  [key:string]:\n * }}\n */\nconst store = {}\n\nlet instance = null\n/**\n * Design as a class so that can be inherited to enhance functionality\n */\nexport class InstManager extends EventEmitter {\n  static getInstance () {\n    instance ||= new InstManager()\n    return instance\n  }\n\n  add (player) {\n    if (!player) {\n      return\n    }\n    store[player.playerId] = player\n\n    // By default, the first one is active\n    if (Object.keys(store).length === 1) {\n      this.setActive(player.playerId, true)\n    }\n  }\n\n  remove (player) {\n    if (!player) {\n      return\n    }\n    const isUserActive = player.isUserActive\n\n    delete store[player.playerId]\n\n    if (isUserActive) {\n      // 暂时注释，有需求再打开\n    //   const keys = Object.keys(this.store)\n    //   if (keys.length > 0) {\n    //     this.setActive(keys[keys.length - 1], true)\n    //   }\n    }\n  }\n\n  /**\n   * @private\n   * @param {IterateFunction} fn\n   * @param {?boolean} endEarly\n   */\n  _iterate (fn, endEarly = false) {\n    for (const key in store) {\n      if (Object.prototype.hasOwnProperty.call(store, key)) {\n        const player = store[key]\n\n        if (endEarly) {\n          if (fn(player)) {\n            break\n          }\n        } else {\n          fn(player)\n        }\n      }\n    }\n  }\n\n  /**\n   * @param {IterateFunction} fn\n   */\n  forEach (fn) {\n    this._iterate(fn)\n  }\n\n  /**\n   * Iterates over items of store, returning the first one\n   * @param {IterateFunction} fn\n   * @returns {Player}\n   */\n  find (fn) {\n    let result = null\n\n    this._iterate((player) => {\n      const flag = fn(player)\n      if (flag) {\n        result = player\n      }\n      return flag\n    }, true)\n\n    return result\n  }\n\n  /**\n   * @param {IterateFunction} fn\n   * @returns {Player[]}\n   */\n  findAll (fn) {\n    const results = []\n\n    this._iterate((player) => {\n      if (fn(player)) {\n        results.push(player)\n      }\n    })\n\n    return results\n  }\n\n  /**\n   * 设置实例的用户行为激活状态\n   * @param { number | string } playerId\n   * @param { boolean } isActive\n   * @returns { number | null }\n   */\n  setActive (playerId, isActive = true) {\n    if (!store[playerId]) {\n      return\n    }\n    if (isActive) {\n      this.forEach(inst => {\n        if (playerId === inst.playerId) {\n          inst.isUserActive = true\n          inst.isInstNext = false\n        } else {\n          inst.isUserActive = false\n        }\n      })\n    } else {\n      store[playerId].isUserActive = isActive\n    }\n    return playerId\n  }\n\n  /**\n   * 获取当前处理激活态的实例id\n   * @returns { number | null }\n   */\n  getActiveId () {\n    const keys = Object.keys(store)\n    for (let i = 0; i < keys.length; i++) {\n      const c = store[keys[i]]\n      if (c && c.isUserActive) {\n        return keys[i]\n      }\n    }\n    return null\n  }\n\n  /**\n   * 标记下一个实例\n   * @param { number | string } playerId\n   * @param { boolean } isNext\n   * @returns { number | null }\n   */\n  setNext (playerId, isNext = true) {\n    if (!store[playerId]) {\n      return\n    }\n    if (isNext) {\n      this.forEach(inst => {\n        if (playerId === inst.playerId) {\n          inst.isUserActive = false\n          inst.isInstNext = true\n        } else {\n          inst.isInstNext = false\n        }\n      })\n    } else {\n      store[playerId].isInstNext = isNext\n    }\n\n    return playerId\n  }\n}\n\n/**\n* Check whether there is a player instance in the current dom\n* @param {Element} root\n*/\nexport function checkPlayerRoot (root) {\n  const keys = Object.keys(store)\n  for (let i = 0; i < keys.length; i++) {\n    const p = store[keys[i]]\n    if (p.root === root) {\n      return p\n    }\n  }\n  return null\n}\n","export default {\n  LANG: 'en',\n  TEXT: {\n    ERROR_TYPES: {\n      network: {\n        code: 1,\n        msg: 'video download error'\n      },\n      mse: {\n        code: 2,\n        msg: 'stream append error'\n      },\n      parse: {\n        code: 3,\n        msg: 'parsing error'\n      },\n      format: {\n        code: 4,\n        msg: 'wrong format'\n      },\n      decoder: {\n        code: 5,\n        msg: 'decoding error'\n      },\n      runtime: {\n        code: 6,\n        msg: 'grammatical errors'\n      },\n      timeout: {\n        code: 7,\n        msg: 'play timeout'\n      },\n      other: {\n        code: 8,\n        msg: 'other errors'\n      }\n    },\n    HAVE_NOTHING: 'There is no information on whether audio/video is ready',\n    HAVE_METADATA: 'Audio/video metadata is ready ',\n    HAVE_CURRENT_DATA: 'Data about the current play location is available, but there is not enough data to play the next frame/millisecond',\n    HAVE_FUTURE_DATA: 'Current and at least one frame of data is available',\n    HAVE_ENOUGH_DATA: 'The available data is sufficient to start playing',\n    NETWORK_EMPTY: 'Audio/video has not been initialized',\n    NETWORK_IDLE: 'Audio/video is active and has been selected for resources, but no network is used',\n    NETWORK_LOADING: 'The browser is downloading the data',\n    NETWORK_NO_SOURCE: 'No audio/video source was found',\n    MEDIA_ERR_ABORTED: 'The fetch process is aborted by the user',\n    MEDIA_ERR_NETWORK: 'An error occurred while downloading',\n    MEDIA_ERR_DECODE: 'An error occurred while decoding',\n    MEDIA_ERR_SRC_NOT_SUPPORTED: 'Audio/video is not supported',\n    REPLAY: 'Replay',\n    ERROR: 'Network is offline',\n    PLAY_TIPS: 'Play',\n    PAUSE_TIPS: 'Pause',\n    PLAYNEXT_TIPS: 'Play next',\n    DOWNLOAD_TIPS: 'Download',\n    ROTATE_TIPS: 'Rotate',\n    RELOAD_TIPS: 'Reload',\n    FULLSCREEN_TIPS: 'Fullscreen',\n    EXITFULLSCREEN_TIPS: 'Exit fullscreen',\n    CSSFULLSCREEN_TIPS: 'Cssfullscreen',\n    EXITCSSFULLSCREEN_TIPS: 'Exit cssfullscreen',\n    TEXTTRACK: 'Caption',\n    PIP: 'PIP',\n    SCREENSHOT: 'Screenshot',\n    LIVE: 'LIVE',\n    OFF: 'Off',\n    OPEN: 'Open',\n    MINI_DRAG: 'Click and hold to drag',\n    MINISCREEN: 'Miniscreen',\n    REFRESH_TIPS: 'Please Try',\n    REFRESH: 'Refresh',\n    FORWARD: 'forward',\n    LIVE_TIP: 'Live'\n  }\n}\n","import Util from '../utils/util'\nimport EN from './en'\n/**\n * @typedef { {\n *   LANG: string,\n *   TEXT: {\n *    [propName: string]: any\n *   }\n * } } IXGI18nText\n */\n\n/**\n * @typedef { {\n *  lang: { [propName: string]: IXGI18nText },\n *  langKeys: Array<string>, // list of all currently supported languages\n *  textKeys: { [propName: string]: string } // list of all currently supported texts\n * } } IXGI18n\n */\n\nconst XGI18nLang = {\n  lang: {},\n  langKeys: [],\n  textKeys: []\n}\n\nfunction deepMerge (dst, src) {\n  Object.keys(src).forEach(key => {\n    const _s = Util.typeOf(src[key])\n    const _t = Util.typeOf(dst[key])\n    if (_s === 'Array') {\n      if (_t !== 'Array') {\n        dst[key] = []\n      }\n      dst[key].push(...src[key])\n    } else if (_s === 'Object') {\n      if (_t !== 'Object') {\n        dst[key] = {}\n      }\n      deepMerge(dst[key], src[key])\n    } else {\n      dst[key] = src[key]\n    }\n  })\n  return dst\n}\n\nfunction updateKeys () {\n  Object.keys(XGI18nLang.lang.en).map(key => {\n    XGI18nLang.textKeys[key] = key // key.toLowerCase()\n  })\n}\n\n/**\n * @param { Array<IXGI18nText> } i18nTextList\n * @param { IXGI18n } [i18nLangs]\n */\nfunction extend (i18nTextList, i18nLangs) {\n  let ext = []\n  if (!i18nLangs) {\n    i18nLangs = XGI18nLang\n  }\n  if (!i18nLangs.lang) {\n    return\n  }\n  if (Util.typeOf(i18nTextList) !== 'Array') {\n    ext = Object.keys(i18nTextList).map(lang => {\n      const keyLang = lang === 'zh' ? 'zh-cn' : lang\n      return {\n        LANG: keyLang,\n        TEXT: i18nTextList[lang]\n      }\n    })\n  } else {\n    ext = i18nTextList\n  }\n  const { lang } = i18nLangs\n  ext.map(item => {\n    if (item.LANG === 'zh') {\n      item.LANG = 'zh-cn'\n    }\n    if (!lang[item.LANG]) {\n      use(item, i18nLangs)\n    } else {\n      deepMerge(lang[item.LANG] || {}, item.TEXT || {})\n    }\n  })\n  updateKeys()\n}\n\n/**\n * @param { IXGI18nText } langData\n * @param { IXGI18n } [i18nLangs]\n */\nfunction use (langData, i18nLangs) {\n  let _clang = langData.LANG\n  if (!i18nLangs) {\n    i18nLangs = XGI18nLang\n  }\n  if (!i18nLangs.lang) {\n    return\n  }\n  const texts = langData.TEXT || {}\n  if (_clang === 'zh') {\n    _clang = 'zh-cn'\n  }\n  if (!i18nLangs.lang[_clang]) {\n    i18nLangs.langKeys.push(_clang)\n    i18nLangs.lang[_clang] = texts\n  } else {\n    deepMerge(i18nLangs.lang[_clang], texts)\n  }\n  updateKeys()\n}\n\n/**\n *\n * @returns { IXGI18n }\n */\nfunction init (id) {\n  const ret = {\n    lang: {},\n    langKeys: [],\n    textKeys: {},\n    pId: id\n  }\n  deepMerge(ret.lang, XGI18nLang.lang)\n  ret.langKeys.push(...XGI18nLang.langKeys)\n  deepMerge(ret.textKeys, XGI18nLang.textKeys)\n  return ret\n}\n\nuse(EN)\n\nconst I18N = {\n  get textKeys () {\n    return XGI18nLang.textKeys\n  },\n  /**\n   * @description List of languages currently supported\n   * @type { Array<string> }\n   */\n  get langKeys () {\n    return XGI18nLang.langKeys\n  },\n  /**\n   * @type {{\n   *   [propName: string]: {\n   *     [propName: string]: string\n   *   }\n   * }}\n   */\n  get lang () {\n    const ret = {}\n    XGI18nLang.langKeys.map(key => {\n      ret[key] = XGI18nLang.lang[key]\n    })\n    if (XGI18nLang.lang['zh-cn']) {\n      ret.zh = XGI18nLang.lang['zh-cn'] || {}\n    }\n    return ret\n  },\n\n  /**\n   * @desc Extend existing languages text\n   * @type {(I18nText: IXGI18nText) => {}}\n   */\n  extend: extend,\n\n  /**\n   * Add new language text\n   * @type {(lang: IXGI18nText) => {}}\n   */\n  use: use,\n\n  /**\n   * Initialize a language text\n   * @return { IXGI18n }\n   */\n  init: init\n}\n\nexport default I18N\n","/**\n *  @typedef {{\n *    isSupport: boolean,\n *    mime: string\n * }} ICheckResult\n */\n\n/**\n * @typedef {{\n *  device: 'pc' | 'mobile',\n *  browser: 'ie' | 'firefox' | 'chrome' | 'opera' | 'safari',\n *  os: {\n *   isTablet: boolean,\n *   isPhone: boolean,\n *   isIpad: boolean,\n *   isIos: boolean,\n *   isAndroid: boolean,\n *   isPc: boolean,\n *   isSymbian: boolean,\n *   isWindowsPhone: boolean,\n *   isFireFox: boolean\n *  },\n *  isWeixin: boolean,\n *  isSupportMP4(): ICheckResult,\n *  isHevcSupported(): boolean,\n *  probeConfigSupported(info: MediaDecodingConfiguration): Promise<MediaCapabilitiesDecodingInfo>\n * }} ISniffer\n */\n\nconst VERSION_REG = {\n  android: /(Android)\\s([\\d.]+)/,\n  ios: /(Version)\\/([\\d.]+)/\n}\n\nconst H264_MIMETYPES = [\n  'avc1.42E01E, mp4a.40.2',\n  'avc1.58A01E, mp4a.40.2',\n  'avc1.4D401E, mp4a.40.2',\n  'avc1.64001E, mp4a.40.2',\n  'avc1.42E01E',\n  'mp4v.20.8',\n  'mp4v.20.8, mp4a.40.2',\n  'mp4v.20.240, mp4a.40.2'\n]\n\n/**\n * @type ISniffer\n */\nconst sniffer = {\n  get device () {\n    const r = sniffer.os\n    return r.isPc ? 'pc' : 'mobile'\n    // return r.isPc ? 'pc' : r.isTablet ? 'tablet' : 'mobile'\n  },\n  get browser () {\n    if (typeof navigator === 'undefined') {\n      return ''\n    }\n    const ua = navigator.userAgent.toLowerCase()\n    const reg = {\n      ie: /rv:([\\d.]+)\\) like gecko/,\n      firefox: /firefox\\/([\\d.]+)/,\n      chrome: /chrome\\/([\\d.]+)/,\n      opera: /opera.([\\d.]+)/,\n      safari: /version\\/([\\d.]+).*safari/\n    }\n    return [].concat(Object.keys(reg).filter(key => reg[key].test(ua)))[0]\n  },\n  get os () {\n    if (typeof navigator === 'undefined') {\n      return {}\n    }\n    const ua = navigator.userAgent\n    const isWindowsPhone = /(?:Windows Phone)/.test(ua)\n    const isSymbian = /(?:SymbianOS)/.test(ua) || isWindowsPhone\n    const isTizen = /(?:Tizen)/ig.test(ua) // Samsung Tizen TV\n    const isWebOS = /(?:Web0S)/ig.test(ua) // LG TV\n    const isAndroid = /(?:Android)/.test(ua)\n    const isFireFox = /(?:Firefox)/.test(ua)\n    const isIpad = /(?:iPad|PlayBook)/.test(ua) || (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1)\n    const isTablet =\n      isIpad ||\n      (isAndroid && !/(?:Mobile)/.test(ua)) ||\n      (isFireFox && /(?:Tablet)/.test(ua))\n    const isPhone = /(?:iPhone)/.test(ua) && !isTablet\n    const isPc = !isPhone && !isAndroid && !isSymbian && !isTablet\n    return {\n      isTablet,\n      isPhone,\n      isIpad,\n      isIos: isPhone || isIpad,\n      isAndroid,\n      isPc,\n      isSymbian,\n      isWindowsPhone,\n      isFireFox,\n      isTizen,\n      isWebOS\n    }\n  },\n\n  get osVersion () {\n    if (typeof navigator === 'undefined') {\n      return 0\n    }\n    const ua = navigator.userAgent\n    let reg = ''\n    // ios\n    if (/(?:iPhone)|(?:iPad|PlayBook)/.test(ua)) {\n      reg = VERSION_REG.ios\n      // android\n    } else {\n      reg = VERSION_REG.android\n    }\n    const _match = reg ? reg.exec(ua) : []\n    if (_match && _match.length >= 3) {\n      const version = _match[2].split('.')\n      return version.length > 0 ? parseInt(version[0]) : 0\n    }\n    return 0\n  },\n\n  get isWeixin () {\n    if (typeof navigator === 'undefined') {\n      return false\n    }\n    const reg = /(micromessenger)\\/([\\d.]+)/\n    const match = reg.exec(navigator.userAgent.toLocaleLowerCase())\n    if (match) {\n      return true\n    }\n    return false\n  },\n\n  /**\n   *\n   * @returns {{\n   *   isSupport: boolean,\n   *   mime: string\n   * }}\n   */\n  isSupportMP4 () {\n    const result = {\n      isSupport: false,\n      mime: ''\n    }\n    if (typeof document === 'undefined') {\n      return result\n    }\n    if (this.supportResult) {\n      return this.supportResult\n    }\n    let a = document.createElement('video')\n    if (typeof a.canPlayType === 'function') {\n      H264_MIMETYPES.map((key) => {\n        if (a.canPlayType(`video/mp4; codecs=\"${key}\"`) === 'probably') {\n          result.isSupport = true\n          result.mime += `||${key}`\n        }\n      })\n    }\n    this.supportResult = result\n    a = null\n    return result\n  },\n\n  /**\n   * @description check is support MediaSource Extends\n   * @param {string} [mime]\n   * @returns { boolean }\n   */\n  isMSESupport (mime = 'video/mp4; codecs=\"avc1.42E01E,mp4a.40.2\"') {\n    if (typeof MediaSource === 'undefined' || !MediaSource) return false\n    try {\n      return MediaSource.isTypeSupported(mime)\n    } catch (error) {\n      this._logger.error(mime, error)\n      return false\n    }\n  },\n\n  /**\n   * Is HEVC Hardware decoding supported by current browser\n   * @returns {boolean}\n   */\n  isHevcSupported () {\n    if (typeof MediaSource === 'undefined' || !MediaSource.isTypeSupported) {\n      return false\n    }\n    return (\n      MediaSource.isTypeSupported('video/mp4;codecs=\"hev1.1.6.L120.90\"') ||\n      MediaSource.isTypeSupported('video/mp4;codecs=\"hev1.2.4.L120.90\"') ||\n      MediaSource.isTypeSupported('video/mp4;codecs=\"hev1.3.E.L120.90\"') ||\n      MediaSource.isTypeSupported('video/mp4;codecs=\"hev1.4.10.L120.90\"')\n    )\n  },\n\n  /**\n   * @param { MediaDecodingConfiguration } info\n   * @returns { Promise<MediaCapabilitiesDecodingInfo> }\n   */\n  probeConfigSupported (info) {\n    const defaults = {\n      supported: false,\n      smooth: false,\n      powerEfficient: false\n    }\n    if (!info || typeof navigator === 'undefined') {\n      return Promise.resolve(defaults)\n    }\n    if (\n      navigator.mediaCapabilities &&\n      navigator.mediaCapabilities.decodingInfo\n    ) {\n      return navigator.mediaCapabilities.decodingInfo(info)\n    } else {\n      const videoConfig = info.video || {}\n      const audioConfig = info.audio || {}\n      try {\n        const videoSupported = MediaSource.isTypeSupported(\n          videoConfig.contentType\n        )\n        const audioSupported = MediaSource.isTypeSupported(\n          audioConfig.contentType\n        )\n\n        return Promise.resolve({\n          supported: videoSupported && audioSupported,\n          smooth: false,\n          powerEfficient: false\n        })\n      } catch (e) {\n        return Promise.resolve(defaults)\n      }\n    }\n  }\n}\n\nexport default sniffer\n","import EventEmitter from 'eventemitter3'\nimport Util from './utils/util'\nimport Sniffer from './utils/sniffer'\nimport Errors, { ERROR_TYPE_MAP } from './error'\nimport { URL_CHANGE, WAITING, VIDEO_EVENTS, SOURCE_ERROR, SOURCE_SUCCESS } from './events'\n/**\n * @typedef { import ('eventemitter3') } EventEmitter\n */\n/**\n * @typedef { {\n *   duration: number,\n *   currentTime: number,\n *   muted: boolean,\n *   defaultMuted: boolean,\n *   volume: number,\n *   playbackRate: number,\n *   defaultPlaybackRate: number,\n *   autoplay: boolean,\n *   readonly paused: boolean,\n *   readonly ended: boolean,\n *   readonly networkState: number,\n *   readonly readyState: number,\n *   readonly seeking: boolean,\n *   src: any,\n *   play: Function,\n *   pause: Function,\n * } } IMediaProxy\n */\n/**\n * @typedef { import ('./defaultConfig').IPlayerOptions } IPlayerOptions\n */\n\nfunction emitVideoEvent (eventKey, e) {\n  if (!this || !this.emit) {\n    return\n  }\n  if (eventKey === 'error') {\n    this.errorHandler(eventKey, e.error)\n  } else {\n    this.emit(eventKey, e)\n  }\n}\n\n// 获取包装EventsMiddleware后的VIDEO_EVENT\nfunction getVideoEventHandler (eventKey, player) {\n  return (e, _err) => {\n    const eData = {\n      player,\n      eventName: eventKey,\n      originalEvent: e,\n      detail: e.detail || {},\n      timeStamp: e.timeStamp,\n      currentTime: player.currentTime,\n      duration: player.duration,\n      paused: player.paused,\n      ended: player.ended,\n      isInternalOp: !!player._internalOp[e.type], // 是否是内部操作，不反应到UI上\n      muted: player.muted,\n      volume: player.volume,\n      host: Util.getHostFromUrl(player.currentSrc),\n      vtype: player.vtype\n    }\n    player.removeInnerOP(e.type)\n    if (eventKey === 'timeupdate') {\n      player._currentTime = player.media && player.media.currentTime\n    }\n\n    // 避免playbackRate和defaultPlaybackRate同时设置导致多次触发事件\n    if (eventKey === 'ratechange') {\n      const _rate = player.media ? player.media.playbackRate : 0\n      if (_rate && player._rate === _rate) {\n        return\n      }\n      player._rate = player.media && player.media.playbackRate\n    }\n\n    if (eventKey === 'durationchange') {\n      player._duration = player.media.duration\n    }\n\n    if (eventKey === 'volumechange') {\n      eData.isMutedChange = player._lastMuted !== player.muted\n      player._lastMuted = player.muted\n    }\n\n    if (eventKey === 'error') {\n      eData.error = _err || player.video.error\n    }\n\n    // 执行video相关事件中间件能力\n    if (player.mediaEventMiddleware[eventKey]) {\n      const callback = emitVideoEvent.bind(player, eventKey, eData)\n      try {\n        player.mediaEventMiddleware[eventKey].call(player, eData, callback)\n      } catch (err) {\n        emitVideoEvent.call(player, eventKey, eData)\n        throw err\n      }\n    } else {\n      emitVideoEvent.call(player, eventKey, eData)\n    }\n  }\n}\n\n/**\n * @extends { EventEmitter }\n */\nclass MediaProxy extends EventEmitter {\n  /**\n   * @param { IPlayerOptions } options\n   */\n  constructor (options) {\n    super(options)\n    /**\n     * @type { boolean }\n     * @private\n     */\n    this._hasStart = false\n    /**\n     * @type { number }\n     * @private\n     */\n    this._currentTime = 0\n    /**\n     * @type { number }\n     * @private\n     */\n    this._duration = 0\n    /**\n     * @type {{[propName: string]: any}}\n     * @private\n     */\n    this._internalOp = {}\n    /**\n     * @type { boolean }\n     * @private\n     */\n    this._lastMuted = false\n\n    /**\n     * @type {string}\n     * 当前播放类型\n     */\n    this.vtype = 'MP4'\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this._rate = -1\n    /**\n     * @description 初始化时添加在video上的属性集合\n     * @type { {[propName: string]: any } }\n     */\n    this.mediaConfig = Object.assign({}, {\n      controls: false,\n      autoplay: options.autoplay,\n      playsinline: options.playsinline,\n      'x5-playsinline': options.playsinline,\n      'webkit-playsinline': options.playsinline,\n      'x5-video-player-fullscreen': options['x5-video-player-fullscreen'] || options.x5VideoPlayerFullscreen,\n      'x5-video-orientation': options['x5-video-orientation'] || options.x5VideoOrientation,\n      airplay: options.airplay,\n      'webkit-airplay': options.airplay,\n      tabindex: options.tabindex | 0,\n      mediaType: options.mediaType || 'video',\n      'data-index': -1\n    }, options.videoConfig, options.videoAttributes)\n    /**\n     * @description Compatible with WeChat webview\n     * \"x5-playsinline' and 'x5-video-player-type' only one needs to exist\n     * @doc https://x5.tencent.com/docs/video.html\n     */\n    const playerType = options['x5-video-player-type'] || options.x5VideoPlayerType\n    if (Sniffer.isWeixin && Sniffer.os.isAndroid && playerType) {\n      this.mediaConfig['x5-video-player-type'] = playerType\n      delete this.mediaConfig.playsinline\n      delete this.mediaConfig['webkit-playsinline']\n      delete this.mediaConfig['x5-playsinline']\n    }\n\n    if (options.loop) {\n      this.mediaConfig.loop = 'loop'\n    }\n\n    // Warning：一些移动端浏览器需要设置DOM属性，否则会导致非静音切换频地址后开播失败\n    if (options.autoplayMuted && !Object.prototype.hasOwnProperty.call(this.mediaConfig, 'muted')) {\n      this.mediaConfig.muted = true\n    }\n\n    /**\n     * @type { HTMLVideoElement | HTMLAudioElement | HTMLElement | IMediaProxy | null }\n     */\n    this.media =\n      options.mediaEl instanceof HTMLMediaElement\n        ? options.mediaEl\n        : typeof options.mediaEl === 'function'\n          ? options.mediaEl(this.mediaConfig)\n          : Util.createDom(this.mediaConfig.mediaType, '', this.mediaConfig, '')\n\n    if (options.defaultPlaybackRate) {\n      this.media.defaultPlaybackRate = this.media.playbackRate = options.defaultPlaybackRate\n    }\n\n    if (Util.typeOf(options.volume) === 'Number') {\n      this.volume = options.volume\n    }\n\n    if (options.autoplayMuted) {\n      this.media.muted = true\n      this._lastMuted = true\n    }\n    if (options.autoplay) {\n      this.media.autoplay = true\n    }\n\n    // Warning：一些移动端浏览器（Like Vivo）需要直接设置JS属性，否则会导致失效\n    if (options.playsinline) {\n      this.media.playsinline = true\n    }\n\n    /**\n     * @private\n     */\n    this._interval = {}\n    /**\n     * @readonly\n     */\n    this.mediaEventMiddleware = {}\n    this.attachVideoEvents()\n  }\n\n  /**\n   * @description set middleware\n   * @param { {[propName: string]: (e: {player: any, eventName: string}, callback: () => void) => any} } middlewares\n   */\n  setEventsMiddleware (middlewares) {\n    Object.keys(middlewares).map(key => {\n      this.mediaEventMiddleware[key] = middlewares[key]\n    })\n  }\n\n  /**\n   * @description remove middleware\n   * @param { { [propName: string]: (e: {player: any, eventName: string}, callback: () => void) => any} } middlewares\n   */\n  removeEventsMiddleware (middlewares) {\n    Object.keys(middlewares).map(key => {\n      delete this.mediaEventMiddleware[key]\n    })\n  }\n\n  /**\n   * Add media eventListener to the video object\n   * @param { any } [media]\n   */\n  attachVideoEvents (media = this.media) {\n    if (!this._evHandlers) {\n      /**\n       * @private\n       */\n      this._evHandlers = VIDEO_EVENTS.map(eventKey => {\n        const funName = `on${eventKey.charAt(0).toUpperCase()}${eventKey.slice(1)}`\n        if (typeof this[funName] === 'function') {\n          this.on(eventKey, this[funName])\n        }\n\n        return {\n          [eventKey]: getVideoEventHandler(eventKey, this)\n        }\n      })\n    }\n\n    this._evHandlers.forEach(item => {\n      const eventKey = Object.keys(item)[0]\n      media.addEventListener(eventKey, item[eventKey], false)\n    })\n  }\n\n  /**\n   * @description remove media eventListener from the video object\n   * @param { any } [media]\n   */\n  detachVideoEvents (media = this.media) {\n    this._evHandlers.forEach(item => {\n      const eventKey = Object.keys(item)[0]\n      media.removeEventListener(eventKey, item[eventKey], false)\n    })\n\n    this._evHandlers.forEach(item => {\n      const eventKey = Object.keys(item)[0]\n      const funName = `on${eventKey.charAt(0).toUpperCase()}${eventKey.slice(1)}`\n      if (typeof this[funName] === 'function') {\n        this.off(eventKey, this[funName])\n      }\n    })\n\n    this._evHandlers = null\n  }\n\n  /**\n   * 针对source列表播放方式添加错误监听\n   * @doc https://stackoverflow.com/questions/47557135/html5-detect-the-type-of-error-when-trying-to-load-a-video-using-a-source-elem\n   * @protected\n   * @param { HTMLVideoElement | HTMLAudioElement } video\n   * @param { Array<{src: string, type: string }>} urls\n   */\n  _attachSourceEvents (video, urls) {\n    video.removeAttribute('src')\n    video.load()\n    urls.forEach((item, index) => {\n      this.media.appendChild(Util.createDom('source', '', {\n        src: `${item.src}`,\n        type: `${item.type || ''}`,\n        'data-index': index + 1\n      }))\n    })\n    const _c = video.children\n    if (!_c) {\n      return\n    }\n    /**\n     * @private\n     */\n    this._videoSourceCount = _c.length\n\n    this._videoSourceIndex = _c.length\n\n    this._vLoadeddata = (e) => {\n      this.emit(SOURCE_SUCCESS, { src: e.target.currentSrc, host: Util.getHostFromUrl(e.target.currentSrc) })\n    }\n\n    /**\n     * @private\n     */\n    let _eHandler = null\n\n    for (let i = 0; i < this._evHandlers.length; i++) {\n      if (Object.keys(this._evHandlers[i])[0] === 'error') {\n        _eHandler = this._evHandlers[i]\n        break\n      }\n    }\n    // safari有些版本不是所有source都请求，导致单独使用_videoSourceIndex计算会报错\n    !this._sourceError && (this._sourceError = (e) => {\n      const _dIndex = parseInt(e.target.getAttribute('data-index'), 10)\n      this._videoSourceIndex--\n      if (this._videoSourceIndex === 0 || _dIndex >= this._videoSourceCount) {\n        const _err = { code: 4, message: 'sources_load_error' }\n        _eHandler ? _eHandler.error(e, _err) : this.errorHandler('error', _err)\n      }\n      const type = ERROR_TYPE_MAP[4]\n      this.emit(SOURCE_ERROR, new Errors(this, {\n        errorType: type,\n        errorCode: 4,\n        errorMessage: 'sources_load_error',\n        mediaError: { code: 4, message: 'sources_load_error' },\n        src: e.target.src\n      }))\n    })\n    for (let i = 0; i < _c.length; i++) {\n      _c[i].addEventListener('error', this._sourceError)\n    }\n    video.addEventListener('loadeddata', this._vLoadeddata)\n  }\n\n  /**\n   * 移除source列表错误事件监听\n   * @protected\n   * @param { HTMLVideoElement | HTMLAudioElement } video\n   */\n  _detachSourceEvents (video) {\n    const _c = video.children\n    if (!_c || _c.length === 0 || !this._sourceError) {\n      return\n    }\n    for (let i = 0; i < _c.length; i++) {\n      _c[i].removeEventListener('error', this._sourceError)\n    }\n    while (_c.length > 0) {\n      video.removeChild(_c[0])\n    }\n    this._vLoadeddata && video.removeEventListener('loadeddata', this._vLoadeddata)\n  }\n\n  /**\n   * @description Media Error handler\n   * @param { string } eventName\n   */\n  errorHandler (name, error = null) {\n    if (this.media && (this.media.error || error)) {\n      let _e = this.media.error || error\n      const type = _e.code ? ERROR_TYPE_MAP[_e.code] : 'other'\n      let message = _e.message\n      if (!(this.media.currentSrc || this.media.srcObject)) {\n        message = 'empty_src'\n        _e = {\n          code: 6,\n          message\n        }\n      }\n      this.emit(name, new Errors(this, {\n        errorType: type,\n        errorCode: _e.code,\n        errorMessage: _e.message || '',\n        mediaError: _e\n      }))\n    }\n  }\n\n  destroy () {\n    if (this.media) {\n      if (this.media.pause) {\n        this.media.pause()\n        this.media.muted = true\n      }\n      this.media.removeAttribute('src') // empty source\n      this.media.load()\n    }\n    this._currentTime = 0\n    this._duration = 0\n    this.mediaConfig = null\n    for (const k in this._interval) {\n      if (Object.prototype.hasOwnProperty.call(this._interval, k)) {\n        clearInterval(this._interval[k])\n        this._interval[k] = null\n      }\n    }\n    this.detachVideoEvents()\n    this.media = null\n    this.mediaEventMiddleware = {}\n    this.removeAllListeners()\n  }\n\n  /**\n   * @type { HTMLVideoElement | HTMLAudioElement | HTMLElement | IMediaProxy | null }\n   * @deprecated Property [video] is renamed to [media],you can access using player.media\n   */\n  get video () {\n    return this.media\n  }\n\n  /**\n   * @type { HTMLVideoElement | HTMLAudioElement | HTMLElement | IMediaProxy | null }\n   * @deprecated Property [video] is renamed to [media],you can access using player.media= xx\n   */\n  set video (media) {\n    this.media = media\n  }\n\n  /**\n   *\n   * @returns {  Promise<void> | null }\n   */\n  play () {\n    const ret = this.media ? this.media.play() : null\n    return ret\n  }\n\n  pause () {\n    this.media && this.media.pause()\n  }\n\n  load () {\n    this.media && this.media.load()\n  }\n\n  /**\n   *\n   * @param { string } type\n   * @returns { boolean }\n   */\n  canPlayType (type) {\n    return this.media ? this.media.canPlayType(type) : false\n  }\n\n  /**\n   *\n   * @param { any } [buffered]\n   * @returns { Array<number> }\n   */\n  getBufferedRange (buffered) {\n    const range = [0, 0]\n    if (!this.media) {\n      return range\n    }\n    if (!buffered) {\n      buffered = this.media.buffered\n    }\n    const currentTime = this.media.currentTime\n    if (buffered) {\n      for (let i = 0, len = buffered.length; i < len; i++) {\n        range[0] = buffered.start(i)\n        range[1] = buffered.end(i)\n        if (range[0] <= currentTime && currentTime <= range[1]) {\n          break\n        }\n      }\n    }\n    if (range[0] - currentTime <= 0 && currentTime - range[1] <= 0) {\n      return range\n    } else {\n      return [0, 0]\n    }\n  }\n\n  /**\n   * @type { boolean }\n   * @description 设置/返回 自动播放属性\n   */\n  set autoplay (isTrue) {\n    this.media && (this.media.autoplay = isTrue)\n  }\n\n  get autoplay () {\n    return this.media ? this.media.autoplay : false\n  }\n\n  /**\n   * @type { TimeRanges | null }\n   * @description  返回当前缓冲的TimeRange对象集合\n   */\n  get buffered () {\n    return this.media ? this.media.buffered : null\n  }\n\n  /**\n   * @type { Array<{start: number, end: number}> | null}\n   * @description  返回当前自定义的缓存列表\n   */\n  get buffered2 () {\n    return this.media && this.media.buffered ? Util.getBuffered2(this.media.buffered) : null\n  }\n\n  /**\n   * @type { {start: number, end: number} }\n   */\n  get bufferedPoint () {\n    const ret = {\n      start: 0,\n      end: 0\n    }\n    if (!this.media) {\n      return ret\n    }\n    const _buffered = this.media.buffered\n    if (!_buffered || _buffered.length === 0) {\n      return ret\n    }\n    for (let i = 0; i < _buffered.length; i++) {\n      if ((_buffered.start(i) <= this.currentTime || _buffered.start(i) < 0.1) && _buffered.end(i) >= this.currentTime) {\n        return {\n          start: _buffered.start(i),\n          end: _buffered.end(i)\n        }\n      }\n    }\n    return ret\n  }\n\n  /**\n   * @type { string}\n   * @description 设置/返回是否跨域\n   * */\n  get crossOrigin () {\n    return this.media ? this.media.crossOrigin : ''\n  }\n\n  set crossOrigin (isTrue) {\n    this.media && (this.media.crossOrigin = isTrue)\n  }\n\n  /**\n   * @type { string }\n   * @description 设置/返回视频播放地址\n   * */\n  get currentSrc () {\n    return this.media ? this.media.currentSrc : ''\n  }\n\n  set currentSrc (src) {\n    this.media && (this.media.currentSrc = src)\n  }\n\n  /**\n   * @type { number }\n   * @description 设置/返回视频当前播放时间\n   * */\n  get currentTime () {\n    if (!this.media) {\n      return 0\n    }\n    return this.media.currentTime !== undefined ? this.media.currentTime : this._currentTime\n  }\n\n  set currentTime (time) {\n    this.media && (this.media.currentTime = time)\n  }\n\n  /**\n   * @type { boolean }\n   * 设置/返回视频默认静音\n   * */\n  get defaultMuted () {\n    return this.media ? this.media.defaultMuted : false\n  }\n\n  set defaultMuted (isTrue) {\n    this.media && (this.media.defaultMuted = isTrue)\n  }\n\n  /**\n   * @type { number }\n   * @description 返回视频时长，单位：s\n   * */\n  get duration () {\n    return this._duration\n  }\n\n  /**\n   * @type { boolean }\n   * @description  回视频是否播放结束\n   * */\n  get ended () {\n    return this.media ? this.media.ended : false\n  }\n\n  /**\n   * @type { MediaError }\n   * @description the player current error\n   */\n  get error () {\n    return this.media.error\n  }\n\n  /**\n   * @type { string }\n   * @description return error description text\n   */\n  get errorNote () {\n    const err = this.media.error\n    if (!err) {\n      return ''\n    }\n    const status = [\n      'MEDIA_ERR_ABORTED',\n      'MEDIA_ERR_NETWORK',\n      'MEDIA_ERR_DECODE',\n      'MEDIA_ERR_SRC_NOT_SUPPORTED'\n    ]\n    return status[this.media.error.code - 1]\n  }\n\n  /**\n   * @type { boolean }\n   * @description 否开启了循环播放\n   */\n  get loop () {\n    return this.media ? this.media.loop : false\n  }\n\n  set loop (isTrue) {\n    this.media && (this.media.loop = isTrue)\n  }\n\n  /**\n   * @type { boolean }\n   * @description 静音\n   */\n  get muted () {\n    return this.media ? this.media.muted : false\n  }\n\n  set muted (isTrue) {\n    if (!this.media || this.media.muted === isTrue) {\n      return\n    }\n    this._lastMuted = this.media.muted\n    this.media.muted = isTrue\n  }\n\n  /**\n   * @type { 0 | 1 | 2 | 3 }\n   * @description  返回视频的当前网络状态\n   */\n  get networkState () {\n    return this.media.networkState\n  }\n\n  /**\n   * @type { boolean }\n   * @description  回当前视频是否是暂停状态\n   */\n  get paused () {\n    return this.media ? this.media.paused : true\n  }\n\n  /**\n   * @type { number }\n   * @description 返回/设置倍速\n   */\n  get playbackRate () {\n    return this.media ? this.media.playbackRate : 0\n  }\n\n  set playbackRate (rate) {\n    if (!this.media || rate === Infinity) {\n      return\n    }\n    this.media.defaultPlaybackRate = rate\n    this.media.playbackRate = rate\n  }\n\n  /**\n   * @type { TimeRanges | null}\n   */\n  get played () {\n    return this.media ? this.media.played : null\n  }\n\n  /**\n   * @type { boolean }\n   */\n  get preload () {\n    return this.media ? this.media.preload : false\n  }\n\n  set preload (isTrue) {\n    this.media && (this.media.preload = isTrue)\n  }\n\n  /**\n   * @type { 0 | 1 | 2 | 3 | 4 }\n   * @description 回视频的就绪状态\n   */\n  get readyState () {\n    return this.media.readyState\n  }\n\n  /**\n   * @type { boolean }\n   * @description 当前视频是否可以seek\n   */\n  get seekable () {\n    return this.media ? this.media.seekable : false\n  }\n\n  /**\n   * @type { boolean }\n   * @description 当前视频是否处于seeking状态下\n   */\n  get seeking () {\n    return this.media ? this.media.seeking : false\n  }\n\n  /**\n   * @type { any }\n   * @description 设置/返回当前视频的地址\n   */\n  get src () {\n    return this.media ? this.media.src : ''\n  }\n\n  set src (url) {\n    if (!this.media) {\n      return\n    }\n    this.emit(URL_CHANGE, url)\n    this.emit(WAITING)\n    // this.media.pause()\n    this._currentTime = 0\n    this._duration = 0\n    // Some firefox versions firefox Cannot recognize currentSrc of type Blob\n    if (Util.isMSE(this.media)) {\n      this.onWaiting()\n      return\n    }\n    this._detachSourceEvents(this.media)\n    if (Util.typeOf(url) === 'Array') {\n      this._attachSourceEvents(this.media, url)\n    } else if (url) {\n      this.media.src = url\n    } else {\n      this.media.removeAttribute('src')\n    }\n    this.load()\n  }\n\n  /**\n   * @type { number }\n   * @description 设置/返回视频的音量\n   */\n  get volume () {\n    return this.media ? this.media.volume : 0\n  }\n\n  set volume (vol) {\n    if (vol === Infinity || !this.media) {\n      return\n    }\n    this.media.volume = vol\n  }\n\n  /**\n   * @type { number }\n   * @description 返回视频的纵横比\n   */\n  get aspectRatio () {\n    return this.media ? this.media.videoWidth / this.media.videoHeight : 0\n  }\n\n  addInnerOP (event) {\n    this._internalOp[event] = true\n  }\n\n  removeInnerOP (event) {\n    delete this._internalOp[event]\n  }\n  /** ******************* 以下api只有申明作用,具体实现依赖EventEmitter ******************/\n\n  /**\n   * @param { string } event\n   * @param { any } [data]\n   * @returns\n   */\n  emit (event, data, ...args) {\n    super.emit(event, data, ...args)\n  }\n\n  /**\n   * @param { string } event\n   * @param { (...args: any[]) => any } callback\n   * @returns\n   */\n  on (event, callback, ...args) {\n    super.on(event, callback, ...args)\n  }\n\n  /**\n   * @param { string } event\n   * @param { (...args: any[]) => any } callback\n   * @returns\n   */\n  once (event, callback, ...args) {\n    super.once(event, callback, ...args)\n  }\n\n  /**\n   *\n   * @param { string } event\n   * @param { (...args: any[]) => any } callback\n   * @returns\n   */\n  off (event, callback, ...args) {\n    super.off(event, callback, ...args)\n  }\n\n  offAll () {\n    super.removeAllListeners()\n  }\n}\n\nexport default MediaProxy\n","class INDEXDB {\n  constructor (mydb = { name: 'xgplayer', version: 1, db: null, ojstore: { name: 'xg-m4a', keypath: 'vid' } }) {\n    this.indexedDB = window.indexedDB || window.webkitindexedDB\n    this.IDBKeyRange = window.IDBKeyRange || window.webkitIDBKeyRange // 键范围\n    this.myDB = mydb\n  }\n\n  openDB (callback) {\n    // 建立或打开数据库，建立对象存储空间(ObjectStore)\n    const self = this\n    const version = this.myDB.version || 1\n    const request = self.indexedDB.open(self.myDB.name, version)\n    request.onerror = function (e) {\n      // console.log('e.currentTarget.error.message')\n    }\n    request.onsuccess = e => {\n      this.myDB.db = e.target.result\n      // console.log('成功建立并打开数据库:' + this.myDB.name + ' version' + this.myDB.version)\n      callback.call(self)\n    }\n    request.onupgradeneeded = e => {\n      const db = e.target.result\n      // eslint-disable-next-line no-unused-vars\n      const transaction = e.target.transaction\n      // eslint-disable-next-line no-unused-vars\n      let store\n      if (!db.objectStoreNames.contains(self.myDB.ojstore.name)) {\n        // 没有该对象空间时创建该对象空间\n        // eslint-disable-next-line no-unused-vars\n        store = db.createObjectStore(self.myDB.ojstore.name, { keyPath: self.myDB.ojstore.keypath })\n        // console.log('成功建立对象存储空间：' + this.myDB.ojstore.name)\n      }\n    }\n  }\n\n  deletedb () {\n    // 删除数据库\n    const self = this\n    self.indexedDB.deleteDatabase(this.myDB.name)\n    // console.log(this.myDB.name + '数据库已删除')\n  }\n\n  closeDB () {\n    // 关闭数据库\n    this.myDB.db.close()\n    // console.log('数据库已关闭')\n  }\n\n  addData (storename, data) {\n    // 添加数据，重复添加会报错\n    const store = this.myDB.db.transaction(storename, 'readwrite').objectStore(storename)\n    let request\n    for (let i = 0; i < data.length; i++) {\n      request = store.add(data[i])\n      request.onerror = function () {\n        // console.error('add添加数据库中已有该数据')\n      }\n      request.onsuccess = function () {\n        // console.log('add添加数据已存入数据库')\n      }\n    }\n  }\n\n  putData (storename, data) {\n    // 添加数据，重复添加会更新原有数据\n    const store = this.myDB.db.transaction(storename, 'readwrite').objectStore(storename)\n    let request\n    for (let i = 0; i < data.length; i++) {\n      request = store.put(data[i])\n      request.onerror = function () {\n        // console.error('put添加数据库中已有该数据')\n      }\n      request.onsuccess = function () {\n        // console.log('put添加数据已存入数据库')\n      }\n    }\n  }\n\n  getDataByKey (storename, key, callback) {\n    const self = this\n    // 根据存储空间的键找到对应数据\n    const store = this.myDB.db.transaction(storename, 'readwrite').objectStore(storename)\n    const request = store.get(key)\n    request.onerror = function () {\n      // console.error('getDataByKey error')\n      callback.call(self, null)\n    }\n    request.onsuccess = function (e) {\n      const result = e.target.result\n      // console.log('查找数据成功')\n      callback.call(self, result)\n    }\n  }\n\n  deleteData (storename, key) {\n    // 删除某一条记录\n    const store = this.myDB.db.transaction(storename, 'readwrite').objectStore(storename)\n    store.delete(key)\n    // console.log('已删除存储空间' + storename + '中' + key + '记录')\n  }\n\n  clearData (storename) {\n    // 删除存储空间全部记录\n    const store = this.myDB.db.transaction(storename, 'readwrite').objectStore(storename)\n    store.clear()\n    // console.log('已删除存储空间' + storename + '全部记录')\n  }\n}\n\nexport default INDEXDB\n","export const FULLSCREEN_EVENTS = ['fullscreenchange', 'webkitfullscreenchange', 'mozfullscreenchange', 'MSFullscreenChange']\n\nexport const GET_FULLSCREEN_API = ['requestFullscreen', 'webkitRequestFullscreen', 'mozRequestFullScreen', 'msRequestFullscreen']\n\nexport const EXIT_FULLSCREEN_API = ['exitFullscreen', 'webkitExitFullscreen', 'mozCancelFullScreen', 'msExitFullscreen']\n\nexport const PLATER_ID = 'data-xgplayerid'","function callHandler (obj, handler, next, ...args) {\n  const ret = handler.call(obj, ...args)\n  if (!next || typeof next !== 'function') {\n    return\n  }\n  if (ret && ret.then) {\n    ret.then((...args) => {\n      next.call(obj, ...args)\n    })\n  } else {\n    next.call(obj, ...args)\n  }\n}\n\n/**\n * 给某个处理函数添加hook能力\n * @param { string } hookName\n * @param { Function } handler\n * @param { { pre?: any, next?:any } } preset\n * {\n *   pre: () => { // run beafore hook},\n *   next: () => { // run after hook return}\n * }\n */\nfunction hook (hookName, handler, preset = { pre: null, next: null }) {\n  if (!this.__hooks) {\n    this.__hooks = {}\n  }\n  !this.__hooks[hookName] && (this.__hooks[hookName] = null)\n  return function () {\n    if (preset.pre) {\n      try {\n        preset.pre.call(this, ...arguments)\n      } catch (e) {\n        e.message = `[pluginName: ${this.pluginName}:${hookName}:pre error] >> ${e.message}`\n        throw e\n      }\n    }\n    if (this.__hooks && this.__hooks[hookName]) {\n      try {\n        const preRet = runHooks(this, hookName, handler, ...arguments)\n        if (preRet) {\n          if (preRet.then) {\n            preRet.then((isContinue) => {\n              if (isContinue !== false) {\n                callHandler(this, handler, preset.next, ...arguments)\n                // handler.call(this, ...arguments)\n              }\n            }).catch(e => {\n              throw e\n            })\n          } else {\n            callHandler(this, handler, preset.next, ...arguments)\n            // handler.call(this, ...arguments)\n          }\n        } else if (preRet === undefined) {\n          callHandler(this, handler, preset.next, ...arguments)\n        }\n      } catch (e) {\n        e.message = `[pluginName: ${this.pluginName}:${hookName}] >> ${e.message}`\n        throw e\n      }\n    } else {\n      callHandler(this, handler, preset.next, ...arguments)\n    }\n  }.bind(this)\n}\n\nfunction findHookIndex (hookName, handler) {\n  const { __hooks } = this\n  if (!__hooks || !Array.isArray(__hooks[hookName])) {\n    return -1\n  }\n  const hookHandlers = __hooks[hookName]\n  for (let i = 0; i < hookHandlers.length; i++) {\n    if (hookHandlers[i] === handler) {\n      return i\n    }\n  }\n  return -1\n}\n\n/**\n * add hooks\n * @param { string } hookName\n * @param { Function } handler\n */\nfunction useHooks (hookName, handler) {\n  const { __hooks } = this\n  if (!__hooks) {\n    return\n  }\n  // eslint-disable-next-line no-prototype-builtins\n  if (!__hooks.hasOwnProperty(hookName)) {\n    console.warn(`has no supported hook which name [${hookName}]`)\n    return false\n  }\n  if (!Array.isArray(__hooks[hookName])) {\n    __hooks[hookName] = []\n  }\n\n  if (findHookIndex.call(this, hookName, handler) === -1) {\n    __hooks[hookName].push(handler)\n  }\n  return true\n}\n\n/**\n * remove hook\n * @param { string } hookName\n * @param { (plugin: any, ..args) => {} } handler\n * @returns void\n */\nfunction removeHooks (hookName, handler) {\n  const { __hooks } = this\n  if (!__hooks) {\n    return\n  }\n\n  if (Array.isArray(__hooks[hookName])) {\n    const hooks = __hooks[hookName]\n    const index = findHookIndex.call(this, hookName, handler)\n\n    if (index !== -1) {\n      hooks.splice(index, 1)\n    }\n  } else if (__hooks[hookName]) {\n    __hooks[hookName] = null\n    // delete __hooks[hookName]\n  }\n}\n\n/**\n * Add hooks to a plugin\n * @param { string } pluginName\n * @param  {...any} args\n */\nfunction usePluginHooks (pluginName, ...args) {\n  if (!this.plugins || !this.plugins[pluginName.toLowerCase()]) {\n    return\n  }\n  const plugin = this.plugins[pluginName.toLowerCase()]\n  return plugin.useHooks && plugin.useHooks(...args)\n}\n\nfunction removePluginHooks (pluginName, ...args) {\n  if (!this.plugins || !this.plugins[pluginName.toLowerCase()]) {\n    return\n  }\n  const plugin = this.plugins[pluginName.toLowerCase()]\n  if (plugin) {\n    return plugin.removeHooks && plugin.removeHooks(...args)\n  }\n}\n\n/**\n * hook decorator, add hooks props for for an instance\n * @param { any } instance\n * @param { Array<string> } [hookNames]\n */\nfunction hooksDescriptor (instance, presetHooks = []) {\n  instance.__hooks = {}\n  presetHooks && presetHooks.map(item => {\n    instance.__hooks[item] = null\n  })\n  Object.defineProperty(instance, 'hooks', {\n    get: () => {\n      return instance.__hooks && Object.keys(instance.__hooks).map(key => {\n        if (instance.__hooks[key]) {\n          return key\n        }\n      })\n    }\n  })\n}\n\nfunction delHooksDescriptor (instance) {\n  instance.__hooks = null\n}\n\nfunction runHooks (obj, hookName, handler, ...args) {\n  if (obj.__hooks && Array.isArray(obj.__hooks[hookName])) {\n    const hooks = obj.__hooks[hookName]\n    let index = -1\n    /**\n     * @private\n     */\n    const runHooksRecursive = function (obj, hookName, handler, ...args) {\n      index++\n      // 递归终止条件\n      if (hooks.length === 0 || index === hooks.length) {\n        return handler.call(obj, obj, ...args)\n      }\n      // 递归调用\n      const hook = hooks[index]\n      const ret = hook.call(obj, obj, ...args)\n      if (ret && ret.then) {\n        return ret.then((data) => {\n          return data === false ? null : runHooksRecursive(obj, hookName, handler, ...args)\n        }).catch(e => {\n          console.warn(`[runHooks]${hookName} reject`, e.message)\n        })\n      } else if (ret !== false) {\n        return runHooksRecursive(obj, hookName, handler, ...args)\n      } else if (ret === false) {\n        return false\n      }\n    }\n\n    return runHooksRecursive(obj, hookName, handler, ...args)\n  } else {\n    return handler.call(obj, obj, ...args)\n  }\n}\n\nexport {\n  hooksDescriptor as default,\n  hook,\n  useHooks,\n  usePluginHooks,\n  removePluginHooks,\n  removeHooks,\n  delHooksDescriptor,\n  runHooks\n}\n","import Util from '../utils/util'\nimport Sniffer from '../utils/sniffer'\nimport Errors from '../error'\nimport * as Events from '../events'\nimport XG_DEBUG from '../utils/debug'\nimport hooksDescriptor, { hook, useHooks, removeHooks, delHooksDescriptor } from './hooksDescriptor'\n\nfunction showErrorMsg (pluginName, msg) {\n  XG_DEBUG.logError(`[${pluginName}] event or callback cant be undefined or null when call ${msg}`)\n}\n\n/**\n * @typedef { import ('../player').default } Player\n */\n\n/**\n * @typedef { import ('../defaultConfig').IPlayerOptions } IPlayerOptions\n */\n\n/**\n  * @typedef {{\n  * index?: number,\n  * player: Player,\n  * pluginName: string,\n  * config: {\n  *   [propName: string]: any\n  * },\n  * [propName: string]: any;\n  * }} IBasePluginOptions\n */\nclass BasePlugin {\n  static defineGetterOrSetter (Obj, map) {\n    for (const key in map) {\n      if (Object.prototype.hasOwnProperty.call(map, key)) {\n        Object.defineProperty(Obj, key, map[key])\n      }\n    }\n  }\n  static defineMethod (Obj, map) {\n    for (const key in map) {\n      if (Object.prototype.hasOwnProperty.call(map, key) && typeof map[key] === 'function') {\n        Object.defineProperty(Obj, key, {\n          configurable: true,\n          value: map[key]\n        })\n      }\n    }\n  }\n\n  /**\n   * @type { { [propName: string]: any } }\n   */\n  static get defaultConfig () {\n    return {}\n  }\n\n  /**\n   * @type { string }\n   */\n  static get pluginName () {\n    return 'pluginName'\n  }\n\n  /**\n   * @param { IBasePluginOptions } args\n   */\n  constructor (args) {\n    if (Util.checkIsFunction(this.beforeCreate)) {\n      this.beforeCreate(args)\n    }\n    hooksDescriptor(this)\n    /**\n     * @private\n     */\n    this.__args = args\n    /**\n     * @private\n     */\n    this.__events = {} // 对player的事件监听缓存\n    this.__onceEvents = {}\n    this.config = args.config || {}\n    /**\n     * @readonly\n     * @type { Player }\n     */\n    this.player = null\n    /**\n       * @readonly\n       * @type { IPlayerOptions }\n       */\n    this.playerConfig = {}\n    /**\n       * @readonly\n       * @type {string}\n       */\n    this.pluginName = ''\n    this.__init(args)\n  }\n\n  /**\n   * @param { IBasePluginOptions } args\n   */\n  beforeCreate (args) {}\n  afterCreate () {}\n  beforePlayerInit () {}\n  onPluginsReady () {}\n  afterPlayerInit () {}\n  destroy () {}\n\n  /**\n   * @protected\n   * @param { any } args\n   */\n  __init (args) {\n    this.player = args.player\n    this.playerConfig = args.player && args.player.config\n    this.pluginName = args.pluginName ? args.pluginName.toLowerCase() : this.constructor.pluginName.toLowerCase()\n    this.logger = args.player && args.player.logger\n    // BasePlugin.defineGetterOrSetter(this, {\n    //   player: {\n    //     get: () => {\n    //       return args.player\n    //     },\n    //     configurable: true\n    //   },\n    //   playerConfig: {\n    //     get: () => {\n    //       return args.player && args.player.config\n    //     },\n    //     configurable: true\n    //   },\n\n    //   pluginName: {\n    //     get: () => {\n    //       if (args.pluginName) {\n    //         return args.pluginName.toLowerCase()\n    //       } else {\n    //         return this.constructor.pluginName.toLowerCase()\n    //       }\n    //     },\n    //     configurable: true\n    //   },\n    //   logger: {\n    //     get: () => {\n    //       return args.player.logger\n    //     },\n    //     configurable: true\n    //   }\n    // })\n  }\n\n  /**\n   * 更新语言\n   * @param { string } lang\n   */\n  updateLang (lang) {\n    if (!lang) {\n      lang = this.lang\n    }\n  }\n\n  /**\n   * @type { string }\n   */\n  get lang () {\n    return this.player.lang\n  }\n\n  get i18n () {\n    return this.player.i18n\n  }\n\n  get i18nKeys () {\n    return this.player.i18nKeys\n  }\n\n  /**\n   * @description当前支持的事件类型\n   * @type { 'touch' | 'mouse' }\n   */\n  get domEventType () {\n    let _e = Util.checkTouchSupport() ? 'touch' : 'mouse'\n    if (this.playerConfig && (this.playerConfig.domEventType === 'touch' || this.playerConfig.domEventType === 'mouse')) {\n      _e = this.playerConfig.domEventType\n    }\n    return _e\n  }\n\n  /**\n   *\n   * @param { string | Array<string> } event\n   * @param { Function } callback\n   * @returns\n   */\n  on (event, callback) {\n    if (!event || !callback || !this.player) {\n      showErrorMsg(this.pluginName, 'plugin.on(event, callback)')\n      return\n    }\n    if (typeof event === 'string') {\n      this.__events[event] = callback\n      this.player.on(event, callback)\n    } else if (Array.isArray(event)) {\n      event.forEach((item) => {\n        this.__events[item] = callback\n        this.player.on(item, callback)\n      })\n    }\n  }\n\n  /**\n   *\n   * @param { string } event\n   * @param { Function } callback\n   * @returns\n   */\n  once (event, callback) {\n    if (!event || !callback || !this.player) {\n      showErrorMsg(this.pluginName, 'plugin.once(event, callback)')\n      return\n    }\n    if (typeof event === 'string') {\n      this.__onceEvents[event] = callback\n      this.player.once(event, callback)\n    } else if (Array.isArray(event)) {\n      event.forEach((item) => {\n        this.__onceEvents[item] = callback\n        this.player.once(event, callback)\n      })\n    }\n  }\n\n  /**\n   *\n   * @param { string } event\n   * @param { Function } callback\n   * @returns\n   */\n  off (event, callback) {\n    if (!event || !callback || !this.player) {\n      showErrorMsg(this.pluginName, 'plugin.off(event, callback)')\n      return\n    }\n    if (typeof event === 'string') {\n      delete this.__events[event]\n      this.player.off(event, callback)\n    } else if (Array.isArray(event)) {\n      event.forEach((item) => {\n        delete this.__events[event]\n        this.player.off(item, callback)\n      })\n    }\n  }\n\n  offAll () {\n    ['__events', '__onceEvents'].forEach(key => {\n      Object.keys(this[key]).forEach(item => {\n        this[key][item] && this.off(item, this[key][item])\n        item && delete this[key][item]\n      })\n    })\n    this.__events = {}\n    this.__onceEvents = {}\n  }\n\n  /**\n   *\n   * @param { string } event\n   * @param  {...any} res\n   * @returns\n   */\n  emit (event, ...res) {\n    if (!this.player) {\n      return\n    }\n    this.player.emit(event, ...res)\n  }\n\n  emitUserAction (event, action, params = {}) {\n    if (!this.player) {\n      return\n    }\n    const nParams = {\n      ...params,\n      pluginName: this.pluginName\n    }\n    this.player.emitUserAction(event, action, nParams)\n  }\n\n  /**\n   * @param { string } hookName\n   * @param { Function } handler\n   * @param { {pre: Function| null , next: Function | null} } preset\n   * @returns\n   */\n  hook (hookName, handler, preset = { pre: null, next: null }) {\n    // eslint-disable-next-line no-return-assign\n    return hook.call(this, ...arguments)\n  }\n\n  /**\n   * @param { string } hookName\n   * @param { (plugin: any, ...args) => boolean | Promise<any> } handler\n   * @param  {...any} args\n   * @returns { boolean } isSuccess\n   */\n  useHooks (hookName, handler, ...args) {\n    return useHooks.call(this, ...arguments)\n  }\n\n  /**\n   * @param { string } hookName\n   * @param { (plugin: any, ...args) => boolean | Promise<any> } handler\n   * @param  {...any} args\n   * @returns { boolean } isSuccess\n   */\n  removeHooks (hookName, handler, ...args) {\n    return removeHooks.call(this, ...arguments)\n  }\n\n  /**\n   * 注册子插件\n   * @param { any } plugin\n   * @param { any } [options]\n   * @param { string } [name]\n   * @returns { any }\n   */\n  registerPlugin (plugin, options = {}, name = '') {\n    if (!this.player) {\n      return\n    }\n    name && (options.pluginName = name)\n    return this.player.registerPlugin({ plugin, options })\n  }\n\n  /**\n   *\n   * @param { string } name\n   * @returns { any | null }\n   */\n  getPlugin (name) {\n    return this.player ? this.player.getPlugin(name) : null\n  }\n\n  __destroy () {\n    const player = this.player\n    const pluginName = this.pluginName\n    this.offAll()\n    Util.clearAllTimers(this)\n    if (Util.checkIsFunction(this.destroy)) {\n      this.destroy()\n    }\n\n    ['player', 'playerConfig', 'pluginName', 'logger', '__args', '__hooks'].map(item => {\n      this[item] = null\n    })\n    player.unRegisterPlugin(pluginName)\n    delHooksDescriptor(this)\n  }\n}\nexport {\n  BasePlugin as default,\n  Util,\n  Sniffer,\n  Errors,\n  Events,\n  XG_DEBUG\n}\n","var DOCUMENT_NODE_TYPE = 9;\n\n/**\n * A polyfill for Element.matches()\n */\nif (typeof Element !== 'undefined' && !Element.prototype.matches) {\n    var proto = Element.prototype;\n\n    proto.matches = proto.matchesSelector ||\n                    proto.mozMatchesSelector ||\n                    proto.msMatchesSelector ||\n                    proto.oMatchesSelector ||\n                    proto.webkitMatchesSelector;\n}\n\n/**\n * Finds the closest parent that matches a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @return {Function}\n */\nfunction closest (element, selector) {\n    while (element && element.nodeType !== DOCUMENT_NODE_TYPE) {\n        if (typeof element.matches === 'function' &&\n            element.matches(selector)) {\n          return element;\n        }\n        element = element.parentNode;\n    }\n}\n\nmodule.exports = closest;\n","var closest = require('./closest');\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction _delegate(element, selector, type, callback, useCapture) {\n    var listenerFn = listener.apply(this, arguments);\n\n    element.addEventListener(type, listenerFn, useCapture);\n\n    return {\n        destroy: function() {\n            element.removeEventListener(type, listenerFn, useCapture);\n        }\n    }\n}\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element|String|Array} [elements]\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction delegate(elements, selector, type, callback, useCapture) {\n    // Handle the regular Element usage\n    if (typeof elements.addEventListener === 'function') {\n        return _delegate.apply(null, arguments);\n    }\n\n    // Handle Element-less usage, it defaults to global delegation\n    if (typeof type === 'function') {\n        // Use `document` as the first parameter, then apply arguments\n        // This is a short way to .unshift `arguments` without running into deoptimizations\n        return _delegate.bind(null, document).apply(null, arguments);\n    }\n\n    // Handle Selector-based usage\n    if (typeof elements === 'string') {\n        elements = document.querySelectorAll(elements);\n    }\n\n    // Handle Array-like based usage\n    return Array.prototype.map.call(elements, function (element) {\n        return _delegate(element, selector, type, callback, useCapture);\n    });\n}\n\n/**\n * Finds closest match and invokes callback.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Function}\n */\nfunction listener(element, selector, type, callback) {\n    return function(e) {\n        e.delegateTarget = closest(e.target, selector);\n\n        if (e.delegateTarget) {\n            callback.call(element, e);\n        }\n    }\n}\n\nmodule.exports = delegate;\n","/**\n* an ui Plugin class\n*\n**/\nimport BasePlugin, { Util, XG_DEBUG } from './basePlugin'\nimport delegate from 'delegate'\n\nconst ROOT_TYPES = {\n  CONTROLS: 'controls',\n  ROOT: 'root'\n}\n\nconst POSITIONS = {\n  ROOT: 'root',\n  ROOT_LEFT: 'rootLeft',\n  ROOT_RIGHT: 'rootRight',\n  ROOT_TOP: 'rootTop',\n  CONTROLS_LEFT: 'controlsLeft',\n  CONTROLS_RIGTH: 'controlsRight',\n  CONTROLS_RIGHT: 'controlsRight',\n  CONTROLS_CENTER: 'controlsCenter',\n  CONTROLS: 'controls'\n}\n\nconst PLUGIN_STATE_CLASS = {\n  ICON_DISABLE: 'xg-icon-disable',\n  ICON_HIDE: 'xg-icon-hide'\n}\n\n/**\n * Check if the url is a link address\n * @param { string } str\n */\nfunction isUrl (str) {\n  if (!str) {\n    return false\n  }\n  return str.indexOf && /^(?:http|data:|\\/)/.test(str)\n}\n\nfunction mergeIconClass (icon, classname) {\n  if (typeof icon === 'object' && icon.class && typeof icon.class === 'string') {\n    return `${classname} ${icon.class}`\n  }\n  return classname\n}\n\nfunction mergeIconAttr (icon, attr) {\n  if (typeof icon === 'object' && icon.attr && typeof icon.attr === 'object') {\n    Object.keys(icon.attr).map(key => {\n      attr[key] = icon.attr[key]\n    })\n  }\n  return attr\n}\n\nfunction createIcon (icon, key, classname = '', attr = {}, pluginName = '') {\n  let newIcon = null\n  if (icon instanceof window.Element) {\n    Util.addClass(icon, classname)\n    Object.keys(attr).map(key => {\n      icon.setAttribute(key, attr[key])\n    })\n    return icon\n  }\n\n  if (isUrl(icon) || isUrl(icon.url)) {\n    attr.src = isUrl(icon) ? icon : (icon.url || '')\n    newIcon = Util.createDom(icon.tag || 'img', '', attr, `xg-img ${classname}`)\n    return newIcon\n  }\n\n  if (typeof icon === 'function') {\n    try {\n      newIcon = icon()\n      if (newIcon instanceof window.Element) {\n        Util.addClass(newIcon, classname)\n        Object.keys(attr).map(key => {\n          newIcon.setAttribute(key, attr[key])\n        })\n        return newIcon\n      } else {\n        XG_DEBUG.logWarn(`warn>>icons.${key} in config of plugin named [${pluginName}] is a function mast return an Element Object`)\n      }\n      return null\n    } catch (e) {\n      XG_DEBUG.logError(`Plugin named [${pluginName}]:createIcon`, e)\n      return null\n    }\n  }\n\n  if (typeof icon === 'string') {\n    return Util.createDomFromHtml(icon, attr, classname)\n  }\n  XG_DEBUG.logWarn(`warn>>icons.${key} in config of plugin named [${pluginName}] is invalid`)\n  return null\n}\n\nfunction registerIconsObj (iconsConfig, plugin) {\n  const _icons = plugin.config.icons || plugin.playerConfig.icons\n  Object.keys(iconsConfig).map(key => {\n    const orgIcon = iconsConfig[key]\n    let classname = orgIcon && orgIcon.class ? orgIcon.class : ''\n    let attr = orgIcon && orgIcon.attr ? orgIcon.attr : {}\n    let newIcon = null\n    if (_icons && _icons[key]) {\n      classname = mergeIconClass(_icons[key], classname)\n      attr = mergeIconAttr(_icons[key], attr)\n      newIcon = createIcon(_icons[key], key, classname, attr, plugin.pluginName)\n    }\n    if (!newIcon && orgIcon) {\n      newIcon = createIcon((orgIcon.icon ? orgIcon.icon : orgIcon), attr, classname, {}, plugin.pluginName)\n    }\n    plugin.icons[key] = newIcon\n  })\n}\n\nfunction registerTextObj (textConfig, plugin) {\n  Object.keys(textConfig).map((key) => {\n    Object.defineProperty(plugin.langText, key, {\n      get: () => {\n        const { lang, i18n } = plugin\n        if (i18n[key]) {\n          return i18n[key]\n        } else {\n          return textConfig[key] ? (textConfig[key][lang] || '') : ''\n        }\n      }\n    })\n  })\n}\n/**\n * @typedef { import ('../player').default } Player\n */\n\n/**\n * @typedef {{\n *  index?: number,\n *  player: Player,\n *  pluginName: string,\n *  config: {\n *   [propName: string]: any\n *  },\n *  root?: HTMLElement,\n *  position?: string,\n *  [propName: string]: any\n * }} IPluginOptions\n*/\nclass Plugin extends BasePlugin {\n  /**\n    * 插入dom结构\n    * @param { string | HTMLElement } html html字符串或者dom\n    * @param { HTMLElement } parent\n    * @param { number } index\n    * @returns { HTMLElement }\n    */\n  static insert (html, parent, index = 0) {\n    const len = parent.children.length\n    const insertIdx = Number(index)\n    const isDomElement = html instanceof window.Node\n\n    if (len) {\n      let i = 0\n      let coordinate = null\n      let mode = ''\n      for (;i < len; i++) {\n        coordinate = parent.children[i]\n        const curIdx = Number(coordinate.getAttribute('data-index'))\n        if (curIdx >= insertIdx) {\n          mode = 'beforebegin'\n          break\n        } else if (curIdx < insertIdx) {\n          mode = 'afterend'\n        }\n      }\n\n      if (isDomElement) {\n        if (mode === 'afterend') {\n          // as last element\n          parent.appendChild(html)\n        } else {\n          parent.insertBefore(html, coordinate)\n        }\n      } else {\n        coordinate.insertAdjacentHTML(mode, html)\n      }\n      return mode === 'afterend' ? parent.children[parent.children.length - 1] : parent.children[i]\n    } else {\n      isDomElement ? parent.appendChild(html) : parent.insertAdjacentHTML('beforeend', html)\n      return parent.children[parent.children.length - 1]\n    }\n  }\n\n  static get defaultConfig () {\n    return {}\n  }\n\n  /**\n   *\n   * @param { HTMLElement } root\n   * @param { string } querySelector\n   * @param { string | Array<string> } eventType\n   * @param { Function } callback\n   * @param { boolean } [capture=false]\n   * @returns\n   */\n  static delegate (root, querySelector, eventType, callback, capture = false) {\n    const dels = []\n    if (root instanceof window.Node && typeof callback === 'function') {\n      if (Array.isArray(eventType)) {\n        eventType.forEach((item) => {\n          const ret = delegate(root, querySelector, item, callback, capture)\n          ret.key = `${querySelector}_${item}`\n          dels.push(ret)\n        })\n      } else {\n        const ret = delegate(root, querySelector, eventType, callback, capture)\n        ret.key = `${querySelector}_${eventType}`\n        dels.push(ret)\n      }\n    }\n    return dels\n  }\n\n  static get ROOT_TYPES () {\n    return ROOT_TYPES\n  }\n\n  static get POSITIONS () {\n    return POSITIONS\n  }\n\n  /**\n   * @param { IPluginOptions } args\n   */\n  constructor (args = {}) {\n    super(args)\n    /**\n     * @private\n     */\n    this.__delegates = []\n  }\n\n  /**\n   * @protected\n   */\n  __init (args) {\n    super.__init(args)\n    if (!args.root) {\n      return\n    }\n    const _parent = args.root\n    let _el = null\n    /**\n     * @readonly\n     */\n    this.icons = {}\n    /**\n     * @readonly\n     * @type { HTMLElement }\n     */\n    this.root = null\n    /**\n     * @readonly\n     * @type { HTMLElement }\n     */\n    this.parent = null\n    /**\n     * store the extra HTMLElements except root\n     * @readonly\n     * @type {HTMLElement[]}\n     */\n    this.extraEls = []\n\n    const _orgicons = this.registerIcons() || {}\n    registerIconsObj(_orgicons, this)\n    /**\n     * @readonly\n     */\n    this.langText = {}\n    const defaultTexConfig = this.registerLanguageTexts() || {}\n    registerTextObj(defaultTexConfig, this)\n    let renderStr = ''\n    try {\n      renderStr = this.render()\n    } catch (e) {\n      XG_DEBUG.logError(`Plugin:${this.pluginName}:render`, e)\n      throw (new Error(`Plugin:${this.pluginName}:render:${e.message}`))\n    }\n    if (renderStr) {\n      _el = Plugin.insert(renderStr, _parent, args.index)\n      _el.setAttribute('data-index', args.index)\n    } else if (args.tag) {\n      _el = Util.createDom(args.tag, '', args.attr, args.name)\n      _el.setAttribute('data-index', args.index)\n      _parent.appendChild(_el)\n    } else {\n      return\n    }\n\n    this.root = _el\n    this.parent = _parent\n\n    // Plugin.defineGetterOrSetter(this, {\n    //   /**\n    //    * @readonly\n    //    * @type { HTMLElement }\n    //    */\n    //   root: {\n    //     get: () => {\n    //       return _el\n    //     },\n    //     configurable: true\n    //   },\n    //   /**\n    //    * @readonly\n    //    * @type { HTMLElement }\n    //    */\n    //   parent: {\n    //     get: () => {\n    //       return _parent\n    //     },\n    //     configurable: true\n    //   }\n    // })\n\n    const attr = this.config.attr || {}\n    const style = this.config.style || {}\n\n    this.setAttr(attr)\n    this.setStyle(style)\n    if (this.config.index) {\n      this.root.setAttribute('data-index', this.config.index)\n    }\n    this.__registerChildren()\n  }\n\n  /**\n   * @private\n   */\n  __registerChildren () {\n    if (!this.root) {\n      return\n    }\n    /**\n     * @private\n     */\n    this._children = []\n    const children = this.children()\n    if (children && typeof children === 'object') {\n      if (Object.keys(children).length > 0) {\n        Object.keys(children).map(item => {\n          const name = item\n          const _plugin = children[name]\n          const options = {\n            root: this.root\n          }\n          // eslint-disable-next-line no-unused-vars\n          let config, Plugin\n          if (typeof _plugin === 'function') {\n            config = this.config[name] || {}\n            Plugin = _plugin\n          } else if (typeof _plugin === 'object' && typeof _plugin.plugin === 'function') {\n            config = _plugin.options ? Util.deepCopy((this.config[name] || {}), _plugin.options) : (this.config[name] || {})\n            Plugin = _plugin.plugin\n          }\n          options.config = config\n          config.index !== undefined && (options.index = config.index)\n          config.root && (options.root = config.root)\n          this.registerPlugin(Plugin, options, name)\n        })\n      }\n    }\n  }\n\n  updateLang (lang) {\n    if (!lang) {\n      lang = this.lang\n    }\n    function checkChildren (node, callback) {\n      for (let i = 0; i < node.children.length; i++) {\n        if (node.children[i].children.length > 0) {\n          checkChildren(node.children[i], callback)\n        } else {\n          callback(node.children[i])\n        }\n      }\n    }\n    const { root, i18n, langText } = this\n    if (root) {\n      checkChildren(root, (node) => {\n        const langKey = node.getAttribute && node.getAttribute('lang-key')\n        if (!langKey) {\n          return\n        }\n        const langTextShow = i18n[langKey.toUpperCase()] || langText[langKey]\n        if (langTextShow) {\n          node.innerHTML = typeof langTextShow === 'function' ? langTextShow(lang) : langTextShow\n        }\n      })\n    }\n  }\n\n  get lang () {\n    return this.player.lang\n  }\n\n  changeLangTextKey (dom, key = '') {\n    const i18n = this.i18n || {}\n    const langText = this.langText\n    dom.setAttribute && dom.setAttribute('lang-key', key)\n    const text = i18n[key] || langText[key] || ''\n    if (text) {\n      dom.innerHTML = text\n    }\n  }\n\n  plugins () {\n    return this._children\n  }\n\n  /**\n   *\n   */\n  disable () {\n    this.config.disable = true\n    Util.addClass(this.find('.xgplayer-icon'), PLUGIN_STATE_CLASS.ICON_DISABLE)\n  }\n\n  enable () {\n    this.config.disable = false\n    Util.removeClass(this.find('.xgplayer-icon'), PLUGIN_STATE_CLASS.ICON_DISABLE)\n  }\n\n  children () {\n    return {}\n  }\n\n  registerPlugin (plugin, options = {}, name = '') {\n    options.root = options.root || this.root\n    const _c = super.registerPlugin(plugin, options, name)\n    this._children.push(_c)\n    return _c\n  }\n\n  registerIcons () {\n    return {}\n  }\n\n  registerLanguageTexts () {\n    return {}\n  }\n\n  /**\n   *\n   * @param { string } qs\n   * @returns { HTMLElement | null }\n   */\n  find (qs) {\n    if (!this.root) {\n      return\n    }\n    return this.root.querySelector(qs)\n  }\n\n  /**\n   * 绑定事件\n   * @param { string | Array<string> } querySelector\n   * @param { string | Array<string> | Function } eventType\n   * @param { Function } [callback]\n   */\n  bind (querySelector, eventType, callback) {\n    if (arguments.length < 3 && typeof eventType === 'function') {\n      if (Array.isArray(querySelector)) {\n        querySelector.forEach((item) => {\n          this.bindEL(item, eventType)\n        })\n      } else {\n        this.bindEL(querySelector, eventType)\n      }\n    } else {\n      const ret = Plugin.delegate.call(this, this.root, querySelector, eventType, callback)\n      this.__delegates = this.__delegates.concat(ret)\n    }\n  }\n\n  /**\n   * 绑定事件\n   * @param { string | Array<string> } querySelector\n   * @param { string | Array<string> | Function } eventType\n   */\n  unbind (querySelector, eventType) {\n    if (arguments.length < 3 && typeof eventType === 'function') {\n      if (Array.isArray(querySelector)) {\n        querySelector.forEach((item) => {\n          this.unbindEL(item, eventType)\n        })\n      } else {\n        this.unbindEL(querySelector, eventType)\n      }\n    } else {\n      const key = `${querySelector}_${eventType}`\n      for (let i = 0; i < this.__delegates.length; i++) {\n        if (this.__delegates[i].key === key) {\n          this.__delegates[i].destroy()\n          this.__delegates.splice(i, 1)\n          break\n        }\n      }\n    }\n  }\n\n  /**\n   * 给插件设置样式\n   * @param { string | {[propName: string]: any} } name\n   * @param { ？ | any } value\n   * @returns\n   */\n  setStyle (name, value) {\n    if (!this.root) {\n      return\n    }\n    if (Util.typeOf(name) === 'String') {\n      return (this.root.style[name] = value)\n    } else if (Util.typeOf(name) === 'Object') {\n      Object.keys(name).map(key => {\n        this.root.style[key] = name[key]\n      })\n    }\n  }\n\n  /**\n   * 给插件根节点设置属性\n   * @param { string | {[propName: string]: any} } name\n   * @param { ？ | any } value\n   * @returns\n   */\n  setAttr (name, value) {\n    if (!this.root) {\n      return\n    }\n    if (Util.typeOf(name) === 'String') {\n      return this.root.setAttribute(name, value)\n    } else if (Util.typeOf(name) === 'Object') {\n      Object.keys(name).map(key => {\n        this.root.setAttribute(key, name[key])\n      })\n    }\n  }\n\n  /**\n   *\n   * @param { string } htmlStr\n   * @param { Function } [callback]\n   * @returns\n   */\n  setHtml (htmlStr, callback) {\n    if (!this.root) {\n      return\n    }\n    this.root.innerHTML = htmlStr\n    if (typeof callback === 'function') {\n      callback()\n    }\n  }\n\n  /**\n   *\n   * @param { string } event\n   * @param { Function } eventHandle\n   * @param { boolean } [isBubble=false]\n   * @returns\n   */\n  bindEL (event, eventHandle, isBubble = false) {\n    if (!this.root) {\n      return\n    }\n    if (`on${event}` in this.root && typeof eventHandle === 'function') {\n      this.root.addEventListener(event, eventHandle, isBubble)\n    }\n  }\n\n  /**\n   *\n   * @param { string } event\n   * @param { Function } eventHandle\n   * @param { boolean } [isBubble]\n   * @returns\n   */\n  unbindEL (event, eventHandle, isBubble = false) {\n    if (!this.root) {\n      return\n    }\n    if (`on${event}` in this.root && typeof eventHandle === 'function') {\n      this.root.removeEventListener(event, eventHandle, isBubble)\n    }\n  }\n\n  /**\n   *\n   * @param { string } [value]\n   * @returns\n   */\n  show (value) {\n    if (!this.root) {\n      return\n    }\n    this.root.style.display = value !== undefined ? value : 'block'\n    const cs = window.getComputedStyle(this.root, null)\n    const cssDisplayValue = cs.getPropertyValue('display')\n    if (cssDisplayValue === 'none') {\n      return (this.root.style.display = 'block')\n    }\n  }\n\n  hide () {\n    this.root && (this.root.style.display = 'none')\n  }\n\n  /**\n   *\n   * @param { string | HTMLElement } pdom\n   * @param { HTMLElement} child\n   * @returns { HTMLElement | null }\n   */\n  appendChild (pdom, child) {\n    if (!this.root) {\n      return null\n    }\n    if (arguments.length < 2 && arguments[0] instanceof window.Element) {\n      return this.root.appendChild(arguments[0])\n    }\n    if (!child || !(child instanceof window.Element)) {\n      return null\n    }\n    try {\n      if (typeof pdom === 'string') {\n        return this.find(pdom).appendChild(child)\n      } else {\n        return pdom.appendChild(child)\n      }\n    } catch (err) {\n      XG_DEBUG.logError('Plugin:appendChild', err)\n      return null\n    }\n  }\n\n  /**\n   *\n   * @returns { string | HTMLElement }\n   */\n  render () {\n    return ''\n  }\n\n  destroy () {}\n\n  __destroy () {\n    const { player } = this\n    this.__delegates.map(item => {\n      item.destroy()\n    })\n    this.__delegates = []\n    // destroy the sub-plugin instance\n    if (this._children instanceof Array) {\n      this._children.map(item => {\n        player.unRegisterPlugin(item.pluginName)\n      })\n      this._children = null\n    }\n    if (this.root) {\n      // eslint-disable-next-line no-prototype-builtins\n      if (this.root.hasOwnProperty('remove')) {\n        this.root.remove()\n      } else if (this.root.parentNode) {\n        this.root.parentNode.removeChild(this.root)\n      }\n    }\n\n    super.__destroy()\n    this.icons = {};\n    ['root', 'parent'].map(item => {\n      this[item] = null\n    })\n    this.extraEls = []\n  }\n}\n\nexport {\n  Plugin as default,\n  ROOT_TYPES,\n  POSITIONS,\n  PLUGIN_STATE_CLASS\n}\n","import { throttle } from '../utils/util'\nimport { PLATER_ID } from '../constant'\n/**\n * 添加\n */\nclass ResizeObserver {\n  constructor () {\n    this.__handlers = []\n    this.timeStamp = 0\n    this.observer = null\n    if (!window.ResizeObserver) {\n      return\n    }\n    try {\n      this.observer = new window.ResizeObserver(throttle(this.__trigger, 100, { trailing: true }))\n      this.timeStamp = new Date().getTime()\n    } catch (e) {\n      console.error(e)\n    }\n  }\n\n  addObserver (target, handler) {\n    if (!this.observer) {\n      return\n    }\n    this.observer.observe(target)\n    const _pid = target.getAttribute(PLATER_ID)\n    const { __handlers } = this\n    let index = -1\n    for (let i = 0; i < __handlers.length; i++) {\n      if (__handlers[i] && target === __handlers[i].target) {\n        index = i\n      }\n    }\n    if (index > -1) {\n      this.__handlers[index].handler = handler\n    } else {\n      this.__handlers.push({\n        target,\n        handler: handler,\n        playerId: _pid\n      })\n    }\n  }\n\n  unObserver (target) {\n    let i = -1\n    this.__handlers.map((item, index) => {\n      if (target === item.target) {\n        i = index\n      }\n    })\n    try {\n      this.observer?.unobserve(target)\n    } catch (e) {}\n    i > -1 && this.__handlers.splice(i, 1)\n  }\n\n  destroyObserver () {\n    this.observer?.disconnect()\n    this.observer = null\n    this.__handlers = null\n  }\n\n  __runHandler (target) {\n    const { __handlers } = this\n    for (let i = 0; i < __handlers.length; i++) {\n      if (__handlers[i] && target === __handlers[i].target) {\n        try {\n          __handlers[i].handler(target)\n        } catch (error) {\n          console.error(error)\n        }\n        return true\n      }\n    }\n    return false\n  }\n\n  __trigger = (entries) => {\n    const t = new Date().getTime()\n    this.timeStamp = t\n    for (let i = 0; i < entries.length; i++) {\n      this.__runHandler(entries[i].target)\n    }\n  }\n}\n\n/**\n * @type {ResizeObserver | null}\n */\nlet resizeObserver = null\n\nfunction addObserver (target, handler) {\n  if (!resizeObserver) {\n    resizeObserver = new ResizeObserver()\n    // window.___resizeObserver = resizeObserver\n  }\n  resizeObserver.addObserver(target, handler)\n  return resizeObserver\n}\n\nfunction unObserver (target, handler) {\n  resizeObserver?.unObserver(target, handler)\n}\n\nfunction destroyObserver (target, handler) {\n  resizeObserver?.destroyObserver(target, handler)\n}\n\nexport {\n  addObserver,\n  unObserver,\n  destroyObserver\n}\n","import { addObserver, unObserver } from './resizeObserver'\nimport Util from '../utils/util'\n\n/**\n* a plugins manager to register and search\n**/\n\nconst pluginsManager = {\n  pluginGroup: {},\n  init (player) {\n    // mark every player instance by _pluginInfoId\n    let cgid = player._pluginInfoId\n    if (!cgid) {\n      cgid = new Date().getTime()\n      player._pluginInfoId = cgid\n    }\n\n    !player.config.closeResizeObserver && addObserver(player.root, () => {\n      player.resize()\n    })\n\n    this.pluginGroup[cgid] = {\n      _originalOptions: player.config || {},\n      _plugins: {}\n    }\n  },\n\n  formatPluginInfo (plugin, config) {\n    let PLUFGIN = null\n    let options = null\n    if (plugin.plugin && typeof plugin.plugin === 'function') {\n      PLUFGIN = plugin.plugin\n      options = plugin.options\n    } else {\n      PLUFGIN = plugin\n      options = {}\n    }\n    if (config) {\n      options.config = config || {}\n    }\n\n    return {\n      PLUFGIN,\n      options\n    }\n  },\n\n  /**\n   * check the plugin if exits in plugins\n   * @param {string} pluginName\n   * @param { Array <any> } plugins\n   * @returns boolean\n   */\n  checkPluginIfExits (pluginName, plugins) {\n    for (let i = 0; i < plugins.length; i++) {\n      if (pluginName.toLowerCase() === plugins[i].pluginName.toLowerCase()) {\n        return true\n      }\n    }\n    return false\n  },\n\n  /**\n   * get plugin Config from playerConfig\n   * @param { string } pluginName\n   * @param { {[propName: string]: any;} } playerConfig\n   * @return { {[propName: string]: any;} } pluginConfig\n   */\n  getRootByConfig (pluginName, playerConfig) {\n    const keys = Object.keys(playerConfig)\n    let _pConfig = null\n    for (let i = 0; i < keys.length; i++) {\n      if (pluginName.toLowerCase() === keys[i].toLowerCase()) {\n        _pConfig = playerConfig[keys[i]]\n        break\n      }\n    }\n\n    if (Util.typeOf(_pConfig) === 'Object') {\n      return {\n        root: _pConfig.root,\n        position: _pConfig.position\n      }\n    }\n    return {}\n  },\n\n  /**\n   * register a lazy plugin\n   * @param { any } player instance\n   * @param { any } lazyPlugin config\n   *\n   */\n  lazyRegister (player, lazyPlugin) {\n    const timeout = lazyPlugin.timeout || 1500\n    return Promise.race([\n      lazyPlugin.loader().then((plugin) => {\n        let result\n        if (plugin && plugin.__esModule) {\n          result = plugin.default\n        } else {\n          result = plugin\n        }\n        this.register(player, result, plugin.options)\n      }),\n      new Promise((resolve, reject) => {\n        setTimeout(() => {\n          reject(new Error('timeout'))\n        }, timeout)\n      })\n    ])\n  },\n  /**\n  * register a Plugin\n  * @param { any } player the plugins register\n  * @param { any } plugin the plugin contructor\n  * @param { any } options the plugin configuration\n  * @return { any } Plugin the plugin instance\n  **/\n  register (player, plugin, options = {}) {\n    if (!player || !plugin || typeof plugin !== 'function' || plugin.prototype === undefined) {\n      return\n    }\n    const cgid = player._pluginInfoId\n    if (!cgid || !this.pluginGroup[cgid]) {\n      return\n    }\n    if (!this.pluginGroup[cgid]._plugins) {\n      this.pluginGroup[cgid]._plugins = {}\n    }\n    const plugins = this.pluginGroup[cgid]._plugins\n    const originalOptions = this.pluginGroup[cgid]._originalOptions\n    options.player = player\n\n    const pluginName = options.pluginName || plugin.pluginName\n    if (!pluginName) {\n      throw new Error('The property pluginName is necessary')\n    }\n\n    if (plugin.isSupported && !plugin.isSupported(player.config.mediaType, player.config.codecType)) {\n      console.warn(`not supported plugin [${pluginName}]`)\n      return\n    }\n\n    if (!options.config) {\n      options.config = {}\n    }\n\n    // get config items from player.config\n    const keys = Object.keys(originalOptions)\n    for (let i = 0; i < keys.length; i++) {\n      if (pluginName.toLowerCase() === keys[i].toLowerCase()) {\n        const config = originalOptions[keys[i]]\n        if (Util.typeOf(config) === 'Object') {\n          options.config = Object.assign({}, options.config, originalOptions[keys[i]])\n        } else if (Util.typeOf(config) === 'Boolean') {\n          options.config.disable = !config\n        }\n        break\n      }\n    }\n\n    // copy the default configuration items of the plugin\n    if (plugin.defaultConfig) {\n      Object.keys(plugin.defaultConfig).forEach(key => {\n        if (typeof options.config[key] === 'undefined') {\n          options.config[key] = plugin.defaultConfig[key]\n        }\n      })\n    }\n\n    // get the parent dom which added the plugin will be mounted\n    if (!options.root) {\n      options.root = player.root\n    } else if (typeof options.root === 'string') {\n      options.root = player[options.root]\n    }\n\n    options.index = options.config.index || 0\n    try {\n      // if there is already a plugin instance with the same pluginName, destroy it\n      if (plugins[pluginName.toLowerCase()]) {\n        this.unRegister(cgid, pluginName.toLowerCase())\n        console.warn(`the is one plugin with same pluginName [${pluginName}] exist, destroy the old instance`)\n      }\n      // eslint-disable-next-line new-cap\n      const _instance = new plugin(options)\n      plugins[pluginName.toLowerCase()] = _instance\n      plugins[pluginName.toLowerCase()].func = plugin\n      if (_instance && typeof _instance.afterCreate === 'function') {\n        _instance.afterCreate()\n      }\n      return _instance\n    } catch (err) {\n      console.error(err)\n      throw (err)\n    }\n  },\n\n  /**\n   * Unregister a plugin from player instance\n   * @param { string } cgid\n   * @param { string } name\n   */\n  unRegister (cgid, name) {\n    if (cgid._pluginInfoId) {\n      cgid = cgid._pluginInfoId\n    }\n    name = name.toLowerCase()\n    try {\n      const plugin = this.pluginGroup[cgid]._plugins[name]\n      if (plugin) {\n        plugin.pluginName && plugin.__destroy()\n        delete this.pluginGroup[cgid]._plugins[name]\n      }\n    } catch (e) {\n      console.error(`[unRegister:${name}] cgid:[${cgid}] error`, e)\n    }\n  },\n\n  /**\n   * remove a plugin instance from the player plugin list\n   * @param { any } player\n   * @param { string } name\n   */\n  deletePlugin (player, name) {\n    const cgid = player._pluginInfoId\n    if (cgid && this.pluginGroup[cgid] && this.pluginGroup[cgid]._plugins) {\n      delete this.pluginGroup[cgid]._plugins[name]\n    }\n  },\n\n  /**\n   * get all plugin instance of player\n   * @param { any } player\n   */\n  getPlugins (player) {\n    const cgid = player._pluginInfoId\n    return cgid && this.pluginGroup[cgid] ? this.pluginGroup[cgid]._plugins : {}\n  },\n\n  findPlugin (player, name) {\n    const cgid = player._pluginInfoId\n    if (!cgid || !this.pluginGroup[cgid]) {\n      return null\n    }\n    const cName = name.toLowerCase()\n    return this.pluginGroup[cgid]._plugins[cName]\n  },\n\n  beforeInit (player) {\n    function retPromise (fun) {\n      if (!fun || !fun.then) {\n        return new Promise((resolve) => {\n          resolve()\n        })\n      } else {\n        return fun\n      }\n    }\n    return new Promise((resolve) => {\n      if (!this.pluginGroup) {\n        return\n      }\n\n      let prevTask\n      if (player._loadingPlugins && player._loadingPlugins.length) {\n        prevTask = Promise.all(player._loadingPlugins)\n      } else {\n        prevTask = Promise.resolve()\n      }\n\n      return prevTask.then(() => {\n        const cgid = player._pluginInfoId\n        if (!this.pluginGroup[cgid]) {\n          resolve()\n          return\n        }\n        const plugins = this.pluginGroup[cgid]._plugins\n        const pluginsRet = []\n        Object.keys(plugins).forEach(pName => {\n          if (plugins[pName] && plugins[pName].beforePlayerInit) {\n            try {\n              const ret = plugins[pName].beforePlayerInit()\n              pluginsRet.push(retPromise(ret))\n            } catch (e) {\n              pluginsRet.push(retPromise(null))\n              throw e\n            }\n          }\n        })\n\n        Promise.all([...pluginsRet]).then(() => {\n          resolve()\n        }).catch((e) => {\n          console.error(e)\n          resolve()\n        })\n      })\n    })\n  },\n\n  afterInit (player) {\n    const cgid = player._pluginInfoId\n    if (!cgid || !this.pluginGroup[cgid]) {\n      return\n    }\n    const plugins = this.pluginGroup[cgid]._plugins\n    Object.keys(plugins).forEach(pName => {\n      if (plugins[pName] && plugins[pName].afterPlayerInit) {\n        plugins[pName].afterPlayerInit()\n      }\n    })\n  },\n\n  setLang (lang, player) {\n    const cgid = player._pluginInfoId\n    if (!cgid || !this.pluginGroup[cgid]) {\n      return\n    }\n    const plugins = this.pluginGroup[cgid]._plugins\n    Object.keys(plugins).forEach(item => {\n      if (plugins[item].updateLang) {\n        plugins[item].updateLang(lang)\n      } else {\n        // 兼容旧版本通过set lang更新语言的问题\n        try {\n          plugins[item].lang = lang\n        } catch (error) {\n          console.warn(`${item} setLang`)\n        }\n      }\n    })\n  },\n\n  reRender (player) {\n    const cgid = player._pluginInfoId\n\n    if (!cgid || !this.pluginGroup[cgid]) {\n      return\n    }\n    const _pList = []\n    const plugins = this.pluginGroup[cgid]._plugins\n    Object.keys(plugins).forEach(pName => {\n      if (pName !== 'controls' && plugins[pName]) {\n        _pList.push({\n          plugin: plugins[pName].func,\n          options: plugins[pName].__args\n        })\n        this.unRegister(cgid, pName)\n      }\n    })\n    _pList.forEach(item => {\n      this.register(player, item.plugin, item.options)\n    })\n  },\n\n  onPluginsReady (player) {\n    const cgid = player._pluginInfoId\n    if (!cgid || !this.pluginGroup[cgid]) {\n      return\n    }\n    const plugins = this.pluginGroup[cgid]._plugins || {}\n    Object.keys(plugins).forEach(key => {\n      if (plugins[key].onPluginsReady && typeof plugins[key].onPluginsReady === 'function') {\n        plugins[key].onPluginsReady()\n      }\n    })\n  },\n\n  destroy (player) {\n    const cgid = player._pluginInfoId\n    if (!this.pluginGroup[cgid]) {\n      return\n    }\n    unObserver(player.root)\n    const plugins = this.pluginGroup[cgid]._plugins\n    for (const item of Object.keys(plugins)) {\n      this.unRegister(cgid, item)\n    }\n    delete this.pluginGroup[cgid]\n    delete player._pluginInfoId\n  }\n}\n\nexport default pluginsManager\n","export default {\n  DEFAULT: 'xgplayer',\n  DEFAULT_SKIN: 'xgplayer-skin-default',\n  ENTER: 'xgplayer-is-enter',\n  PAUSED: 'xgplayer-pause',\n  PLAYING: 'xgplayer-playing',\n  ENDED: 'xgplayer-ended',\n  CANPLAY: 'xgplayer-canplay',\n  LOADING: 'xgplayer-isloading',\n  ERROR: 'xgplayer-is-error',\n  REPLAY: 'xgplayer-replay',\n  NO_START: 'xgplayer-nostart',\n  ACTIVE: 'xgplayer-active',\n  INACTIVE: 'xgplayer-inactive',\n  FULLSCREEN: 'xgplayer-is-fullscreen',\n  CSS_FULLSCREEN: 'xgplayer-is-cssfullscreen',\n  ROTATE_FULLSCREEN: 'xgplayer-rotate-fullscreen',\n  PARENT_ROTATE_FULLSCREEN: 'xgplayer-rotate-parent',\n  PARENT_FULLSCREEN: 'xgplayer-fullscreen-parent',\n  INNER_FULLSCREEN: 'xgplayer-fullscreen-inner',\n  NO_CONTROLS: 'no-controls',\n  FLEX_CONTROLS: 'flex-controls',\n  CONTROLS_FOLLOW: 'controls-follow',\n  CONTROLS_AUTOHIDE: 'controls-autohide',\n  TOP_BAR_AUTOHIDE: 'top-bar-autohide',\n  NOT_ALLOW_AUTOPLAY: 'not-allow-autoplay',\n  SEEKING: 'seeking',\n  PC: 'xgplayer-pc',\n  MOBILE: 'xgplayer-mobile',\n  MINI: 'xgplayer-mini' // mini screen play status\n}\n","import { getLang } from './utils/util'\n\n/**\n * @typedef { string | MediaStream | Array<{src: string, type?:string, [propName: string]: any}> } IUrl\n */\n\n/**\n * @typedef {{\n *   url: IUrl,\n *   definition: any,\n *   bitrate?: number,\n *   bandwidth?: number,\n *   text?: string | { [propName: string]: any },\n *   iconText?: string | { [propName: string]: any },\n *   [propName: string]: any\n * }} IDefinition\n */\n\n/**\n * @typedef { {\n *   id?: string,\n *   el?: HTMLElement,\n *   mediaEl?: HTMLMediaElement | (mediaConfig: { [propName: string]: any }) => HTMLMediaElement,\n *   url?: IUrl,\n *   domEventType?: 'default' | 'touch' | 'mouse',\n *   nullUrlStart?: boolean,\n *   width?: number | string,\n *   height?: number | string,\n *   fluid?: boolean,\n *   fitVideoSize?: 'fixWidth'|'fixHeight'|'fixed',\n *   videoFillMode?: 'auto'|'fillHeight'|'fillWidth'|'fill'|'cover'|'contain',\n *   volume?: number | { [propName: string]: any },\n *   autoplay?: boolean,\n *   autoplayMuted?: boolean,\n *   loop?: boolean,\n *   isLive?: boolean,\n *   zoom?: number,\n *   videoInit?: boolean,\n *   poster?: string | { [propName: string]: any },\n *   isMobileSimulateMode?: 'mobile' | 'pc',\n *   defaultPlaybackRate?: number,\n *   execBeforePluginsCall?: () => any,\n *   allowSeekAfterEnded?: boolean,\n *   enableContextmenu?: boolean,\n *   closeVideoClick?: boolean,\n *   closeVideoDblclick?: boolean,\n *   closePlayerBlur?: boolean,\n *   closeDelayBlur?: boolean,\n *   leavePlayerTime?: number,\n *   closePlayVideoFocus?: boolean,\n *   closePauseVideoFocus?: boolean,\n *   closeFocusVideoFocus?: boolean,\n *   closeControlsBlur?: boolean,\n *   topBarAutoHide?: boolean,\n *   videoAttributes?: { [propName: string]: any },\n *   startTime?: number,\n *   seekedStatus?: 'play' | 'pause' | 'auto',\n *   miniprogress?: boolean,\n *   disableSwipeHandler?: () => any,\n *   enableSwipeHandler?: () => any,\n *   preProcessUrl?: (url: IUrl, ext?: { [propName: string]: any }) => { url: IUrl, [propName: string]: any },\n *   ignores?: Array<'cssfullscreen' | 'screenshot' | 'pip' | 'miniscreen' | 'keyboard' | 'download' | 'playbackrate' | 'time' | 'definition' | 'error' | 'fullscreen' | 'loading' | 'mobile' | 'pc' | 'play' | 'poster' | 'progress' | 'replay' | 'start' | 'volume' | string>,\n *   inactive?: number,\n *   lang?: string,\n *   controls?: boolean | { [propName: string]: any },\n *   marginControls?: boolean,\n *   fullscreenTarget?: HTMLElement, // 全屏作用的dom元素\n *   screenShot?: boolean | { [propName: string]: any },\n *   rotate?: boolean | { [propName: string]: any },\n *   pip?: boolean | { [propName: string]: any },\n *   download?: boolean | { [propName: string]: any },\n *   mini?: boolean | { [propName: string]: any },\n *   cssFullscreen?: boolean | { [propName: string]: any },\n *   keyShortcut?: boolean,\n *   presets?: any[],\n *   plugins?: any[]\n *   playbackRate?: boolean | Array<number> | { [propName: string]: any },\n *   definition?: { list: Array<IDefinition> , defaultDefinition?: IDefinition['definition'], [propName: string]: any},\n *   playsinline?: boolean,\n *   customDuration?: number,\n *   timeOffset?: number,\n *   icons?: { [propName: string]: string | HTMLElement | () => HTMLElement | string },\n *   i18n?: Array<any>,\n *   tabindex?: number,\n *   thumbnail?: {\n *     urls: Array<string>,\n *     pic_num: number,\n *     col: number,\n *     row: number,\n *     height?: number,\n *     width?: number,\n *   },\n *   videoConfig?: { [propName: string]: any },\n *   isHideTips?: boolean,\n *   minWaitDelay?: number,\n *   commonStyle?: {\n *     progressColor?: string,\n *     playedColor?: string,\n *     cachedColor?: string,\n *     sliderBtnStyle?: { [propName: string]: any },\n *     volumeColor?: string\n *   },\n *   remainMediaAfterDestroy?: boolean,\n *   [propName: string]: any;\n * } } IPlayerOptions\n */\n\n/**\n * @returns { IPlayerOptions }\n */\nexport default function getDefaultConfig () {\n  return {\n    id: '', // container DOM id\n    el: null, // container domElement\n    url: '', // the url need to play\n    domEventType: 'default', // 事件类型，默认值default, touch | mouse\n    nullUrlStart: false, // Whether to start broadcasting with empty url\n    width: 600, // Width, unit px\n    height: 337.5, // height, unit px\n    fluid: false,\n    fitVideoSize: 'fixed', // adaptation method of container width and height,  fixWidth/fixHeight/fixed/auto\n    videoFillMode: 'auto', // video screen fill mode, fillHeight/fillWidth/fill/auto/cover\n    volume: 0.6, // default volume or config of plug-in volume\n    autoplay: false,\n    autoplayMuted: false, // whether to mute the start\n    loop: false, // whether to loop\n    isLive: false, // whether is live\n    zoom: 1,\n    videoInit: true, // whether to load the video/audio when initializing\n    poster: '', // cover poster url or the configuration object for poster plugin\n    isMobileSimulateMode: false, // simulation state, mobile/pc\n    defaultPlaybackRate: 1, // default playback rate\n    execBeforePluginsCall: null,\n    allowSeekAfterEnded: true, // whether to allow seek after the playback ended\n    enableContextmenu: true, // whether to allow the right-click function to be enabled\n    closeVideoClick: false, // is to close the video’s click/touchend behavior to switch playback and pause\n    closeVideoDblclick: false, // is to close the video`s double-click behavior to switch through full screen\n    closePlayerBlur: false, // whether to close the behavior of calling player.blur() when the mouse moves out of the player area\n    closeDelayBlur: false, // whether to close the automatic hide control bar behavior，only PC\n    leavePlayerTime: 3000, // auto hide delay time when the mouse moves out of the player area\n    closePlayVideoFocus: false, //  whether to close the behavior of calling player.focus() in the play event callback\n    closePauseVideoFocus: false, //  whether to close the behavior of calling player.focus() in the pause event callback\n    closeFocusVideoFocus: true, // whether to close the behavior of calling player.media.focus() when start play\n    closeControlsBlur: true, // whether to close the behavior of calling player.focus() when the mouse moves out of the control bar area\n    topBarAutoHide: true, // Whether to enable auto hide the top bar when player.blur()\n    videoAttributes: {}, // video extended attributes\n    startTime: 0, // auto play start time\n    seekedStatus: 'play', // play state after seek ends play/pause/auto\n    miniprogress: false, // whether to enable the mini progress bar\n    disableSwipeHandler: () => {\n    },\n    enableSwipeHandler: () => {\n    },\n    preProcessUrl: null, // url preprocessing callback\n    ignores: [], // list of plug-in names to be disabled\n    whitelist: [],\n    inactive: 3000, // delay time for the control bar to disappear automatically\n    lang: getLang(),\n    controls: true,\n    marginControls: false, // Whether the control bar is located at the bottom of the video and does not overlap with the video\n    fullscreenTarget: null,\n    screenShot: false, // whether to enable the screenshot plug-in\n    rotate: false, // whether to enable the rotate plug-in\n    pip: false, //  whether to enable the picture-in-picture plug-in\n    download: false, //  whether to enable the download plug-in\n    mini: false, // whether to enable the mini-screen plug-in\n    cssFullscreen: true, // whether to enable the web page full-screen plug-in\n    keyShortcut: true, // whether to open the shortcut key\n    presets: [],\n    plugins: [],\n    playbackRate: 1,\n    definition: { list: [] },\n    playsinline: true,\n    customDuration: 0, // User-defined duration\n    timeOffset: 0, // currentTime offset\n    icons: {},\n    i18n: [],\n    tabindex: 0, // The order of mediaElement focus\n    thumbnail: null, // Preview image configuration\n    videoConfig: {}, // video attribute configuration\n    isHideTips: false, // if hide the icon tips\n    minWaitDelay: 200, // The min threshold of waiting delay time\n    commonStyle: { // General style configuration\n      progressColor: '', // Background color of progress bar\n      playedColor: '', // The background color of played part in the progress bar\n      cachedColor: '', // The background color of cached part in the progress bar\n      sliderBtnStyle: {}, // progress bar slider style\n      volumeColor: ''\n    }\n  }\n}\n","export const usePreset = (player, Preset) => {\n  let presetInst\n  if (Preset.preset && Preset.options) {\n    // eslint-disable-next-line new-cap\n    presetInst = new (Preset.preset)(Preset.options, player.config)\n  } else {\n    presetInst = new Preset({}, player.config)\n  }\n  const { plugins = [], ignores = [], icons = {}, i18n = [] } = presetInst\n  if (!player.config.plugins) {\n    player.config.plugins = []\n  }\n\n  if (!player.config.ignores) {\n    player.config.ignores = []\n  }\n\n  player.config.plugins.push(...plugins)\n  player.config.ignores.push(...ignores)\n  Object.keys(icons).map(key => {\n    if (!player.config.icons[key]) {\n      player.config.icons[key] = icons[key]\n    }\n  })\n  const _ci18n = player.config.i18n || []\n  i18n.push(..._ci18n)\n  player.config.i18n = i18n\n}\n","export const STATES = {\n  INITIAL: 1,\n  READY: 2,\n  ATTACHING: 3,\n  ATTACHED: 4,\n  NOTALLOW: 5,\n  RUNNING: 6,\n  ENDED: 7,\n  DESTROYED: 8\n}\n\nexport const STATE_ARRAY = [\n  'ERROR',\n  'INITIAL',\n  'READY',\n  'ATTACHING',\n  'ATTACHED',\n  'NOTALLOW',\n  'RUNNING',\n  'ENDED',\n  'DESTROYED'\n]\n","import Plugin, { Events, Util, POSITIONS, Sniffer, STATE_CLASS } from '../../plugin'\nimport './index.scss'\n\n/**\n  * @typedef {{\n  *   disable?: boolean,\n  *   autoHide?: boolean,\n  *   mode?: \"flex\"|\"normal\"|\"bottom\",\n  *   initShow?: boolean,\n  *   [propName: string]: any\n  * }} IControlsConfig\n  */\n\nclass Controls extends Plugin {\n  static get pluginName () {\n    return 'controls'\n  }\n\n  /**\n   * @type IControlsConfig\n   */\n  static get defaultConfig () {\n    return {\n      disable: false,\n      autoHide: true, // Whether to hide automatically\n      mode: '', // Display mode， flex/normal/bottom\n      initShow: false // Display when player is initialized\n    }\n  }\n\n  beforeCreate (args) {\n    if (!args.config.mode && Sniffer.device === 'mobile') {\n      args.config.mode = 'flex'\n    }\n    if (args.player.config.marginControls) {\n      args.config.autoHide = false\n    }\n  }\n\n  afterCreate () {\n    const { disable, height, mode } = this.config\n    if (disable) {\n      return\n    }\n\n    mode === 'flex' && this.player.addClass(STATE_CLASS.FLEX_CONTROLS)\n    const style = {\n      height: `${height}px`\n    }\n    Object.keys(style).map(key => {\n      this.root.style[key] = style[key]\n    })\n    /**\n     * @type { HTMLElement}\n     * @readonly\n     */\n    this.left = this.find('xg-left-grid')\n    /**\n     * @type { HTMLElement}\n     * @readonly\n     */\n    this.center = this.find('xg-center-grid')\n    /**\n     * @type { HTMLElement}\n     * @readonly\n     */\n    this.right = this.find('xg-right-grid')\n    /**\n     * @type { HTMLElement}\n     * @readonly\n     */\n    this.innerRoot = this.find('xg-inner-controls')\n\n    // The progress bar is switched synchronously when switching to the small window state\n    this.on(Events.MINI_STATE_CHANGE, (isMini) => {\n      isMini ? Util.addClass(this.root, 'mini-controls') : Util.removeClass(this.root, 'mini-controls')\n    })\n\n    const { isMobileSimulateMode } = this.playerConfig\n    if (Sniffer.device !== 'mobile' && isMobileSimulateMode !== 'mobile') {\n      this.bind('mouseenter', this.onMouseEnter)\n      this.bind('mouseleave', this.onMouseLeave)\n    }\n  }\n\n  onMouseEnter = (e) => {\n    const { player, playerConfig } = this\n    playerConfig.closeControlsBlur && player.focus({ autoHide: false })\n  }\n\n  onMouseLeave = (e) => {\n    const { player } = this\n    player.focus()\n  }\n\n  focus () {\n    this.player.focus({ autoHide: false })\n  }\n\n  focusAwhile () {\n    this.player.focus({ autoHide: true })\n  }\n\n  blur () {\n    this.player.blur({ ignorePaused: true })\n  }\n\n  recoverAutoHide () {\n    // this.config.autoHide && Util.addClass(this.player.root, STATE_CLASS.CONTROLS_AUTOHIDE)\n    this.config.autoHide && Util.addClass(this.root, STATE_CLASS.CONTROLS_AUTOHIDE)\n  }\n\n  pauseAutoHide () {\n    // Util.removeClass(this.player.root, STATE_CLASS.CONTROLS_AUTOHIDE)\n    Util.removeClass(this.root, STATE_CLASS.CONTROLS_AUTOHIDE)\n  }\n\n  /**\n   * @param {string} [value]\n   * @returns\n   */\n  show (value) {\n    this.root.style.display = ''\n    this.player.focus()\n  }\n\n  hide () {\n    this.root.style.display = 'none'\n  }\n\n  /**\n   * @type {string}\n   */\n  get mode () {\n    return this.config.mode\n  }\n\n  /**\n   *\n   * @param {} plugin\n   * @param { {config?: {[propName: string]: any}, position?:string, root?: HTMLElement, pluginName?: string}} options\n   * @param { string } name\n   * @returns { any }\n   */\n  registerPlugin (plugin, options = {}, name) {\n    if (!this.root) {\n      return\n    }\n    const defaultConfig = plugin.defaultConfig || {}\n    if (!options.root) {\n      const position = options.position ? options.position : options.config && options.config.position ? options.config.position : defaultConfig.position\n      switch (position) {\n        case POSITIONS.CONTROLS_LEFT:\n          options.root = this.left\n          break\n        case POSITIONS.CONTROLS_RIGHT:\n          options.root = this.right\n          break\n        case POSITIONS.CONTROLS_CENTER:\n          options.root = this.center\n          break\n        case POSITIONS.CONTROLS:\n          options.root = this.root\n          break\n        default:\n          options.root = this.left\n      }\n      return super.registerPlugin(plugin, options, name)\n    }\n  }\n\n  destroy () {\n    if (Sniffer.device !== 'mobile') {\n      this.unbind('mouseenter', this.onMouseEnter)\n      this.unbind('mouseleave', this.onMouseLeave)\n    }\n    this.left = null\n    this.center = null\n    this.right = null\n    this.innerRoot = null\n  }\n\n  render () {\n    const { mode, autoHide, initShow, disable } = this.config\n    if (disable) {\n      return\n    }\n\n    // autoHide && Util.addClass(this.player.root, STATE_CLASS.CONTROLS_AUTOHIDE)\n    const className = Util.classNames(\n      { 'xgplayer-controls': true },\n      { 'flex-controls': mode === 'flex' },\n      { 'bottom-controls': mode === 'bottom' },\n      { [STATE_CLASS.CONTROLS_AUTOHIDE]: autoHide },\n      { 'xgplayer-controls-initshow': initShow || !autoHide })\n    return `<xg-controls class=\"${className}\" unselectable=\"on\">\n    <xg-inner-controls class=\"xg-inner-controls xg-pos\">\n      <xg-left-grid class=\"xg-left-grid\">\n      </xg-left-grid>\n      <xg-center-grid class=\"xg-center-grid\"></xg-center-grid>\n      <xg-right-grid class=\"xg-right-grid\">\n      </xg-right-grid>\n    </xg-inner-controls>\n    </xg-controls>`\n  }\n}\n\nexport default Controls\n","import MediaProxy from './mediaProxy'\nimport Util, { checkIsCurrentVideo } from './utils/util'\nimport Sniffer from './utils/sniffer'\nimport Database from './utils/database'\nimport Errors from './error'\nimport * as Events from './events'\nimport { FULLSCREEN_EVENTS, GET_FULLSCREEN_API, EXIT_FULLSCREEN_API, PLATER_ID } from './constant'\nimport Plugin, { POSITIONS } from './plugin/plugin'\nimport BasePlugin from './plugin/basePlugin'\nimport pluginsManager from './plugin/pluginsManager'\nimport STATE_CLASS from './stateClassMap'\nimport getDefaultConfig from './defaultConfig'\nimport { usePreset } from './plugin/preset'\nimport hooksDescriptor, { runHooks, useHooks, removeHooks, delHooksDescriptor, usePluginHooks, removePluginHooks, hook } from './plugin/hooksDescriptor'\nimport Controls from './plugins/controls/index'\nimport XG_DEBUG, { bindDebug } from './utils/debug'\nimport I18N from './lang/i18n'\nimport version from './version'\nimport { STATES, STATE_ARRAY } from './state'\nimport { InstManager, checkPlayerRoot } from './instManager'\n\n/**\n * @typedef { import ('./defaultConfig').IPlayerOptions } IPlayerOptions\n */\n\n/**\n * @typedef { import ('./defaultConfig').IDefinition } IDefinition\n * @typedef { import ('./defaultConfig').IUrl } IUrl\n */\n\n/**\n * @typedef {boolean | {\n *    seamless?: boolean,\n *    currentTime?: number,\n *    bitrate?: number\n * }} SwitchUrlOptions\n */\n\n/* eslint-disable camelcase */\nconst PlAYER_HOOKS = ['play', 'pause', 'replay', 'retry']\nlet REAL_TIME_SPEED = 0 // 实时下载速率, kb/s\nlet AVG_SPEED = 0 // 平均下载速率, kb/s\n/** @type { InstManager } */\nlet instManager = null\n\nclass Player extends MediaProxy {\n  /**\n   * @type {number}\n   * @description set debugger level\n   *  1 - only print error logs\n   *  2 - print warn logs and error logs\n   *  3 - print all debug logs and error stack logs\n   */\n  static set debugger (value) {\n    XG_DEBUG.config.debug = value\n  }\n\n  static get debugger () {\n    return XG_DEBUG.config.debug\n  }\n\n  /**\n   * @param {import('./instManager').InstManager} value\n   */\n  static set instManager (value) {\n    instManager = value\n  }\n\n  /**\n   * @param {import('./instManager').InstManager} value\n   */\n  static get instManager () {\n    return instManager\n  }\n\n  /**\n   * 获取当前处理激活态的实例id\n   * @returns { number | string | null }\n   * @deprecated 该方法转移到 InstManager 上去使用: player.instManager.getActiveId()\n   */\n  static getCurrentUserActivePlayerId () {\n    return instManager?.getActiveId()\n  }\n\n  /**\n   * 设置实例的用户行为激活状态\n   * @param { number | string } playerId\n   * @param { boolean } isActive\n   * @deprecated 该方法转移到 InstManager 上去使用: player.instManager.setActive()\n   */\n  static setCurrentUserActive (playerId, isActive) {\n    instManager?.setActive(playerId, isActive)\n  }\n\n  /**\n   * @param { IPlayerOptions } options\n   */\n  constructor (options) {\n    const config = Util.deepMerge(getDefaultConfig(), options)\n    super(config)\n    hooksDescriptor(this, PlAYER_HOOKS)\n\n    /**\n     * @type { IPlayerOptions }\n     * @description 当前播放器的配置信息\n     */\n    this.config = config\n\n    /**\n     * @type { string }\n     * @private\n     */\n    this._pluginInfoId = Util.generateSessionId()\n\n    bindDebug(this)\n    // resolve default preset\n    const defaultPreset = this.constructor.defaultPreset\n    if (this.config.presets.length) {\n      const defaultIdx = this.config.presets.indexOf('default')\n      if (defaultIdx >= 0 && defaultPreset) {\n        this.config.presets[defaultIdx] = defaultPreset\n      }\n    } else if (defaultPreset) {\n      this.config.presets.push(defaultPreset)\n    }\n\n    // timer and flags\n    this.userTimer = null\n    /**\n     * @private\n     */\n    this.waitTimer = null\n\n    /**\n     * @public\n     * @description This switch provides the playback plugin with the ability\n     *  to handle media source by itself.\n     */\n    this.handleSource = true\n\n    /**\n     * @private\n     */\n    this._state = STATES.INITIAL\n\n    /**\n     * @public\n     * @readonly\n     * @type { boolean }\n     */\n    this.isAd = false\n\n    /**\n     * @public\n     * @readonly\n     * @type { boolean }\n     */\n    this.isError = false\n\n    /**\n     * @private\n     */\n    this._hasStart = false\n\n    /**\n     * Whether the player is in the seeking state\n     * @type { boolean }\n     * @readonly\n     */\n    this.isSeeking = false\n\n    /**\n     * @type { boolean }\n     * @readonly\n     */\n    this.isCanplay = false\n    /**\n     * @private\n     * @readonly\n     */\n    this._useAutoplay = false\n    /**\n     * @description 记录起播需要seek的时间点\n     * @type { number }\n     * @private\n     * @readonly\n     */\n    this.__startTime = -1\n    /**\n     *  @type { number }\n     */\n    this.rotateDeg = 0\n    /**\n     * Whether the player is focus\n     * @type { boolean }\n     * @readonly\n     */\n    this.isActive = false\n\n    /**\n     * Whether player is currently in fullscreen\n     * @type { boolean }\n     * @readonly\n     */\n    this.fullscreen = false\n    /**\n     * @type { boolean }\n     * @readonly\n     */\n    this.cssfullscreen = false\n    /**\n     * @type { boolean }\n     * @readonly\n     */\n    this.isRotateFullscreen = false\n\n    /**\n     * fullscreenElement\n     * @type { HTMLElement | null }\n     * @readonly\n     */\n    this._fullscreenEl = null\n\n    this.timeSegments = []\n\n    /**\n     * cssfullscreen target Element\n     * @type { HTMLElement | null }\n     * @readonly\n     */\n    this._cssfullscreenEl = null\n\n    /**\n     * @type { ?IDefinition }\n     * @public\n     */\n    this.curDefinition = null\n    /**\n     * @private\n     * @type { string }\n     */\n    this._orgCss = ''\n    /**\n     * @readonly\n     * @type { number }\n     */\n    this._fullScreenOffset = null\n    /**\n     * @private\n     * @type { number }\n     */\n    this._videoHeight = 0\n    /**\n     * @private\n     * @type { number }\n     */\n    this._videoWidth = 0\n\n    this.videoPos = {\n      pi: 1, // 宽高比\n      scale: 0,\n      rotate: -1,\n      x: 0,\n      y: 0,\n      h: -1, // 高度占比\n      w: -1, // 宽度占比\n      vy: 0, // 画面在y方向的偏移\n      vx: 0 // 画面在x方向的偏移\n    }\n\n    this.sizeInfo = {\n      width: 0,\n      height: 0,\n      left: 0,\n      top: 0\n    }\n\n    /**\n     * @private\n     * @type { { t: number, acc:number, acc: number, loopAcc: number, [propName: string]: any;} }\n     */\n    this._accPlayed = {\n      t: 0,\n      acc: 0,\n      loopAcc: 0\n    }\n\n    /**\n     * @description 播放器时长、播放时间偏移信息\n     */\n    this._offsetInfo = {\n      currentTime: -1,\n      duration: 0\n    }\n\n    /**\n     * @type { null | HTMLElement }\n     * @readonly\n     * @description  控制栏和video不同布局的时候内部容器\n     */\n    this.innerContainer = null\n\n    /**\n     * @type { ?Controls }\n     * @readonly\n     * @description 控制栏插件\n     */\n    this.controls = null\n\n    /**\n     * @type { null | HTMLElement }\n     * @readonly\n     */\n    this.topBar = null\n\n    /**\n     * @type { null | HTMLElement }\n     * @readonly\n     * @description 当前播放器根节点\n     */\n    this.root = null\n\n    this.__i18n = I18N.init(this._pluginInfoId)\n\n    // android 6以下不支持自动播放\n    if (\n      Sniffer.os.isAndroid &&\n      Sniffer.osVersion > 0 &&\n      Sniffer.osVersion < 6\n    ) {\n      this.config.autoplay = false\n    }\n\n    /**\n     * @readonly\n     * @type {any}\n     */\n    this.database = new Database()\n\n    /**\n     * @readonly\n     * @type { boolean }\n     */\n    this.isUserActive = false\n\n    /**\n     * @private\n     * @description seek之后canplay回调函数定义\n     * @type { Function | null }\n     */\n    this._onceSeekCanplay = null\n\n    /**\n     * @description 记录seek之前是否处于暂停状态\n     * @type { number }\n     * @private\n     */\n    this._isPauseBeforeSeek = 0\n\n    /**\n     * @description 内部状态记录\n     * @type { {\n    *   isActiveLocked: boolean;\n    * } }\n    * @readonly\n    */\n    this.innerStates = {\n      // 当前的active是否是锁定状态\n      isActiveLocked: false\n    }\n\n    /**\n     * @type {InstManager}\n     */\n    this.instManager = instManager\n    const rootInit = this._initDOM()\n    if (!rootInit) {\n      console.error(\n        new Error(\n          `can't find the dom which id is ${this.config.id} or this.config.el does not exist`\n        )\n      )\n      return\n    }\n\n    // url为空的情况下 根据definition或playnext.urlList设置播放地址\n    // 若未配置definition.defaultDefinition，默认将配置为definition.list[0].definition\n    const { definition = {}, url } = this.config\n\n    if (!url && definition.list && definition.list.length > 0) {\n      let defaultDefinitionObj = definition.list.find(\n        (e) => e.definition && e.definition === definition.defaultDefinition\n      )\n      if (!defaultDefinitionObj) {\n        definition.defaultDefinition = definition.list[0].definition\n        defaultDefinitionObj = definition.list[0]\n      }\n      this.config.url = defaultDefinitionObj.url\n      this.curDefinition = defaultDefinitionObj\n    }\n\n    this._bindEvents()\n    this._registerPresets()\n    this._registerPlugins()\n    pluginsManager.onPluginsReady(this)\n\n    // url为空的情况下 根据definition设置播放地址\n    this.getInitDefinition()\n\n    this.setState(STATES.READY)\n    Util.setTimeout(this, () => {\n      this.emit(Events.READY)\n    }, 0)\n    this.onReady && this.onReady()\n\n    if (this.config.videoInit || this.config.autoplay) {\n      if (!this.hasStart || this.state < STATES.ATTACHED) {\n        this.start()\n      }\n    }\n  }\n\n  /**\n   * init control domElement\n   * @private\n   */\n  _initDOM () {\n    this.root = this.config.id ? document.getElementById(this.config.id) : null\n    if (!this.root) {\n      const el = this.config.el\n      if (el && el.nodeType === 1) {\n        this.root = el\n      } else {\n        this.emit(\n          Events.ERROR,\n          new Errors('use', this.config.vid, {\n            line: 32,\n            handle: 'Constructor',\n            msg: 'container id can\\'t be empty'\n          })\n        )\n        console.error('this.confg.id or this.config.el can\\'t be empty')\n        return false\n      }\n    }\n    const ret = checkPlayerRoot(this.root)\n    if (ret) {\n      XG_DEBUG.logWarn(\n        'The is an Player instance already exists in this.root, destroy it and reinitialize'\n      )\n      ret.destroy()\n    }\n    this.root.setAttribute(PLATER_ID, this.playerId)\n    this.media.setAttribute(PLATER_ID, this.playerId)\n\n    instManager?.add(this)\n    pluginsManager.init(this)\n    this._initBaseDoms()\n\n    if (this.config.controls) {\n      const _root = this.config.controls.root || null\n      const controls = pluginsManager.register(this, Controls, { root: _root })\n      this.controls = controls\n    }\n    const device =\n      this.config.isMobileSimulateMode === 'mobile' ? 'mobile' : Sniffer.device\n    this.addClass(\n      `${STATE_CLASS.DEFAULT} ${STATE_CLASS.INACTIVE} xgplayer-${device} ${\n        this.config.controls ? '' : STATE_CLASS.NO_CONTROLS\n      }`\n    )\n    if (this.config.autoplay) {\n      this.addClass(STATE_CLASS.ENTER)\n    } else {\n      this.addClass(STATE_CLASS.NO_START)\n    }\n    if (this.config.fluid) {\n      let { width, height } = this.config\n      if (typeof width !== 'number' || typeof height !== 'number') {\n        width = 600\n        height = 337.5\n      }\n      const style = {\n        width: '100%',\n        height: '0',\n        'max-width': '100%',\n        'padding-top': `${(height * 100) / width}%`\n        // position: 'relative',\n        // top: '0',\n        // left: '0'\n      }\n      Object.keys(style).forEach((key) => {\n        this.root.style[key] = style[key]\n      })\n    } else {\n      ['width', 'height'].forEach((key) => {\n        if (this.config[key]) {\n          if (typeof this.config[key] !== 'number') {\n            this.root.style[key] = this.config[key]\n          } else {\n            this.root.style[key] = `${this.config[key]}px`\n          }\n        }\n      })\n    }\n    const { width, height, left, top } = this.root.getBoundingClientRect()\n    this.sizeInfo.width = width\n    this.sizeInfo.height = height\n    this.sizeInfo.left = left\n    this.sizeInfo.top = top\n    return true\n  }\n\n  /**\n   * @private\n   */\n  _initBaseDoms () {\n    /**\n     * @readonly\n     * @type { HTMLElement | null }\n     */\n    this.topBar = null\n    /**\n     * @readonly\n     * @type { HTMLElement |null }\n     */\n    this.leftBar = null\n    /**\n     * @readonly\n     * @type { HTMLElement | null }\n     */\n    this.rightBar = null\n\n    if (this.config.marginControls) {\n      this.innerContainer = Util.createDom(\n        'xg-video-container',\n        '',\n        { 'data-index': -1 },\n        'xg-video-container'\n      )\n      this.root.appendChild(this.innerContainer)\n    }\n  }\n\n  /**\n   * @private\n   */\n  _bindEvents () {\n    ['focus', 'blur'].forEach((item) => {\n      this.on(item, this['on' + item.charAt(0).toUpperCase() + item.slice(1)])\n    })\n\n    FULLSCREEN_EVENTS.forEach((item) => {\n      document && document.addEventListener(item, this.onFullscreenChange)\n    })\n\n    if (Sniffer.os.isIos) {\n      this.media.addEventListener( 'webkitbeginfullscreen', this._onWebkitbeginfullscreen)\n      this.media.addEventListener( 'webkitendfullscreen', this._onWebkitendfullscreen)\n    }\n\n    this.once(Events.LOADED_DATA, this.resize)\n\n    this.playFunc = () => {\n      if (!this.config.closeFocusVideoFocus) {\n        this.media.focus()\n      }\n    }\n    this.once(Events.PLAY, this.playFunc)\n  }\n\n  /**\n   * @private\n   */\n  _unbindEvents () {\n    this.root.removeEventListener('mousemove', this.mousemoveFunc)\n    FULLSCREEN_EVENTS.forEach((item) => {\n      document.removeEventListener(item, this.onFullscreenChange)\n    })\n    this.playFunc && this.off(Events.PLAY, this.playFunc)\n    this.off(Events.CANPLAY, this.canPlayFunc)\n    this.media.removeEventListener( 'webkitbeginfullscreen', this._onWebkitbeginfullscreen)\n    this.media.removeEventListener('webkitendfullscreen', this._onWebkitendfullscreen)\n  }\n\n  _clearUserTimer () {\n    if (!this.userTimer) {\n      return\n    }\n    Util.clearTimeout(this, this.userTimer)\n    this.userTimer = null\n  }\n\n  /**\n   * @param { any } [url]\n   * @param { { playSessionId?: number  } } [options]\n   * @returns\n   */\n  _startInit (url, options = {}) {\n    if (!this.media) {\n      return\n    }\n    if (\n      !url ||\n      url === '' ||\n      (Util.typeOf(url) === 'Array' && url.length === 0)\n    ) {\n      url = ''\n      this.emit(Events.URL_NULL)\n      XG_DEBUG.logWarn(\n        'config.url is null, please get url and run player._startInit(url)'\n      )\n      if (this.config.nullUrlStart) {\n        return\n      }\n    }\n\n    if (Util.isNotNull(options.playSessionId)) {\n      // PlaySessionId, used to identify a single play session,\n      // for internal use by the player\n      this._playSessionId = options.playSessionId\n    }\n\n    if (this.handleSource) {\n      this._detachSourceEvents(this.media)\n      if (Util.typeOf(url) === 'Array' && url.length > 0) {\n        this._attachSourceEvents(this.media, url)\n      } else if (!this.media.src || this.media.src !== url) {\n        this.media.src = url\n      } else if (!url) {\n        this.media.removeAttribute('src')\n      }\n    }\n\n    if (Util.typeOf(this.config.volume) === 'Number') {\n      this.volume = this.config.volume\n    }\n\n    const _root = this.innerContainer ? this.innerContainer : this.root\n    if (this.media instanceof window.Element && !_root.contains(this.media)) {\n      _root.insertBefore(this.media, _root.firstChild)\n    }\n\n    const { readyState } = this.media\n    XG_DEBUG.logInfo('_startInit readyState', readyState)\n    if (this.config.autoplay) {\n      !Util.isMSE(this.media) && this.load();\n      // ios端无法自动播放的场景下，不调用play不会触发canplay loadeddata等事件\n      (Sniffer.os.isIpad || Sniffer.os.isPhone) && this.mediaPlay()\n    }\n\n    const { startTime } = this.config\n    this.__startTime = startTime > 0 ? startTime : -1\n    this.config.startTime = 0\n    if (readyState >= 2 && this.duration > 0) {\n      this.canPlayFunc()\n    } else {\n      this.on(Events.CANPLAY, this.canPlayFunc)\n    }\n    if (!this.hasStart || this.state < STATES.ATTACHED) {\n      pluginsManager.afterInit(this)\n    }\n    this.hasStart = true\n    this.setState(STATES.ATTACHED)\n    Util.setTimeout(this, () => {\n      this.emit(Events.COMPLETE)\n    }, 0)\n  }\n\n  /**\n   * @description 注册组件 组件列表config.plugins\n   * @param { {boolean} } [isInit] 是否是首次初始化\n   * @private\n   */\n  _registerPlugins (isInit = true) {\n    /**\n     * @private\n     */\n    this._loadingPlugins = []\n    const ignores = this.config.ignores || []\n    const plugins = this.config.plugins || []\n    const i18n = this.config.i18n || []\n    isInit && I18N.extend(i18n, this.__i18n)\n    const ignoresStr = ignores.join('||').toLowerCase().split('||')\n    const cuPlugins = this.plugins\n    plugins.forEach((plugin) => {\n      try {\n        const pluginName = plugin.plugin\n          ? plugin.plugin.pluginName\n          : plugin.pluginName\n        // 在ignores中的不做组装\n        if (pluginName && ignoresStr.indexOf(pluginName.toLowerCase()) > -1) {\n          return null\n        }\n\n        if (!isInit && cuPlugins[pluginName.toLowerCase()]) {\n          return\n        }\n\n        if (plugin.lazy && plugin.loader) {\n          const loadingPlugin = pluginsManager.lazyRegister(this, plugin)\n          if (plugin.forceBeforeInit) {\n            loadingPlugin\n              .then(() => {\n                this._loadingPlugins.splice(\n                  this._loadingPlugins.indexOf(loadingPlugin),\n                  1\n                )\n              })\n              .catch((e) => {\n                XG_DEBUG.logError('_registerPlugins:loadingPlugin', e)\n                this._loadingPlugins.splice(\n                  this._loadingPlugins.indexOf(loadingPlugin),\n                  1\n                )\n              })\n            this._loadingPlugins.push(loadingPlugin)\n          }\n\n          return\n        }\n        return this.registerPlugin(plugin)\n      } catch (err) {\n        XG_DEBUG.logError('_registerPlugins:', err)\n        // return\n      }\n    })\n  }\n\n  /**\n   * @private\n   */\n  _registerPresets () {\n    this.config.presets.forEach((preset) => {\n      usePreset(this, preset)\n    })\n  }\n\n  /**\n   * @private\n   * @param { string } position ]\n   */\n  _getRootByPosition (position) {\n    let _root = null\n    switch (position) {\n      case POSITIONS.ROOT_RIGHT:\n        if (!this.rightBar) {\n          this.rightBar = Util.createPositionBar('xg-right-bar', this.root)\n        }\n        _root = this.rightBar\n        break\n      case POSITIONS.ROOT_LEFT:\n        if (!this.leftBar) {\n          this.leftBar = Util.createPositionBar('xg-left-bar', this.root)\n        }\n        _root = this.leftBar\n        break\n      case POSITIONS.ROOT_TOP:\n        if (!this.topBar) {\n          this.topBar = Util.createPositionBar('xg-top-bar', this.root)\n          if (this.config.topBarAutoHide) {\n            Util.addClass(this.topBar, STATE_CLASS.TOP_BAR_AUTOHIDE)\n          }\n        }\n        _root = this.topBar\n        break\n      default:\n        _root = this.innerContainer || this.root\n        break\n    }\n    return _root\n  }\n\n  /**\n   *\n   * @param { {plugin: function, options:object} | function } plugin\n   * @param { {[propName: string]: any;} } [config]\n   * @returns { any } plugin\n   */\n  registerPlugin (plugin, config) {\n    const _retPlugin = pluginsManager.formatPluginInfo(plugin, config)\n    const { PLUFGIN, options } = _retPlugin\n\n    // 如果当前配置plugins中不存在该组件, 则将其push\n    const { plugins } = this.config\n    const exits = pluginsManager.checkPluginIfExits(PLUFGIN.pluginName, plugins)\n    !exits && plugins.push(PLUFGIN)\n\n    // 获取配置的position或者root\n    const _pConfig = pluginsManager.getRootByConfig(PLUFGIN.pluginName, this.config)\n    _pConfig.root && (options.root = _pConfig.root)\n    _pConfig.position && (options.position = _pConfig.position)\n\n    const position = options.position\n      ? options.position\n      : (options.config && options.config.position) ||\n        (PLUFGIN.defaultConfig && PLUFGIN.defaultConfig.position)\n    if (\n      !options.root &&\n      typeof position === 'string' &&\n      position.indexOf('controls') > -1\n    ) {\n      return this.controls?.registerPlugin(PLUFGIN, options, PLUFGIN.pluginName)\n    }\n    if (!options.root) {\n      options.root = this._getRootByPosition(position)\n    }\n    return pluginsManager.register(this, PLUFGIN, options)\n  }\n\n  /**\n   *\n   * @param { any } plugin\n   */\n  deregister (plugin) {\n    if (typeof plugin === 'string') {\n      pluginsManager.unRegister(this, plugin)\n    } else if (plugin instanceof BasePlugin) {\n      pluginsManager.unRegister(this, plugin.pluginName)\n    }\n  }\n\n  /**\n   *\n   * @param { any } plugin\n   * @param { boolean } removedFromConfig\n   */\n  unRegisterPlugin (plugin, removedFromConfig = false) {\n    this.deregister(plugin)\n    if (removedFromConfig) {\n      this.removePluginFromConfig(plugin)\n    }\n  }\n\n  removePluginFromConfig (plugin) {\n    let pluginName\n    if (typeof plugin === 'string') {\n      pluginName = plugin\n    } else if (plugin instanceof BasePlugin) {\n      pluginName = plugin.pluginName\n    }\n    if (!pluginName) {\n      return\n    }\n    for (let i = this.config.plugins.length - 1; i > -1; i--) {\n      const plugin = this.config.plugins[i]\n      if (plugin.pluginName.toLowerCase() === pluginName.toLowerCase()) {\n        this.config.plugins.splice(i, 1)\n        break\n      }\n    }\n  }\n\n  /**\n   * 当前播放器挂载的插件实例列表\n   * @type { {[propName: string]: any | null } }\n   */\n  get plugins () {\n    return pluginsManager.getPlugins(this)\n  }\n\n  /**\n   * get a plugin instance\n   * @param { string } pluginName\n   * @return { null | any } plugin\n   */\n  getPlugin (pluginName) {\n    const plugin = pluginsManager.findPlugin(this, pluginName)\n    return plugin && plugin.pluginName ? plugin : null\n  }\n\n  /**\n   *\n   * @param { string } className\n   */\n  addClass (className) {\n    if (!this.root) {\n      return\n    }\n    if (!Util.hasClass(this.root, className)) {\n      Util.addClass(this.root, className)\n    }\n  }\n\n  /**\n   *\n   * @param { string } className\n   * @returns\n   */\n  removeClass (className) {\n    if (!this.root) {\n      return\n    }\n    Util.removeClass(this.root, className)\n  }\n\n  /**\n   *\n   * @param { string } className\n   * @returns { boolean } has\n   */\n  hasClass (className) {\n    if (!this.root) {\n      return\n    }\n    return Util.hasClass(this.root, className)\n  }\n\n  /**\n   *\n   * @param { string } key\n   * @param { any } value\n   * @returns void\n   */\n  setAttribute (key, value) {\n    if (!this.root) {\n      return\n    }\n    this.root.setAttribute(key, value)\n  }\n\n  /**\n   *\n   * @param { string } key\n   * @param { any } value\n   * @returns void\n   */\n  removeAttribute (key, value) {\n    if (!this.root) {\n      return\n    }\n    this.root.removeAttribute(key, value)\n  }\n\n  /**\n   *\n   * @param { any } [url]\n   * @returns { Promise<void> | void }\n   * @description 启动播放器，start一般都是播放器内部隐式调用，主要功能是将video添加到DOM\n   */\n  start (url) {\n    // 已经开始初始化播放了 则直接调用play\n    if (this.state > STATES.ATTACHING) {\n      return\n    }\n\n    const playSessionId = this._playSessionId\n    if (Util.isNotNull(playSessionId)) {\n      this._playSessionId = undefined\n    }\n\n    if (!url && !this.config.url) {\n      this.getInitDefinition()\n    }\n    this.hasStart = true\n    this.setState(STATES.ATTACHING)\n\n    this._registerPlugins(false)\n    return pluginsManager\n      .beforeInit(this)\n      .then(() => {\n        // this.config为空即已经销毁，不再执行后面的异步流程\n        if (!this.config) {\n          return\n        }\n        if (!url) {\n          url = this.url || this.config.url\n        }\n        const _furl = this.preProcessUrl(url)\n        const ret = this._startInit(_furl.url, { playSessionId })\n        return ret\n      })\n      .catch((e) => {\n        e.fileName = 'player'\n        e.lineNumber = '236'\n        XG_DEBUG.logError('start:beforeInit:', e)\n        throw e\n      })\n  }\n\n  /**\n   * @param { string | object } url\n   * @param { SwitchUrlOptions } [options]\n   * @returns { Promise | null } 执行结果\n   */\n  switchURL (url, options) {\n    let _src = url\n    if (Util.typeOf(url) === 'Object') {\n      _src = url.url\n    }\n    _src = this.preProcessUrl(_src).url\n    const curTime = this.currentTime\n    this.__startTime = curTime\n    const isPaused = this.paused && !this.isError\n    this.src = _src\n    return new Promise((resolve, reject) => {\n      const _error = (e) => {\n        this.off('timeupdate', _canplay)\n        this.off('canplay', _canplay)\n        reject(e)\n      }\n      const _canplay = () => {\n        this._seekToStartTime()\n        if (isPaused) {\n          this.pause()\n        }\n        this.off('error', _error)\n        resolve(true)\n      }\n      this.once('error', _error)\n      if (!_src){\n        this.errorHandler('error', {code: 6, message: 'empty_src'})\n        return\n      }\n      if (Sniffer.os.isAndroid) {\n        this.once('timeupdate', _canplay)\n      } else {\n        this.once('canplay', _canplay)\n      }\n      this.play()\n    })\n  }\n\n  /**\n   * @description call play without play hook\n   * @deprecated this api renamed to mediaPlay, you can call it as player.mediaPlay()\n   */\n  videoPlay () {\n    this.mediaPlay()\n  }\n\n  /**\n   * @description call play without play hook\n   */\n  mediaPlay () {\n    if (!this.hasStart && this.state < STATES.ATTACHED) {\n      this.removeClass(STATE_CLASS.NO_START)\n      this.addClass(STATE_CLASS.ENTER)\n      this.start()\n      this._useAutoplay = true\n      return\n    }\n    if (this.state < STATES.RUNNING) {\n      this.removeClass(STATE_CLASS.NO_START)\n      !this.isCanplay && this.addClass(STATE_CLASS.ENTER)\n    }\n    const playPromise = super.play()\n    if (playPromise !== undefined && playPromise && playPromise.then) {\n      playPromise\n        .then(() => {\n          this.removeClass(STATE_CLASS.NOT_ALLOW_AUTOPLAY)\n          this.addClass(STATE_CLASS.PLAYING)\n          if (this.state < STATES.RUNNING) {\n            XG_DEBUG.logInfo('>>>>playPromise.then')\n            this.setState(STATES.RUNNING)\n            this.emit(Events.AUTOPLAY_STARTED)\n          }\n        })\n        .catch((e) => {\n          XG_DEBUG.logWarn('>>>>playPromise.catch', e.name)\n          if (this.media && this.media.error) {\n            this.onError()\n            // this.errorHandler('error')\n            this.removeClass(STATE_CLASS.ENTER)\n            // this.setState(STATES.ERROR)\n            return\n          }\n          // 避免AUTOPLAY_PREVENTED先于playing和play触发\n          if (e.name === 'NotAllowedError') {\n            /**\n             * @private\n             */\n            this._errorTimer = Util.setTimeout(\n              this,\n              () => {\n                this._errorTimer = null\n                this.emit(Events.AUTOPLAY_PREVENTED)\n                this.addClass(STATE_CLASS.NOT_ALLOW_AUTOPLAY)\n                this.removeClass(STATE_CLASS.ENTER)\n                this.pause()\n                this.setState(STATES.NOTALLOW)\n              },\n              0\n            )\n          }\n        })\n    } else {\n      XG_DEBUG.logWarn('video.play not return promise')\n      if (this.state < STATES.RUNNING) {\n        this.setState(STATES.RUNNING)\n        this.removeClass(STATE_CLASS.NOT_ALLOW_AUTOPLAY)\n        this.removeClass(STATE_CLASS.NO_START)\n        this.removeClass(STATE_CLASS.ENTER)\n        this.addClass(STATE_CLASS.PLAYING)\n        this.emit(Events.AUTOPLAY_STARTED)\n      }\n    }\n    return playPromise\n  }\n\n  /**\n   * @description call play without pause hook\n   */\n  mediaPause () {\n    super.pause()\n  }\n\n  /**\n   * @description call play without pause hook\n   * @deprecated this api renamed to mediaPause, you can call it as player.mediaPause()\n   */\n  videoPause () {\n    super.pause()\n  }\n\n  play () {\n    this.removeClass(STATE_CLASS.PAUSED)\n    return runHooks(this, 'play', () => {\n      return this.mediaPlay()\n    })\n  }\n\n  pause () {\n    runHooks(this, 'pause', () => {\n      super.pause()\n    })\n  }\n\n  /**\n   *\n   * @param { number } time\n   * @param { 'play' | 'pause' | 'auto' } [status]\n   * @returns\n   */\n  seek (time, status) {\n    if (!this.media || Number.isNaN(Number(time)) || !this.hasStart) {\n      return\n    }\n    const { isSeekedPlay, seekedStatus } = this.config\n    const _status = status || (isSeekedPlay ? 'play' : seekedStatus)\n    time = time < 0 ? 0 : time > this.duration ? parseInt(this.duration, 10) : time\n\n    !this._isPauseBeforeSeek && (this._isPauseBeforeSeek = this.paused ? 2 : 1)\n\n    this._onceSeekCanplay && this.off(Events.SEEKED, this._onceSeekCanplay)\n\n    this._onceSeekCanplay = () => {\n      // const { seekedStatus } = this.config\n      this.removeClass(STATE_CLASS.ENTER)\n      this.isSeeking = false\n      switch (_status) {\n        case 'play':\n          this.play()\n          break\n        case 'pause':\n          this.pause()\n          break\n        default:\n          this._isPauseBeforeSeek > 1 || this.paused ? this.pause() : this.play()\n      }\n      this._isPauseBeforeSeek = 0\n      this._onceSeekCanplay = null\n    }\n\n    this.once(Events.SEEKED, this._onceSeekCanplay)\n    if (this.state < STATES.RUNNING) {\n      this.removeClass(STATE_CLASS.NO_START)\n      this.currentTime = time\n      // 未起播状态不论希望保持什么状态，都要触发一次play, 避免ios下起播异常问题\n      this.play()\n    } else {\n      this.currentTime = time\n    }\n  }\n\n  getInitDefinition () {\n    // url为空的情况下 根据definition设置播放地址\n    const { definition, url } = this.config\n    if (\n      !url &&\n      definition &&\n      definition.list &&\n      definition.list.length > 0 &&\n      definition.defaultDefinition\n    ) {\n      definition.list.map((item) => {\n        if (item.definition === definition.defaultDefinition) {\n          this.config.url = item.url\n          this.curDefinition = item\n        }\n      })\n    }\n  }\n\n  /**\n   * @typedef { import('./defaultConfig').IDefinition } definition\n   */\n  /**\n   * @description change the definition of the current playback\n   * @param { definition } to\n   * @param { definition } [from]\n   */\n  changeDefinition (to, from) {\n    const { definition } = this.config\n\n    if (Array.isArray(definition?.list)) {\n      definition.list.forEach((item) => {\n        if (to?.definition === item.definition) {\n          this.curDefinition = item\n        }\n      })\n    }\n\n    if (to?.bitrate && typeof to.bitrate !== 'number') {\n      to.bitrate = parseInt(to.bitrate, 10) || 0\n    }\n\n    this.emit(Events.DEFINITION_CHANGE, { from, to })\n    if (!this.hasStart) {\n      this.config.url = to.url\n      return\n    }\n    const ret = this.switchURL(to.url, {\n      seamless: definition.seamless !== false\n        && typeof MediaSource !== 'undefined'\n        && typeof MediaSource.isTypeSupported === 'function',\n      ...to\n    })\n    if (ret && ret.then) {\n      ret.then(() => {\n        this.emit(Events.AFTER_DEFINITION_CHANGE, { from, to })\n      })\n    } else {\n      this.emit(Events.AFTER_DEFINITION_CHANGE, { from, to })\n    }\n  }\n\n  reload () {\n    this.load()\n    /**\n     * @private\n     */\n    this.reloadFunc = function () {\n      this.play()\n    }\n    this.once(Events.LOADED_DATA, this.reloadFunc)\n  }\n\n  resetState () {\n    const {\n      NOT_ALLOW_AUTOPLAY,\n      PLAYING,\n      NO_START,\n      PAUSED,\n      REPLAY,\n      ENTER,\n      ENDED,\n      ERROR,\n      LOADING\n    } = STATE_CLASS\n    const clsList = [\n      NOT_ALLOW_AUTOPLAY,\n      PLAYING,\n      NO_START,\n      PAUSED,\n      REPLAY,\n      ENTER,\n      ENDED,\n      ERROR,\n      LOADING\n    ]\n    this.hasStart = false\n    this.isError = false\n    this._useAutoplay = false\n    this.mediaPause()\n    this._accPlayed.acc = 0\n    this._accPlayed.t = 0\n    this._accPlayed.loopAcc = 0\n    clsList.forEach((cls) => {\n      this.removeClass(cls)\n    })\n    this.addClass(STATE_CLASS.NO_START)\n    this.emit(Events.RESET)\n  }\n\n  /**\n   * 重置播放实例\n   * @param { Array<string> } unregisterPlugins 重置的时候需要卸载重新初始化的插件列表\n   * @param { boolean } [isResetConfig] 是否需要重置配置列表\n   * @returns\n   */\n  reset (unregisterPlugins = [], isResetConfig) {\n    this.resetState()\n    const { plugins } = this\n\n    if (!plugins) {\n      return\n    }\n\n    unregisterPlugins.map((pn) => {\n      this.deregister(pn)\n    })\n\n    if (isResetConfig) {\n      const de = getDefaultConfig()\n      Object.keys(this.config).forEach((k) => {\n        if (\n          this.config[k] !== 'undefined' &&\n          (k === 'plugins' || k === 'presets' || k === 'el' || k === 'id')\n        ) {\n          this.config[k] = de[k]\n        }\n      })\n    }\n  }\n\n  /**\n   * @description destroy the player instance\n   * @returns\n   */\n  destroy () {\n    const { innerContainer, root, media } = this\n    if (!root || !media) {\n      return\n    }\n    this.hasStart = false\n    this._useAutoplay = false\n    root.removeAttribute(PLATER_ID)\n    media.removeAttribute(PLATER_ID)\n    this.updateAcc('destroy')\n    this._unbindEvents()\n    this._detachSourceEvents(this.media)\n    Util.clearAllTimers(this)\n    this.emit(Events.DESTROY)\n    instManager?.remove(this)\n    pluginsManager.destroy(this)\n    delHooksDescriptor(this)\n    super.destroy()\n    // 退出全屏\n    if (this.fullscreen && this._fullscreenEl === this.root) {\n      this.exitFullscreen()\n    }\n\n    if (innerContainer) {\n      const _c = innerContainer.children\n      for (let i = 0; i < _c.length; i++) {\n        innerContainer.removeChild(_c[i])\n      }\n    }\n    !innerContainer &&\n    media instanceof window.Node &&\n      root.contains(media) && !this.config.remainMediaAfterDestroy &&\n      root.removeChild(media);\n    ['topBar', 'leftBar', 'rightBar', 'innerContainer'].map((item) => {\n      this[item] && root.removeChild(this[item])\n      this[item] = null\n    })\n    const cList = root.className.split(' ')\n    if (cList.length > 0) {\n      root.className = cList\n        .filter((name) => name.indexOf('xgplayer') < 0)\n        .join(' ')\n    } else {\n      root.className = ''\n    }\n    this.removeAttribute('data-xgfill');\n\n    [\n      'isSeeking',\n      'isCanplay',\n      'isActive',\n      'cssfullscreen',\n      'fullscreen'\n    ].forEach((key) => {\n      this[key] = false\n    })\n  }\n\n  replay () {\n    this.removeClass(STATE_CLASS.ENDED)\n    this.currentTime = 0\n    this.isSeeking = false\n    runHooks(this, 'replay', () => {\n      this.once(Events.SEEKED, () => {\n        const playPromise = this.mediaPlay()\n        if (playPromise && playPromise.catch) {\n          playPromise.catch(err => {\n            console.log(err)\n          })\n        }\n      })\n      this.emit(Events.REPLAY)\n      this.onPlay()\n    })\n  }\n\n  retry () {\n    this.removeClass(STATE_CLASS.ERROR)\n    this.addClass(STATE_CLASS.LOADING)\n    runHooks(this, 'retry', () => {\n      const cur = this.currentTime\n      const { url } = this.config\n      const _srcRet = !Util.isMSE(this.media) ? this.preProcessUrl(url) : { url }\n      this.src = _srcRet.url\n      !this.config.isLive && (this.currentTime = cur)\n      this.once(Events.CANPLAY, () => {\n        this.mediaPlay()\n      })\n    })\n  }\n\n  /**\n   *\n   * @param { HTMLElement } root\n   * @param { HTMLElement } [el]\n   * @param { string } [rootClass]\n   * @param { string } [pClassName]\n   */\n  changeFullStyle (root, el, rootClass, pClassName) {\n    if (!root) {\n      return\n    }\n    if (!pClassName) {\n      pClassName = STATE_CLASS.PARENT_FULLSCREEN\n    }\n    if (!this._orgCss) {\n      this._orgCss = Util.filterStyleFromText(root)\n    }\n    Util.addClass(root, rootClass)\n    if (el && el !== root && !this._orgPCss) {\n      /**\n       * @private\n       */\n      this._orgPCss = Util.filterStyleFromText(el)\n      Util.addClass(el, pClassName)\n      el.setAttribute(PLATER_ID, this.playerId)\n    }\n  }\n\n  /**\n   *\n   * @param { HTMLElement } root\n   * @param { HTMLElement } [el]\n   * @param { string } [rootClass]\n   * @param { string } [pClassName]\n   */\n  recoverFullStyle (root, el, rootClass, pClassName) {\n    if (!pClassName) {\n      pClassName = STATE_CLASS.PARENT_FULLSCREEN\n    }\n    if (this._orgCss) {\n      Util.setStyleFromCsstext(root, this._orgCss)\n      this._orgCss = ''\n    }\n    Util.removeClass(root, rootClass)\n    if (el && el !== root && this._orgPCss) {\n      Util.setStyleFromCsstext(el, this._orgPCss)\n      this._orgPCss = ''\n      Util.removeClass(el, pClassName)\n      el.removeAttribute(PLATER_ID)\n    }\n  }\n\n  /**\n   * @param { HTMLElement } [el]\n   * @returns { Promise<void> }\n   */\n  getFullscreen (el = this.config.fullscreenTarget) {\n    const { root, media } = this\n    if (el === 'video' || el === 'media') {\n      el = this[el]\n    }\n    if (!el) {\n      el = root\n    }\n    this._fullScreenOffset = {\n      top: Util.scrollTop(),\n      left: Util.scrollLeft()\n    }\n\n    this._fullscreenEl = el\n    /**\n     * @private\n     */\n    this._fullActionFrom = 'get'\n    const fullEl = Util.getFullScreenEl()\n    if (fullEl === this._fullscreenEl) {\n      this.onFullscreenChange()\n      return Promise.resolve()\n    }\n    try {\n      for (let i = 0; i < GET_FULLSCREEN_API.length; i++) {\n        const key = GET_FULLSCREEN_API[i]\n        if (el[key]) {\n          const ret =\n            key === 'webkitRequestFullscreen'\n              ? el.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT)\n              : el[key]()\n          if (ret && ret.then) {\n            return ret\n          } else {\n            return Promise.resolve()\n          }\n        }\n      }\n      if (media.fullscreenEnabled || media.webkitSupportsFullscreen) {\n        media.webkitEnterFullscreen()\n        return Promise.resolve()\n      }\n      return Promise.reject(new Error('call getFullscreen fail'))\n    } catch (err) {\n      return Promise.reject(new Error('call getFullscreen fail'))\n    }\n  }\n\n  /**\n   * @param { HTMLElement } [el]\n   * @returns { Promise<void> }\n   */\n  exitFullscreen (el) {\n    if (this.isRotateFullscreen) {\n      this.exitRotateFullscreen()\n    }\n    if (!this._fullscreenEl && !Util.getFullScreenEl()) {\n      return\n    }\n    const { root, media } = this\n    if (!el) {\n      el = root\n    }\n    this._fullActionFrom = 'exit'\n    try {\n      for (let i = 0; i < EXIT_FULLSCREEN_API.length; i++) {\n        const key = EXIT_FULLSCREEN_API[i]\n        if (document[key]) {\n          const ret = document[key]()\n          if (ret && ret.then) {\n            return ret\n          } else {\n            return Promise.resolve()\n          }\n        }\n      }\n      if (media && media.webkitSupportsFullscreen) {\n        media.webkitExitFullScreen()\n        return Promise.resolve()\n      }\n      return Promise.reject(new Error('call exitFullscreen fail'))\n    } catch (err) {\n      return Promise.reject(new Error('call exitFullscreen fail'))\n    }\n  }\n\n  /**\n   * @param { HTMLElement } [el]\n   * @returns\n   */\n  getCssFullscreen (el = this.config.fullscreenTarget) {\n    if (this.isRotateFullscreen) {\n      this.exitRotateFullscreen()\n    } else if (this.fullscreen) {\n      this.exitFullscreen()\n    }\n    const _class = el\n      ? `${STATE_CLASS.INNER_FULLSCREEN} ${STATE_CLASS.CSS_FULLSCREEN}`\n      : STATE_CLASS.CSS_FULLSCREEN\n    this.changeFullStyle(this.root, el, _class)\n    const { fullscreen = {} } = this.config\n    const useCssFullscreen =\n      fullscreen.useCssFullscreen === true ||\n      (typeof fullscreen.useCssFullscreen === 'function' &&\n        fullscreen.useCssFullscreen())\n    if (useCssFullscreen) {\n      this.fullscreen = true\n      this.emit(Events.FULLSCREEN_CHANGE, true)\n    }\n    this._cssfullscreenEl = el\n    this.cssfullscreen = true\n    this.emit(Events.CSS_FULLSCREEN_CHANGE, true)\n  }\n\n  /**\n   * @param { HTMLElement } [el]\n   * @returns\n   */\n  exitCssFullscreen () {\n    const _class = this._cssfullscreenEl\n      ? `${STATE_CLASS.INNER_FULLSCREEN} ${STATE_CLASS.CSS_FULLSCREEN}`\n      : STATE_CLASS.CSS_FULLSCREEN\n    if (!this.fullscreen) {\n      this.recoverFullStyle(this.root, this._cssfullscreenEl, _class)\n    } else {\n      const { fullscreen = {} } = this.config\n      const useCssFullscreen =\n        fullscreen.useCssFullscreen === true ||\n        (typeof fullscreen.useCssFullscreen === 'function' &&\n          fullscreen.useCssFullscreen())\n      if (useCssFullscreen) {\n        this.recoverFullStyle(this.root, this._cssfullscreenEl, _class)\n        this.fullscreen = false\n        this.emit(Events.FULLSCREEN_CHANGE, false)\n      } else {\n        this.removeClass(_class)\n      }\n    }\n    this._cssfullscreenEl = null\n    this.cssfullscreen = false\n    this.emit(Events.CSS_FULLSCREEN_CHANGE, false)\n  }\n\n  /**\n   * 进入旋转全屏\n   * @param { HTMLElement } [el]\n   */\n  getRotateFullscreen (el = this.config.fullscreenTarget) {\n    if (this.cssfullscreen) {\n      this.exitCssFullscreen(el)\n    }\n    const _class = el\n      ? `${STATE_CLASS.INNER_FULLSCREEN} ${STATE_CLASS.ROTATE_FULLSCREEN}`\n      : STATE_CLASS.ROTATE_FULLSCREEN\n    this._fullscreenEl = el || this.root\n    this.changeFullStyle(\n      this.root,\n      el,\n      _class,\n      STATE_CLASS.PARENT_ROTATE_FULLSCREEN\n    )\n    this.isRotateFullscreen = true\n    this.fullscreen = true\n    this.setRotateDeg(90)\n    this._rootStyle = this.root.getAttribute('style')\n    const isRotate90 = Math.abs(window.orientation) === 90 || Math.abs(screen.orientation.angle) === 90\n    // 如果已经是横屏状态，则取innerWidth，否则取innerHeight\n    this.root.style.width = isRotate90 ? `${window.innerWidth}px` : `${window.innerHeight}px`\n    this.emit(Events.FULLSCREEN_CHANGE, true)\n  }\n\n  /**\n   * 退出旋转全屏\n   * @param { HTMLElement } [el]\n   */\n  exitRotateFullscreen (el) {\n    const _class =\n      this._fullscreenEl !== this.root\n        ? `${STATE_CLASS.INNER_FULLSCREEN} ${STATE_CLASS.ROTATE_FULLSCREEN}`\n        : STATE_CLASS.ROTATE_FULLSCREEN\n    this.recoverFullStyle(\n      this.root,\n      this._fullscreenEl,\n      _class,\n      STATE_CLASS.PARENT_ROTATE_FULLSCREEN\n    )\n    this.isRotateFullscreen = false\n    this.fullscreen = false\n    this.setRotateDeg(0)\n    this.emit(Events.FULLSCREEN_CHANGE, false)\n    if (this._rootStyle) {\n      this.root.style.style = this._rootStyle\n      this._rootStyle = false\n    }\n  }\n\n  setRotateDeg (deg) {\n    if (window.orientation === 90 || window.orientation === -90) {\n      this.rotateDeg = 0\n    } else {\n      this.rotateDeg = deg\n    }\n  }\n\n  /**\n   * @description 播放器焦点状态，控制栏显示\n   * @param { {\n   *   autoHide?: boolean, // 是否可以自动隐藏\n   *   delay?: number     // 自动隐藏的延迟时间, ms, 不传默认使用3000ms\n   *   isLock?: boolean   // 是否锁定, 锁定之后自动呼出和blur调用都不生效, 默认值false\n   * } } [data]\n   */\n  focus (\n    data = {\n      autoHide: !this.config.closeDelayBlur,\n      delay: this.config.inactive\n    }\n  ) {\n    if (this.isActive) {\n      this.onFocus(data)\n      return\n    }\n    this.emit(Events.PLAYER_FOCUS, {\n      paused: this.paused,\n      ended: this.ended,\n      ...data\n    })\n  }\n\n  /**\n   * @description 取消播放器当前焦点状态\n   * @param { { ignorePaused?: boolean } } [data]\n   */\n  blur (data = { ignorePaused: false }) {\n    if (!this.isActive) {\n      this.onBlur(data)\n      return\n    }\n    this._clearUserTimer()\n    this.emit(Events.PLAYER_BLUR, {\n      paused: this.paused,\n      ended: this.ended,\n      ...data\n    })\n  }\n\n  /**\n   * @protected\n   * @param { { autoHide?: boolean, delay?: number, isLock?: boolean } } [data]\n   * @returns\n   */\n  onFocus (data = { autoHide: true, delay: 3000 }) {\n    const { innerStates } = this\n    this.isActive = true\n    this.removeClass(STATE_CLASS.INACTIVE)\n    this._clearUserTimer()\n    if (data.isLock !== undefined) {\n      innerStates.isActiveLocked = data.isLock\n    }\n    if (data.autoHide === false || data.isLock === true || innerStates.isActiveLocked) {\n      this._clearUserTimer()\n      return\n    }\n    const time = data && data.delay ? data.delay : this.config.inactive\n    this.userTimer = Util.setTimeout(this, () => {\n      this.userTimer = null\n      this.blur()\n    }, time)\n  }\n\n  /**\n   * @protected\n   * @param {{ ignorePaused?: boolean }} [data]\n   * @returns\n   */\n  onBlur ({ ignorePaused = false } = {}) {\n    if (this.innerStates.isActiveLocked) {\n      return\n    }\n    const { closePauseVideoFocus } = this.config\n    this.isActive = false\n    if (ignorePaused || closePauseVideoFocus || (!this.paused && !this.ended)) {\n      this.addClass(STATE_CLASS.INACTIVE)\n    }\n  }\n\n  canPlayFunc = () => {\n    if (!this.config) {\n      return\n    }\n    const { autoplay, defaultPlaybackRate } = this.config\n\n    XG_DEBUG.logInfo('player', 'canPlayFunc, startTime', this.__startTime)\n    this._seekToStartTime()\n\n    // 解决浏览器安装了一些倍速扩展插件的情况下，倍速设置失效问题\n    this.playbackRate = defaultPlaybackRate;\n\n    (autoplay || this._useAutoplay) && this.mediaPlay()\n    this.off(Events.CANPLAY, this.canPlayFunc)\n    this.removeClass(STATE_CLASS.ENTER)\n  }\n\n  /**\n   *\n   */\n  onFullscreenChange = (event, isFullScreen) => {\n    const delayResize = () => {\n      Util.setTimeout(this, () => {\n        this.resize()\n      }, 100)\n    }\n    const fullEl = Util.getFullScreenEl()\n    if (this._fullActionFrom) {\n      this._fullActionFrom = ''\n    } else {\n      // 快捷键触发\n      this.emit(Events.USER_ACTION, {\n        eventType: 'system',\n        action: 'switch_fullscreen',\n        pluginName: 'player',\n        currentTime: this.currentTime,\n        duration: this.duration,\n        props: [{\n          prop: 'fullscreen',\n          from: true,\n          to: false\n        }]\n      })\n    }\n    const isVideo = checkIsCurrentVideo(fullEl, this.playerId, PLATER_ID)\n    if (isFullScreen || (fullEl && (fullEl === this._fullscreenEl || isVideo))) {\n      delayResize()\n      !this.config.closeFocusVideoFocus && this.media.focus()\n      this.fullscreen = true\n      // this.addClass(STATE_CLASS.FULLSCREEN)\n      this.changeFullStyle(this.root, fullEl, STATE_CLASS.FULLSCREEN)\n      this.emit(Events.FULLSCREEN_CHANGE, true, this._fullScreenOffset)\n      if (this.cssfullscreen) {\n        this.exitCssFullscreen()\n      }\n    } else if (this.fullscreen) {\n      delayResize()\n      const { _fullScreenOffset, config } = this\n      if (config.needFullscreenScroll) {\n        // 保证页面scroll的情况下退出全屏 页面回到原位置\n        window.scrollTo(_fullScreenOffset.left, _fullScreenOffset.top)\n        Util.setTimeout( this, () => {\n          this.fullscreen = false\n          this._fullScreenOffset = null\n        }, 100)\n      } else {\n        // 保证页面scroll的情况下退出全屏 页面定位在播放器位置\n        !this.config.closeFocusVideoFocus && this.media.focus()\n        this.fullscreen = false\n        this._fullScreenOffset = null\n      }\n      if (!this.cssfullscreen) {\n        let el = this._fullscreenEl\n        if (!el && (this.root.contains(event.target) || event.target === this.root)) {\n          el = event.target\n        }\n        this.recoverFullStyle( this.root, el, STATE_CLASS.FULLSCREEN)\n      } else {\n        this.removeClass(STATE_CLASS.FULLSCREEN)\n      }\n      this._fullscreenEl = null\n      // this.removeClass(STATE_CLASS.FULLSCREEN)\n      this.emit(Events.FULLSCREEN_CHANGE, false)\n    }\n  }\n\n  _onWebkitbeginfullscreen = (e) => {\n    this._fullscreenEl = this.media\n    this.onFullscreenChange(e, true)\n  }\n\n  _onWebkitendfullscreen = (e) => {\n    this.onFullscreenChange(e, false)\n  }\n\n  onEmptied () {\n    this.updateAcc('emptied')\n  }\n\n  /**\n   * @protected\n   */\n  onCanplay () {\n    this.removeClass(STATE_CLASS.ENTER)\n    this.removeClass(STATE_CLASS.ERROR)\n    this.removeClass(STATE_CLASS.LOADING)\n    this.isCanplay = true\n    this.waitTimer && Util.clearTimeout(this, this.waitTimer)\n  }\n\n  onLoadeddata () {\n    this.isError = false\n    this.isSeeking = false\n    if (this.__startTime > 0) {\n      if (this.duration > 0) {\n        this._seekToStartTime()\n      } else {\n        // 在安卓原生video播放hls时，loadeddata触发时durationchange事件虽然已经触发过了但duration仍然为0，\n        // 需要在下一次durationchange触发时再重新设置起播时间\n        this.once(Events.DURATION_CHANGE, () => {\n          this._seekToStartTime()\n        })\n      }\n    }\n  }\n\n  onLoadstart () {\n    this.removeClass(STATE_CLASS.ERROR)\n    this.isCanplay = false\n  }\n\n  /**\n   * @protected\n   */\n  onPlay () {\n    if (this.state === STATES.ENDED) {\n      this.setState(STATES.RUNNING)\n    }\n    this.removeClass(STATE_CLASS.PAUSED)\n    this.ended && this.removeClass(STATE_CLASS.ENDED)\n    !this.config.closePlayVideoFocus && this.focus()\n  }\n\n  /**\n   * @protected\n   */\n  onPause () {\n    this.addClass(STATE_CLASS.PAUSED)\n    this.updateAcc('pause')\n    if (!this.config.closePauseVideoFocus) {\n      this._clearUserTimer()\n      this.focus()\n    }\n  }\n\n  /**\n   * @protected\n   */\n  onEnded () {\n    this.updateAcc('ended')\n    this.addClass(STATE_CLASS.ENDED)\n    this.setState(STATES.ENDED)\n    // this.removeClass(STATE_CLASS.PLAYING)\n  }\n\n  /**\n   * @protected\n   */\n  onError () {\n    // this.setState(STATES.ERROR)\n    this.isError = true\n    this.updateAcc('error')\n    this.removeClass(STATE_CLASS.NOT_ALLOW_AUTOPLAY)\n    this.removeClass(STATE_CLASS.NO_START)\n    this.removeClass(STATE_CLASS.ENTER)\n    this.removeClass(STATE_CLASS.LOADING)\n    this.addClass(STATE_CLASS.ERROR)\n  }\n\n  /**\n   * @protected\n   */\n  onSeeking () {\n    if (!this.isSeeking) {\n      this.updateAcc('seeking')\n    }\n    this.isSeeking = true\n    this.addClass(STATE_CLASS.SEEKING)\n  }\n\n  /**\n   * @protected\n   */\n  onSeeked () {\n    this.isSeeking = false\n    // for ie,playing fired before waiting\n    if (this.waitTimer) {\n      Util.clearTimeout(this, this.waitTimer)\n    }\n    this.removeClass(STATE_CLASS.LOADING)\n    this.removeClass(STATE_CLASS.SEEKING)\n  }\n\n  /**\n   * @protected\n   */\n  onWaiting () {\n    if (this.waitTimer) {\n      Util.clearTimeout(this, this.waitTimer)\n    }\n    this.updateAcc('waiting')\n    this.waitTimer = Util.setTimeout(this, () => {\n      this.addClass(STATE_CLASS.LOADING)\n      this.emit(Events.LOADING)\n      Util.clearTimeout(this, this.waitTimer)\n      this.waitTimer = null\n    }, this.config.minWaitDelay)\n  }\n\n  /**\n   * @protected\n   */\n  onPlaying () {\n    this.isError = false\n    const { NO_START, PAUSED, ENDED, ERROR, REPLAY, LOADING } = STATE_CLASS\n    const clsList = [NO_START, PAUSED, ENDED, ERROR, REPLAY, LOADING]\n    clsList.forEach((cls) => {\n      this.removeClass(cls)\n    })\n    if (!this._accPlayed.t && !this.paused && !this.ended) {\n      this._accPlayed.t = new Date().getTime()\n    }\n  }\n\n  /**\n   * @protected\n   */\n  onTimeupdate () {\n    !this._videoHeight && this.media.videoHeight && this.resize()\n    if ((this.waitTimer || this.hasClass(STATE_CLASS.LOADING)) &&\n      this.media.readyState > 2\n    ) {\n      this.removeClass(STATE_CLASS.LOADING)\n      Util.clearTimeout(this, this.waitTimer)\n      this.waitTimer = null\n    }\n\n    // 兼容safari在调整为静音之后未调用play自动起播问题\n    if (!this.paused && this.state === STATES.NOTALLOW && this.duration) {\n      this.setState(STATES.RUNNING)\n      this.emit(Events.AUTOPLAY_STARTED)\n    }\n\n    if (!this._accPlayed.t && !this.paused && !this.ended) {\n      this._accPlayed.t = new Date().getTime()\n    }\n  }\n\n  onVolumechange () {\n    Util.typeOf(this.config.volume) === 'Number' &&\n      (this.config.volume = this.volume)\n  }\n\n  onRatechange () {\n    this.config.defaultPlaybackRate = this.playbackRate\n  }\n\n  /**\n   * 触发用户行为事件，第一个参数是Dom事件\n   * @param { Event } event\n   * @param { string } action\n   * @param {[propName: string]: any; } [params]\n   * @returns\n   */\n  emitUserAction (event, action, params) {\n    if (!this.media || !action || !event) {\n      return\n    }\n    const eventType =\n      Util.typeOf(event) === 'String' ? event : event.type || ''\n\n    // if (action === 'switch_play_pause') {\n    //   Util.typeOf(params.paused) === 'Undefined' && (params.paused = this.paused)\n    //   params.isFirstStart = !this.playing\n    // }\n\n    if (params.props && Util.typeOf(params.props) !== 'Array') {\n      params.props = [params.props]\n    }\n    this.emit(Events.USER_ACTION, {\n      eventType,\n      action,\n      // pluginName: this.pluginName,\n      currentTime: this.currentTime,\n      duration: this.duration,\n      ended: this.ended,\n      event,\n      ...params\n    })\n  }\n\n  updateAcc (endType) {\n    if (this._accPlayed.t) {\n      const _at = new Date().getTime() - this._accPlayed.t\n      this._accPlayed.acc += _at\n      this._accPlayed.t = 0\n      if (endType === 'ended' || this.ended) {\n        this._accPlayed.loopAcc = this._accPlayed.acc\n      }\n    }\n  }\n\n  /**\n   * 目标时间点是否在buffer内\n   * @param { number } time 时间点\n   * @param options 判断阈值配置，可选的\n   * @param options.startDiff 判断起始阈值，即该时间下距离buffer开始点超过阈值时才算作在buffer内，默认为0\n   * @param options.endDiff 判断结束阈值，即该时间下距离buffer结束点超过阈值时才算作在buffer内，默认为0\n   * @returns { boolean }\n   */\n  checkBuffer (\n    time,\n    options = {\n      startDiff: 0,\n      endDiff: 0\n    }) {\n    const { startDiff = 0, endDiff = 0 } = options || {}\n    const buffered = this.media.buffered\n    if (!buffered || buffered.length === 0 || !this.duration) {\n      return true\n    }\n    const currentTime = time || this.media.currentTime || 0.2\n    const len = buffered.length\n    for (let i = 0; i < len; i++) {\n      if (buffered.start(i) + startDiff <= currentTime && buffered.end(i) - endDiff > currentTime) {\n        return true\n      }\n    }\n    return false\n  }\n\n  resizePosition () {\n    const { vy, vx, h, w } = this.videoPos\n    let rotate = this.videoPos.rotate\n    if (rotate < 0 && h < 0 && w < 0) {\n      return\n    }\n    let _pi = this.videoPos._pi\n    if (!_pi && this.media.videoHeight) {\n      _pi = this.media.videoWidth / this.media.videoHeight * 100\n    }\n    if (!_pi) {\n      return\n    }\n    this.videoPos.pi = _pi\n    rotate = rotate < 0 ? 0 : rotate\n    const _pos = {\n      rotate\n    }\n    let offsetY = 0\n    let offsetX = 0\n    let scale = 1\n    const _t = Math.abs(rotate / 90)\n    const { root, innerContainer } = this\n    const width = root.offsetWidth\n    const height = innerContainer ? innerContainer.offsetHeight : root.offsetHeight\n    const styles = {}\n    let rHeight = height\n    let rWidth = width\n\n    if (_t % 2 === 0) {\n      scale = h > 0 ? 100 / h : (w > 0 ? 100 / w : 1)\n      _pos.scale = scale\n      offsetY = vy > 0 ? (100 - h) / 2 - vy : 0\n      _pos.y = _t === 2 ? 0 - offsetY : offsetY\n      offsetX = vx > 0 ? (100 - w) / 2 - vx : 0\n      _pos.x = _t === 2 ? 0 - offsetX : offsetX\n      styles.width = `${rWidth}px`\n      styles.height = `${rHeight}px`\n      styles.maxWidth = ''\n      styles.maxHeight = ''\n    } else if (_t % 2 === 1) {\n      rWidth = height\n      rHeight = width\n      const offset = height - width\n      offsetX = -offset / 2 / rWidth * 100\n      _pos.x = _t === 3 ? offsetX + vy / 2 : offsetX - vy / 2\n      offsetY = offset / 2 / rHeight * 100\n      _pos.y = _t === 3 ? offsetY + vx / 2 : offsetY - vx / 2\n      _pos.scale = scale\n      styles.width = `${rWidth}px`\n      styles.maxWidth = `${rWidth}px`\n      styles.height = `${rHeight}px`\n      styles.maxHeight = `${rHeight}px`\n    }\n    const formStyle = Util.getTransformStyle(_pos, this.media.style.transform || this.media.style.webkitTransform)\n    styles.transform = formStyle\n    styles.webkitTransform = formStyle\n\n    Object.keys(styles).map(key => {\n      this.media.style[key] = styles[key]\n    })\n  }\n\n  /**\n   * @description position video/audio according to height ratio and y coordinate\n   * @param { { h: number, y?: number, x?:number, w?:number} } pos\n   * @returns\n   */\n  position (pos = { h: 0, y: 0, x: 0, w: 0 }) {\n    if (!this.media || !pos || !pos.h) {\n      return\n    }\n    const { videoPos } = this\n    videoPos.h = pos.h * 100 || 0\n    videoPos.w = pos.w * 100 || 0\n    videoPos.vx = pos.x * 100 || 0\n    videoPos.vy = pos.y * 100 || 0\n    this.resizePosition()\n  }\n\n  /**\n   * @description Update configuration parameters\n   * @param { IPlayerOptions } config\n   */\n  setConfig (config) {\n    if (!config) {\n      return\n    }\n    Object.keys(config).map((key) => {\n      if (key !== 'plugins') {\n        this.config[key] = config[key]\n        const plugin = this.plugins[key.toLowerCase()]\n        if (plugin && Util.typeOf(plugin.setConfig) === 'Function') {\n          plugin.setConfig(config[key])\n        }\n      }\n    })\n  }\n\n  /**\n   * @description play another video resource\n   * @param { IPlayerOptions } config\n   */\n  playNext (config) {\n    this.resetState()\n    this.setConfig(config)\n    this._currentTime = 0\n    this._duration = 0\n    runHooks(this, 'playnext', () => {\n      this.start()\n      this.emit(Events.PLAYNEXT, config)\n    })\n  }\n\n  resize () {\n    if (!this.media || !this.root) {\n      return\n    }\n    const containerSize = this.root.getBoundingClientRect()\n    this.sizeInfo.width = containerSize.width\n    this.sizeInfo.height = containerSize.height\n    this.sizeInfo.left = containerSize.left\n    this.sizeInfo.top = containerSize.top\n    const { videoWidth, videoHeight } = this.media\n    const { fitVideoSize, videoFillMode } = this.config\n\n    if (videoFillMode === 'fill' || videoFillMode === 'cover' || videoFillMode === 'contain') {\n      this.setAttribute('data-xgfill', videoFillMode)\n    }\n\n    if (!videoHeight || !videoWidth) {\n      return\n    }\n    this._videoHeight = videoHeight\n    this._videoWidth = videoWidth\n    const controlsHeight =\n      this.controls && this.innerContainer\n        ? this.controls.root.getBoundingClientRect().height\n        : 0\n    const width = containerSize.width\n    const height = containerSize.height - controlsHeight\n    const videoFit = parseInt((videoWidth / videoHeight) * 1000, 10)\n    const fit = parseInt((width / height) * 1000, 10)\n    let rWidth = width\n    let rHeight = height\n    const _style = {}\n    if (\n      (fitVideoSize === 'auto' && fit > videoFit) ||\n      fitVideoSize === 'fixWidth'\n    ) {\n      rHeight = (width / videoFit) * 1000\n      if (this.config.fluid) {\n        _style.paddingTop = `${(rHeight * 100) / rWidth}%`\n      } else {\n        _style.height = `${rHeight + controlsHeight}px`\n      }\n    } else if (\n      (fitVideoSize === 'auto' && fit < videoFit) ||\n      fitVideoSize === 'fixHeight'\n    ) {\n      rWidth = (videoFit * height) / 1000\n      _style.width = `${rWidth}px`\n    }\n    // 全屏不做行间css设置\n    if (!this.fullscreen && !this.cssfullscreen) {\n      Object.keys(_style).forEach((key) => {\n        this.root.style[key] = _style[key]\n      })\n    }\n    // video填充模式\n    if (\n      (videoFillMode === 'fillHeight' && fit < videoFit) ||\n      (videoFillMode === 'fillWidth' && fit > videoFit)\n    ) {\n      this.setAttribute('data-xgfill', 'cover')\n    }\n    const data = {\n      videoScale: videoFit,\n      vWidth: rWidth,\n      vHeight: rHeight,\n      cWidth: rWidth,\n      cHeight: rHeight + controlsHeight\n    }\n    this.resizePosition()\n    this.emit(Events.VIDEO_RESIZE, data)\n  }\n\n  /**\n   *\n   * @param { number } left\n   * @param { number } top\n   * @returns\n   */\n  updateObjectPosition (left = 0, top = 0) {\n    if (this.media.updateObjectPosition) {\n      this.media.updateObjectPosition(left, top)\n      return\n    }\n    this.media.style.objectPosition = `${left * 100}% ${top * 100}%`\n  }\n\n  /**\n   * @protected\n   * @param { number } newState\n   */\n  setState (newState) {\n    XG_DEBUG.logInfo(\n      'setState',\n      `state from:${STATE_ARRAY[this.state]} to:${STATE_ARRAY[newState]}`\n    )\n    this._state = newState\n  }\n\n  /**\n   * @description url preprocessing\n   * @param { IUrl } url\n   * @param { {[propName: string]: any} } [ext]\n   * @returns { url: IUrl, [propName: string]: any }\n   * @public\n   */\n  preProcessUrl (url, ext) {\n    const { preProcessUrl, preProcessUrlOptions } = this.config\n    const processUrlOptions = Object.assign({}, preProcessUrlOptions, ext)\n    return !Util.isBlob(url) && typeof preProcessUrl === 'function' ? preProcessUrl(url, processUrlOptions) : { url }\n  }\n\n\n  /**\n   * @description 跳转至配置的起播时间点\n   */\n  _seekToStartTime () {\n    if (this.__startTime > 0 && this.duration > 0) {\n      this.currentTime = this.__startTime > this.duration ? this.duration : this.__startTime\n      this.__startTime = -1\n    }\n  }\n\n  /**\n   * @type { number }\n   */\n  get state () {\n    return this._state\n  }\n\n  /**\n   * @type { boolean }\n   */\n  get isFullscreen () {\n    return this.fullscreen\n  }\n\n  /**\n   * @type { boolean }\n   */\n  get isCssfullScreen () {\n    return this.cssfullscreen\n  }\n\n  /**\n   * @type { boolean }\n   * @description 是否开始播放\n   */\n  get hasStart () {\n    return this._hasStart\n  }\n\n  set hasStart (bool) {\n    if (typeof bool === 'boolean') {\n      this._hasStart = bool\n      if (bool === false) {\n        this.setState(STATES.READY)\n      }\n      this.emit('hasstart')\n    }\n  }\n\n  /**\n   * @type { boolean }\n   * @description 是否已经进入起播状态\n   */\n  get isPlaying () {\n    return this._state === STATES.RUNNING || this._state === STATES.ENDED\n  }\n\n  set isPlaying (value) {\n    if (value) {\n      this.setState(STATES.RUNNING)\n    } else {\n      this._state >= STATES.RUNNING && (this.setState(STATES.ATTACHED))\n    }\n  }\n\n  /**\n   * @type { Array.<IDefinition> }\n   */\n  set definitionList (list) {\n    const { definition } = this.config\n    let curDef = null\n    let targetDef = null\n\n    definition.list = list\n    this.emit('resourceReady', list)\n\n    list.forEach((item) => {\n      if (this.curDefinition?.definition === item.definition) {\n        curDef = item\n      }\n      if (definition.defaultDefinition === item.definition) {\n        targetDef = item\n      }\n    })\n    if (!targetDef && list.length > 0) {\n      targetDef = list[0]\n    }\n    curDef\n      ? this.changeDefinition(curDef)\n      : targetDef && this.changeDefinition(targetDef)\n  }\n\n  get definitionList () {\n    if (!this.config || !this.config.definition) {\n      return []\n    }\n    return this.config.definition.list || []\n  }\n\n  /**\n   * @description VideoFrames infos\n   * @type { {\n   *   total: number,\n   *   dropped: number,\n   *   corrupted: number,\n   *   droppedRate: number,\n   *   droppedDuration: number\n   * } }\n   */\n  get videoFrameInfo () {\n    const ret = {\n      total: 0,\n      dropped: 0,\n      corrupted: 0,\n      droppedRate: 0,\n      droppedDuration: 0\n    }\n    if (!this.media || !this.media.getVideoPlaybackQuality) {\n      return ret\n    }\n    const _quality = this.media.getVideoPlaybackQuality()\n    ret.dropped = _quality.droppedVideoFrames || 0\n    ret.total = _quality.totalVideoFrames || 0\n    ret.corrupted = _quality.corruptedVideoFrames || 0\n    if (ret.total > 0) {\n      ret.droppedRate = (ret.dropped / ret.total) * 100\n      ret.droppedDuration = parseInt(\n        (this.cumulateTime / ret.total) * ret.dropped,\n        0\n      )\n    }\n    return ret\n  }\n\n  /**\n   * @type { string }\n   */\n  set lang (lang) {\n    const result = I18N.langKeys.filter((key) => key === lang)\n    if (result.length === 0 && lang !== 'zh') {\n      console.error(\n        `Sorry, set lang fail, because the language [${lang}] is not supported now, list of all supported languages is [${I18N.langKeys.join()}] `\n      )\n      return\n    }\n    this.config.lang = lang\n    pluginsManager.setLang(lang, this)\n  }\n\n  get lang () {\n    return this.config.lang\n  }\n\n  get i18n () {\n    let _l = this.config.lang\n    if (_l === 'zh') {\n      _l = 'zh-cn'\n    }\n    return this.__i18n.lang[_l] || this.__i18n.lang.en\n  }\n\n  get i18nKeys () {\n    return this.__i18n.textKeys || {}\n  }\n\n  /**\n   * @type { string }\n   */\n  get version () {\n    return version\n  }\n\n  /**\n   * @type { number | string }\n   */\n  get playerId () {\n    return this._pluginInfoId\n  }\n\n  /**\n   * @type { any }\n   */\n  set url (url) {\n    /**\n     * @private\n     */\n    this.__url = url\n  }\n\n  get url () {\n    return this.__url || this.config.url\n  }\n\n  /**\n   * @type { string }\n   */\n  set poster (posterUrl) {\n    this.plugins.poster && this.plugins.poster.update(posterUrl)\n  }\n\n  get poster () {\n    return this.plugins.poster\n      ? this.plugins.poster.config.poster\n      : this.config.poster\n  }\n\n  get readyState () {\n    return super.readyState\n  }\n\n  get error () {\n    const key = super.error\n    return this.i18n[key] || key\n  }\n\n  get networkState () {\n    return super.networkState\n  }\n\n  /**\n   * @type { boolean }\n   */\n  get fullscreenChanging () {\n    return !(this._fullScreenOffset === null)\n  }\n\n  /**\n   * 累计观看时长\n   * @type { number }\n   */\n  get cumulateTime () {\n    const { acc, t } = this._accPlayed\n    return t ? new Date().getTime() - t + acc : acc\n  }\n\n  /**\n   * @type { number }\n   */\n  get zoom () {\n    return this.config.zoom\n  }\n\n  /**\n   * @type { number }\n   */\n  set zoom (value) {\n    this.config.zoom = value\n  }\n\n  /**\n   * @type {number}\n   * @description Media element rotation angle, Only multiples of 90 degrees are supported\n   */\n  set videoRotateDeg (val) {\n    val = Util.convertDeg(val)\n    if (val % 90 !== 0 || val === this.videoPos.rotate) {\n      return\n    }\n    this.videoPos.rotate = val\n    this.resizePosition()\n  }\n\n  get videoRotateDeg () {\n    return this.videoPos.rotate\n  }\n\n  /**\n   * @description 均衡下载速度，单位kb/s, 根据10条最新下载速度计算出来的加权值，如果没有测速能力则默认是0\n   * @type { number }\n   */\n  set avgSpeed (val) {\n    AVG_SPEED = val\n  }\n\n  get avgSpeed () {\n    return AVG_SPEED\n  }\n\n  /**\n   * @type { number }\n   * 最新一次下载速度，单位kb/s, 如果没有测速能力则默认是0\n   */\n  set realTimeSpeed (val) {\n    REAL_TIME_SPEED = val\n  }\n\n  get realTimeSpeed () {\n    return REAL_TIME_SPEED\n  }\n\n  get offsetCurrentTime () {\n    return this._offsetInfo.currentTime || 0\n  }\n\n  set offsetCurrentTime (val) {\n    this._offsetInfo.currentTime = val\n  }\n\n  get offsetDuration () {\n    return this._offsetInfo.duration || 0\n  }\n\n  set offsetDuration (val) {\n    this._offsetInfo.duration = val || 0\n  }\n  /**\n   * @param { string } hookName\n   * @param { Function } handler\n   * @param { {pre: Function| null , next: Function | null} } preset\n   * @returns\n   */\n  hook (hookName, handler, preset = { pre: null, next: null }) {\n    // eslint-disable-next-line no-return-assign\n    return hook.call(this, ...arguments)\n  }\n\n  /**\n   * @param { string } hookName\n   * @param { (player: any, ...args) => boolean | Promise<any> } handler\n   * @param  {...any} args\n   * @returns {boolean} isSuccess\n   */\n  useHooks (hookName, handler) {\n    return useHooks.call(this, ...arguments)\n  }\n\n  /**\n   *\n   * @param { string } hookName\n   * @param { (player: any, ...args) => boolean | Promise<any> } handler\n   * @returns\n   */\n  removeHooks (hookName, handler) {\n    return removeHooks.call(this, ...arguments)\n  }\n\n  /**\n   *\n   * @param { string } pluginName\n   * @param { string } hookName\n   * @param { (plugin: any, ...args) => boolean | Promise<any> } handler\n   * @param  {...any} args\n   * @returns { boolean } isSuccess\n   */\n  usePluginHooks (pluginName, hookName, handler, ...args) {\n    return usePluginHooks.call(this, ...arguments)\n  }\n\n  /**\n   *\n   * @param { string } pluginName\n   * @param { string } hookName\n   * @param { (plugin: any, ...args) => boolean | Promise<any> } handler\n   * @param  {...any} args\n   * @returns { boolean } isSuccess\n   */\n  removePluginHooks (pluginName, hookName, handler, ...args) {\n    return removePluginHooks.call(this, ...arguments)\n  }\n\n  /**\n   * 设置当前实例的用户激活态\n   * @param { boolean } isActive\n   * @param { boolean } [isMuted]\n   */\n  setUserActive (isActive, isMuted) {\n    if (typeof isMuted === 'boolean' && isMuted !== this.muted) {\n      this.addInnerOP('volumechange')\n      if (Util.typeOf(isMuted) === Boolean) {\n        /**\n         * @type {boolean}\n         */\n        this.muted = isMuted\n      }\n    }\n    instManager?.setActive(this.playerId, isActive)\n  }\n\n  /**\n   * 当前浏览器是否支持hevc编码\n   * @returns {boolean}\n   */\n  static isHevcSupported () {\n    return Sniffer.isHevcSupported()\n  }\n\n  /**\n   * 检测编码参数是否被当前浏览器支持\n   * @doc https://developer.mozilla.org/en-US/docs/Web/API/MediaCapabilities/decodingInfo\n   * @param {MediaDecodingConfiguration} info\n   * @returns {MediaCapabilitiesDecodingInfo}\n   */\n  static probeConfigSupported (info) {\n    return Sniffer.probeConfigSupported(info)\n  }\n\n  /**\n   * @deprecated\n   * 插件全部迁移完成再做删除\n   */\n  static install (name, descriptor) {\n    if (!Player.plugins) {\n      Player.plugins = {}\n    }\n    if (!Player.plugins[name]) {\n      Player.plugins[name] = descriptor\n    }\n  }\n\n  /**\n   * @deprecated\n   * 插件全部迁移完成再做删除\n   */\n  static use (name, descriptor) {\n    if (!Player.plugins) {\n      Player.plugins = {}\n    }\n    Player.plugins[name] = descriptor\n  }\n\n  static defaultPreset = null;\n\n  /**\n   * @description 自定义media构造函数\n   */\n  static XgVideoProxy = null;\n}\n\n// use the default instance manager.\nPlayer.instManager = InstManager.getInstance()\n\nexport {\n  Player as default,\n  Plugin,\n  BasePlugin,\n  Events,\n  Errors,\n  Sniffer,\n  Util,\n  STATE_CLASS,\n  I18N\n}\n","export function xgIconTips (plugin, textKey, isShow) {\n  try {\n    return ` <div class=\"xg-tips ${isShow ? 'hide' : ' '}\" lang-key=\"${plugin.i18nKeys[textKey]}\">\n    ${plugin.i18n[textKey]}\n    </div>`\n  } catch (e) {\n    return '<div class=\"xg-tips hide\"></div>'\n  }\n}","import Plugin from '../../plugin'\n\nexport default class Icon extends Plugin {\n  afterCreate () {\n    this.bind('mouseenter', this._onMouseenter)\n    this.bind('mouseleave', this._onMouseLeave)\n    if (this.config.disable) {\n      this.disable()\n    }\n  }\n\n  _onMouseenter = (e) => {\n    this.emit('icon_mouseenter', {\n      pluginName: this.pluginName\n    })\n  }\n\n  _onMouseLeave = (e) => {\n    this.emit('icon_mouseleave', {\n      pluginName: this.pluginName\n    })\n  }\n\n  destroy () {\n    this.unbind('mouseenter', this._onMouseenter)\n    this.unbind('mouseleave', this._onMouseLeave)\n  }\n}\n","import { Events, POSITIONS } from '../../plugin'\nimport { xgIconTips } from '../common/iconTools'\nimport IconPlugin from '../common/iconPlugin'\nimport CssFullSceenSvg from '../assets/requestCssFull.svg'\nimport ExitCssFullSceenSvg from '../assets/exitCssFull.svg'\nimport './index.scss'\n\n/**\n  * @typedef { {\n  *  position: string,\n  *  index: number,\n  *  disable: boolean,\n  *  target: null | HTMLElement,\n  *  [propName: string]: any\n  * } } ICssConfig\n  */\n\nexport default class CssFullScreen extends IconPlugin {\n  static get pluginName () {\n    return 'cssFullscreen'\n  }\n\n  /**\n   * @type ICssConfig\n   */\n  static get defaultConfig () {\n    return {\n      position: POSITIONS.CONTROLS_RIGHT,\n      index: 1,\n      disable: false,\n      target: null\n    }\n  }\n\n  beforeCreate (args) {\n    if (typeof args.player.config.cssFullscreen === 'boolean') {\n      args.config.disable = !args.player.config.cssFullscreen\n    }\n  }\n\n  afterCreate () {\n    super.afterCreate()\n    if (this.config.disable) {\n      return\n    }\n\n    if (this.config.target) {\n      this.playerConfig.fullscreenTarget = this.config.target\n    }\n\n    this.initIcons()\n    this.on(Events.CSS_FULLSCREEN_CHANGE, (isCssfullScreen) => {\n      this.animate(isCssfullScreen)\n    })\n    this.btnClick = this.btnClick.bind(this)\n    this.handleCssFullscreen = this.hook('cssFullscreen_change', this.btnClick, {\n      pre: (e) => {\n        e.preventDefault()\n        e.stopPropagation()\n      }\n    })\n    this.bind(['click', 'touchend'], this.handleCssFullscreen)\n  }\n\n  initIcons () {\n    const { icons } = this\n    const contentIcon = this.find('.xgplayer-icon')\n    contentIcon.appendChild(icons.cssFullscreen)\n    contentIcon.appendChild(icons.exitCssFullscreen)\n  }\n\n  btnClick (e) {\n    e.preventDefault()\n    e.stopPropagation()\n    const { isCssfullScreen } = this.player\n    this.emitUserAction(e, 'switch_cssfullscreen', { cssfullscreen: isCssfullScreen })\n    if (!isCssfullScreen) {\n      this.player.getCssFullscreen()\n    } else {\n      this.player.exitCssFullscreen()\n    }\n  }\n\n  animate (isFullScreen) {\n    if (!this.root) {\n      return\n    }\n    isFullScreen ? this.setAttr('data-state', 'full') : this.setAttr('data-state', 'normal')\n    this.switchTips(isFullScreen)\n  }\n\n  switchTips (isFullScreen) {\n    const { i18nKeys } = this\n    const tipDom = this.find('.xg-tips')\n    tipDom && this.changeLangTextKey(tipDom, isFullScreen ? i18nKeys.EXITCSSFULLSCREEN_TIPS : i18nKeys.CSSFULLSCREEN_TIPS)\n  }\n\n  registerIcons () {\n    return {\n      cssFullscreen: { icon: CssFullSceenSvg, class: 'xg-get-cssfull' },\n      exitCssFullscreen: { icon: ExitCssFullSceenSvg, class: 'xg-exit-cssfull' }\n    }\n  }\n\n  destroy () {\n    super.destroy()\n    this.unbind(['click', 'touchend'], this.btnClick)\n  }\n\n  render () {\n    if (this.config.disable) {\n      return\n    }\n    return `<xg-icon class='xgplayer-cssfullscreen'>\n    <div class=\"xgplayer-icon\">\n    </div>\n    ${xgIconTips(this, 'CSSFULLSCREEN_TIPS', this.playerConfig.isHideTips)}\n    </xg-icon>`\n  }\n}\n","import Plugin, { POSITIONS, Util } from '../../plugin'\nimport BackSVG from '../assets/back.svg'\n\nexport default class TopBackIcon extends Plugin {\n  static get pluginName () {\n    return 'topbackicon'\n  }\n\n  static get defaultConfig () {\n    return {\n      position: POSITIONS.ROOT_TOP,\n      index: 0\n    }\n  }\n\n  afterCreate () {\n    this.initIcons()\n    this.onClick = (e) => {\n      e.preventDefault()\n      e.stopPropagation()\n      this.config.onClick(e)\n    }\n\n    this.bind(['click', 'touchend'], this.onClick)\n  }\n\n  registerIcons () {\n    return {\n      screenBack: { icon: BackSVG, class: 'xg-fullscreen-back' }\n    }\n  }\n\n  initIcons () {\n    const { icons } = this\n    this.appendChild(this.root, icons.screenBack)\n  }\n\n  show () {\n    Util.addClass(this.root, 'show')\n  }\n\n  hide () {\n    Util.removeClass(this.root, 'show')\n  }\n\n  render () {\n    return `<xg-icon class=\"xgplayer-back\">\n    </xg-icon>`\n  }\n}\n","import { Events, POSITIONS, Sniffer, Util } from '../../plugin'\nimport { xgIconTips } from '../common/iconTools'\nimport IconPlugin from '../common/iconPlugin'\nimport TopBackIcon from './backicon'\nimport FullScreenSvg from '../assets/requestFull.svg'\nimport ExitFullScreenSvg from '../assets/exitFull.svg'\nimport './index.scss'\n\n/**\n * @typedef { {\n *   position?: string,\n *   index?: number,\n *   useCssFullscreen?: boolean,\n *   rotateFullscreen?: boolean,\n *   useScreenOrientation?: boolean,\n *   lockOrientationType?: OrientationType,\n *   switchCallback?: () => any,\n *   target?: null | HTMLElement,\n *   disable?: boolean,\n *   needBackIcon?: boolean,\n *   [propName: string]: any\n * } } IFullscreenConfig\n */\nexport default class Fullscreen extends IconPlugin {\n  static get pluginName () {\n    return 'fullscreen'\n  }\n\n  /**\n   * @type IFullscreenConfig\n   */\n  static get defaultConfig () {\n    return {\n      position: POSITIONS.CONTROLS_RIGHT,\n      index: 0,\n      useCssFullscreen: false, // Whether to use the page full screen\n      rotateFullscreen: false, // Whether to enable rotating full screen\n      useScreenOrientation: false, // Whether to use ScreenOrientation lock after requestFullScreen if ScreenOrientation available\n      lockOrientationType: 'landscape', // Whether to lock screen if video width is greater than height\n      switchCallback: null, // Custom switch function\n      target: null, // Trigger Dom element\n      disable: false,\n      needBackIcon: false // Whether to enable the return button in the upper left corner of the full screen exit\n    }\n  }\n\n  afterCreate () {\n    super.afterCreate()\n    const { config, playerConfig } = this\n    if (config.disable) {\n      return\n    }\n\n    if (config.target) {\n      this.playerConfig.fullscreenTarget = this.config.target\n    }\n\n    const fullEl = Util.getFullScreenEl()\n\n    if (playerConfig.fullscreenTarget === fullEl) {\n      this.player.getFullscreen().catch(e=>{})\n    }\n\n    this.initIcons()\n\n    this.handleFullscreen = this.hook('fullscreenChange', this.toggleFullScreen, {\n      pre: (e) => {\n        const { fullscreen } = this.player\n        this.emitUserAction(e, 'switch_fullscreen', {\n          prop: 'fullscreen',\n          from: fullscreen,\n          to: !fullscreen\n        })\n      }\n    })\n\n    this.bind('.xgplayer-fullscreen', ['touchend', 'click'], this.handleFullscreen)\n\n    this.on(Events.FULLSCREEN_CHANGE, (isFullScreen) => {\n      const tipsDom = this.find('.xg-tips')\n      tipsDom && this.changeLangTextKey(tipsDom, isFullScreen ? this.i18nKeys.EXITFULLSCREEN_TIPS : this.i18nKeys.FULLSCREEN_TIPS)\n      this.animate(isFullScreen)\n    })\n    if (this.config.needBackIcon) {\n      this.topBackIcon = this.player.registerPlugin({\n        plugin: TopBackIcon,\n        options: {\n          config: {\n            onClick: (e) => {\n              this.handleFullscreen(e)\n            }\n          }\n        }\n      })\n    }\n    if (Sniffer.device === 'mobile') {\n      window.addEventListener('orientationchange', this._onOrientationChange)\n    }\n  }\n\n  /**\n   * @private\n   */\n  _onOrientationChange = (e) => {\n    if (this.player.fullscreen && this.config.rotateFullscreen) {\n      if (window.orientation === 90 || window.orientation === -90) {\n        this.player.setRotateDeg(0)\n      } else {\n        this.player.setRotateDeg(90)\n      }\n    }\n  }\n\n  registerIcons () {\n    return {\n      fullscreen: { icon: FullScreenSvg, class: 'xg-get-fullscreen' },\n      exitFullscreen: { icon: ExitFullScreenSvg, class: 'xg-exit-fullscreen' }\n    }\n  }\n\n  destroy () {\n    super.destroy()\n    this.unbind('.xgplayer-icon', Sniffer.device === 'mobile' ? 'touchend' : 'click', this.handleFullscreen)\n    if (Sniffer.device === 'mobile') {\n      window.removeEventListener('orientationchange', this._onOrientationChange)\n    }\n  }\n\n  initIcons () {\n    const { icons } = this\n    this.appendChild('.xgplayer-icon', icons.fullscreen)\n    this.appendChild('.xgplayer-icon', icons.exitFullscreen)\n  }\n\n  /**\n   * 切换全屏\n   * @param { Event } [e]\n   */\n  toggleFullScreen (e) {\n    if (e instanceof Event) {\n      e.preventDefault()\n      e.stopPropagation()\n    }\n    const { player, config } = this\n    const useCssFullscreen = config.useCssFullscreen === true || (typeof config.useCssFullscreen === 'function' && config.useCssFullscreen())\n    if (useCssFullscreen) {\n      if (player.fullscreen) {\n        player.exitCssFullscreen()\n      } else {\n        player.getCssFullscreen()\n      }\n      this.animate(player.fullscreen)\n    } else if (config.rotateFullscreen) {\n      if (player.fullscreen) {\n        player.exitRotateFullscreen()\n      } else {\n        player.getRotateFullscreen()\n      }\n      this.animate(player.fullscreen)\n    } else if (config.switchCallback && typeof config.switchCallback === 'function') {\n      config.switchCallback(player.fullscreen)\n    } else {\n      if (player.fullscreen) {\n        player.exitFullscreen()\n\n        if (config.useScreenOrientation) {\n          this.unlockScreen()\n        }\n      } else {\n        player.getFullscreen().catch(e => {})\n\n        if (config.useScreenOrientation && player.aspectRatio > 1) {\n          this.lockScreen(config.lockOrientationType)\n        }\n      }\n    }\n  }\n\n  /**\n   *\n   * @param { boolean } isFullScreen\n   */\n  animate (isFullScreen) {\n    isFullScreen ? this.setAttr('data-state', 'full') : this.setAttr('data-state', 'normal')\n    if (this.topBackIcon) {\n      if (isFullScreen) {\n        this.topBackIcon.show()\n        this.hide()\n      } else {\n        this.topBackIcon.hide()\n        this.show()\n      }\n    }\n  }\n\n  /**\n   * @returns\n   */\n  render () {\n    if (this.config.disable) {\n      return\n    }\n    const langKey = 'FULLSCREEN_TIPS'\n    return `<xg-icon class=\"xgplayer-fullscreen\">\n    <div class=\"xgplayer-icon\">\n    </div>\n    ${xgIconTips(this, langKey, this.playerConfig.isHideTips)}\n    </xg-icon>`\n  }\n\n  /**\n   * 锁定屏幕方向，只有部分移动端浏览器支持\n   * 兼容性参考：https://caniuse.com/mdn-api_screenorientation_lock\n   * @param {OrientationType} orientation\n   */\n  lockScreen (orientation) {\n    try {\n      screen.orientation.lock(orientation).catch(e => {})\n    } catch (e) {\n    }\n  }\n\n  /**\n   * 解锁屏幕方向锁定，只有部分移动端浏览器支持\n   */\n  unlockScreen () {\n    try {\n      screen.orientation.unlock().catch(e => {})\n    } catch (e) {\n    }\n  }\n}\n","import { Events, POSITIONS } from '../../plugin'\nimport { xgIconTips } from '../common/iconTools'\nimport IconPlugin from '../common/iconPlugin'\nimport PlaySvg from '../assets/play.svg'\nimport PauseSvg from '../assets/pause.svg'\nimport './index.scss'\n\nclass Play extends IconPlugin {\n  static get pluginName () {\n    return 'play'\n  }\n\n  static get defaultConfig () {\n    return {\n      position: POSITIONS.CONTROLS_LEFT,\n      index: 0,\n      disable: false\n    }\n  }\n\n  afterCreate () {\n    super.afterCreate()\n    const { config } = this\n    if (config.disable) {\n      return\n    }\n    this.initIcons()\n    this.bind(['touchend', 'click'], this.btnClick)\n\n    this.listenEvents()\n    this.animate(true)\n  }\n\n  listenEvents () {\n    const { player } = this\n    this.on([Events.PLAY, Events.PAUSE, Events.ERROR, Events.EMPTIED], () => {\n      this.animate(player.paused)\n    })\n  }\n\n  registerIcons () {\n    return {\n      play: { icon: PlaySvg, class: 'xg-icon-play' },\n      pause: { icon: PauseSvg, class: 'xg-icon-pause' }\n    }\n  }\n\n  btnClick = (e) => {\n    e.preventDefault()\n    e.stopPropagation()\n    const { player } = this\n    this.emitUserAction(e, 'switch_play_pause', { prop: 'paused', from: player.paused, to: !player.paused })\n    if (player.ended) {\n      player.replay()\n    } else if (player.paused) {\n      player.play()\n      this.animate(false)\n    } else {\n      player.pause()\n      this.animate(true)\n    }\n    return false\n  }\n\n  initIcons () {\n    const { icons } = this\n    this.appendChild('.xgplayer-icon', icons.play)\n    this.appendChild('.xgplayer-icon', icons.pause)\n  }\n\n  animate (paused) {\n    if (!this.player) {return}\n    const { i18nKeys } = this\n    const tipDom = this.find('.xg-tips')\n    if (paused) {\n      this.setAttr('data-state', 'pause')\n      tipDom && this.changeLangTextKey(tipDom, i18nKeys.PLAY_TIPS)\n    } else {\n      this.setAttr('data-state', 'play')\n      tipDom && this.changeLangTextKey(tipDom, i18nKeys.PAUSE_TIPS)\n    }\n  }\n\n  destroy () {\n    super.destroy()\n    this.unbind(['touchend', 'click'], this.btnClick)\n  }\n\n  render () {\n    if (this.config.disable) {\n      return\n    }\n    return `<xg-icon class=\"xgplayer-play\">\n    <div class=\"xgplayer-icon\">\n    </div>\n    ${xgIconTips(this, 'PLAY_TIPS', this.playerConfig.isHideTips)}\n    </xg-icon>`\n  }\n}\nexport default Play\n","import { Util } from '../../plugin'\n\nconst TPL = [\n  { tag: 'xg-cache', className: 'xgplayer-progress-cache', styleKey: 'cachedColor' },\n  { tag: 'xg-played', className: 'xgplayer-progress-played', styleKey: 'playedColor' }\n]\n\nexport default class InnerList {\n  constructor (args) {\n    this.fragments = args.fragments || []\n    if (this.fragments.length === 0) {\n      this.fragments.push({ percent: 1 })\n    }\n    this._callBack = args.actionCallback\n    this.fragConfig = {\n      fragFocusClass: args.fragFocusClass || 'inner-focus-point', // 'inner-focus',\n      fragAutoFocus: !!args.fragAutoFocus,\n      fragClass: args.fragClass || ''\n    }\n    this.style = args.style || {\n      playedColor: '',\n      cachedColor: '',\n      progressColor: ''\n    }\n    this.duration = 0\n    this.cachedIndex = 0\n    this.playedIndex = 0\n    this.focusIndex = -1\n  }\n\n  updateDuration (duration) {\n    this.duration = duration\n    let start = 0\n    const { fragments } = this\n    this.fragments = fragments.map(item => {\n      item.start = parseInt(start, 10)\n      item.end = parseInt(start + item.percent * this.duration, 10)\n      item.duration = parseInt(item.percent * this.duration, 10)\n      start += item.percent * this.duration\n      return item\n    })\n  }\n\n  updateProgress (type = 'played', data = { newIndex: 0, curIndex: 0, millisecond: 0 }) {\n    const { progressList, fragments } = this\n    if (progressList.length < 1) {\n      return\n    }\n    const { newIndex, curIndex, millisecond } = data\n    if (newIndex !== curIndex) {\n      progressList.map((item, index) => {\n        if (index < newIndex) {\n          item[type].style.width = '100%'\n        } else if (index > newIndex) {\n          item[type].style.width = 0\n        }\n      })\n    }\n    const curPFrag = fragments[newIndex]\n    const per = millisecond === 0 ? 0 : (millisecond - curPFrag.start) / curPFrag.duration\n    progressList[newIndex][type].style.width = per < 0 ? 0 : `${per * 100}%`\n  }\n\n  updateFocus (data) {\n    if (!this.fragConfig.fragAutoFocus || this.fragments.length < 2) {\n      return\n    }\n    if (!data) {\n      // 取消焦点\n      if (this.focusIndex > -1) {\n        this.unHightLight(this.focusIndex)\n        const _data = {\n          index: -1,\n          preIndex: this.focusIndex,\n          fragment: null\n        }\n        this._callBack && this._callBack(_data)\n        this.focusIndex = -1\n      }\n      return\n    }\n    const newPIndex = this.findIndex(data.currentTime * 1000, this.focusIndex)\n    if (newPIndex >= 0 && newPIndex !== this.focusIndex) {\n      this.focusIndex > -1 && this.unHightLight(this.focusIndex)\n      this.setHightLight(newPIndex)\n      const _data = {\n        index: newPIndex,\n        preIndex: this.focusIndex,\n        fragment: this.fragments[this.focusIndex]\n      }\n      this.focusIndex = newPIndex\n      this._callBack && this._callBack(_data)\n    }\n  }\n\n  update (data = { cached: 0, played: 0 }, duration) {\n    if (!this.duration || parseInt(duration * 1000, 10) !== this.duration) {\n      if (!duration && duration !== 0) {\n        return\n      }\n      this.updateDuration(parseInt(duration * 1000, 10))\n    }\n    const { playedIndex, cachedIndex } = this\n    if (Util.typeOf(data.played) !== 'Undefined') {\n      const newPIndex = this.findIndex(data.played * 1000, playedIndex)\n      if (newPIndex < 0) {\n        return\n      }\n      this.updateProgress('played', {\n        newIndex: newPIndex,\n        curIndex: playedIndex,\n        millisecond: parseInt(data.played * 1000, 10)\n      })\n      this.playedIndex = newPIndex\n    }\n\n    if (Util.typeOf(data.cached) !== 'Undefined') {\n      const newCIndex = this.findIndex(data.cached * 1000, cachedIndex)\n      if (newCIndex < 0) {\n        return\n      }\n      this.updateProgress('cached', {\n        newIndex: newCIndex,\n        curIndex: cachedIndex,\n        millisecond: parseInt(data.cached * 1000, 10)\n      })\n      this.cachedIndex = newCIndex\n    }\n  }\n\n  findIndex (time, curIndex) {\n    const { fragments } = this\n    if (!fragments || fragments.length === 0) {\n      return -1\n    }\n    if (fragments.length === 1) {\n      return 0\n    }\n    if (curIndex > -1 && curIndex < fragments.length && time > fragments[curIndex].start && time < fragments[curIndex].end) {\n      return curIndex\n    }\n    if (time > fragments[fragments.length - 1].start) {\n      return fragments.length - 1\n    }\n\n    for (let i = 0; i < fragments.length; i++) {\n      if (time > fragments[i].start && time <= fragments[i].end) {\n        curIndex = i\n        break\n      }\n    }\n    return curIndex\n  }\n\n  findHightLight () {\n    const children = this.root.children\n    for (let i = 0; i < children.length; i++) {\n      if (Util.hasClass(children[i], this.fragConfig.fragFocusClass)) {\n        return {\n          dom: children[i],\n          pos: children[i].getBoundingClientRect()\n        }\n      }\n    }\n  }\n\n  // 根据索引获取进度条片段\n  findFragment (index) {\n    const children = this.root.children\n    if (index < 0 || index >= children.length) {\n      return null\n    }\n    return {\n      dom: children[index],\n      pos: children[index].getBoundingClientRect()\n    }\n  }\n\n  unHightLight () {\n    const children = this.root.children\n    for (let i = 0; i < children.length; i++) {\n      Util.removeClass(children[i], this.fragConfig.fragFocusClass)\n    }\n  }\n\n  setHightLight (index) {\n    const children = this.root.children\n    if (index < children.length) {\n      Util.addClass(children[index], this.fragConfig.fragFocusClass)\n      return {\n        dom: children[index],\n        pos: children[index].getBoundingClientRect()\n      }\n    }\n  }\n\n  destroy () {\n    this.progressList = null\n    this.fragments = null\n    this.root.innerHTML = ''\n  }\n\n  /**\n   * 重置当前\n   * @param {*} newOptions\n   */\n  reset (newOptions) {\n    // 更新fragConfig\n    Object.keys(this.fragConfig).forEach(key => {\n      if (newOptions[key] !== undefined) {\n        this.fragConfig[key] = newOptions[key]\n      }\n    })\n    if (newOptions.fragments) {\n      this.fragments = newOptions.fragments.length === 0 ? [{ percent: 1 }] : newOptions.fragments\n      this.updateDuration(this.duration)\n      this.playedIndex = 0\n      this.cachedIndex = 0\n      // 移除分段信息\n      if (this.root) {\n        const _c = this.root.children\n        while (_c.length > 0) {\n          this.root.removeChild(_c[0])\n        }\n      }\n      // 重新渲染\n      this.render()\n    }\n  }\n\n  render () {\n    const { progressColor } = this.style\n    if (!this.root) {\n      this.root = Util.createDom('xg-inners', '', {}, 'progress-list')\n    }\n    if (this.fragments) {\n      const { fragClass, fragFocusClass } = this.fragConfig\n      this.progressList = this.fragments.map((item) => {\n        const inner = Util.createDom('xg-inner', '', {\n          style: progressColor ? `background:${progressColor}; flex: ${item.percent}` : `flex: ${item.percent}`\n        }, `${item.isFocus ? fragFocusClass : ''} xgplayer-progress-inner ${fragClass}`)\n\n        this.root.appendChild(inner)\n\n        TPL.forEach(item => {\n          inner.appendChild(Util.createDom(item.tag, '', {\n            style: item.styleKey ? `background: ${this.style[item.styleKey]}; width:0;` : 'width:0;'\n          }, item.className))\n        })\n\n        return {\n          cached: inner.children[0],\n          played: inner.children[1]\n        }\n      })\n    }\n    return this.root\n  }\n}\n","import Plugin, { Events, Util, POSITIONS, Sniffer } from '../../plugin'\nimport InnerList from './innerList'\nimport './index.scss'\n\n/**\n * @typedef {{\n *   position?:string,\n *   disable?: boolean,\n *   isDraggingSeek?: boolean, // 是否在拖拽的过程中更新currentTime\n *   closeMoveSeek?: boolean, // 是否关闭滑块seek能力\n *   isPauseMoving?: boolean, // 是否在move的时候暂停视频内容\n *   isCloseClickSeek?: boolean, // 是否关闭点击进度条的时候seek\n *   fragments?: Array<{percent: number}>,\n *   fragFocusClass?: string, // 进度条分段高亮类名\n *   fragAutoFocus?: boolean, // 是否hover的时候自动高亮\n *   miniMoveStep?: number,\n *   miniStartStep?: number,\n *   onMoveStart?: () => any, // 手势开始移动回调,\n *   onMoveEnd?: () => any, // 手势移动结束回调\n *   endedDiff?: number,\n *   [propName: string]: any\n * }} IProgressConfig\n */\n/**\n * 进度条组件\n */\n\n// 分段获取焦点显示的时候的两种class类型\nconst FRAGMENT_FOCUS_CLASS = {\n  POINT: 'inner-focus-point',\n  HIGHLIGHT: 'inner-focus-highlight'\n}\nclass Progress extends Plugin {\n  static get pluginName () {\n    return 'progress'\n  }\n\n  /**\n   * @type IProgressConfig\n   */\n  static get defaultConfig () {\n    return {\n      position: POSITIONS.CONTROLS_CENTER,\n      index: 0,\n      disable: false,\n      isDraggingSeek: true, // 是否在拖拽的过程中更新currentTime\n      closeMoveSeek: false, // 是否关闭滑块seek能力\n      isPauseMoving: false, // 是否在move的时候暂停视频内容\n      isCloseClickSeek: false, // 是否关闭点击进度条的时候seek\n      fragments: [{ percent: 1 }],\n      fragFocusClass: FRAGMENT_FOCUS_CLASS.POINT,\n      fragClass: '', // 内置进度条类名\n      fragAutoFocus: false, // 是否hover的时候自动高亮\n      miniMoveStep: 5,\n      miniStartStep: 2,\n      onMoveStart: () => {\n      }, // 手势开始移动回调\n      onMoveEnd: () => {}, // 手势移动结束回调\n      endedDiff: 0.2\n    }\n  }\n\n  static get FRAGMENT_FOCUS_CLASS () {\n    return FRAGMENT_FOCUS_CLASS\n  }\n\n  constructor (args) {\n    super(args)\n    /**\n     * @readonly\n     */\n    this.useable = false\n    /**\n     * @readonly\n     */\n    this.isProgressMoving = false\n\n    /**\n     * @private\n     */\n    this.__dragCallBacks = []\n    /**\n     * @private\n     */\n    this._state = {\n      now: -1,\n      direc: 0,\n      time: 0,\n      prePlayTime: -1\n    }\n\n    this._disableBlur = false\n\n    // 兼容旧版本\n    if (typeof this.config.isDragingSeek === 'boolean') {\n      console.warn('[XGPLAYER] \\'isDragingSeek\\' is deprecated, please use \\'isDraggingSeek\\' instead')\n      this.config.isDraggingSeek = this.config.isDragingSeek\n    }\n  }\n\n  get offsetDuration () {\n    return this.playerConfig.customDuration || this.player.offsetDuration || this.player.duration\n  }\n\n  get duration () {\n    return this.playerConfig.customDuration || this.player.duration\n  }\n\n  get timeOffset () {\n    return this.playerConfig.timeOffset || 0\n  }\n\n  get currentTime () {\n    const { offsetCurrentTime, currentTime } = this.player\n    return offsetCurrentTime >= 0 ? offsetCurrentTime : (currentTime + this.timeOffset)\n  }\n\n  changeState (useable = true) {\n    this.useable = useable\n  }\n\n  /**\n   * @param {string} [value]\n   * @returns\n   */\n  show (value) {\n    this.root && (this.root.style.display = 'flex')\n  }\n  /**\n   * @description 创建内部进度条，并挂载到xg-outer上,\n   *              并把一些对外API绑定在progress上供外部调用\n   *\n   */\n  _initInner (fragments = [], config = {}) {\n    if (!fragments || fragments.length === 0) {\n      fragments = [{ percent: 1 }]\n    }\n    const _c = {\n      fragments,\n      ...config,\n      actionCallback: (data) => {\n        this.emitUserAction('fragment_focus', 'fragment_focus', data)\n      }\n    }\n    if (!this.innerList) {\n      this.innerList = new InnerList(_c)\n      this.outer.insertBefore(this.innerList.render(), this.outer.children[0]);\n      ['findHightLight', 'unHightLight', 'setHightLight', 'findFragment'].map(item => {\n        this[item] = this.innerList[item].bind(this.innerList)\n      })\n    } else {\n      this.innerList.reset(_c)\n    }\n  }\n\n  _updateInnerFocus (data) {\n    this.innerList && this.innerList.updateFocus(data)\n  }\n\n  afterCreate () {\n    if (this.config.disable || this.playerConfig.isLive) {\n      return\n    }\n    this.pos = {\n      x: 0, // 水平方向位移\n      y: 0, // 垂直方向位移\n      moving: false, // 是否正在移动\n      isDown: false, // 是否mouseDown\n      isEnter: false, // 是否触发了mouseEnter\n      isLocked: false // 是否刚刚锁定回过进度条\n    }\n    this.outer = this.find('xg-outer')\n    const { fragFocusClass, fragAutoFocus, fragClass } = this.config\n    this._initInner(this.config.fragments, { fragFocusClass, fragAutoFocus, fragClass, style: this.playerConfig.commonStyle || {} })\n    if (Sniffer.device === 'mobile') {\n      this.config.isDraggingSeek = false\n      this.isMobile = true\n    }\n\n    this.progressBtn = this.find('.xgplayer-progress-btn')\n\n    this.listenEvents()\n    this.bindDomEvents()\n    this.initCustomStyle()\n  }\n\n  /**\n   * This method can be overridden.\n   * Eg. xgplayer-ads/ui/adProgress.js\n   */\n  listenEvents () {\n    this.on(Events.DURATION_CHANGE, () => {\n      this.onMouseLeave()\n    })\n\n    this.on(Events.TIME_UPDATE, () => {\n      this.onTimeupdate()\n    })\n\n    this.on(Events.SEEKED, () => {\n      this.onTimeupdate()\n      this.onCacheUpdate()\n    })\n\n    this.on(Events.PROGRESS, () => {\n      this.onCacheUpdate()\n    })\n\n    this.on(Events.ENDED, () => {\n      this.onCacheUpdate(true)\n      this.onTimeupdate(true)\n      this._state.now = 0\n    })\n\n    this.on(Events.EMPTIED, () => {\n      this.onReset()\n    })\n\n    this.on(Events.VIDEO_RESIZE, () => {\n      this.onVideoResize()\n    })\n  }\n\n  /**\n   * @description 配置更新响应，插件内置调用api, 播放器整体配置更新的时候调用\n   * @param {IProgressConfig} config\n   */\n  setConfig (config) {\n    let frags = null\n    Object.keys(config).forEach(key => {\n      this.config[key] = config[key]\n      if (key === 'fragments') {\n        frags = config[key]\n      }\n    })\n    if (frags) {\n      this._initInner(frags, config)\n    }\n  }\n\n  initCustomStyle () {\n    const { commonStyle } = this.playerConfig || {}\n    const { sliderBtnStyle } = commonStyle\n    const { progressBtn } = this\n    if (sliderBtnStyle) {\n      if (typeof sliderBtnStyle === 'string') {\n        progressBtn.style.boxShadow = sliderBtnStyle\n      } else if (typeof sliderBtnStyle === 'object') {\n        Object.keys(sliderBtnStyle).map(key => {\n          progressBtn.style[key] = sliderBtnStyle[key]\n        })\n      }\n    }\n  }\n\n  /**\n   * 触发某一类回调监听\n   * @param { string } type 类型 drag/dragend\n   * @param { any} data 具体数据\n   */\n  triggerCallbacks (type, data, event) {\n    if (this.__dragCallBacks.length > 0) {\n      this.__dragCallBacks.map(item => {\n        if (item && item.handler && item.type === type) {\n          try {\n            item.handler(data, event)\n          } catch (error) {\n            console.error(`[XGPLAYER][triggerCallbacks] ${item} error`, error)\n          }\n        }\n      })\n    }\n  }\n\n  /**\n   * 供外部插件添加回调\n   * @param {string} type 类型 drag/dragend\n   * @param {function} handle 回调函数句柄\n   */\n  addCallBack (type, handle) {\n    if (handle && typeof handle === 'function') {\n      this.__dragCallBacks.push({ type: type, handler: handle })\n    }\n  }\n\n  /**\n   * 供外部插件移除回调\n   * @param {string} type 类型 drag/dragend\n   * @param {Function} event 回调函数句柄\n   */\n  removeCallBack (type, event) {\n    const { __dragCallBacks } = this\n    let _index = -1\n    __dragCallBacks.map((item, index) => {\n      if (item && item.type === type && item.handler === event) {\n        _index = index\n      }\n    })\n    if (_index > -1) {\n      __dragCallBacks.splice(_index, 1)\n    }\n  }\n\n  /**\n   * @description 解除进度条的所动状态\n   * @returns\n   */\n  unlock () {\n    const { player, pos } = this\n    pos.isEnter = false\n    pos.isLocked = false\n    if (player.isMini) {\n      return\n    }\n    this.unbind('mousemove', this.onMoveOnly)\n    if (pos.isDown) {\n      this.unbind('mouseleave', this.onMouseLeave)\n      return\n    }\n    this.blur()\n  }\n\n  bindDomEvents () {\n    const { config } = this.player\n    this._mouseDownHandlerHook = this.hook('dragstart', this._mouseDownHandler)\n    this._mouseUpHandlerHook = this.hook('dragend', this._mouseUpHandler)\n    this._mouseMoveHandlerHook = this.hook('drag', this._mouseMoveHandler)\n\n    if (this.domEventType === 'touch' || this.domEventType === 'compatible') {\n      this.root.addEventListener('touchstart', this.onMouseDown)\n    }\n\n    if (this.domEventType === 'mouse' || this.domEventType === 'compatible') {\n      this.bind('mousedown', this.onMouseDown)\n      config.isMobileSimulateMode !== 'mobile' && this.bind('mouseenter', this.onMouseEnter)\n      this.bind('mouseover', this.onMouseOver)\n      this.bind('mouseout', this.onMouseOut)\n      // 避免触发videoClick 暂停/播放切换\n      this.player.root.addEventListener('click', this.onBodyClick, true)\n    }\n  }\n\n  focus () {\n    this.player.controls.pauseAutoHide()\n    Util.addClass(this.root, 'active')\n  }\n\n  blur () {\n    if (this._disableBlur) {\n      return\n    }\n    this.player.controls.recoverAutoHide()\n    Util.removeClass(this.root, 'active')\n  }\n\n  disableBlur () {\n    this._disableBlur = true\n  }\n\n  enableBlur () {\n    this._disableBlur = false\n  }\n\n  onMoveOnly = (e, data) => {\n    const { pos, config, player } = this\n    let ret = data\n    if (e) {\n      Util.event(e)\n      const _ePos = Util.getEventPos(e, player.zoom)\n      const x = player.rotateDeg === 90 ? _ePos.clientY : _ePos.clientX\n      if (pos.moving && Math.abs(pos.x - x) < config.miniMoveStep) {\n        return\n      }\n      pos.moving = true\n      pos.x = x\n      ret = this.computeTime(e, x)\n    }\n    this.triggerCallbacks('dragmove', ret, e)\n    this._updateInnerFocus(ret)\n  }\n\n  /**\n   * 避免mouseup的时候触发父辈节点的click事件，和单击视频区域切换暂停/播放互斥\n   * @param {*} e\n   * @returns\n   */\n  onBodyClick = (e) => {\n    if (!this.pos.isLocked) {\n      return\n    }\n    this.pos.isLocked = false\n    e.preventDefault()\n    e.stopPropagation()\n  }\n\n  _mouseDownHandler = (event, data) => {\n    this._state.time = data.currentTime\n    this.updateWidth(data.currentTime, data.seekTime, data.percent, 0)\n    this._updateInnerFocus(data)\n  }\n\n  _mouseUpHandler = (e, data) => {\n    const { pos } = this\n    pos.moving && this.updateWidth(data.currentTime, data.seekTime, data.percent, 2)\n  }\n\n  _mouseMoveHandler = (e, data) => {\n    const { _state, pos, config, player } = this\n    if (_state.time < data.currentTime) {\n      data.forward = true\n    } else {\n      data.forward = false\n    }\n    _state.time = data.currentTime\n    if (pos.isDown && !pos.moving) {\n      pos.moving = true\n      config.isPauseMoving && player.pause()\n      this.triggerCallbacks('dragstart', data, e)\n      this.emitUserAction('drag', 'dragstart', data)\n    }\n    this.updateWidth(data.currentTime, data.seekTime, data.percent, 1)\n    this.triggerCallbacks('dragmove', data, e)\n    this._updateInnerFocus(data)\n  }\n\n  onMouseDown = (e) => {\n    const { _state, player, pos, config, playerConfig } = this\n    const _ePos = Util.getEventPos(e, player.zoom)\n    const x = player.rotateDeg === 90 ? _ePos.clientY : _ePos.clientX\n    if (player.isMini || config.closeMoveSeek || (!playerConfig.allowSeekAfterEnded && player.ended)) {\n      return\n    }\n\n    if (!player.duration && !player.isPlaying) {\n      player.play()\n      return\n    }\n    e.stopPropagation()\n    // e.preventDefault()\n    this.focus()\n    Util.checkIsFunction(playerConfig.disableSwipeHandler) && playerConfig.disableSwipeHandler()\n    Util.checkIsFunction(config.onMoveStart) && config.onMoveStart()\n    Util.event(e)\n    pos.x = x\n    pos.isDown = true\n    pos.moving = false\n    _state.prePlayTime = player.currentTime\n\n    // 交互开始 禁止控制栏的自动隐藏功能\n    player.focus({ autoHide: false })\n    this.isProgressMoving = true\n    Util.addClass(this.progressBtn, 'active')\n\n    const ret = this.computeTime(e, x)\n    ret.prePlayTime = _state.prePlayTime\n    this._mouseDownHandlerHook(e, ret)\n\n    const eventType = e.type\n    if (eventType === 'touchstart') {\n      this.root.addEventListener('touchmove', this.onMouseMove)\n      this.root.addEventListener('touchend', this.onMouseUp)\n      this.root.addEventListener('touchcancel', this.onMouseUp)\n    } else {\n      this.unbind('mousemove', this.onMoveOnly)\n\n      document.addEventListener('mousemove', this.onMouseMove, false)\n      document.addEventListener('mouseup', this.onMouseUp, false)\n      // this.bind('mouseup', this.onMouseUp, false)\n    }\n    return true\n  }\n\n  onMouseUp = (e) => {\n    const { player, config, pos, playerConfig, _state } = this\n    if (!pos) {\n      return\n    }\n    e.stopPropagation()\n    e.preventDefault()\n    Util.checkIsFunction(playerConfig.enableSwipeHandler) && playerConfig.enableSwipeHandler()\n    Util.checkIsFunction(config.onMoveEnd) && config.onMoveEnd()\n    Util.event(e)\n    Util.removeClass(this.progressBtn, 'active')\n\n    const ret = this.computeTime(e, pos.x)\n    ret.prePlayTime = _state.prePlayTime\n    if (pos.moving) {\n      this.triggerCallbacks('dragend', ret, e)\n      this.emitUserAction('drag', 'dragend', ret)\n    } else {\n      this.triggerCallbacks('click', ret, e)\n      this.emitUserAction('click', 'click', ret)\n    }\n    this._mouseUpHandlerHook(e, ret)\n\n    pos.moving = false\n    pos.isDown = false\n    pos.x = 0\n    pos.y = 0\n    pos.isLocked = true\n    _state.prePlayTime = 0\n    _state.time = 0\n    const eventType = e.type\n    if (eventType === 'touchend' || eventType === 'touchcancel') {\n      this.root.removeEventListener('touchmove', this.onMouseMove)\n      this.root.removeEventListener('touchend', this.onMouseUp)\n      this.root.removeEventListener('touchcancel', this.onMouseUp)\n      // 交互结束 恢复控制栏的隐藏流程\n      this.blur()\n    } else {\n      document.removeEventListener('mousemove', this.onMouseMove, false)\n      document.removeEventListener('mouseup', this.onMouseUp, false)\n      if (!pos.isEnter) {\n        this.onMouseLeave(e)\n      } else {\n        playerConfig.isMobileSimulateMode !== 'mobile' && this.bind('mousemove', this.onMoveOnly)\n      }\n    }\n    // 延迟复位，状态复位要在dom相关时间回调执行之后\n    Util.setTimeout(this, () => {\n      this.resetSeekState()\n    }, 1)\n    // 交互结束 恢复控制栏的隐藏流程\n    player.focus()\n  }\n\n  onMouseMove = (e) => {\n    const { _state, pos, player, config } = this\n    if (Util.checkTouchSupport()) {\n      // e.stopPropagation()\n      e.preventDefault()\n    }\n    Util.event(e)\n    const _ePos = Util.getEventPos(e, player.zoom)\n    const x = player.rotateDeg === 90 ? _ePos.clientY : _ePos.clientX\n    const diff = Math.abs(pos.x - x)\n    if ((pos.moving && diff < config.miniMoveStep) || (!pos.moving && diff < config.miniStartStep)) {\n      return\n    }\n    pos.x = x\n    const ret = this.computeTime(e, x)\n    ret.prePlayTime = _state.prePlayTime\n    this._mouseMoveHandlerHook(e, ret)\n  }\n\n  onMouseOut = (e) => {\n    this.triggerCallbacks('mouseout', null, e)\n  }\n\n  onMouseOver = (e) => {\n    this.triggerCallbacks('mouseover', null, e)\n  }\n\n  onMouseEnter = (e) => {\n    const { player, pos } = this\n    if (pos.isDown || pos.isEnter || player.isMini || (!player.config.allowSeekAfterEnded && player.ended)) {\n      return\n    }\n    pos.isEnter = true\n    this.bind('mousemove', this.onMoveOnly)\n    this.bind('mouseleave', this.onMouseLeave)\n    // 计算预览位置\n    Util.event(e)\n    const _ePos = Util.getEventPos(e, player.zoom)\n    const x = player.rotateDeg === 90 ? _ePos.clientY : _ePos.clientX\n    const ret = this.computeTime(e, x)\n    this.triggerCallbacks('mouseenter', ret, e)\n    this.focus()\n  }\n\n  onMouseLeave = (e) => {\n    this.triggerCallbacks('mouseleave', null, e)\n    this.unlock()\n    this._updateInnerFocus(null)\n  }\n\n  onVideoResize = () => {\n    const { x, isDown, isEnter } = this.pos\n    if (isEnter && !isDown) {\n      const ret = this.computeTime(null, x)\n      this.onMoveOnly(null, ret)\n    }\n  }\n\n  /**\n   * @description 根据currenTime和占用百分比更新进度条\n   * @param {number} currentTime 需要更新到的时间\n   * @param {number} seekTime 实际seek的时间\n   * @param {number} percent 更新时间占比\n   * @param {number} type 触发类型 0-down 1-move 2-up\n   */\n  updateWidth (currentTime, seekTime, percent, type) {\n    const { config, player } = this\n    if (config.isCloseClickSeek && type === 0) {\n      return\n    }\n\n    const realTime = seekTime = seekTime >= player.duration ? player.duration - config.endedDiff : Number(seekTime).toFixed(1)\n\n    this.updatePercent(percent)\n    this.updateTime(currentTime)\n    if (type === 1 && (!config.isDraggingSeek || player.config.mediaType === 'audio')) {\n      return\n    }\n    this._state.now = realTime\n    this._state.direc = realTime > player.currentTime ? 0 : 1\n    player.seek(realTime)\n  }\n\n  computeTime (e, x) {\n    const { player } = this\n    const { width, height, top, left } = this.root.getBoundingClientRect()\n    let rWidth, rLeft\n    const clientX = x\n    if (player.rotateDeg === 90) {\n      rWidth = height\n      rLeft = top\n    } else {\n      rWidth = width\n      rLeft = left\n    }\n    let offset = clientX - rLeft\n    offset = offset > rWidth ? rWidth : (offset < 0 ? 0 : offset)\n    let percent = offset / rWidth\n    percent = percent < 0 ? 0 : (percent > 1 ? 1 : percent)\n    if(Number.isNaN(percent)){\n      percent = this.player.currentTime / this.offsetDuration\n    }\n    const currentTime = parseInt(percent * this.offsetDuration * 1000, 10) / 1000\n    const seekTime = Util.getCurrentTimeByOffset(currentTime, player.timeSegments)\n    return {\n      percent,\n      currentTime,\n      seekTime,\n      offset,\n      width: rWidth,\n      left: rLeft,\n      e\n    }\n  }\n\n  /**\n   * @description 更新时间插件，在拖拽状态下要接管时间插件的更新状态\n   *             本位置会和time插件交互\n   * @param {number} time 根据拖拽距离计算出的时间\n   */\n  updateTime (time) {\n    const { player, duration } = this\n    if (time > duration) {\n      time = duration\n    } else if (time < 0) {\n      time = 0\n    }\n    const timeIcon = player.plugins.time\n    if (timeIcon) {\n      timeIcon.updateTime(time)\n    }\n  }\n\n  /**\n   * @description 复位正在拖拽状态 ，拖拽的时候要避免timeupdate更新\n   */\n  resetSeekState () {\n    this.isProgressMoving = false\n    const timeIcon = this.player.plugins.time\n    timeIcon && timeIcon.resetActive()\n  }\n\n  /**\n   * @description 拖拽过程中更新UI\n   * @param {number} percent 小于0的小数\n   *\n   */\n  updatePercent (percent, notSeek) {\n    this.isProgressMoving = true\n    if (this.config.disable) {\n      return\n    }\n    percent = percent > 1 ? 1 : (percent < 0 ? 0 : percent)\n    this.progressBtn.style.left = `${percent * 100}%`\n    this.innerList.update({ played: percent * this.offsetDuration }, this.offsetDuration)\n    const { miniprogress } = this.player.plugins\n    miniprogress && miniprogress.update({ played: percent * this.offsetDuration }, this.offsetDuration)\n  }\n\n  /**\n   * @description 播放进度更新\n   * @param { boolean } isEnded 是否是播放结束的时候调用\n   * @returns\n   */\n  onTimeupdate (isEnded) {\n    const { player, _state, offsetDuration } = this\n    if ((player.isSeeking && player.media.seeking) || this.isProgressMoving || !player.hasStart) {\n      return\n    }\n    if (_state.now > -1) {\n      const abs = parseInt(_state.now * 1000, 10) - parseInt(player.currentTime * 1000, 10)\n      if ((_state.direc === 0 && abs > 300) || (_state.direc === 1 && abs > -300)) {\n        _state.now = -1\n        return\n      } else {\n        _state.now = -1\n      }\n    }\n    let time = this.currentTime // this.timeOffset + player.currentTime\n    time = Util.adjustTimeByDuration(time, offsetDuration, isEnded)\n    this.innerList.update({ played: time }, offsetDuration)\n    this.progressBtn.style.left = `${time / offsetDuration * 100}%`\n  }\n\n  /**\n   * @description 缓存进度更新\n   * @param { boolean } isEnded 是否是结束时触发\n   * @returns\n   */\n  onCacheUpdate (isEnded) {\n    const { player, duration } = this\n    if (!player) {\n      return\n    }\n    // 兼容设置了customDuration, 实际时长和要显示的时不一致问题\n    let _end = player.bufferedPoint.end\n    _end = Util.adjustTimeByDuration(_end, duration, isEnded)\n    this.innerList.update({ cached: _end }, duration)\n  }\n\n  onReset () {\n    this.innerList.update({ played: 0, cached: 0 }, 0)\n    this.progressBtn.style.left = '0%'\n  }\n\n  destroy () {\n    const { player } = this\n    this.thumbnailPlugin = null\n    this.innerList.destroy()\n    this.innerList = null\n    const { domEventType } = this\n    if (domEventType === 'touch' || domEventType === 'compatible') {\n      this.root.removeEventListener('touchstart', this.onMouseDown)\n      this.root.removeEventListener('touchmove', this.onMouseMove)\n      this.root.removeEventListener('touchend', this.onMouseUp)\n      this.root.removeEventListener('touchcancel', this.onMouseUp)\n    }\n    if (domEventType === 'mouse' || domEventType === 'compatible') {\n      this.unbind('mousedown', this.onMouseDown)\n      this.unbind('mouseenter', this.onMouseEnter)\n      this.unbind('mousemove', this.onMoveOnly)\n      this.unbind('mouseleave', this.onMouseLeave)\n      document.removeEventListener('mousemove', this.onMouseMove, false)\n      document.removeEventListener('mouseup', this.onMouseUp, false)\n      player.root.removeEventListener('click', this.onBodyClick, true)\n    }\n  }\n\n  render () {\n    if (this.config.disable || this.playerConfig.isLive) {\n      return\n    }\n    const controlsMode = this.player.controls ? this.player.controls.config.mode : ''\n    const className = controlsMode === 'bottom' ? 'xgplayer-progress-bottom' : ''\n    return `\n    <xg-progress class=\"xgplayer-progress ${className}\">\n      <xg-outer class=\"xgplayer-progress-outer\">\n        <xg-progress-btn class=\"xgplayer-progress-btn\"></xg-progress-btn>\n      </xg-outer>\n    </xg-progress>\n    `\n  }\n}\n\nexport default Progress\n","import Plugin, { Util, Events, POSITIONS } from '../../plugin'\nimport './index.scss'\n\nclass Time extends Plugin {\n  static get pluginName () {\n    return 'time'\n  }\n\n  static get defaultConfig () {\n    return {\n      position: POSITIONS.CONTROLS_LEFT,\n      index: 2,\n      disable: false\n    }\n  }\n\n  constructor (args) {\n    super(args)\n    this.isActiving = false\n  }\n\n  get duration () {\n    const { offsetDuration, duration } = this.player\n    return this.playerConfig.customDuration || offsetDuration || duration\n  }\n\n  get currentTime () {\n    const { offsetCurrentTime, currentTime } = this.player\n    return offsetCurrentTime >= 0 ? offsetCurrentTime : currentTime\n  }\n\n  get timeOffset () {\n    return this.playerConfig.timeOffset || 0\n  }\n\n  afterCreate () {\n    const constrolsMode = this.player.controls.config.mode\n    this.mode = constrolsMode === 'flex' ? 'flex' : 'normal'\n    if (this.config.disable) {\n      return\n    }\n    if (this.mode === 'flex') {\n      this.createCenterTime()\n      this.root.style.display = 'none'\n    }\n    this.durationDom = this.find('.time-duration')\n    this.timeDom = this.find('.time-current')\n\n    this.listenEvents()\n  }\n\n  /**\n   * This method can be overridden.\n   * Eg. xgplayer-ads/ui/adTime.js\n   */\n  listenEvents () {\n    this.on([Events.DURATION_CHANGE, Events.SEEKED, Events.TIME_UPDATE], (e) => {\n      if (e.eventName === 'durationchange') {\n        this.isActiving = false\n      }\n      this.onTimeUpdate()\n    })\n\n    this.on(Events.ENDED, () => {\n      // 因为customDuration存在，最终播放currentTime可能和显示的duration不统一，所以在ended的时候修正\n      this.onTimeUpdate(true)\n    })\n\n    this.on(Events.EMPTIED, () => {\n      this.onReset()\n    })\n  }\n\n  /**\n   * @param {string} [value]\n   * @returns\n   */\n  show (value) {\n    if (this.mode === 'flex') {\n      this.centerCurDom && (this.centerCurDom.style.display = 'block')\n      this.centerDurDom && (this.centerDurDom.style.display = 'block')\n      return\n    }\n    this.root.style.display = 'block'\n  }\n\n  hide () {\n    if (this.mode === 'flex') {\n      this.centerCurDom && (this.centerCurDom.style.display = 'none')\n      this.centerDurDom && (this.centerDurDom.style.display = 'none')\n      return\n    }\n    this.root.style.display = 'none'\n  }\n\n  onTimeUpdate (isEnded) {\n    const { player, config, duration } = this\n    if (config.disable || this.isActiving || !player.hasStart) {\n      return\n    }\n    let current = this.currentTime + this.timeOffset\n    current = Util.adjustTimeByDuration(current, duration, isEnded)\n    if (this.mode === 'flex') {\n      this.centerCurDom.innerHTML = this.minWidthTime(Util.format(current))\n      if (duration !== Infinity && duration > 0) {\n        this.centerDurDom.innerHTML = Util.format(duration)\n      }\n    } else {\n      this.timeDom.innerHTML = this.minWidthTime(Util.format(current))\n      if (duration !== Infinity && duration > 0) {\n        this.durationDom.innerHTML = Util.format(duration)\n      }\n    }\n  }\n\n  onReset () {\n    if (this.mode === 'flex') {\n      this.centerCurDom.innerHTML = this.minWidthTime(Util.format(0))\n      this.centerDurDom.innerHTML = Util.format(0)\n    } else {\n      this.timeDom.innerHTML = this.minWidthTime(Util.format(0))\n      this.durationDom.innerHTML = Util.format(0)\n    }\n  }\n\n  createCenterTime () {\n    const { player } = this\n    if (!player.controls || !player.controls.center) {\n      return\n    }\n    const center = player.controls.center\n    this.centerCurDom = Util.createDom(\n      'xg-icon',\n      '00:00',\n      {},\n      'xgplayer-time xg-time-left'\n    )\n    this.centerDurDom = Util.createDom(\n      'xg-icon',\n      '00:00',\n      {},\n      'xgplayer-time xg-time-right'\n    )\n    center.children.length > 0\n      ? center.insertBefore(this.centerCurDom, center.children[0])\n      : center.appendChild(this.centerCurDom)\n    center.appendChild(this.centerDurDom)\n    this.extraEls = [this.centerCurDom, this.centerDurDom]\n  }\n\n  afterPlayerInit () {\n    const { config } = this\n    if (this.duration === Infinity || this.playerConfig.isLive) {\n      Util.hide(this.durationDom)\n      Util.hide(this.timeDom)\n      Util.hide(this.find('.time-separator'))\n      Util.show(this.find('.time-live-tag'))\n    } else {\n      Util.hide(this.find('.time-live-tag'))\n    }\n    if (config.hide) {\n      this.hide()\n      return\n    }\n    this.show()\n  }\n\n  changeLiveState (isLive) {\n    if (isLive) {\n      Util.hide(this.durationDom)\n      Util.hide(this.timeDom)\n      Util.hide(this.find('.time-separator'))\n      Util.show(this.find('.time-live-tag'))\n    } else {\n      Util.hide(this.find('.time-live-tag'))\n      Util.show(this.find('.time-separator'))\n      Util.show(this.durationDom)\n      Util.show(this.timeDom)\n    }\n  }\n\n  updateTime (time) {\n    this.isActiving = true\n    if ((!time && time !== 0) || time > this.duration) {\n      return\n    }\n    if (this.mode === 'flex') {\n      this.centerCurDom.innerHTML = this.minWidthTime(Util.format(time))\n      return\n    }\n    this.timeDom.innerHTML = this.minWidthTime(Util.format(time))\n  }\n\n  minWidthTime (timeStr) {\n    return timeStr\n      .split(':')\n      .map(value => `<span class=\"time-min-width\">${value}</span>`)\n      .join(':')\n  }\n\n  resetActive () {\n    const { player } = this\n    const updateState = () => {\n      this.isActiving = false\n    }\n    this.off(Events.SEEKED, updateState)\n    if (player.isSeeking && player.media.seeking) {\n      this.once(Events.SEEKED, updateState)\n    } else {\n      this.isActiving = false\n    }\n  }\n\n  destroy () {\n    const { center } = this.player.controls\n    this.centerCurDom && center.removeChild(this.centerCurDom)\n    this.centerCurDom = null\n    this.centerDurDom && center.removeChild(this.centerDurDom)\n    this.centerDurDom = null\n  }\n\n  render () {\n    if (this.config.disable) {\n      return\n    }\n    return `<xg-icon class=\"xgplayer-time\">\n    <span class=\"time-current\">00:00</span>\n    <span class=\"time-separator\">/</span>\n    <span class=\"time-duration\">00:00</span>\n    <span class=\"time-live-tag\">${this.i18n.LIVE_TIP}</span>\n    </xg-icon>`\n  }\n}\nexport default Time\n","import Plugin, { Util, Events, Sniffer, POSITIONS } from '../../plugin'\nimport volumeLargeSvg from '../assets/volumeLarge.svg'\nimport volumeSmallSvg from '../assets/volumeSmall.svg'\nimport volumeMutedSvg from '../assets/volumeMuted.svg'\nimport './index.scss'\n\n/**\n * @typedef {{\n *   position?: string, // [可选]插件挂载的dom\n *   index?: number // [可选]插件在播放器中挂载的位置\n *   disable?: boolean, // [可选]是否禁用插件交互行为\n *   showValueLabel?: boolean, // [可选]是否显示当前滑动的音量数值\n *   default?: number // [可选]默认\n *   [propName: string]: any\n * }} IVolumeConfig\n */\n\nclass Volume extends Plugin {\n  static get pluginName () {\n    return 'volume'\n  }\n\n  /**\n   * @type IVolumeConfig\n   */\n  static get defaultConfig () {\n    return {\n      position: POSITIONS.CONTROLS_RIGHT, // [可选]插件挂载的dom\n      index: 1, // [可选]插件在播放器中挂载的位置\n      disable: false, // [可选]是否禁用插件交互行为\n      showValueLabel: false, // [可选]是否显示当前滑动的音量数值\n      default: 0.6, // [可选]默认音量\n      miniVolume: 0.2 // 静音恢复的时候最小音量\n    }\n  }\n\n  registerIcons () {\n    return {\n      volumeSmall: { icon: volumeSmallSvg, class: 'xg-volume-small' },\n      volumeLarge: { icon: volumeLargeSvg, class: 'xg-volume' },\n      volumeMuted: { icon: volumeMutedSvg, class: 'xg-volume-mute' }\n    }\n  }\n\n  afterCreate () {\n    this._timerId = null\n    this._d = {\n      isStart: false,\n      isMoving: false,\n      isActive: false\n    }\n    if (this.config.disable) {\n      return\n    }\n\n    this.initIcons()\n\n    const { commonStyle, volume } = this.playerConfig\n    if (commonStyle.volumeColor) {\n      this.find('.xgplayer-drag').style.backgroundColor = commonStyle.volumeColor\n    }\n    this.changeMutedHandler = this.hook('mutedChange', (e) => {\n      this.changeMuted(e)\n    }, {\n      pre: (e) => {\n        e.preventDefault()\n        e.stopPropagation()\n      }\n    })\n\n    this._onMouseenterHandler = this.hook('mouseenter', this.onMouseenter)\n    this._onMouseleaveHandler = this.hook('mouseleave', this.onMouseleave)\n\n    if (!(Sniffer.device === 'mobile') && this.playerConfig.isMobileSimulateMode !== 'mobile') {\n      this.bind('mouseenter', this._onMouseenterHandler)\n\n      this.bind(['blur', 'mouseleave'], this._onMouseleaveHandler)\n\n      this.bind('.xgplayer-slider', 'mousedown', this.onBarMousedown)\n      this.bind('.xgplayer-slider', 'mousemove', this.onBarMouseMove)\n      this.bind('.xgplayer-slider', 'mouseup', this.onBarMouseUp)\n    }\n\n    this.bind('.xgplayer-icon', ['touchend', 'click'], this.changeMutedHandler)\n\n    this.on(Events.VOLUME_CHANGE, this.onVolumeChange)\n    this.once(Events.LOADED_DATA, this.onVolumeChange)\n\n    if (Util.typeOf(volume) !== 'Number') {\n      this.player.volume = this.config.default\n    }\n\n    this.onVolumeChange()\n  }\n\n  onBarMousedown = (e) => {\n    const { player } = this\n    const bar = this.find('.xgplayer-bar')\n    Util.event(e)\n\n    const barRect = bar.getBoundingClientRect()\n    const pos = Util.getEventPos(e, player.zoom)\n    const height = barRect.height - (pos.clientY - barRect.top)\n    pos.h = height\n    pos.barH = barRect.height\n    this.pos = pos\n    // 差值小于0，说明点击的不是音量滑块位置 不做响应\n    if (height < -2) {\n      return\n    }\n    this.updateVolumePos(height, e)\n    document.addEventListener('mouseup', this.onBarMouseUp)\n    this._d.isStart = true\n    return false\n  }\n\n  onBarMouseMove = (e) => {\n    const { _d } = this\n    if (!_d.isStart) {\n      return\n    }\n    const { pos, player } = this\n    e.preventDefault()\n    e.stopPropagation()\n    Util.event(e)\n    const _ePos = Util.getEventPos(e, player.zoom)\n    _d.isMoving = true\n    const w = pos.h - _ePos.clientY + pos.clientY\n    if (w > pos.barH) {\n      return\n    }\n    this.updateVolumePos(w, e)\n  }\n\n  onBarMouseUp = (e) => {\n    Util.event(e)\n    document.removeEventListener('mouseup', this.onBarMouseUp)\n    const { _d } = this\n    _d.isStart = false\n    _d.isMoving = false\n  }\n\n  updateVolumePos (height, event) {\n    const { player } = this\n    const drag = this.find('.xgplayer-drag')\n    const bar = this.find('.xgplayer-bar')\n    if (!bar || !drag) {\n      return\n    }\n    const now = parseInt(height / bar.getBoundingClientRect().height * 1000, 10)\n    drag.style.height = `${height}px`\n    const to = Math.max(Math.min(now / 1000, 1), 0)\n    const props = {\n      volume: {\n        from: player.volume,\n        to\n      }\n    }\n    if (player.muted) {\n      props.muted = {\n        from: true,\n        to: false\n      }\n    }\n    this.emitUserAction(event, 'change_volume', { muted: player.muted, volume: player.volume, props })\n    player.volume = Math.max(Math.min(now / 1000, 1), 0)\n    player.muted && (player.muted = false)\n\n    if (this.config.showValueLabel) {\n      this.updateVolumeValue()\n    }\n  }\n\n  /**\n   * 修改音量数值标签\n   *\n   * @memberof Volume\n   */\n  updateVolumeValue () {\n    const { volume, muted } = this.player\n    const $labelValue = this.find('.xgplayer-value-label')\n    const vol = Math.max(Math.min(volume, 1), 0)\n\n    // Math.ceil有精度问题，比如Math.ceil(0.55 * 100) == 56，因此这里使用Math.round\n    // 0.58 * 100 === 57.99999999999999\n    // 0.55 * 100 === 55.00000000000001\n    $labelValue.innerText = muted ? 0 : Math.round(vol * 100)\n  }\n\n  /**\n   * @desc 聚焦\n   */\n  focus () {\n    const { player } = this\n    player.focus({ autoHide: false })\n    if (this._timerId) {\n      Util.clearTimeout(this, this._timerId)\n      this._timerId = null\n    }\n    Util.addClass(this.root, 'slide-show')\n  }\n\n  /**\n   * 失去焦点\n   * @param { number } delay 延迟隐藏时长，ms\n   * @param { boolean } isForce 是否立即隐藏控制栏\n   * @param { Event} [e] 事件\n   * @returns\n   */\n  unFocus (delay = 100, isForce = true, e) {\n    const { _d, player } = this\n    if (_d.isActive) {\n      return\n    }\n    if (this._timerId) {\n      Util.clearTimeout(this, this._timerId)\n      this._timerId = null\n    }\n    this._timerId = Util.setTimeout(this, () => {\n      if (!_d.isActive) {\n        isForce ? player.blur() : player.focus()\n        Util.removeClass(this.root, 'slide-show')\n        _d.isStart && this.onBarMouseUp(e)\n      }\n      this._timerId = null\n    }, delay)\n  }\n\n  onMouseenter = (e) => {\n    this._d.isActive = true\n    this.focus()\n    this.emit('icon_mouseenter', {\n      pluginName: this.pluginName\n    })\n  }\n\n  onMouseleave = (e) => {\n    this._d.isActive = false\n    this.unFocus(100, false, e)\n    this.emit('icon_mouseleave', {\n      pluginName: this.pluginName\n    })\n  }\n\n  changeMuted (e) {\n    // e.preventDefault()\n    e && e.stopPropagation()\n    const { player, _d } = this\n    // 取消bar的状态\n    _d.isStart && this.onBarMouseUp(e)\n    this.emitUserAction(e, 'change_muted', {\n      muted: player.muted,\n      volume: player.volume,\n      props: {\n        muted: {\n          from: player.muted,\n          to: !player.muted\n        }\n      }\n    })\n    if (player.volume > 0) {\n      player.muted = !player.muted\n    }\n    if (player.volume < 0.01) {\n      player.volume = this.config.miniVolume\n    }\n  }\n\n  onVolumeChange = (e) => {\n    if (!this.player) {\n      return\n    }\n    const { muted, volume } = this.player\n    if (!this._d.isMoving) {\n      this.find('.xgplayer-drag').style.height = muted || volume === 0 ? '4px' : `${volume * 100}%`\n      if (this.config.showValueLabel) {\n        this.updateVolumeValue()\n      }\n    }\n    this.animate(muted, volume)\n  }\n\n  animate (muted, volume) {\n    if (muted || volume === 0) {\n      this.setAttr('data-state', 'mute')\n    } else if (volume < 0.5 && this.icons.volumeSmall) {\n      this.setAttr('data-state', 'small')\n    } else {\n      this.setAttr('data-state', 'normal')\n    }\n  }\n\n  initIcons () {\n    const { icons } = this\n    this.appendChild('.xgplayer-icon', icons.volumeSmall)\n    this.appendChild('.xgplayer-icon', icons.volumeLarge)\n    this.appendChild('.xgplayer-icon', icons.volumeMuted)\n  }\n\n  destroy () {\n    if (this._timerId) {\n      Util.clearTimeout(this, this._timerId)\n      this._timerId = null\n    }\n    this.unbind('mouseenter', this.onMouseenter)\n\n    this.unbind(['blur', 'mouseleave'], this.onMouseleave)\n\n    this.unbind('.xgplayer-slider', 'mousedown', this.onBarMousedown)\n    this.unbind('.xgplayer-slider', 'mousemove', this.onBarMouseMove)\n    this.unbind('.xgplayer-slider', 'mouseup', this.onBarMouseUp)\n    document.removeEventListener('mouseup', this.onBarMouseUp)\n    this.unbind('.xgplayer-icon', Sniffer.device === 'mobile' ? 'touchend' : 'click', this.changeMutedHandler)\n  }\n\n  render () {\n    if (this.config.disable) {\n      return\n    }\n    const volume = this.config.default || this.player.volume\n    const isShowVolumeValue = this.config.showValueLabel\n    return `\n    <xg-icon class=\"xgplayer-volume\" data-state=\"normal\">\n      <div class=\"xgplayer-icon\">\n      </div>\n      <xg-slider class=\"xgplayer-slider\">\n        ${isShowVolumeValue ? `<div class=\"xgplayer-value-label\">${volume * 100}</div>` : ''}\n        <div class=\"xgplayer-bar\">\n          <xg-drag class=\"xgplayer-drag\" style=\"height: ${volume * 100}%\"></xg-drag>\n        </div>\n      </xg-slider>\n    </xg-icon>`\n  }\n}\nexport default Volume\n","import BasePlugin, { Events, Util } from '../../plugin'\nimport XG_DEBUG from '../../utils/debug'\nfunction now () {\n  return new Date().getTime()\n}\n\nconst LOG_TYPES = {\n  LOAD_START: 'loadstart',\n  LOADED_DATA: 'loadeddata',\n  FIRST_FRAME: 'firstFrame',\n  WAIT_START: 'waitingStart',\n  WAIT_END: 'waitingEnd',\n  SEEK_START: 'seekStart',\n  SEEK_END: 'seekEnd'\n}\nclass XGLogger extends BasePlugin {\n  static get pluginName () {\n    return 'xgLogger'\n  }\n\n  static get defaultConfig () {\n    return {\n      waitTimeout: 10000\n    }\n  }\n\n  afterCreate () {\n    this._onReset()\n    this._waitType = 'firstFrame'\n\n    this._initOnceEvents()\n\n    this.newPointTime = now()\n    // 初始化到首帧耗时 new -> loadeddata\n    this.loadedCostTime = 0\n    // 初始化到开始请求耗时 new -> loadstart\n    this.startCostTime = 0\n\n    this.on(Events.LOAD_START, () => {\n      const { _state } = this\n      const { autoplayStart, isFFSend } = _state\n      this.startCostTime = now() - this.newPointTime\n      XG_DEBUG.logInfo(`[xgLogger]${this.player.playerId} LOAD_START`, `autoplayStart:${autoplayStart} isFFSend:${isFFSend} startCostTime:${this.startCostTime} newPointTime${this.newPointTime}`)\n      if (isFFSend) {\n        return\n      }\n      !_state.isLs && this.emitLog(LOG_TYPES.LOAD_START, {})\n      _state.isLs = true\n      _state.isTimeUpdate = false\n      _state.isFFLoading = true\n      this.pt = now()\n      this.vt = 0\n      this.fvt = 0 // 首帧耗时 loadstart -> loadeddata\n      this._initOnceEvents()\n      this._onWaitingLoadStart()\n    })\n\n    this.on(Events.LOADED_DATA, () => {\n      this.vt = now()\n      this.fvt = this.vt - this.pt\n      this.loadedCostTime = this.vt - this.newPointTime\n      const { isTimeUpdate, isFFSend, autoplayStart } = this._state\n      XG_DEBUG.logInfo(`[xgLogger]${this.player.playerId} LOADED_DATA`, `fvt:${this.fvt} isTimeUpdate:${this._state.isTimeUpdate} loadedCostTime:${this.loadedCostTime}`)\n      if (isTimeUpdate || autoplayStart) {\n        this._sendFF('loadedData')\n      }\n      if (!isFFSend) {\n        this.emitLog(LOG_TYPES.LOADED_DATA, {})\n      }\n      this.suspendWaitingStatus('loadeddata')\n    })\n\n    this.on(Events.SEEKING, this._onSeeking)\n    this.on(Events.SEEKED, this._onSeeked)\n\n    this.on(Events.DESTROY, () => {\n      this.endState('destroy')\n    })\n\n    this.on(Events.URL_CHANGE, () => {\n      this.endState('urlChange')\n      XG_DEBUG.logInfo(`[xgLogger]${this.player.playerId} URL_CHANGE`)\n      this._state.isFFSend && this._onReset()\n    })\n\n    this.on([Events.PLAYING, Events.CANPLAY], this._onPlaying)\n\n    this.on(Events.WAITING, this._onWaiting)\n    this.on(Events.ERROR, this._onError)\n    this.on(Events.RESET, () => {\n      XG_DEBUG.logInfo(`[xgLogger]${this.player.playerId} RESET`)\n      this.endState('reset')\n      this._initOnceEvents()\n      this._onReset()\n    })\n  }\n\n  _initOnceEvents () {\n    this.off(Events.AUTOPLAY_STARTED, this._onAutoplayStart)\n    this.off(Events.TIME_UPDATE, this._onTimeupdate)\n    this.once(Events.AUTOPLAY_STARTED, this._onAutoplayStart)\n    this.once(Events.TIME_UPDATE, this._onTimeupdate)\n  }\n\n  _sendFF (endType) {\n    this.s = now()\n    const { isFFLoading, isFFSend } = this._state\n    XG_DEBUG.logInfo(`[xgLogger]${this.player.playerId} _sendFF`, `${endType} fvt:${this.fvt} isFFLoading:${isFFLoading} !isFFSend:${!isFFSend}`)\n    if (this.vt > 0 && isFFLoading && !isFFSend) {\n      XG_DEBUG.logInfo(`[xgLogger]${this.player.playerId} emitLog_firstFrame`, endType)\n      this._state.isFFLoading = false\n      this._state.isFFSend = true\n      this.emitLog(LOG_TYPES.FIRST_FRAME, { fvt: this.fvt, costTime: this.fvt, vt: this.vt, startCostTime: this.startCostTime, loadedCostTime: this.loadedCostTime })\n    }\n  }\n\n  _onTimeupdate = () => {\n    this._state.isTimeUpdate = true\n    if (this._state.autoplayStart) {\n      XG_DEBUG.logInfo(`[xgLogger]${this.player.playerId} _onTimeupdate`)\n      this._sendFF('onTimeupdate')\n    }\n  }\n\n  _onAutoplayStart = () => {\n    XG_DEBUG.logInfo(`[xgLogger]${this.player.playerId} _onAutoplayStart`)\n    this._state.autoplayStart = true\n    this.vt && this._sendFF('onAutoplayStart')\n  }\n\n  _onReset = () => {\n    this._state = {\n      autoplayStart: false, // 是否已经自动起播\n      isFFLoading: false, // LOAD_START是否已经触发\n      isTimeUpdate: false, // 第一次timeupdate是否已经触发\n      isFFSend: false, // 首帧事件是否已经触发\n      isLs: false // loadstart是否已经发送\n    }\n    this.vt = 0\n    this.pt = 0\n    this.fvt = 0\n    this.newPointTime = now()\n    this.loadedCostTime = 0\n    this.startCostTime = 0\n    this._isSeeking = false\n    this.seekingStart = 0\n    this.waitingStart = 0\n    this.fixedWaitingStart = 0\n    this._isWaiting = false\n    this._waitTimer && Util.clearTimeout(this, this._waitTimer)\n    this._waittTimer && Util.clearTimeout(this, this._waittTimer)\n    this._waitTimer = null\n    this._waittTimer = null\n    this._waitType = 0 // 0 - 普通卡顿 1-起播卡顿 2-seek卡顿\n  }\n\n  _onSeeking = () => {\n    if (this.seekingStart) {\n      return\n    }\n    this.suspendWaitingStatus('seek')\n    this.seekingStart = now()\n    this.emitLog(LOG_TYPES.SEEK_START, { start: now() })\n  }\n\n  _onSeeked = () => {\n    this.suspendSeekingStatus('seeked')\n  }\n\n  _onWaitingLoadStart = () => {\n    if (this._isWaiting || this.vt) {\n      return\n    }\n    this._isWaiting = true\n    this.waitingStart = now()\n    this.fixedWaitingStart = now()\n    this._waitType = 1\n    this.emitLog(LOG_TYPES.WAIT_START, { fixedStart: this.fixedWaitingStart, start: this.waitingStart, type: 1, endType: 'loadstart' })\n  }\n\n  _onWaiting = () => {\n    // 普通卡顿起播之前不产生\n    if (this._isWaiting || !this.vt) {\n      return\n    }\n    // 卡顿标记开始\n    this._isWaiting = true\n    if (!this.vt) {\n      this._waitType = 1\n    } else if (this.seekingStart) {\n      this._waitType = 2\n    } else {\n      this._waitType = 0\n    }\n    // 原始卡顿耗时起始时间\n    this.fixedWaitingStart = now()\n    this._waitTimer = Util.setTimeout(this, () => {\n      if (this._isWaiting) {\n        this.waitingStart = now()\n        Util.clearTimeout(this, this._waitTimer)\n        this._waitTimer = null\n        this._startWaitTimeout()\n        this.emitLog(LOG_TYPES.WAIT_START, { fixedStart: this.fixedWaitingStart, start: this.waitingStart, type: this._waitType, endType: this._waitType === 2 ? 'seek' : 'playing' })\n      }\n    }, 200)\n  }\n\n  _onError = () => {\n    this.suspendSeekingStatus('error')\n    this.suspendWaitingStatus('error')\n  }\n\n  _startWaitTimeout () {\n    if (this._waittTimer) {\n      Util.clearTimeout(this, this._waittTimer)\n    }\n    this._waittTimer = Util.setTimeout(this, () => {\n      this.suspendWaitingStatus('timeout')\n      Util.clearTimeout(this, this._waittTimer)\n      this._waittTimer = null\n    }, this.config.waitTimeout)\n  }\n\n  _onPlaying = () => {\n    this._isWaiting && this.suspendWaitingStatus('playing')\n  }\n\n  endState (endType) {\n    this.suspendWaitingStatus(endType)\n    this.suspendSeekingStatus(endType)\n  }\n\n  suspendSeekingStatus (endType) {\n    if (!this.seekingStart) {\n      return\n    }\n    const _now = now()\n    const _cost = _now - this.seekingStart\n    this.seekingStart = 0\n    this.emitLog(LOG_TYPES.SEEK_END, { end: _now, costTime: _cost, endType })\n  }\n\n  suspendWaitingStatus (endType) {\n    if (this._waitTimer) {\n      Util.clearTimeout(this, this._waitTimer)\n      this._waitTimer = null\n    }\n    if (this._waittTimer) {\n      Util.clearTimeout(this, this._waittTimer)\n      this._waittTimer = null\n    }\n    this._isWaiting = false\n    if (!this.waitingStart) {\n      return\n    }\n    const _now = now()\n    const _cost = _now - this.waitingStart\n    const _fixedCost = _now - this.fixedWaitingStart\n    const { waitTimeout } = this.config\n    this._isWaiting = false\n    this.waitingStart = 0\n    this.fixedWaitingStart = 0\n    this.emitLog(LOG_TYPES.WAIT_END, {\n      fixedCostTime: _fixedCost > waitTimeout ? waitTimeout : _fixedCost,\n      costTime: _cost > waitTimeout ? waitTimeout : _cost,\n      type: endType === 'loadeddata' ? 1 : this._waitType,\n      endType: this._waitType === 2 ? 'seek' : endType\n    })\n  }\n\n  emitLog (eventType, data) {\n    const { player } = this\n    this.emit(Events.XGLOG, {\n      t: now(),\n      host: Util.getHostFromUrl(player.currentSrc),\n      vtype: player.vtype,\n      eventType,\n      currentTime: this.player.currentTime,\n      readyState: player.video.readyState,\n      networkState: player.video.networkState,\n      ...data\n    })\n  }\n}\nexport {\n  LOG_TYPES,\n  XGLogger as default\n}\n","import Plugin, { Events, Util } from '../../plugin'\nimport ReplaySvg from '../assets/replay.svg'\nimport './index.scss'\n\nclass Replay extends Plugin {\n  static get pluginName () {\n    return 'replay'\n  }\n\n  static get defaultConfig () {\n    return {\n      disable: false\n    }\n  }\n\n  registerIcons () {\n    return {\n      replay: ReplaySvg\n    }\n  }\n\n  afterCreate () {\n    Plugin.insert(this.icons.replay, this.root, 0)\n    this.__handleReplay = this.hook('replayClick', () => {\n      this.player.replay()\n    }, {\n      pre: (e) => {\n        e.preventDefault()\n        e.stopPropagation()\n      }\n    })\n\n    this.bind('.xgplayer-replay', ['click', 'touchend'], this.__handleReplay)\n    // this.bind('svg', ['click', 'touchend'], this.__handleReplay)\n    // this.bind('.xgplayer-replay-txt', ['click', 'touchend'], this.__handleReplay)\n\n    this.on(Events.ENDED, () => {\n      if (!this.playerConfig.loop) {\n        Util.addClass(this.player.root, 'replay')\n      }\n      if (this.config.disable) {\n        return\n      }\n      this.show()\n      const path = this.root.querySelector('path')\n      if (path) {\n        const transform = window.getComputedStyle(path).getPropertyValue('transform')\n        if (typeof transform === 'string' && transform.indexOf('none') > -1) {\n          return null\n        } else {\n          path.setAttribute('transform', transform)\n        }\n      }\n    })\n\n    this.on(Events.PLAY, () => {\n      this.hide()\n    })\n  }\n\n  handleReplay (e) {\n    e.preventDefault()\n    e.stopPropagation()\n    this.player.replay()\n    Util.removeClass(this.player.root, 'replay')\n  }\n\n  /**\n   * @param {string} [value]\n   * @returns\n   */\n  show (value) {\n    if (this.config.disable) {\n      return\n    }\n    this.root.style.display = 'flex'\n  }\n\n  enable () {\n    this.config.disable = false\n  }\n\n  disable () {\n    this.config.disable = true\n    this.hide()\n  }\n\n  destroy () {\n    this.unbind('.xgplayer-replay', ['click', 'touchend'], this.__handleReplay)\n  }\n\n  render () {\n    return `<xg-replay class=\"xgplayer-replay\">\n      <xg-replay-txt class=\"xgplayer-replay-txt\" lang-key=\"${this.i18nKeys.REPLAY}\">${this.i18n.REPLAY}</xg-replay-txt>\n    </xg-replay>`\n  }\n}\nexport default Replay\n","import Plugin, { Events, Util } from '../../plugin'\nimport './index.scss'\n\n/**\n * @typedef {{\n *   isEndedShow?: boolean, // 是否在播放结束之后显示\n *   hideCanplay?: boolean, // 设置为true时，播放后才隐藏，在视频地址更新后会重新显示poster。默认为false，即在play事件触发后隐藏poster\n *   poster?: string // 封面图地址\n * }} IPosterConfig\n */\nclass Poster extends Plugin {\n  static get pluginName () {\n    return 'poster'\n  }\n\n  /**\n   * @type IPosterConfig\n   */\n  static get defaultConfig () {\n    return {\n      isEndedShow: true, // 是否在播放结束之后显示\n      hideCanplay: false, // 设置为true时，播放后才隐藏，在视频地址更新后会重新显示poster。默认为false，即在play事件触发后隐藏poster\n      notHidden: false, // 是否一直显示\n      poster: '', // 封面图地址\n      fillMode: 'fixWidth' // 封面图填充方式，fixWidth / fixHeight / cover / contain\n    }\n  }\n\n  set isEndedShow (value) {\n    this.config.isEndedShow = value\n  }\n\n  get isEndedShow () {\n    return this.config.isEndedShow\n  }\n\n  hide () {\n    Util.addClass(this.root, 'hide')\n  }\n\n  /**\n   * @param {string} [value]\n   * @returns\n   */\n  show (value) {\n    Util.removeClass(this.root, 'hide')\n  }\n\n  beforeCreate (args) {\n    if (typeof args.player.config.poster === 'string') {\n      args.config.poster = args.player.config.poster\n    }\n  }\n\n  afterCreate () {\n    this.on(Events.ENDED, () => {\n      if (this.isEndedShow) {\n        Util.removeClass(this.root, 'hide')\n      }\n    })\n\n    if (this.config.hideCanplay) {\n      this.once(Events.TIME_UPDATE, () => {\n        this.onTimeUpdate()\n      })\n      this.on(Events.URL_CHANGE, () => {\n        Util.removeClass(this.root, 'hide')\n        Util.addClass(this.root, 'xg-showplay')\n        this.once(Events.TIME_UPDATE, () => {\n          this.onTimeUpdate()\n        })\n      })\n    } else {\n      this.on(Events.PLAY, () => {\n        Util.addClass(this.root, 'hide')\n      })\n    }\n  }\n\n  setConfig (config) {\n    Object.keys(config).forEach(key => {\n      this.config[key] = config[key]\n    })\n    const { poster } = this.config\n    this.update(poster)\n  }\n\n  onTimeUpdate () {\n    if (!this.player.currentTime) {\n      this.once(Events.TIME_UPDATE, () => {\n        this.onTimeUpdate()\n      })\n    } else {\n      Util.removeClass(this.root, 'xg-showplay')\n    }\n  }\n\n  update (poster) {\n    if (!poster) {\n      return\n    }\n    this.config.poster = poster\n    this.root.style.backgroundImage = `url(${poster})`\n  }\n\n  getBgSize (mode) {\n    let _bg = ''\n    switch (mode) {\n      case 'cover':\n        _bg = 'cover'\n        break\n      case 'contain':\n        _bg = 'contain'\n        break\n      case 'fixHeight':\n        _bg = 'auto 100%'\n        break\n      default:\n        _bg = ''\n    }\n    return _bg ? `background-size: ${_bg};` : ''\n  }\n\n  render () {\n    const { poster, hideCanplay, fillMode, notHidden } = this.config\n    const _bg = this.getBgSize(fillMode)\n    const style = poster ? `background-image:url(${poster});${_bg}` : _bg\n    const className = notHidden ? 'xg-not-hidden' : (hideCanplay ? 'xg-showplay' : '')\n    return `<xg-poster class=\"xgplayer-poster ${className}\" style=\"${style}\">\n    </xg-poster>`\n  }\n}\n\nexport default Poster\n","import Plugin, { Util, Events, STATES } from '../../plugin'\nimport PlaySvg from '../assets/play.svg'\nimport PauseSvg from '../assets/pause.svg'\nimport './index.scss'\n\n/**\n * @typedef {{\n *  isShowPause?: boolean, // 暂停是否常驻\n *  isShowEnd?: boolean, // 播放结束常驻\n *  disableAnimate?: boolean, // 禁用点击动画\n *  mode?: 'hide' | 'show' | 'auto' // 控制模式: hide 常驻: show 跟随：auto\n *  [propName: string]: any\n * }} IStartConfig\n */\n\nconst AnimateMap = {}\nfunction addAnimate (key, seconds, callback = { start: null, end: null }) {\n  if (AnimateMap[key]) {\n    window.clearTimeout(AnimateMap[key].id)\n  }\n  AnimateMap[key] = {}\n  callback.start && callback.start()\n  AnimateMap[key].id = window.setTimeout(() => {\n    callback.end && callback.end()\n    window.clearTimeout(AnimateMap[key].id)\n    delete AnimateMap[key]\n  }, seconds)\n  return AnimateMap[key].id\n}\n\nfunction clearAnimation (id) {\n  if (id) {\n    window.clearTimeout(id)\n    return\n  }\n  Object.keys(AnimateMap).map(key => {\n    window.clearTimeout(AnimateMap[key].id)\n    delete AnimateMap[key]\n  })\n}\n\n\nclass Start extends Plugin {\n  static get pluginName () {\n    return 'start'\n  }\n\n  /**\n   * @type IStartConfig\n   */\n  static get defaultConfig () {\n    return {\n      isShowPause: false, // 暂停是否常驻\n      isShowEnd: false, // 播放结束常驻\n      disableAnimate: false, // 禁用点击动画\n      mode: 'hide' // 控制模式: hide 常驻: show 跟随：auto\n    }\n  }\n\n  constructor (args) {\n    super(args)\n    this.autoPlayStart = false\n  }\n\n  afterCreate () {\n    const { playerConfig } = this\n\n    this.initIcons()\n    this.listenEvents()\n    this.bindClickEvents()\n\n    if (!playerConfig.autoplay) {\n      this.show()\n    }\n  }\n\n  /**\n   * @public\n   * This method can be overridden.\n   */\n  listenEvents () {\n    const { player, playerConfig } = this\n\n    this.once(Events.READY, () => {\n      if (playerConfig) {\n        if (playerConfig.lang && playerConfig.lang === 'en') {\n          Util.addClass(player.root, 'lang-is-en')\n        } else if (playerConfig.lang === 'jp') {\n          Util.addClass(player.root, 'lang-is-jp')\n        }\n      }\n    })\n\n    this.on(Events.AUTOPLAY_STARTED, this.onAutoplayStart)\n\n    this.on(Events.AUTOPLAY_PREVENTED, () => {\n      const className = this.config.mode === 'auto' ? 'auto-hide' : 'hide'\n      this.setAttr('data-state', 'play')\n      Util.removeClass(this.root, className)\n      this.show()\n    })\n\n    this.on(Events.PLAY, () => {\n      this.toggleTo('play')\n    })\n\n    this.on(Events.PAUSE, () => {\n      this.toggleTo('pause')\n    })\n\n    this.on(Events.RESET, () => {\n      this.onPlayerReset()\n    })\n  }\n\n  /**\n   * @public\n   */\n  bindClickEvents () {\n    this.clickHandler = this.hook('startClick', this.switchPausePlay, {\n      pre: (e) => {\n        e.cancelable && e.preventDefault()\n        e.stopPropagation()\n        const { paused } = this.player\n        this.emitUserAction(e, 'switch_play_pause', { props: 'paused', from: paused, to: !paused })\n      }\n    })\n\n    this.bind(['click', 'touchend'], this.clickHandler)\n  }\n\n  onPlayerReset = () => {\n    this.autoPlayStart = false\n    const className = this.config.mode === 'auto' ? 'auto-hide' : 'hide'\n    this.setAttr('data-state', 'play')\n    Util.removeClass(this.root, className)\n    this.show()\n  }\n\n  onAutoplayStart = () => {\n    if (this.autoPlayStart) {\n      return\n    }\n    const className = this.config.mode === 'auto' ? 'auto-hide' : 'hide'\n    Util.addClass(this.root, className)\n    this.autoPlayStart = true\n    this.toggleTo('play')\n  }\n\n  registerIcons () {\n    return {\n      startPlay: { icon: PlaySvg, class: 'xg-icon-play' },\n      startPause: { icon: PauseSvg, class: 'xg-icon-pause' }\n    }\n  }\n\n  initIcons () {\n    const { icons } = this\n    this.appendChild('xg-start-inner', icons.startPlay)\n    this.appendChild('xg-start-inner', icons.startPause)\n  }\n\n  hide () {\n    Util.addClass(this.root, 'hide')\n  }\n\n  /**\n   * @param {string} [value]\n   * @returns\n   */\n  show (value) {\n    Util.removeClass(this.root, 'hide')\n  }\n\n  focusHide () {\n    Util.addClass(this.root, 'focus-hide')\n  }\n\n  recover () {\n    Util.removeClass(this.root, 'focus-hide')\n  }\n\n  switchStatus (isAnimate) {\n    if (isAnimate) {\n      this.setAttr('data-state', !this.player.paused ? 'play' : 'pause')\n    } else {\n      this.setAttr('data-state', this.player.paused ? 'play' : 'pause')\n    }\n  }\n\n  animate (endShow) {\n    this._animateId = addAnimate('pauseplay', 400, {\n      start: () => {\n        Util.addClass(this.root, 'interact')\n        this.show()\n        this.switchStatus(true)\n      },\n      end: () => {\n        Util.removeClass(this.root, 'interact')\n        !endShow && this.hide()\n        this._animateId = null\n      }\n    })\n  }\n\n  endAnimate () {\n    Util.removeClass(this.root, 'interact')\n    clearAnimation(this._animateId)\n    this._animateId = null\n  }\n\n  /**\n   * @public\n   */\n  switchPausePlay (e) {\n    const { player } = this\n    e.cancelable && e.preventDefault()\n    e.stopPropagation()\n    if (player.state < STATES.READY) {\n      return\n    }\n    const paused = this.player.paused\n    if (!paused && player.state === STATES.RUNNING) {\n      player.pause()\n    } else {\n      player.play()\n    }\n  }\n\n  /**\n   * @deprecated\n   */\n  onPlayPause (status) {\n    this.toggleTo(status)\n  }\n\n  /**\n   * @param {'play'|'pause'} status\n   */\n  toggleTo (status) {\n    const { config, player } = this\n    if (!player || player.state < STATES.RUNNING || !this.autoPlayStart) {\n      return\n    }\n    // 一直显示\n    if (config.mode === 'show') {\n      this.switchStatus()\n      this.show()\n      return\n    }\n\n    // 跟随播放器的focus状态显示和隐藏\n    if (config.mode === 'auto') {\n      this.switchStatus()\n      return\n    }\n    // 暂停/播放结束状态强制显示\n    if ((config.isShowPause && player.paused && !player.ended) || (config.isShowEnd && player.ended)) {\n      this.switchStatus()\n      this.show()\n      this.endAnimate()\n      return\n    }\n\n    if (config.disableAnimate) {\n      this.switchStatus()\n      this.hide()\n      return\n    }\n\n    if (status === 'play') {\n      this.autoPlayStart ? this.animate() : this.hide()\n    } else {\n      if (!this.autoPlayStart || player.ended) {\n        return\n      }\n      this.animate()\n    }\n  }\n\n  destroy () {\n    this.unbind(['click', 'touchend'], this.clickHandler)\n    clearAnimation(this._animateId)\n  }\n\n  render () {\n    const className = this.playerConfig.autoplay ? (this.config.mode === 'auto' ? 'auto-hide' : 'hide') : ''\n    return `\n    <xg-start class=\"xgplayer-start ${className}\">\n    <xg-start-inner></xg-start-inner>\n    </xg-start>`\n  }\n}\n\nexport default Start\n","import Plugin, { Util } from '../../plugin'\nimport './index.scss'\n\n/**\n  * @typedef { {\n  *   innerHtml?: string,\n  *   [propName: string]: any\n  * } } IEnterConfig\n  */\n\nclass Enter extends Plugin {\n  static get pluginName () {\n    return 'enter'\n  }\n\n  /**\n   * @type IEnterConfig\n   */\n  static get defaultConfig () {\n    return {\n      innerHtml: '',\n      logo: ''\n    }\n  }\n\n  render () {\n    const { innerHtml } = this.config\n    const root = Util.createDom('xg-enter', '', {}, 'xgplayer-enter')\n\n    if (innerHtml && innerHtml instanceof window.HTMLElement) {\n      root.appendChild(innerHtml)\n    } else if (innerHtml && typeof innerHtml === 'string') {\n      root.innerHTML = innerHtml\n    } else {\n      let barStr = ''\n      for (let i = 1; i <= 12; i++) {\n        barStr += `<div class=\"xgplayer-enter-bar${i}\"></div>`\n      }\n      root.innerHTML = `<div class=\"xgplayer-enter-spinner\">${barStr}</div>`\n    }\n    return root\n  }\n}\n\nexport default Enter\n","import Plugin, { POSITIONS } from '../../plugin'\n\nclass MiniScreenIcon extends Plugin {\n  static get pluginName () {\n    return 'miniscreenIcon'\n  }\n\n  static get defaultConfig () {\n    return {\n      position: POSITIONS.CONTROLS_RIGHT,\n      index: 10\n    }\n  }\n\n  afterCreate () {\n    this.getMini = this.getMini.bind(this)\n    this.exitMini = this.exitMini.bind(this)\n    this.bind('click', this.getMini)\n  }\n\n  getMini () {\n    this.config.onClick && this.config.onClick()\n  }\n\n  exitMini () {\n    this.config.onClick && this.config.onClick()\n  }\n\n  destroy () {\n    this.unbind(['click', 'touchend'], this.getMini)\n  }\n\n  render () {\n    const langKey = 'MINISCREEN'\n    return `\n      <xg-icon class=\"xgplayer-miniicon\">\n      <div class=\"xgplayer-icon btn-text\"><span class=\"icon-text\" lang-key=\"${this.i18nKeys[langKey]}\">${this.i18n[langKey]}</span></div>\n      </xg-icon>`\n  }\n}\n\nexport default MiniScreenIcon\n","import EventEmitter from 'eventemitter3'\n\nfunction getStyleSize (value) {\n  const num = parseFloat(value)\n  // not a percent like '100%', and a number\n  const isValid = value.indexOf('%') === -1 && !Number.isNaN(num)\n  return isValid && num\n}\n\nconst measurements = [\n  'paddingLeft',\n  'paddingRight',\n  'paddingTop',\n  'paddingBottom',\n  'marginLeft',\n  'marginRight',\n  'marginTop',\n  'marginBottom',\n  'borderLeftWidth',\n  'borderRightWidth',\n  'borderTopWidth',\n  'borderBottomWidth'\n]\n\nconst measurementsLength = measurements.length\n\nfunction getZeroSize () {\n  const size = {\n    width: 0,\n    height: 0,\n    innerWidth: 0,\n    innerHeight: 0,\n    outerWidth: 0,\n    outerHeight: 0\n  }\n  for (let i = 0; i < measurementsLength; i++) {\n    const measurement = measurements[i]\n    size[measurement] = 0\n  }\n  return size\n}\n\nfunction getStyle (elem) {\n  const style = window.getComputedStyle(elem)\n  // if ( !style ) {\n  //   logError( 'Style returned ' + style +\n  //     '. Are you running this code in a hidden iframe on Firefox? ' +\n  //     'See http://bit.ly/getsizebug1' );\n  // }\n  return style\n}\n\nfunction getSize (elem) {\n  // use querySeletor if elem is string\n  if (typeof elem === 'string') {\n    elem = document.querySelector(elem)\n  }\n\n  // do not proceed on non-objects\n  if (!elem || typeof elem !== 'object' || !elem.nodeType) {\n    return\n  }\n\n  const style = getStyle(elem)\n\n  // if hidden, everything is 0\n  if (style.display === 'none') {\n    return getZeroSize()\n  }\n\n  const size = {}\n  size.width = elem.offsetWidth\n  size.height = elem.offsetHeight\n\n  const isBorderBox = size.isBorderBox = style.boxSizing === 'border-box'\n\n  // get all measurements\n  for (let i = 0; i < measurementsLength; i++) {\n    const measurement = measurements[i]\n    const value = style[measurement]\n    const num = parseFloat(value)\n    // any 'auto', 'medium' value will be 0\n    size[measurement] = !Number.isNaN(num) ? num : 0\n  }\n\n  const paddingWidth = size.paddingLeft + size.paddingRight\n  const paddingHeight = size.paddingTop + size.paddingBottom\n  const marginWidth = size.marginLeft + size.marginRight\n  const marginHeight = size.marginTop + size.marginBottom\n  const borderWidth = size.borderLeftWidth + size.borderRightWidth\n  const borderHeight = size.borderTopWidth + size.borderBottomWidth\n\n  const isBorderBoxSizeOuter = isBorderBox// isBorderBox && isBoxSizeOuter;\n\n  // overwrite width and height if we can get it from style\n  const styleWidth = getStyleSize(style.width)\n  if (styleWidth !== false) {\n    size.width = styleWidth +\n      // add padding and border unless it's already including it\n      (isBorderBoxSizeOuter ? 0 : paddingWidth + borderWidth)\n  }\n\n  const styleHeight = getStyleSize(style.height)\n  if (styleHeight !== false) {\n    size.height = styleHeight +\n      // add padding and border unless it's already including it\n      (isBorderBoxSizeOuter ? 0 : paddingHeight + borderHeight)\n  }\n\n  size.innerWidth = size.width - (paddingWidth + borderWidth)\n  size.innerHeight = size.height - (paddingHeight + borderHeight)\n\n  size.outerWidth = size.width + marginWidth\n  size.outerHeight = size.height + marginHeight\n\n  return size\n}\n\nfunction getTouch (touches, dentifier) {\n  for (let i = 0; i < touches.length; i++) {\n    const touch = touches[i]\n    if (touch.identifier === dentifier) {\n      return touch\n    }\n  }\n}\n\nconst EVENTS = {\n  START: 'dragStart',\n  MOVE: 'dragMove',\n  ENDED: 'dragEnded'\n}\n\nconst POST_START_EVENTS = {\n  mousedown: ['mousemove', 'mouseup'],\n  touchstart: ['touchmove', 'touchend', 'touchcancel'],\n  pointerdown: ['pointermove', 'pointerup', 'pointercancel']\n}\n\nexport default class Draggabilly extends EventEmitter {\n  constructor (root, options = {}) {\n    super()\n    this.isEnabled = true\n    this.isDragging = false\n    this.isDown = false\n    this.position = {}\n    this.downPoint = {}\n    this.dragPoint = { x: 0, y: 0 }\n    this.startPos = { x: 0, y: 0 }\n    // eslint-disable-next-line no-undef\n    this._root = root instanceof Element ? root : document.querySelector(root)\n    // eslint-disable-next-line no-undef\n    this._handlerDom = options.handle instanceof Element ? options.handle : document.querySelector(options.handle)\n    if (!this._root || !this._handlerDom) {\n      return\n    }\n    // ['onDown', 'onUp', 'onMove', 'onCancel', 'onDocUp'].map(key => {\n    //   this[key] = this[key].bind(this)\n    // })\n\n    // if ('ontouchstart' in window) {\n    //   this._handlerKeys = TOUCH_HANDLERS\n    //   this._startKey = 'touchstart'\n    //   this._endKey = 'touchend'\n    // } else {\n    //   this._handlerKeys = HANDLERS\n    //   this._startKey = 'mousedown'\n    //   this._endKey = 'mouseup'\n    // }\n    // this._handlerDom.addEventListener(this._startKey, this.onDown)\n    this._bindStartEvent()\n  }\n\n  _bindStartEvent () {\n    if ('ontouchstart' in window) {\n      this._startKey = 'touchstart'\n    } else {\n      this._startKey = 'mousedown'\n    }\n    this[`on${this._startKey}`] = this[`on${this._startKey}`].bind(this)\n    this._handlerDom.addEventListener(this._startKey, this[`on${this._startKey}`])\n    POST_START_EVENTS[this._startKey].map(key => {\n      this[`on${key}`] = this[`on${key}`].bind(this)\n    })\n  }\n\n  _unbindStartEvent () {\n    this._handlerDom.removeEventListener(this._startKey, this[`on${this._startKey}`])\n  }\n\n  _bindPostStartEvents (event) {\n    if (!event) {\n      return\n    }\n    const events = POST_START_EVENTS[this._startKey]\n    // bind events to node\n    events.map(eventName => {\n      window.addEventListener(eventName, this[`on${eventName}`])\n    })\n    // save these arguments\n    this._boundPointerEvents = events\n  }\n\n  _unbindPostStartEvents () {\n    if (!this._boundPointerEvents) {\n      return\n    }\n    this._boundPointerEvents.map(eventName => {\n      // console.log('eventName', eventName, this[`on${eventName}`])\n      window.removeEventListener(eventName, this[`on${eventName}`])\n    })\n\n    delete this._boundPointerEvents\n  }\n\n  enable () {\n    this.isEnabled = true\n  }\n\n  disable () {\n    this.isEnabled = false\n    if (this.isDragging) {\n      this.onUp()\n    }\n  }\n\n  onDocUp (e) {\n    this.onUp()\n  }\n\n  animate () {\n    // only render and animate if dragging\n    if (!this.isDragging) {\n      return\n    }\n\n    this.positionDrag()\n\n    window.requestAnimationFrame(() => {\n      this.animate()\n    })\n  }\n\n  positionDrag () {\n    // this._root.style.transform = 'translate3d( ' + this.dragPoint.x +\n    // 'px, ' + this.dragPoint.y + 'px, 0)';\n    const transform = `translate3d(${this.dragPoint.x}px, ${this.dragPoint.y}px, 0)`\n    this._root.style.transform = transform\n    this._root.style.webKitTransform = transform\n  }\n\n  setLeftTop () {\n    this._root.style.left = this.position.x + 'px'\n    this._root.style.top = this.position.y + 'px'\n  }\n\n  onmousedown (e) {\n    this.dragStart(e, e)\n  }\n\n  onmousemove (e) {\n    this.dragMove(e, e)\n  }\n\n  onmouseup (e) {\n    this.dragEnd(e, e)\n  }\n\n  ontouchstart (e) {\n    const touch = e.changedTouches[0]\n    this.dragStart(e, touch)\n    this.touchIdentifier = touch.pointerId !== undefined\n      ? touch.pointerId\n      : touch.identifier\n    e.preventDefault()\n  }\n\n  ontouchmove (e) {\n    const touch = getTouch(e.changedTouches, this.touchIdentifier)\n    if (touch) {\n      this.dragMove(e, touch)\n    }\n  }\n\n  ontouchend (e) {\n    const touch = getTouch(e.changedTouches, this.touchIdentifier)\n    if (touch) {\n      this.dragEnd(e, touch)\n    }\n    e.preventDefault()\n  }\n\n  ontouchcancel (e) {\n    const touch = getTouch(e.changedTouches, this.touchIdentifier)\n    if (touch) {\n      this.dragCancel(e, touch)\n    }\n  }\n\n  dragStart (e, pointer) {\n    if (!this._root || this.isDown || !this.isEnabled) {\n      return\n    }\n    this.downPoint = pointer\n    this.dragPoint.x = 0\n    this.dragPoint.y = 0\n\n    this._getPosition()\n\n    const size = getSize(this._root)\n\n    this.startPos.x = this.position.x\n    this.startPos.y = this.position.y\n    this.startPos.maxY = window.innerHeight - size.height\n    this.startPos.maxX = window.innerWidth - size.width\n    this.setLeftTop()\n\n    this.isDown = true\n    this._bindPostStartEvents(e)\n  }\n\n  dragRealStart (e, pointer) {\n    this.isDragging = true\n    this.animate()\n    this.emit(EVENTS.START, this.startPos)\n  }\n\n  dragEnd (e, pointer) {\n    if (!this._root) {\n      return\n    }\n    this._unbindPostStartEvents()\n    if (this.isDragging) {\n      this._root.style.transform = ''\n      this.setLeftTop()\n      this.emit(EVENTS.ENDED)\n    }\n    this.presetInfo()\n  }\n\n  _dragPointerMove (e, pointer) {\n    const moveVector = {\n      x: pointer.pageX - this.downPoint.pageX,\n      y: pointer.pageY - this.downPoint.pageY\n    }\n    // 检测是否有移动\n    if (!this.isDragging && this.hasDragStarted(moveVector)) {\n      this.dragRealStart(e, pointer)\n    }\n    return moveVector\n  }\n\n  dragMove (e, pointer) {\n    e = e || window.event\n    if (!this.isDown) {\n      return\n    }\n    const { x, y } = this.startPos\n    const moveVector = this._dragPointerMove(e, pointer)\n    let dragX = moveVector.x\n    let dragY = moveVector.y\n    dragX = this.checkContain('x', dragX, x)\n    dragY = this.checkContain('y', dragY, y)\n    this.position.x = x + dragX\n    this.position.y = y + dragY\n    this.dragPoint.x = dragX\n    this.dragPoint.y = dragY\n    this.emit(EVENTS.MOVE, this.position)\n  }\n\n  dragCancel (e, pointer) {\n    this.dragEnd(e, pointer)\n  }\n\n  presetInfo () {\n    this.isDragging = false\n    this.startPos = {\n      x: 0,\n      y: 0\n    }\n    this.dragPoint = {\n      x: 0,\n      y: 0\n    }\n    this.isDown = false\n  }\n\n  destroy () {\n    this._unbindStartEvent()\n    this._unbindPostStartEvents()\n    if (this.isDragging) {\n      this.dragEnd()\n    }\n    this.removeAllListeners()\n    this._handlerDom = null\n  }\n\n  hasDragStarted (moveVector) {\n    return Math.abs(moveVector.x) > 3 || Math.abs(moveVector.y) > 3\n  }\n\n  checkContain (axis, drag, grid) {\n    if (drag + grid < 0) {\n      return 0 - grid\n    }\n\n    if (axis === 'x' && drag + grid > this.startPos.maxX) {\n      return this.startPos.maxX - grid\n    }\n    if (axis === 'y' && drag + grid > this.startPos.maxY) {\n      return this.startPos.maxY - grid\n    }\n    return drag\n  }\n\n  _getPosition () {\n    const style = window.getComputedStyle(this._root)\n    const x = this._getPositionCoord(style.left, 'width')\n    const y = this._getPositionCoord(style.top, 'height')\n    // clean up 'auto' or other non-integer values\n    this.position.x = Number.isNaN(x) ? 0 : x\n    this.position.y = Number.isNaN(y) ? 0 : y\n\n    this._addTransformPosition(style)\n  }\n\n  _addTransformPosition (style) {\n    const transform = style.transform\n    // bail out if value is 'none'\n    if (transform.indexOf('matrix') !== 0) {\n      return\n    }\n    // split matrix(1, 0, 0, 1, x, y)\n    const matrixValues = transform.split(',')\n    // translate X value is in 12th or 4th position\n    const xIndex = transform.indexOf('matrix3d') === 0 ? 12 : 4\n    const translateX = parseInt(matrixValues[xIndex], 10)\n    // translate Y value is in 13th or 5th position\n    const translateY = parseInt(matrixValues[xIndex + 1], 10)\n    this.position.x += translateX\n    this.position.y += translateY\n  }\n\n  _getPositionCoord (styleSide, measure) {\n    if (styleSide.indexOf('%') !== -1) {\n      // convert percent into pixel for Safari, #75\n      const parentSize = getSize(this._root.parentNode)\n      // prevent not-in-DOM element throwing bug, #131\n      return !parentSize\n        ? 0\n        : (parseFloat(styleSide) / 100) * parentSize[measure]\n    }\n    return parseInt(styleSide, 10)\n  }\n}\n","import Plugin, { Util, Events } from '../../plugin'\nimport { xgIconTips } from '../common/iconTools'\nimport PlayIcon from '../assets/play.svg'\nimport PauseIcon from '../assets/pause.svg'\nimport MiniScreenIcon from './miniScreenIcon'\nimport Draggabilly from '../../utils/draggabilly'\nimport './index.scss'\n\n/**\n * @typedef {{\n *   index?: number,\n *   disable?: boolean,\n *   width?: number,\n *   height?: number,\n *   left?: number, // 默认左下角\n *   top?: number, // 默认左下角\n *   isShowIcon?: boolean, // 是否显示icon\n *   isScrollSwitch?: boolean, // 滚动自动切换自动切换\n *   scrollTop?: number, // 触发滚动的高度\n *   disableDrag?: boolean, // 禁用拖拽\n *   [propName: string]: any\n * }} IMiniScreenConfig\n */\nclass MiniScreen extends Plugin {\n  static get pluginName () {\n    return 'miniscreen'\n  }\n\n  /**\n   * @type IMiniScreenConfig\n   */\n  static get defaultConfig () {\n    return {\n      index: 10,\n      disable: false,\n      width: 320,\n      height: 180,\n      left: -1, // Default bottom left corner\n      top: -1, // Default bottom left corner\n      isShowIcon: false, // Whether to show icon\n      isScrollSwitch: false,\n      scrollTop: 0, // Height to trigger scroll\n      disableDrag: false // Disable drag and drop\n    }\n  }\n\n  constructor (args) {\n    super(args)\n    this.isMini = false\n    this.isClose = false\n    const { config } = this\n    this.pos = {\n      left: config.left < 0 ? window.innerWidth - config.width - 20 : config.left,\n      top: config.top < 0 ? window.innerHeight - config.height - 20 : config.top,\n      height: this.config.height,\n      width: this.config.width,\n      scrollY: window.scrollY || 0\n    }\n    this.lastStyle = null\n  }\n\n  beforeCreate (args) {\n    if (typeof args.player.config.mini === 'boolean') {\n      args.config.isShowIcon = args.player.config.mini\n    }\n  }\n\n  afterCreate () {\n    this.initIcons()\n    this.on(Events.PAUSE, () => {\n      this.setAttr('data-state', 'pause')\n    })\n    this.on(Events.PLAY, () => {\n      this.setAttr('data-state', 'play')\n    })\n  }\n\n  onPluginsReady () {\n    const { player, config } = this\n    if (config.disable) {\n      return\n    }\n    if (this.config.isShowIcon) {\n      const options = {\n        config: {\n          onClick: () => {\n            this.getMini()\n          }\n        }\n      }\n      player.controls.registerPlugin(MiniScreenIcon, options, MiniScreenIcon.pluginName)\n    }\n    const eventName = Util.checkTouchSupport() ? 'touchend' : 'click'\n    this.bind('.mini-cancel-btn', eventName, this.onCancelClick)\n    this.bind('.play-icon', eventName, this.onCenterClick)\n    if (!this.config.disableDrag) {\n      this._draggabilly = new Draggabilly(this.player.root, {\n        handle: this.root\n      })\n    }\n    if (this.config.isScrollSwitch) {\n      window.addEventListener('scroll', this.onScroll)\n    }\n  }\n\n  registerIcons () {\n    return {\n      play: { icon: PlayIcon, class: 'xg-icon-play' },\n      pause: { icon: PauseIcon, class: 'xg-icon-pause' }\n    }\n  }\n\n  initIcons () {\n    const { icons } = this\n    this.appendChild('.play-icon', icons.play)\n    this.appendChild('.play-icon', icons.pause)\n  }\n\n  onCancelClick = (e) => {\n    // e.preventDefault()\n    // e.stopPropagation()\n    this.exitMini()\n    this.isClose = true\n  }\n\n  onCenterClick = (e) => {\n    const { player } = this\n    player.paused ? player.play() : player.pause()\n  }\n\n  onScroll = (e) => {\n    if ((!window.scrollY && window.scrollY !== 0) || Math.abs(window.scrollY - this.pos.scrollY) < 50) {\n      return\n    }\n    let scrollHeight = parseInt(Util.getCss(this.player.root, 'height'))\n    scrollHeight += this.config.scrollTop\n    this.pos.scrollY = window.scrollY\n    if (window.scrollY > scrollHeight + 5) {\n      !this.isMini && !this.isClose && this.getMini()\n    } else if (window.scrollY <= scrollHeight) {\n      this.isMini && this.exitMini()\n      this.isClose = false\n    }\n  }\n\n  getMini () {\n    if (this.isMini) {\n      return\n    }\n    const { player, playerConfig } = this\n    const target = this.config.target || this.player.root\n    this.lastStyle = {}\n    Util.addClass(player.root, 'xgplayer-mini');\n    ['width', 'height', 'top', 'left'].map(key => {\n      this.lastStyle[key] = target.style[key]\n      target.style[key] = `${this.pos[key]}px`\n    })\n    if (playerConfig.fluid) {\n      target.style['padding-top'] = ''\n    }\n    this.emit(Events.MINI_STATE_CHANGE, true)\n    player.isMini = this.isMini = true\n  }\n\n  exitMini () {\n    if (!this.isMini) {\n      return false\n    }\n    const { player, playerConfig } = this\n    const target = this.config.target || this.player.root\n    Util.removeClass(player.root, 'xgplayer-mini')\n    if (this.lastStyle) {\n      Object.keys(this.lastStyle).map(key => {\n        target.style[key] = this.lastStyle[key]\n      })\n    }\n    this.lastStyle = null\n    if (playerConfig.fluid) {\n      player.root.style.width = '100%'\n      player.root.style.height = '0'\n      player.root.style['padding-top'] = `${playerConfig.height * 100 / playerConfig.width}%`\n    }\n    this.emit(Events.MINI_STATE_CHANGE, false)\n    this.isMini = player.isMini = false\n  }\n\n\n  updatePos (pos) {\n    this.pos = Object.assign(this.pos, pos)\n    if (this.isMini) {\n      this.player.root.style.left = `${this.pos.left}px`\n      this.player.root.style.top = `${this.pos.top}px`\n      this.player.root.style.width = `${this.pos.width}px`\n      this.player.root.style.height = `${this.pos.height}px`\n    }\n  }\n\n  destroy () {\n    window.removeEventListener('scroll', this.onScroll)\n    const eventName = Util.checkTouchSupport() ? 'touchend' : 'click'\n    this.unbind('.mini-cancel-btn', eventName, this.onCancelClick)\n    this.unbind('.play-icon', eventName, this.onCenterClick)\n    this._draggabilly && this._draggabilly.destroy()\n    this._draggabilly = null\n    this.exitMini()\n  }\n\n  render () {\n    if (this.config.disable) {\n      return\n    }\n    return `\n      <xg-mini-layer class=\"xg-mini-layer\">\n      <xg-mini-header class=\"xgplayer-mini-header\">\n      ${xgIconTips(this, 'MINI_DRAG', this.playerConfig.isHideTips)}\n      </xg-mini-header>\n      <div class=\"mini-cancel-btn\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 20 20\">\n          <path fill=\"#fff\" fill-rule=\"evenodd\" d=\"M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z\"></path>\n        </svg>\n      </div>\n      <div class=\"play-icon\">\n      </div>\n      </xg-mini-layer>`\n  }\n}\n\nexport {\n  MiniScreen as default,\n  MiniScreenIcon\n}\n","import { BasePlugin, Sniffer } from '../../plugin'\nimport { runHooks } from '../../plugin/hooksDescriptor'\nimport { LEAVE_PLAYER, ENTER_PLAYER } from '../../events'\nimport './index.scss'\n\nconst MOUSE_EVENTS = {\n  mouseenter: 'onMouseEnter',\n  mouseleave: 'onMouseLeave',\n  mousemove: 'onMouseMove'\n}\n\nconst HOOKS = ['videoClick', 'videoDbClick']\n\nexport default class PCPlugin extends BasePlugin {\n  static get pluginName () {\n    return 'pc'\n  }\n\n  static get defaultConfig () {\n    return {\n    }\n  }\n\n  afterCreate () {\n    this._clickCount = 0\n    HOOKS.map(item => {\n      this.__hooks[item] = null\n    })\n    const { isMobileSimulateMode } = this.playerConfig\n    if (isMobileSimulateMode === 'mobile' || (Sniffer.device === 'mobile' && !Sniffer.os.isIpad)) {\n      return\n    }\n    this.initEvents()\n  }\n\n  initEvents () {\n    const { media, root } = this.player\n    const { enableContextmenu } = this.playerConfig\n\n    root && root.addEventListener('click', this.onVideoClick, false)\n    root && root.addEventListener('dblclick', this.onVideoDblClick, false)\n    Object.keys(MOUSE_EVENTS).map(item => {\n      root.addEventListener(item, this[MOUSE_EVENTS[item]], false)\n    })\n    !enableContextmenu && media && media.addEventListener('contextmenu', this.onContextmenu, false)\n  }\n\n  switchPlayPause (e) {\n    const { player } = this\n    this.emitUserAction(e, 'switch_play_pause', { props: 'paused', from: player.paused, to: !player.paused })\n    if (!player.ended) {\n      player.paused ? player.play() : player.pause()\n    } else {\n      player.duration !== Infinity && player.duration > 0 && player.replay()\n    }\n  }\n\n  onMouseMove = (e) => {\n    const { player, playerConfig } = this\n    if (!player.isActive) {\n      player.focus({ autoHide: !playerConfig.closeDelayBlur })\n      !playerConfig.closeFocusVideoFocus && player.media.focus()\n    }\n  }\n\n  onMouseEnter = (e) => {\n    const { playerConfig, player } = this\n    !playerConfig.closeFocusVideoFocus && player.media.focus()\n    if (playerConfig.closeDelayBlur) {\n      player.focus({ autoHide: false })\n    } else {\n      player.focus()\n    }\n    this.emit(ENTER_PLAYER)\n  }\n\n  onMouseLeave = (e) => {\n    const { closePlayerBlur, leavePlayerTime, closeDelayBlur } = this.playerConfig\n    if (!closePlayerBlur && !closeDelayBlur) {\n      if (leavePlayerTime) {\n        this.player.focus({ autoHide: true, delay: leavePlayerTime })\n      } else {\n        this.player.blur({ignorePaused: true})\n      }\n    }\n    this.emit(LEAVE_PLAYER)\n  }\n\n  onContextmenu (e) {\n    e = e || window.event\n    if (e.preventDefault) {\n      e.preventDefault()\n    }\n    if (e.stopPropagation) {\n      e.stopPropagation()\n    } else {\n      e.returnValue = false // 解决IE8右键弹出\n      e.cancelBubble = true\n    }\n  }\n\n  onVideoClick = (e) => {\n    const { player, playerConfig } = this\n    if (e.target && playerConfig.closeVideoClick) {\n      return\n    }\n    if (e.target === player.root || e.target === player.media || e.target === player.innerContainer || e.target === player.media.__canvas) {\n      e.preventDefault()\n      if (!playerConfig.closeVideoStopPropagation) {\n        e.stopPropagation()\n      }\n      this._clickCount++\n      if (this.clickTimer) {\n        clearTimeout(this.clickTimer)\n        this.clickTimer = null\n      }\n      this.clickTimer = setTimeout(() => {\n        if (!this._clickCount) {\n          return\n        }\n        this._clickCount--\n        runHooks(this, HOOKS[0], (plugin, data) => {\n          this.switchPlayPause(data.e)\n        }, { e, paused: player.paused })\n        clearTimeout(this.clickTimer)\n        this.clickTimer = null\n      }, 300)\n    }\n  }\n\n  onVideoDblClick = (e) => {\n    const { player, playerConfig } = this\n    if (playerConfig.closeVideoDblclick || !e.target || (e.target !== player.media && e.target !== player.media.__canvas)) {\n      return\n    }\n    if (!playerConfig.closeVideoClick && this._clickCount < 2) {\n      this._clickCount = 0\n      return\n    }\n    this._clickCount = 0\n    if (this.clickTimer) {\n      clearTimeout(this.clickTimer)\n      this.clickTimer = null\n    }\n    e.preventDefault()\n    e.stopPropagation()\n\n    runHooks(this, HOOKS[1], (plugin, data) => {\n      this.emitUserAction(data.e, 'switch_fullscreen', { props: 'fullscreen', from: player.fullscreen, to: !player.fullscreen })\n      player.fullscreen ? player.exitFullscreen() : player.getFullscreen()\n    }, { e, fullscreen: player.fullscreen })\n  }\n\n  destroy () {\n    const { video, root } = this.player\n    this.clickTimer && clearTimeout(this.clickTimer)\n    root.removeEventListener('click', this.onVideoClick, false)\n    root.removeEventListener('dblclick', this.onVideoDblClick, false)\n    video.removeEventListener('contextmenu', this.onContextmenu, false)\n    Object.keys(MOUSE_EVENTS).map(item => {\n      root.removeEventListener(item, this[MOUSE_EVENTS[item]], false)\n    })\n  }\n}\n","\nconst EVENTS = {\n  PRESS: 'press',\n  PRESS_END: 'pressend',\n  DOUBlE_CLICK: 'doubleclick',\n  CLICK: 'click',\n  TOUCH_MOVE: 'touchmove',\n  TOUCH_START: 'touchstart',\n  TOUCH_END: 'touchend'\n}\n\nconst TOUCHS = {\n  start: 'touchstart',\n  end: 'touchend',\n  move: 'touchmove',\n  cancel: 'touchcancel'\n}\n\nconst MOUSES = {\n  start: 'mousedown',\n  end: 'mouseup',\n  move: 'mousemove',\n  cancel: 'mouseleave'\n}\n\nfunction getTouch (touches) {\n  if (touches && touches.length > 0) {\n    return touches[touches.length - 1]\n  } else {\n    return null\n  }\n}\n\nfunction getDefaultConfig () {\n  return {\n    pressDelay: 600,\n    dbClickDelay: 200,\n    disablePress: false,\n    disableDbClick: false,\n    miniStep: 2,\n    needPreventDefault: true\n  }\n}\n\nclass Touche {\n  constructor (dom, config = { eventType: 'touch' }) {\n    this._pos = {\n      moving: false,\n      start: false,\n      x: 0,\n      y: 0\n    }\n    this.config = getDefaultConfig()\n    Object.keys(config).map(key => {\n      this.config[key] = config[key]\n    })\n    this.root = dom\n    this.events = config.eventType === 'mouse' ? MOUSES : TOUCHS\n    /**\n     * @type { null | number}\n     */\n    this.pressIntrvalId = null\n    /**\n     * @type { null | number}\n     */\n    this.dbIntrvalId = null\n    this.__handlers = {}\n    this._initEvent()\n  }\n\n  _initEvent () {\n    this.root.addEventListener(this.events.start, this.onTouchStart)\n  }\n\n  __setPress (e) {\n    const { config } = this\n    if (this.pressIntrvalId) {\n      this.__clearPress()\n    }\n    this.pressIntrvalId = setTimeout(() => {\n      this.trigger(EVENTS.PRESS, e)\n      this._pos.press = true\n      this.__clearPress()\n    }, config.pressDelay)\n  }\n\n  __clearPress () {\n    window.clearTimeout(this.pressIntrvalId)\n    this.pressIntrvalId = null\n  }\n\n  __setDb (e) {\n    const { config } = this\n    if (this.dbIntrvalId) {\n      this.__clearDb()\n      this.trigger(EVENTS.DOUBlE_CLICK, e)\n      return\n    }\n    this.dbIntrvalId = setTimeout(() => {\n      this.__clearDb()\n      if (!this._pos.start && !this._pos.press && !this._pos.moving) {\n        this.trigger(EVENTS.CLICK, e)\n      }\n    }, config.dbClickDelay)\n  }\n\n  __clearDb () {\n    clearTimeout(this.dbIntrvalId)\n    this.dbIntrvalId = null\n  }\n\n  on (event, handler) {\n    if (!this.__handlers[event]) {\n      this.__handlers[event] = []\n    }\n    this.__handlers[event].push(handler)\n  }\n\n  off (event, handler) {\n    if (!this.__handlers[event]) {\n      return\n    }\n    const handlers = this.__handlers[event]\n    let index = -1\n    for (let i = 0; i < handlers.length; i++) {\n      if (handlers[i] === handler) {\n        index = i\n        break\n      }\n    }\n    if (index >= 0) {\n      this.__handlers[event].splice(index, 1)\n    }\n  }\n\n  trigger (event, e) {\n    if (!this.__handlers[event]) {\n      return\n    }\n    this.__handlers[event].map(handler => {\n      try {\n        handler(e)\n      } catch (error) {\n        console.error(`trigger>>:${event}`, error)\n      }\n    })\n  }\n\n  onTouchStart = (e) => {\n    const { _pos, root } = this\n    // config.needPreventDefault && preventToucheDefault(e)\n    const touch = getTouch(e.touches)\n    _pos.x = touch ? parseInt(touch.pageX, 10) : e.pageX\n    _pos.y = touch ? parseInt(touch.pageX, 10) : e.pageX\n    _pos.start = true\n    this.__setPress(e)\n    root.addEventListener(this.events.end, this.onTouchEnd)\n    root.addEventListener(this.events.cancel, this.onTouchCancel)\n    root.addEventListener(this.events.move, this.onTouchMove)\n    this.trigger(EVENTS.TOUCH_START, e)\n  }\n\n  onTouchCancel = (e) => {\n    this.onTouchEnd(e)\n  }\n\n  onTouchEnd = (e) => {\n    const { _pos, root } = this\n    this.__clearPress()\n    root.removeEventListener(this.events.cancel, this.onTouchCancel)\n    root.removeEventListener(this.events.end, this.onTouchEnd)\n    root.removeEventListener(this.events.move, this.onTouchMove)\n    e.moving = _pos.moving\n    e.press = _pos.press\n    _pos.press && this.trigger(EVENTS.PRESS_END, e)\n    this.trigger(EVENTS.TOUCH_END, e)\n    !_pos.press && !_pos.moving && this.__setDb(e)\n    _pos.press = false\n    _pos.start = false\n    _pos.moving = false\n  }\n\n  onTouchMove = (e) => {\n    const { _pos, config } = this\n    const touch = getTouch(e.touches)\n    const x = touch ? parseInt(touch.pageX, 10) : e.pageX\n    const y = touch ? parseInt(touch.pageY, 10) : e.pageX\n    const diffx = x - _pos.x\n    const diffy = y - _pos.y\n    if (Math.abs(diffy) < config.miniStep && Math.abs(diffx) < config.miniStep) {\n      return\n    }\n    this.__clearPress()\n    _pos.press && this.trigger(EVENTS.PRESS_END, e)\n    _pos.press = false\n    _pos.moving = true\n    this.trigger(EVENTS.TOUCH_MOVE, e)\n  }\n\n  destroy () {\n    const map = {\n      touchend: 'onTouchEnd',\n      touchmove: 'onTouchMove',\n      touchstart: 'onTouchStart'\n    }\n    Object.keys(map).forEach(key => {\n      this.root.removeEventListener(key, this[map[key]])\n    })\n  }\n}\n\nexport default Touche\n\n","import Plugin, { Events, Util, Sniffer, STATES } from '../../plugin'\nimport Touche from './touch'\nimport SeekTipIcon from '../assets/seekicon.svg'\nimport { runHooks } from '../../plugin/hooksDescriptor'\n// import BackSvg from './back.svg'\nimport './index.scss'\n\n/**\n * @typedef {{\n *   index?: number,\n *   disableGesture?: boolean,\n *   gestureX?: boolean,\n *   gestureY?: boolean,\n *   gradient?: 'normal' | 'none' | 'top' | 'bottom',\n *   isTouchingSeek?: boolean,\n *   miniMoveStep?: number,\n *   miniYPer?: number,\n *   scopeL?: number,\n *   scopeR?: number,\n *   pressRate?: number,\n *   darkness?: boolean,\n *   maxDarkness?: number,\n *   disableActive?: boolean,\n *   disableTimeProgress?: boolean,\n *   hideControlsActive?: boolean,\n *   hideControlsEnd?: boolean,\n *   moveDuration?: number,\n *   closedbClick?: boolean,\n *   disablePress?: boolean,\n *   disableSeekIcon?: boolean,\n *   focusVideoClick?: boolean,\n *   [propName: string]: any\n * }} IMobileConfig\n */\n\nconst ACTIONS = {\n  AUTO: 'auto',\n  SEEKING: 'seeking',\n  PLAYBACK: 'playbackrate',\n  LIGHT: ''\n}\n\nconst HOOKS = ['videoClick', 'videoDbClick']\n\nclass MobilePlugin extends Plugin {\n  static get pluginName () {\n    return 'mobile'\n  }\n\n  /**\n   * @type IMobileConfig & { [propName: string]: any}\n   */\n  static get defaultConfig () {\n    return {\n      index: 0,\n      disableGesture: false, // Whether to disable gestures\n      gestureX: true, // Whether to enable horizontal gestures\n      gestureY: true, // Whether to enable vertical gestures\n      gradient: 'normal', // Gradient shadow, 'none'/'top'/'bottom'\n      isTouchingSeek: false, // Whether to update currentTime at the same time as touchMove\n      miniMoveStep: 5, // Minimum moving distance, used for move throttling\n      miniYPer: 5, // Percentage of minimum displacement in y direction\n      scopeL: 0.25, // Gesture range on the left\n      scopeR: 0.25, // Gesture range on the right\n      scopeM: 0.9, // Middle gesture range\n      pressRate: 2, // playbackRate when long press\n      darkness: true, // Whether to enable the dimming function on the left\n      maxDarkness: 0.8, // Maximum darkness，maximum transparency of the mask\n      disableActive: false, // Whether to disable the time prompt\n      disableTimeProgress: false, // Whether to disable the time progress bar\n      hideControlsActive: false, // Whether to hide the control bar when dragging by gesture\n      hideControlsEnd: false, // Whether to hide the control bar when the gesture ended\n      moveDuration: 60 * 6 * 1000, // The duration corresponding to the dragging width of the player\n      closedbClick: false, // Whether to turn off the double tap gesture\n      disablePress: true, // Whether to turn off the long press gesture\n      disableSeekIcon: false, // Disable seek prompt\n      focusVideoClick: false // Click on force toggle to pause/play\n    }\n  }\n\n  constructor (options) {\n    super(options)\n    /**\n     * @readonly\n     */\n    this.pos = {\n      isStart: false,\n      x: 0,\n      y: 0,\n      time: 0,\n      volume: 0,\n      rate: 1,\n      light: 0,\n      width: 0,\n      height: 0,\n      scopeL: 0,\n      scopeR: 0,\n      scopeM1: 0,\n      scopeM2: 0,\n      scope: -1\n    }\n    /**\n     * @private\n     */\n    this.timer = null\n  }\n\n  get duration () {\n    return this.playerConfig.customDuration || this.player.duration\n  }\n\n  get timeOffset () {\n    return this.playerConfig.timeOffset || 0\n  }\n\n  registerIcons () {\n    return {\n      seekTipIcon: { icon: SeekTipIcon, class: 'xg-seek-pre' }\n    }\n  }\n\n  afterCreate () {\n    HOOKS.map(item => {\n      this.__hooks[item] = null\n    })\n    const { playerConfig, config, player } = this\n    if (playerConfig.closeVideoDblclick === true) {\n      config.closedbClick = true\n    }\n    this.resetPos()\n    if (!Util.isUndefined(playerConfig.disableGesture)) {\n      config.disableGesture = !!playerConfig.disableGesture\n    }\n    this.appendChild('.xg-seek-icon', this.icons.seekTipIcon)\n\n    this.xgMask = Util.createDom('xg-mask', '', {}, 'xgmask')\n    player.root.appendChild(this.xgMask)\n\n    this.initCustomStyle()\n\n    this.registerThumbnail()\n\n    const eventType = this.domEventType === 'mouse' ? 'mouse' : 'touch'\n    this.touch = new Touche(this.root, { eventType, needPreventDefault: !this.config.disableGesture })\n\n    this.root.addEventListener('contextmenu', e => {\n      e.preventDefault()\n    })\n\n    /**\n     * 对根节点做touchmove和touchend绑定，解决控制栏手势无作用的问题\n     */\n    player.root.addEventListener('touchmove', this.onRootTouchMove, true)\n    player.root.addEventListener('touchend', this.onRootTouchEnd, true)\n    player.root.addEventListener('touchcancel', this.onRootTouchEnd, true)\n    const { controls } = this.player\n    if (controls && controls.center) {\n      controls.center.addEventListener('touchmove', this.onRootTouchMove, true)\n      controls.center.addEventListener('touchend', this.onRootTouchEnd, true)\n      controls.center.addEventListener('touchcancel', this.onRootTouchEnd, true)\n    }\n    this.on(Events.DURATION_CHANGE, () => {\n      const { player, config } = this\n      if (player.duration > 0 && player.duration * 1000 < config.moveDuration) {\n        config.moveDuration = player.duration * 1000\n      }\n    })\n\n    this.on([Events.CANPLAY, Events.ENDED], () => {\n      const { time, isStart } = this.pos\n      if (!isStart && time > 0) {\n        this.pos.time = 0\n      }\n    })\n\n    const eventsMap = {\n      touchstart: 'onTouchStart',\n      touchmove: 'onTouchMove',\n      touchend: 'onTouchEnd',\n      press: 'onPress',\n      pressend: 'onPressEnd',\n      click: 'onClick',\n      doubleclick: 'onDbClick'\n    }\n\n    Object.keys(eventsMap).map(key => {\n      this.touch.on(key, (e) => {\n        this[eventsMap[key]](e)\n      })\n    })\n\n    if (!config.disableActive) {\n      // Add progress bar drag event callback\n      const progressPlugin = player.plugins.progress\n      if (progressPlugin) {\n        progressPlugin.addCallBack('dragmove', (data) => {\n          this.activeSeekNote(data.currentTime, data.forward)\n        });\n        ['dragend', 'click'].forEach(key => {\n          progressPlugin.addCallBack(key, () => {\n            this.changeAction(ACTIONS.AUTO)\n          })\n        })\n      }\n    }\n  }\n\n  registerThumbnail () {\n    const { player } = this\n    const { thumbnail } = player.plugins\n    if (thumbnail && thumbnail.usable) {\n      this.thumbnail = thumbnail.createThumbnail(null, 'mobile-thumbnail')\n      const timePreview = this.find('.time-preview')\n      timePreview.insertBefore(this.thumbnail, timePreview.children[0])\n    }\n  }\n\n  initCustomStyle () {\n    const { commonStyle } = this.playerConfig || {}\n    const { playedColor, progressColor, timePreviewStyle, curTimeColor, durationColor } = commonStyle\n    if (playedColor) {\n      this.find('.xg-curbar').style.backgroundColor = playedColor\n    }\n    if (progressColor) {\n      this.find('.xg-bar').style.backgroundColor = progressColor\n    }\n    if (timePreviewStyle) {\n      const previewDom = this.find('.time-preview')\n      Object.keys(timePreviewStyle).forEach(key => {\n        previewDom.style[key] = timePreviewStyle[key]\n      })\n    }\n    const curColor = curTimeColor || playedColor\n    const durColor = durationColor\n    curColor && (this.find('.xg-cur').style.color = curColor)\n    durColor && (this.find('.xg-dur').style.color = durColor)\n    this.config.disableTimeProgress && Util.addClass(this.find('.xg-timebar'), 'hide')\n  }\n\n  resetPos (time = 0) {\n    if (this.pos) {\n      this.pos.isStart = false\n      this.pos.scope = -1;\n      ['x', 'y', 'width', 'height', 'scopeL', 'scopeR', 'scopeM1', 'scopeM2'].map(item => {\n        this.pos[item] = 0\n      })\n    } else {\n      this.pos = {\n        isStart: false,\n        x: 0,\n        y: 0,\n        volume: 0,\n        rate: 1,\n        light: 0,\n        width: 0,\n        height: 0,\n        scopeL: 0,\n        scopeR: 0,\n        scopeM1: 0,\n        scopeM2: 0,\n        scope: -1,\n        time: 0\n      }\n    }\n  }\n\n  changeAction (action) {\n    const { player, root } = this\n    root.setAttribute('data-xg-action', action)\n    const startPlugin = player.plugins.start\n    startPlugin && startPlugin.recover()\n  }\n\n  getTouche (e) {\n    const rotateDeg = this.player.rotateDeg\n    const touche = e.touches && e.touches.length > 0 ? e.touches[e.touches.length - 1] : e\n    // if (touches && touches.length > 0) {\n    //   const touche = touches[touches.length - 1]\n    //   if (rotateDeg === 0) {\n    //     return {\n    //       pageX: touche.pageX,\n    //       pageY: touche.pageY\n    //     }\n    //   } else {\n    //     return {\n    //       pageX: touche.pageY,\n    //       pageY: touche.pageX\n    //     }\n    //   }\n    // } else {\n    // }\n    return rotateDeg === 0\n      ? {\n        pageX: touche.pageX,\n        pageY: touche.pageY\n      }\n      : {\n        pageX: touche.pageX,\n        pageY: touche.pageY\n      }\n  }\n\n  /**\n   * 校验具体的操作范围\n   * @param { number } x 方向位移\n   * @param { number } y 方向位移\n   * @param { number } diffx 方向位移差\n   * @param { number } diffy 方向位移差\n   * @param { any } pos 当前操作区域位置信息 包含{width, height}\n   * @return { number } scope 区域 0=>中间x方向滑动  1=>左侧上下滑动 2=>右侧上下滑动\n   */\n  checkScope (x, y, diffx, diffy, pos) {\n    const { width } = pos\n    let scope = -1\n    if (x < 0 || x > width) {\n      return scope\n    }\n    const mold = diffy === 0 ? Math.abs(diffx) : Math.abs(diffx / diffy)\n    if (Math.abs(diffx) > 0 && mold >= 1.73 && x > pos.scopeM1 && x < pos.scopeM2) {\n      scope = 0\n    } else if (Math.abs(diffx) === 0 || mold <= 0.57) {\n      scope = x < pos.scopeL ? 1 : (x > pos.scopeR ? 2 : 3)\n    }\n    return scope\n  }\n\n  /**\n   * 根据位移和操作类型进行对应处理\n   * @param {number} diffx x方向位移差\n   * @param {number} diffy y方向位移差\n   * @param {number} scope scope 区域 0=>中间x方向滑动  1=>左侧上下滑动 2=>右侧上下滑动\n   * @param {number} width 总体宽度\n   * @param {number} height 总高度\n   */\n  executeMove (diffx, diffy, scope, width, height) {\n    switch (scope) {\n      case 0:\n        this.updateTime(diffx / width * this.config.scopeM)\n        break\n      case 1:\n        this.updateBrightness(diffy / height)\n        break\n      case 2:\n        // ios系统不支持音量调节\n        if (!Sniffer.os.isIos) {\n          this.updateVolume(diffy / height)\n        }\n        break\n      default:\n    }\n  }\n\n  /**\n   * 结束手势操作\n   * @param {number} scope 当前手势类型 区域 0=>中间x方向滑动  1=>左侧上下滑动 2=>右侧上下滑动\n   * @param {number} lastScope 上一次手势类型\n   */\n  endLastMove (lastScope) {\n    const { pos, player, config } = this\n\n    const time = (pos.time - this.timeOffset) / 1000\n    switch (lastScope) {\n      case 0:\n        player.seek(Number(time).toFixed(1))\n        config.hideControlsEnd ? player.blur() : player.focus()\n        this.timer = setTimeout(() => {\n          this.pos.time = 0\n        }, 500)\n        break\n      case 1:\n      case 2:\n      default:\n    }\n    this.changeAction(ACTIONS.AUTO)\n  }\n\n  onTouchStart = (e) => {\n    const { player, config, pos, playerConfig } = this\n    const touche = this.getTouche(e)\n    if (touche && !config.disableGesture && this.duration > 0 && !player.ended) {\n      pos.isStart = true\n      this.timer && clearTimeout(this.timer)\n      // e.cancelable && e.preventDefault()\n      Util.checkIsFunction(playerConfig.disableSwipeHandler) && playerConfig.disableSwipeHandler()\n      this.find('.xg-dur').innerHTML = Util.format(this.duration)\n      // pos.volume = player.volume * 100\n      const rect = this.root.getBoundingClientRect()\n      if (player.rotateDeg === 90) {\n        pos.top = rect.left\n        pos.left = rect.top\n        pos.width = rect.height\n        pos.height = rect.width\n      } else {\n        pos.top = rect.top\n        pos.left = rect.left\n        pos.width = rect.width\n        pos.height = rect.height\n      }\n      const _x = parseInt(touche.pageX - pos.left, 10)\n      const _y = parseInt(touche.pageY - pos.top, 10)\n\n      pos.x = player.rotateDeg === 90 ? _y : _x // parseInt(touche.pageX - pos.left, 10)\n      pos.y = player.rotateDeg === 90 ? _x : _y // parseInt(touche.pageY - pos.top, 10)\n      pos.scopeL = config.scopeL * pos.width\n      pos.scopeR = (1 - config.scopeR) * pos.width\n      pos.scopeM1 = pos.width * (1 - config.scopeM) / 2\n      pos.scopeM2 = pos.width - pos.scopeM1\n    }\n  }\n\n  onTouchMove = (e) => {\n    const touche = this.getTouche(e)\n    const { pos, config, player } = this\n    if (!touche || config.disableGesture || !this.duration || !pos.isStart) {\n      return\n    }\n    const { miniMoveStep, hideControlsActive } = config\n\n    const _x = parseInt(touche.pageX - pos.left, 10)\n    const _y = parseInt(touche.pageY - pos.top, 10)\n\n    const x = player.rotateDeg === 90 ? _y : _x\n    const y = player.rotateDeg === 90 ? _x : _y\n\n    if (Math.abs(x - pos.x) > miniMoveStep || Math.abs(y - pos.y) > miniMoveStep) {\n      const diffx = x - pos.x\n      const diffy = y - pos.y\n      let scope = pos.scope\n      if (scope === -1) {\n        scope = this.checkScope(x, y, diffx, diffy, pos)\n        // 手势为快进快退记录起始操作时间\n        if (scope === 0) {\n          !hideControlsActive ? player.focus({ autoHide: false }) : player.blur()\n          !pos.time && (pos.time = parseInt(player.currentTime * 1000, 10) + this.timeOffset * 1000)\n        }\n        pos.scope = scope\n      }\n      if (scope === -1 || (scope > 0 && !config.gestureY) || (scope === 0 && !config.gestureX)) {\n        return\n      }\n      // e.cancelable && e.preventDefault()\n      this.executeMove(diffx, diffy, scope, pos.width, pos.height)\n      pos.x = x\n      pos.y = y\n    } else {\n      // console.log('touche.pageX - pos.x', touche.pageX - pos.x)\n    }\n  }\n\n  onTouchEnd = (e) => {\n    const { player, pos, playerConfig } = this\n    setTimeout(() => {\n      player.getPlugin('progress') && player.getPlugin('progress').resetSeekState()\n    }, 10)\n    if (!pos.isStart) {\n      return\n    }\n    if (pos.scope > -1) {\n      e.cancelable && e.preventDefault()\n    }\n\n    const { disableGesture, gestureX } = this.config\n    if (!disableGesture && gestureX) {\n      this.endLastMove(pos.scope)\n    } else {\n      pos.time = 0\n    }\n    pos.scope = -1\n    this.resetPos()\n    Util.checkIsFunction(playerConfig.enableSwipeHandler) && playerConfig.enableSwipeHandler()\n    this.changeAction(ACTIONS.AUTO)\n  }\n\n  checkIsRootTarget (e) {\n    const plugins = this.player.plugins || {}\n    if (plugins.progress && plugins.progress.root.contains(e.target)) {\n      return false\n    }\n    return (plugins.start && plugins.start.root.contains(e.target)) || (plugins.controls && plugins.controls.root.contains(e.target))\n  }\n\n  onRootTouchMove = (e) => {\n    if (this.config.disableGesture || !this.config.gestureX) {\n      return\n    }\n    if (this.checkIsRootTarget(e)) {\n      e.stopPropagation()\n      if (!this.pos.isStart) {\n        this.onTouchStart(e)\n      } else {\n        this.onTouchMove(e)\n      }\n    }\n  }\n\n  onRootTouchEnd = (e) => {\n    if (this.pos.scope > -1) {\n      this.onTouchEnd(e)\n      // const { controls } = this.player\n      // controls && controls.recoverAutoHide()\n    }\n  }\n\n  sendUseAction (event) {\n    const { paused } = this.player\n    this.emitUserAction(event, 'switch_play_pause', {\n      prop: 'paused',\n      from: paused,\n      to: !paused\n    })\n  }\n\n  clickHandler (e) {\n    const { player, config, playerConfig } = this\n    if (player.state < STATES.RUNNING) {\n      if (!playerConfig.closeVideoClick) {\n        this.sendUseAction(Util.createEvent('click'))\n        player.play()\n      }\n      return\n    }\n\n    if (!config.closedbClick || playerConfig.closeVideoClick) {\n      player.isActive ? player.blur() : player.focus()\n    } else if (!playerConfig.closeVideoClick) {\n      if (player.isActive || config.focusVideoClick) {\n        this.sendUseAction(Util.createEvent('click'))\n        this.switchPlayPause()\n      }\n      player.focus()\n    }\n  }\n\n  dbClickHandler (e) {\n    const { config, player } = this\n    if (!config.closedbClick && player.state >= STATES.RUNNING) {\n      this.sendUseAction(Util.createEvent('dblclick'))\n      this.switchPlayPause()\n    }\n  }\n\n  onClick (e) {\n    const { player } = this\n    runHooks(this, HOOKS[0], (plugin, data) => {\n      this.clickHandler(data.e)\n    }, { e, paused: player.paused })\n  }\n\n  onDbClick (e) {\n    const { player } = this\n    runHooks(this, HOOKS[1], (plugin, data) => {\n      this.dbClickHandler(data.e)\n    }, { e, paused: player.paused })\n  }\n\n  onPress (e) {\n    const { pos, config, player } = this\n    if (config.disablePress) {\n      return\n    }\n    pos.rate = this.player.playbackRate\n    this.emitUserAction('press', 'change_rate', {\n      prop: 'playbackRate',\n      from: player.playbackRate,\n      to: config.pressRate\n    })\n    player.playbackRate = config.pressRate\n    this.changeAction(ACTIONS.PLAYBACK)\n  }\n\n  onPressEnd (e) {\n    const { pos, config, player } = this\n    if (config.disablePress) {\n      return\n    }\n    this.emitUserAction('pressend', 'change_rate', { prop: 'playbackRate', from: player.playbackRate, to: pos.rate })\n    player.playbackRate = pos.rate\n    pos.rate = 1\n    this.changeAction(ACTIONS.AUTO)\n  }\n\n  updateTime (percent) {\n    const { player, config } = this\n    const { duration } = this.player\n    percent = Number(percent.toFixed(4))\n    let time = parseInt(percent * config.moveDuration, 10) + this.timeOffset\n    time += this.pos.time\n    time = time < 0 ? 0 : (time > duration * 1000 ? duration * 1000 - 200 : time)\n    player.getPlugin('time') && player.getPlugin('time').updateTime(time / 1000)\n    player.getPlugin('progress') && player.getPlugin('progress').updatePercent(time / 1000 / this.duration, true)\n    this.activeSeekNote(time / 1000, percent > 0)\n    // 在滑动的同时实时seek\n    if (config.isTouchingSeek) {\n      // player.currentTime = time / 1000\n      player.seek(Number((time - this.timeOffset) / 1000).toFixed(1))\n    }\n    this.pos.time = time\n  }\n\n  updateVolume (percent) {\n    if (this.player.rotateDeg) {\n      percent = -percent\n    }\n    const { player, pos } = this\n    percent = parseInt(percent * 100, 10)\n    pos.volume += percent\n    if (Math.abs(pos.volume) < 10) {\n      return\n    }\n    let volume = parseInt(player.volume * 10, 10) - parseInt(pos.volume / 10, 10)\n    volume = volume > 10 ? 10 : (volume < 1 ? 0 : volume)\n    player.volume = volume / 10\n    pos.volume = 0\n  }\n\n  updateBrightness (percent) {\n    const { pos, config, xgMask } = this\n    if (!config.darkness) {\n      return\n    }\n    if (this.player.rotateDeg) {\n      percent = -percent\n    }\n    let light = pos.light + (0.8 * percent)\n    light = light > config.maxDarkness ? config.maxDarkness : (light < 0 ? 0 : light)\n    if (xgMask) {\n      xgMask.style.backgroundColor = `rgba(0,0,0,${light})`\n    }\n    pos.light = light\n  }\n\n  activeSeekNote (time, isForward = true) {\n    const { player, config } = this\n    const isLive = !(this.duration !== Infinity && this.duration > 0)\n    if (!time || typeof time !== 'number' || isLive || config.disableActive) {\n      return\n    }\n    if (time < 0) {\n      time = 0\n    } else if (time > player.duration) {\n      time = player.duration - 0.2\n    }\n    this.changeAction(ACTIONS.SEEKING)\n\n    const startPlugin = player.plugins.start\n    startPlugin && startPlugin.focusHide()\n\n    this.find('.xg-dur').innerHTML = Util.format(this.duration)\n    this.find('.xg-cur').innerHTML = Util.format(time)\n    this.find('.xg-curbar').style.width = `${time / this.duration * 100}%`\n    if (isForward) {\n      Util.removeClass(this.find('.xg-seek-show'), 'xg-back')\n    } else {\n      Util.addClass(this.find('.xg-seek-show'), 'xg-back')\n    }\n    this.updateThumbnails(time)\n    // const {thumbnail} = player.plugins\n    // this.thumbnailPlugin && thumbnail.update(time)\n  }\n\n  updateThumbnails (time) {\n    const { player } = this\n    const { thumbnail } = player.plugins\n    if (thumbnail && thumbnail.usable) {\n      this.thumbnail && thumbnail.update(this.thumbnail, time, 160, 90)\n      // this.videothumbnail && thumbnail.update(this.videothumbnail, time, rect.width, rect.height)\n    }\n  }\n\n  switchPlayPause () {\n    const { player } = this\n    if (player.state < STATES.ATTACHED) {\n      return false\n    } else if (!player.ended) {\n      if (player.paused) {\n        player.play()\n      } else {\n        player.pause()\n      }\n    }\n  }\n\n  // 动态禁用手势\n  disableGesture () {\n    this.config.disableGesture = true\n  }\n\n  // 动态启用手势\n  enableGesture () {\n    this.config.disableGesture = false\n  }\n\n  destroy () {\n    const { player } = this\n    this.timer && clearTimeout(this.timer)\n    this.thumbnail = null\n    player.root.removeChild(this.xgMask)\n    this.xgMask = null\n    this.touch && this.touch.destroy()\n    this.touch = null\n    player.root.removeEventListener('touchmove', this.onRootTouchMove, true)\n    player.root.removeEventListener('touchend', this.onRootTouchEnd, true)\n    player.root.removeEventListener('touchcancel', this.onRootTouchEnd, true)\n    const { controls } = this.player\n    if (controls && controls.center) {\n      controls.center.removeEventListener('touchmove', this.onRootTouchMove, true)\n      controls.center.removeEventListener('touchend', this.onRootTouchEnd, true)\n      controls.center.removeEventListener('touchcancel', this.onRootTouchEnd, true)\n    }\n  }\n\n  render () {\n    const className = this.config.gradient !== 'normal' ? `gradient ${this.config.gradient}` : 'gradient'\n    return `\n     <xg-trigger class=\"trigger\">\n     <div class=\"${className}\"></div>\n        <div class=\"time-preview\">\n            <div class=\"xg-seek-show ${this.config.disableSeekIcon ? ' hide-seek-icon' : ''}\">\n              <i class=\"xg-seek-icon\"></i>\n              <span class=\"xg-cur\">00:00</span>\n              <span class=\"xg-separator\">/</span>\n              <span class=\"xg-dur\">00:00</span>\n            </div>\n              <div class=\"xg-bar xg-timebar\">\n                <div class=\"xg-curbar\"></div>\n              </div>\n        </div>\n        <div class=\"xg-playbackrate xg-top-note\">\n            <span><i>${this.config.pressRate}X</i>${this.i18n.FORWARD}</span>\n        </div>\n     </xg-trigger>\n    `\n  }\n}\n\nexport default MobilePlugin\n","import { BasePlugin, Events, Util } from '../../plugin'\n\n/**\n * @typedef {{\n *   seekStep?: number,\n *   checkVisible?: boolean,\n *   disableBodyTrigger?: boolean,\n *   keyCodeMap?: { [propName: string]: any },\n *   disable: boolean,\n *   playbackRate: number,\n *   isIgnoreUserActive: boolean,\n *   [propName: string]: any\n * }} IKeyboardConfig\n */\n\nfunction preventDefault (e) {\n  e.preventDefault()\n  e.returnValue = false\n}\n\nfunction isDisableTag (el) {\n  const tagName = el.tagName\n\n  if (tagName === 'INPUT' || tagName === 'TEXTAREA' || el.isContentEditable) {\n    return true\n  }\n\n  return false\n}\n\nclass Keyboard extends BasePlugin {\n  static get pluginName () {\n    return 'keyboard'\n  }\n\n  /**\n   * @type IKeyboardConfig\n   */\n  static get defaultConfig () {\n    return {\n      seekStep: 10, // Left/right fast forward each operation time\n      checkVisible: false, // Whether to check the visibility when the shortcut key takes effect\n      disableBodyTrigger: false, // Whether to monitor the shortcut keys on the body\n      disableRootTrigger: false, // 是否在player.root上做快捷键监听\n      isGlobalTrigger: true, // Whether the shortcut key needs to be triggered globally\n      keyCodeMap: {},\n      disable: false,\n      playbackRate: 2, // 长按倍速限制\n      isIgnoreUserActive: true // 是否忽略用户激活状态\n    }\n  }\n\n  mergekeyCodeMap () {\n    const extendkeyCodeMap = this.config.keyCodeMap\n    if (extendkeyCodeMap) {\n      Object.keys(extendkeyCodeMap).map(key => {\n        if (!this.keyCodeMap[key]) {\n          this.keyCodeMap[key] = extendkeyCodeMap[key]\n        } else {\n          ['keyCode', 'action', 'disable', 'pressAction', 'disablePress', 'isBodyTarget'].map(key1 => {\n            extendkeyCodeMap[key][key1] && (this.keyCodeMap[key][key1] = extendkeyCodeMap[key][key1])\n          })\n        }\n      })\n    }\n  }\n\n  afterCreate () {\n    this.config.disable = !this.playerConfig.keyShortcut\n    const seekStep = typeof this.config.seekStep === 'function' ? this.config.seekStep(this.player) : this.config.seekStep\n    if (!(!seekStep || typeof seekStep !== 'number')) {\n      this.seekStep = seekStep\n    }\n    this.keyCodeMap = {\n      space: {\n        keyCode: 32,\n        action: 'playPause',\n        disable: false,\n        disablePress: false,\n        noBodyTarget: false\n      },\n      up: {\n        keyCode: 38,\n        action: 'upVolume',\n        disable: false,\n        disablePress: false,\n        noBodyTarget: true\n      },\n      down: {\n        keyCode: 40,\n        action: 'downVolume',\n        disable: false,\n        disablePress: false,\n        noBodyTarget: true\n      },\n      left: {\n        keyCode: 37,\n        action: 'seekBack',\n        disablePress: false,\n        disable: false\n      },\n      right: {\n        keyCode: 39,\n        action: 'seek',\n        pressAction: 'changePlaybackRate',\n        disablePress: false,\n        disable: false\n      },\n      esc: {\n        keyCode: 27,\n        action: 'exitFullscreen',\n        disablePress: true,\n        disable: false\n      }\n    }\n    this.mergekeyCodeMap()\n    this._keyState = {\n      isKeyDown: false,\n      isBodyKeyDown: false,\n      isPress: false,\n      tt: 0,\n      playbackRate: 0\n    }\n    this.player.root.addEventListener('keydown', this.onKeydown)\n    document.addEventListener('keydown', this.onBodyKeyDown)\n  }\n\n  setConfig (newConfig) {\n    Object.keys(newConfig).forEach(key => {\n      this.config[key] = newConfig[key]\n    })\n  }\n\n  checkIsVisible () {\n    if (!this.config.checkVisible) {\n      return true\n    }\n    const rec = this.player.root.getBoundingClientRect()\n    const { height, top, bottom } = rec\n    const h = window.innerHeight\n    if ((top < 0 && top < 0 - height * 0.9) || (bottom > 0 && bottom - h > height * 0.9)) {\n      return false\n    }\n    return true\n  }\n\n  checkCode (code, isBodyTarget) {\n    let flag = false\n    Object.keys(this.keyCodeMap).map(key => {\n      if (this.keyCodeMap[key] && code === this.keyCodeMap[key].keyCode && !this.keyCodeMap[key].disable) {\n        flag = !isBodyTarget || (isBodyTarget && !this.keyCodeMap[key].noBodyTarget)\n      }\n    })\n    return flag\n  }\n\n  downVolume (event) {\n    const { player } = this\n    if (player.volume <= 0) {\n      return\n    }\n    const val = parseFloat((player.volume - 0.1).toFixed(1))\n    const props = {\n      volume: {\n        from: player.volume,\n        to: val\n      }\n    }\n    this.emitUserAction(event, 'change_volume', { props })\n    if (val >= 0) {\n      player.volume = val\n    } else {\n      player.volume = 0\n    }\n  }\n\n  upVolume (event) {\n    const { player } = this\n    if (player.volume >= 1) {\n      return\n    }\n    const val = parseFloat((player.volume + 0.1).toFixed(1))\n    const props = {\n      volume: {\n        from: player.volume,\n        to: val\n      }\n    }\n    this.emitUserAction(event, 'change_volume', { props })\n    if (val <= 1) {\n      player.volume = val\n    } else {\n      player.volume = 1\n    }\n  }\n\n  seek (event) {\n    const { currentTime, offsetCurrentTime, duration, offsetDuration, timeSegments } = this.player\n    let _time = offsetCurrentTime > -1 ? offsetCurrentTime : currentTime\n    const _duration = offsetDuration || duration\n    const _step = event.repeat && this.seekStep >= 4 ? parseInt(this.seekStep / 2, 10) : this.seekStep\n    if (_time + _step <= _duration) {\n      _time = _time + _step\n    } else {\n      _time = _duration\n    }\n    const _seekTime = Util.getCurrentTimeByOffset(_time, timeSegments)\n    const props = {\n      currentTime: {\n        from: currentTime,\n        to: _seekTime\n      }\n    }\n    this.emitUserAction(event, 'seek', { props })\n    this.player.currentTime = _seekTime\n  }\n\n  seekBack (event) {\n    const { currentTime, offsetCurrentTime, timeSegments } = this.player\n    const _step = event.repeat ? parseInt(this.seekStep / 2, 10) : this.seekStep\n    const _time = offsetCurrentTime > -1 ? offsetCurrentTime : currentTime\n    let _seekTime = _time - _step\n    if (_seekTime < 0) {\n      _seekTime = 0\n    }\n    _seekTime = Util.getCurrentTimeByOffset(_seekTime, timeSegments)\n    const props = {\n      currentTime: {\n        from: currentTime,\n        to: _seekTime\n      }\n    }\n    this.emitUserAction(event, 'seek', { props })\n    this.player.currentTime = _seekTime\n  }\n\n  changePlaybackRate (event) {\n    const { _keyState, config, player } = this\n    if (_keyState.playbackRate === 0) {\n      _keyState.playbackRate = player.playbackRate\n      player.playbackRate = config.playbackRate\n    }\n  }\n\n  playPause (event) {\n    const { player } = this\n    if (!player) {\n      return\n    }\n    this.emitUserAction(event, 'switch_play_pause')\n    if (player.paused) {\n      // eslint-disable-next-line handle-callback-err\n      player.play()\n    } else {\n      player.pause()\n    }\n  }\n\n  exitFullscreen (event) {\n    const { player } = this\n    const { fullscreen, cssfullscreen } = player\n    if (fullscreen) {\n      this.emitUserAction('keyup', 'switch_fullscreen', {\n        prop: 'fullscreen',\n        from: fullscreen,\n        to: !fullscreen\n      })\n      player.exitFullscreen()\n    }\n    if (cssfullscreen) {\n      this.emitUserAction('keyup', 'switch_css_fullscreen', {\n        prop: 'cssfullscreen',\n        from: cssfullscreen,\n        to: !cssfullscreen\n      })\n      player.exitCssFullscreen()\n    }\n  }\n\n  onBodyKeyDown = (event) => {\n    if (!this.player) {\n      return\n    }\n    const e = event || window.event\n    const keyCode = e.keyCode\n    const { _keyState, player } = this\n    const { disable, disableBodyTrigger, isIgnoreUserActive } = this.config\n    // 以下条件不响应\n    if (disable || disableBodyTrigger || !(player.isUserActive || isIgnoreUserActive) || isDisableTag(e.target) || !this.checkIsVisible() || e.metaKey || e.altKey || e.ctrlKey) {\n      _keyState.isBodyKeyDown = false\n      return\n    }\n    // 首次进入进行是否生效校验\n    if (!event.repeat && !_keyState.isKeyDown) {\n      if ((e.target === document.body || (this.config.isGlobalTrigger && !isDisableTag(e.target))) && this.checkCode(keyCode, true)) {\n        _keyState.isBodyKeyDown = true\n      }\n      document.addEventListener('keyup', this.onBodyKeyUp)\n    }\n    _keyState.isBodyKeyDown && this.handleKeyDown(e)\n  }\n\n  onBodyKeyUp = (event) => {\n    if (!this.player) {\n      return\n    }\n    document.removeEventListener('keyup', this.onBodyKeyUp)\n    this.handleKeyUp(event)\n  }\n\n  onKeydown = (event) => {\n    if (!this.player) {\n      return\n    }\n    const e = event || window.event\n    const { _keyState } = this\n    // 首次按下检查是否满足触发他条件\n    if (!e.repeat) {\n      if (this.config.disable || this.config.disableRootTrigger || e.metaKey || e.altKey || e.ctrlKey) {\n        return\n      }\n      if (e && (e.keyCode === 37 || this.checkCode(e.keyCode)) && (e.target === this.player.root || e.target === this.player.video || e.target === this.player.controls.el)) {\n        _keyState.isKeyDown = true\n      }\n      this.player.root.addEventListener('keyup', this.onKeyup)\n    }\n    // 长按不满足触发条件直接返回\n    if (!_keyState.isKeyDown) {\n      return\n    }\n    this.handleKeyDown(e)\n  }\n\n  onKeyup = (event) => {\n    if (!this.player) {\n      return\n    }\n    this.player.root.removeEventListener('keyup', this.onKeyup)\n    this.handleKeyUp(event)\n  }\n\n  handleKeyDown (e) {\n    const { _keyState } = this\n    if (e.repeat) {\n      _keyState.isPress = true\n      const _t = Date.now()\n      if (_t - _keyState.tt < 200) {\n        return\n      }\n      _keyState.tt = _t\n    }\n    this.handleKeyCode(e.keyCode, e, _keyState.isPress)\n  }\n\n  handleKeyUp (e) {\n    const { _keyState } = this\n    if (_keyState.playbackRate > 0) {\n      this.player.playbackRate = _keyState.playbackRate\n      _keyState.playbackRate = 0\n    }\n    _keyState.isKeyDown = false\n    _keyState.isPress = false\n    _keyState.tt = 0\n  }\n\n  handleKeyCode (curKeyCode, event, isPress) {\n    const arr = Object.keys(this.keyCodeMap)\n    for (let i = 0; i < arr.length; i++) {\n      const { action, keyCode, disable, pressAction, disablePress } = this.keyCodeMap[arr[i]]\n      if (keyCode === curKeyCode) {\n        if (!disable && !(isPress && disablePress)) {\n          const _action = !isPress ? action : (pressAction || action)\n          if (typeof _action === 'function') {\n            action(event, this.player, isPress)\n          } else if (typeof _action === 'string') {\n            if (typeof this[_action] === 'function') {\n              this[_action](event, this.player, isPress)\n            }\n          }\n          this.emit(Events.SHORTCUT, {\n            key: arr[i],\n            target: event.target,\n            isPress: isPress,\n            ...this.keyCodeMap[arr[i]]\n          })\n        }\n        preventDefault(event)\n        event.stopPropagation()\n        break\n      }\n    }\n  }\n\n  destroy () {\n    this.player.root.removeEventListener('keydown', this.onKeydown)\n    document.removeEventListener('keydown', this.onBodyKeyDown)\n    this.player.root.removeEventListener('keyup', this.onKeyup)\n    document.removeEventListener('keyup', this.onBodyKeyUp)\n  }\n\n  disable () {\n    this.config.disable = true\n  }\n\n  enable () {\n    this.config.disable = false\n  }\n}\n\nexport default Keyboard\n","import Plugin, { POSITIONS } from '../../plugin/plugin'\nimport loadingIcon from '../assets/loading.svg'\nimport './index.scss'\n\nclass Loading extends Plugin {\n  static get pluginName () {\n    return 'loading'\n  }\n\n  static get defaultConfig () {\n    return {\n      position: POSITIONS.ROOT\n    }\n  }\n\n  registerIcons () {\n    return {\n      loadingIcon: loadingIcon\n    }\n  }\n\n  afterCreate () {\n    this.appendChild('xg-loading-inner', this.icons.loadingIcon)\n  }\n\n  render () {\n    return `\n    <xg-loading class=\"xgplayer-loading\">\n      <xg-loading-inner></xg-loading-inner>\n    </xg-loading>`\n  }\n}\n\nexport default Loading\n","import { BasePlugin, Events, Util } from '../../plugin'\n/**\n * 进行事件分段控制\n */\nexport default class TimeSegmentsControls extends BasePlugin {\n  static get pluginName () {\n    return 'TimeSegmentsControls'\n  }\n\n  static get defaultConfig () {\n    return {\n      disable: true,\n      segments: []\n    }\n  }\n\n  afterCreate () {\n    this.curIndex = -1\n    this.curPos = null\n    this.lastCurrentTime = 0\n\n    this.updateSegments()\n\n    this.on(Events.DURATION_CHANGE, this._onDurationChange)\n    this.on(Events.LOADED_DATA, this._onLoadedData)\n\n    this.on(Events.TIME_UPDATE, this._onTimeupdate)\n\n    this.on(Events.SEEKING, this._onSeeking)\n\n    this.on(Events.PLAY, this._onPlay)\n  }\n\n  setConfig (newConfig) {\n    if (!newConfig) {\n      return\n    }\n    const keys = Object.keys(newConfig)\n    if (keys.length < 1) {\n      return\n    }\n    keys.forEach(key => {\n      this.config[key] = newConfig[key]\n    })\n    this.updateSegments()\n  }\n\n  updateSegments () {\n    const { disable, segments } = this.config\n    const { player } = this\n    if (disable || !segments || segments.length === 0) {\n      player.timeSegments = []\n      player.offsetDuration = 0\n      player.offsetCurrentTime = -1\n    } else {\n      const _segs = this.formatTimeSegments(segments, player.duration)\n      player.timeSegments = _segs\n      player.offsetDuration = _segs.length > 0 ? _segs[_segs.length - 1].duration : 0\n    }\n  }\n\n  formatTimeSegments (timeSegments, duration) {\n    const ret = []\n    if (!timeSegments) {\n      return []\n    }\n    // console.log('>>>formatTimeSegments', duration)\n    timeSegments.sort((a,b) =>{ return a.start - b.start })\n    timeSegments.forEach((item, index) => {\n      const _item = {}\n      _item.start = item.start < 0 ? 0 : item.start\n      _item.end = duration > 0 && item.end > duration ? duration : item.end\n      if (duration > 0 && _item.start > duration) {\n        return\n      }\n      ret.push(_item)\n      const _segDuration = _item.end - _item.start\n      if (index === 0) {\n        _item.offset = item.start // 偏移量\n        _item.cTime = 0\n        _item.segDuration = _segDuration\n        _item.duration = _segDuration\n      } else {\n        const last = ret[index - 1]\n        _item.offset = last.offset + (_item.start - last.end)\n        _item.cTime = last.duration + last.cTime\n        _item.segDuration = _segDuration\n        _item.duration = last.duration + _segDuration\n      }\n    })\n    return ret\n  }\n\n  _onDurationChange = () => {\n    this.updateSegments()\n    const { currentTime, timeSegments } = this.player\n    if (!this._checkIfEnabled(timeSegments)) {\n      return\n    }\n    const index = Util.getIndexByTime(currentTime,timeSegments)\n    const time = Util.getOffsetCurrentTime(currentTime, timeSegments, index)\n    this.player.offsetCurrentTime = time\n    this.changeIndex(index, timeSegments)\n  }\n\n  _onLoadedData = () => {\n    const { timeSegments } = this.player\n    if (!this._checkIfEnabled(timeSegments)) {\n      return\n    }\n    const time = Util.getOffsetCurrentTime(0, timeSegments)\n    this.player.offsetCurrentTime = time\n    this.changeIndex(0, timeSegments)\n    if (this.curPos.start > 0){\n      this.player.currentTime = this.curPos.start\n    }\n  }\n\n  _onTimeupdate = () => {\n    const { currentTime, timeSegments } = this.player\n    if (!this._checkIfEnabled(timeSegments)) {\n      return\n    }\n    const _len = timeSegments.length\n    this.lastCurrentTime = currentTime\n    const index = Util.getIndexByTime(currentTime, timeSegments)\n    if (index !== this.curIndex) {\n      this.changeIndex(index, timeSegments)\n    }\n    const curTime = Util.getOffsetCurrentTime(currentTime, timeSegments, index)\n\n    this.player.offsetCurrentTime = curTime\n\n    // 根据分段信息进行放时间点跳转\n    if (!this.curPos) {\n      return\n    }\n    const { start, end } = this.curPos\n    if (currentTime < start) {\n      this.player.currentTime = start\n    } else if (currentTime > end && index >= _len - 1) {\n      this.player.pause()\n    }\n  }\n\n  _onSeeking = () => {\n    const { currentTime, timeSegments } = this.player\n    if (!this._checkIfEnabled(timeSegments)) {\n      return\n    }\n    if (currentTime < timeSegments[0].start) {\n      this.player.currentTime = timeSegments[0].start\n    } else if (currentTime > timeSegments[timeSegments.length - 1].end) {\n      this.player.currentTime = timeSegments[timeSegments.length - 1].end\n    } else {\n      const _index = Util.getIndexByTime(currentTime, timeSegments)\n      if (_index >= 0) {\n        const _seekTime = this.getSeekTime(currentTime, this.lastCurrentTime, _index, timeSegments)\n        if (_seekTime >= 0 ) {\n          this.player.currentTime = _seekTime\n        }\n      }\n    }\n  }\n\n  _onPlay = () => {\n    const { currentTime, timeSegments } = this.player\n    if (this._checkIfEnabled(timeSegments) && currentTime >= timeSegments[timeSegments.length - 1].end) {\n      this.player.currentTime = timeSegments[0].start\n    }\n  }\n\n  getSeekTime (currentTime, lastCurrentTime, index, timeSegments) {\n    let _time = -1\n    const { start, end } = timeSegments[index]\n    if (currentTime >= start && currentTime <= end) {\n      // console.log('>>>>_onSeeking noSeek', currentTime, lastCurrentTime, start, end, _time)\n      return _time\n    }\n    const diff = currentTime - lastCurrentTime\n    if (diff < 0) {\n      if (currentTime < start) {\n        const diff2 = lastCurrentTime > start ? lastCurrentTime - start : 0\n        _time = index - 1 >= 0 ? timeSegments[index - 1].end + diff + diff2 : 0\n        // console.log('>>>>_onSeeking seek3', currentTime, lastCurrentTime, diff, start, end, _time)\n        return _time\n      }\n    }\n    return -1\n  }\n\n  _checkIfEnabled (segments) {\n    return !(!segments || segments.length < 1)\n  }\n\n  changeIndex (index, timeSegments) {\n    this.curIndex = index\n    if (index >= 0 && timeSegments.length > 0) {\n      this.curPos = timeSegments[index]\n    } else {\n      this.curPos = null\n    }\n  }\n}","import { POSITIONS, Util } from '../../plugin'\nimport { xgIconTips } from '../common/iconTools'\nimport IconPlugin from '../common/iconPlugin'\nimport { Events } from '../../plugin/basePlugin'\nimport RotateSvg from '../assets/rotate.svg'\nimport './index.scss'\n\nexport default class Rotate extends IconPlugin {\n  static get pluginName () {\n    return 'rotate'\n  }\n\n  static get defaultConfig () {\n    return {\n      position: POSITIONS.CONTROLS_RIGHT,\n      index: 6,\n      innerRotate: true, // true为只有画面旋转，false为整个播放器旋转\n      clockwise: false,\n      rotateDeg: 0, // 初始旋转角度\n      disable: false\n    }\n  }\n\n  constructor (args) {\n    super(args)\n    this.rotateDeg = this.config.rotateDeg || 0\n  }\n\n  afterCreate () {\n    if (this.config.disable) {\n      return\n    }\n    super.afterCreate()\n    this.appendChild('.xgplayer-icon', this.icons.rotate)\n    this.onBtnClick = this.onBtnClick.bind(this)\n    this.bind('.xgplayer-icon', ['click', 'touchend'], this.onBtnClick)\n    // 全屏/css全屏/容器宽高发生变化 需要重新计算\n    this.on(Events.VIDEO_RESIZE, () => {\n      if (this.rotateDeg && this.config.innerRotate) {\n        Util.setTimeout(this, () => {\n          this.updateRotateDeg(this.rotateDeg, this.config.innerRotate)\n        }, 100)\n      }\n    })\n\n    const root = this.player.root\n    this.rootWidth = root.style.width || root.offsetWidth || root.clientWidth\n    this.rootHeight = root.style.height || root.offsetHeight || root.clientHeight\n\n    if (this.rotateDeg) {\n      this.updateRotateDeg(this.rotateDeg, this.config.innerRotate)\n    }\n  }\n\n  destroy () {\n    super.destroy()\n    this.unbind('.xgplayer-icon', ['click', 'touchend'], this.onBtnClick)\n  }\n\n  onBtnClick (e) {\n    e.preventDefault()\n    e.stopPropagation()\n    this.emitUserAction(e, 'rotate')\n    this.rotate(this.config.clockwise, this.config.innerRotate, 1)\n  }\n\n  updateRotateDeg (rotateDeg, innerRotate) {\n    if (!rotateDeg) {\n      rotateDeg = 0\n    }\n    if (innerRotate) {\n      this.player.videoRotateDeg = rotateDeg\n      return\n    }\n    const { player, rootWidth, rootHeight } = this\n    const { root, innerContainer } = player\n    const video = player.media\n    const width = root.offsetWidth\n    const height = innerContainer && innerRotate ? innerContainer.offsetHeight : root.offsetHeight\n    let rWidth = rootWidth\n    let rHeight = rootHeight\n    let x = 0\n    let y = 0\n    if (rotateDeg === 0.75 || rotateDeg === 0.25) {\n      rWidth = `${height}px`\n      rHeight = `${width}px`\n      x = -(height - width) / 2\n      y = -(width - height) / 2\n    }\n    const _transform = `translate(${x}px,${y}px) rotate(${rotateDeg}turn)`\n    const _styles = {\n      transformOrigin: 'center center',\n      transform: _transform,\n      webKitTransform: _transform,\n      height: rHeight,\n      width: rWidth\n    }\n\n    const _target = innerRotate ? video : root\n    const poster = innerRotate ? player.getPlugin('poster') : null\n    Object.keys(_styles).map(key => {\n      _target.style[key] = _styles[key]\n      poster && poster.root && (poster.root.style[key] = _styles[key])\n    })\n  }\n\n  rotate (clockwise = false, innerRotate = true, times = 1) {\n    const player = this.player\n    if (!this.rotateDeg) {\n      this.rotateDeg = 0\n    }\n    const factor = clockwise ? 1 : -1\n\n    this.rotateDeg = (this.rotateDeg + 1 + factor * 0.25 * times) % 1\n    this.updateRotateDeg(this.rotateDeg, innerRotate)\n    player.emit(Events.ROTATE, this.rotateDeg * 360)\n  }\n\n  registerIcons () {\n    return {\n      rotate: RotateSvg\n    }\n  }\n\n  render () {\n    if (this.config.disable) {\n      return\n    }\n    return `\n    <xg-icon class=\"xgplayer-rotate\">\n      <div class=\"xgplayer-icon\">\n      </div>\n      ${xgIconTips(this, 'ROTATE_TIPS', this.playerConfig.isHideTips)}\n    </xg-icon>`\n  }\n}\n","/* global documentPictureInPicture */\nimport { Events, Util, POSITIONS } from '../../plugin'\nimport { xgIconTips } from '../common/iconTools'\nimport IconPlugin from '../common/iconPlugin'\nimport PipIcon from '../assets/pipIcon.svg'\nimport PipIconExit from '../assets/pipIconExit.svg'\nimport './index.scss'\n\n/**\n * @description picture-in-picture plugin\n * @doc https://www.w3.org/TR/picture-in-picture/\n * @doc https://developer.apple.com/documentation/webkitjs/adding_picture_in_picture_to_your_safari_media_controls\n * @doc https://wicg.github.io/document-picture-in-picture/\n */\n\nconst PresentationMode = {\n  PIP: 'picture-in-picture',\n  INLINE: 'inline',\n  FULLSCREEN: 'fullscreen'\n}\n\nclass PIP extends IconPlugin {\n  static get pluginName () {\n    return 'pip'\n  }\n\n  static get defaultConfig () {\n    return {\n      position: POSITIONS.CONTROLS_RIGHT,\n      index: 6,\n      showIcon: false,\n      preferDocument: false,\n      width: undefined,\n      height: undefined,\n      docPiPNode: undefined,\n      docPiPStyle: undefined\n    }\n  }\n\n  static checkWebkitSetPresentationMode (video) {\n    return typeof video.webkitSetPresentationMode === 'function'\n  }\n\n  beforeCreate (args) {\n    if (typeof args.player.config.pip === 'boolean') {\n      args.config.showIcon = args.player.config.pip\n    }\n  }\n\n  afterCreate () {\n    // 非可用状态不做初始化\n    if (!this.isPIPAvailable()) {\n      return\n    }\n    super.afterCreate()\n    this.pMode = PresentationMode.INLINE\n    this.initPipEvents()\n    // 确认开启按钮的情况下才初始化按钮\n    if (this.config.showIcon) {\n      this.initIcons()\n    }\n    // video初始化之后再做判断是否显示\n    this.once(Events.COMPLETE, () => {\n      if (this.config.showIcon) {\n        Util.removeClass(this.find('.xgplayer-icon'), 'xg-icon-disable')\n        this.bind('click', this.switchPIP)\n      }\n    })\n  }\n\n  registerIcons () {\n    return {\n      pipIcon: { icon: PipIcon, class: 'xg-get-pip' },\n      pipIconExit: { icon: PipIconExit, class: 'xg-exit-pip' }\n    }\n  }\n\n  initIcons () {\n    const { icons } = this\n    this.appendChild('.xgplayer-icon', icons.pipIcon)\n    this.appendChild('.xgplayer-icon', icons.pipIconExit)\n  }\n\n  initPipEvents () {\n    const { player } = this\n    this.leavePIPCallback = () => {\n      // 处理点击x关闭画中画的时候暂停问题\n      const paused = player.paused\n      Util.setTimeout(this, () => {\n        // 使用mediaPlay避免多次触发 playhooks\n        !paused && player.mediaPlay()\n      }, 0)\n      !paused && player.mediaPlay()\n      this.setAttr('data-state', 'normal')\n      this.pipWindow = null\n      player.emit(Events.PIP_CHANGE, false)\n    }\n\n    this.enterPIPCallback = (e) => {\n      player.emit(Events.PIP_CHANGE, true)\n      if (e?.pictureInPictureWindow) {\n        this.pipWindow = e.pictureInPictureWindow\n      }\n      this.setAttr('data-state', 'pip')\n    }\n\n    this.onWebkitpresentationmodechanged = (e) => {\n      const mode = player.media.webkitPresentationMode\n      // 如果在全屏下进入了该逻辑,调用退出全屏处理\n      if (this.pMode === PresentationMode.FULLSCREEN && mode !== PresentationMode.FULLSCREEN) {\n        player.onFullscreenChange(null, false)\n      }\n      this.pMode = mode\n      if (mode === PresentationMode.PIP) {\n        this.enterPIPCallback(e)\n      } else if (mode === PresentationMode.INLINE) {\n        this.leavePIPCallback(e)\n      }\n    }\n\n    if (player.media) {\n      player.media.addEventListener('enterpictureinpicture', this.enterPIPCallback)\n      player.media.addEventListener('leavepictureinpicture', this.leavePIPCallback)\n      PIP.checkWebkitSetPresentationMode(player.media) && player.media.addEventListener('webkitpresentationmodechanged', this.onWebkitpresentationmodechanged)\n    }\n  }\n\n  switchPIP = (e) => {\n    if (!this.isPIPAvailable()) {\n      return false\n    }\n    e.stopPropagation && e.stopPropagation()\n    if (this.isPip) {\n      this.exitPIP()\n      this.emitUserAction(e, 'change_pip', { props: 'pip', from: true, to: false })\n      this.setAttr('data-state', 'normal')\n    } else if (this.player.media.readyState === 4) {\n      this.requestPIP()\n      this.emitUserAction(e, 'change_pip', { props: 'pip', from: false, to: true })\n      this.setAttr('data-state', 'pip')\n    }\n  }\n\n  copyStyleIntoPiPWindow (pipWin) {\n    const textContent = [...document.styleSheets]\n      .map((style) => {\n        try {\n          return [...style.cssRules].map((rule) => rule.cssText).join('')\n        } catch (e) {\n          const link = document.createElement('link')\n          link.rel = 'stylesheet'\n          link.type = style.type\n          link.media = style.media\n          link.href = style.href\n          pipWin.document.head.appendChild(link)\n        }\n        return ''\n      })\n      .filter(Boolean)\n      .join('\\n')\n    const style = document.createElement('style')\n\n    style.textContent = textContent\n    pipWin.document.head.appendChild(style)\n  }\n\n  /*\n   * 进入画中画\n  */\n  requestPIP () {\n    const { player, playerConfig, config } = this\n    if (!this.isPIPAvailable() || this.isPip) {\n      return\n    }\n    try {\n      const { poster } = playerConfig\n      if (poster) {\n        player.media.poster = Util.typeOf(poster) === 'String' ? poster : poster.poster\n      }\n\n      if (config.preferDocument && this.isDocPIPAvailable()) {\n        const pipOptions = {}\n\n        if (config.width && config.height) {\n          pipOptions.width = config.width\n          pipOptions.height = config.height\n        } else {\n          const playerRect = player.root.getBoundingClientRect()\n          pipOptions.width = playerRect.width\n          pipOptions.height = playerRect.height\n        }\n\n        documentPictureInPicture.requestWindow(pipOptions).then((pipWin) => {\n          const { docPiPNode, docPiPStyle } = config\n\n          this.enterPIPCallback()\n\n          // record original position\n          const pipRoot = docPiPNode || player.root\n          const parentNode = pipRoot.parentElement\n          const previousSibling = pipRoot.previousSibling\n          const nextSibling = pipRoot.nextSibling\n\n          this.copyStyleIntoPiPWindow(pipWin)\n\n          // Make sure player fits in the Picture-in-Picture window.\n          const styles = document.createElement('style')\n          styles.append('body{padding:0; margin:0;}')\n          if (docPiPStyle) {\n            let cssContent = ''\n            if (typeof docPiPStyle === 'string') {\n              cssContent = docPiPStyle\n            } else if (typeof docPiPStyle === 'function') {\n              cssContent = docPiPStyle.call(config)\n            }\n            if (cssContent) {\n              styles.append(cssContent)\n            }\n          } else if (pipRoot === player.root) {\n            styles.append(`\n              .xgplayer{width: 100%!important; height: 100%!important;}\n            `)\n          }\n          pipWin.document.head.append(styles)\n\n          // Add player to the PiP window.\n          pipWin.document.body.append(pipRoot)\n\n          // Listen for the PiP closing event to put the video back.\n          pipWin.addEventListener('pagehide', (event) => {\n            // Restore nodes to their original location\n            if (parentNode) {\n              if (nextSibling) {\n                parentNode.insertBefore(pipRoot, nextSibling)\n              } else if (previousSibling) {\n                parentNode.insertBefore(pipRoot, previousSibling.nextSibling)\n              } else {\n                parentNode.appendChild(pipRoot)\n              }\n            } else {\n              // console.log('无法找到原始父节点')\n            }\n\n            this.leavePIPCallback()\n          }, { once: true })\n        })\n      } else if (PIP.checkWebkitSetPresentationMode(player.media)) {\n        player.media.webkitSetPresentationMode('picture-in-picture')\n      } else {\n        player.media.requestPictureInPicture()\n      }\n\n\n      return true\n    } catch (reason) {\n      console.error('requestPiP', reason)\n      return false\n    }\n  }\n\n  /**\n   * 退出画中画\n   */\n  exitPIP () {\n    const { player } = this\n    try {\n      if (this.isPIPAvailable() && this.isPip) {\n        if (this.isDocPIPAvailable() && documentPictureInPicture?.window) {\n          documentPictureInPicture.window.close()\n        } else if (PIP.checkWebkitSetPresentationMode(player.media)) {\n          player.media.webkitSetPresentationMode('inline')\n        } else {\n          document.exitPictureInPicture()\n        }\n      }\n      return true\n    } catch (reason) {\n      console.error('exitPIP', reason)\n      return false\n    }\n  }\n\n  /**\n   * 处于画中画状态\n   */\n  get isPip () {\n    const { player } = this\n    return (\n      !!(this.isDocPIPAvailable() && documentPictureInPicture?.window) ||\n      (document.pictureInPictureElement &&\n        document.pictureInPictureElement === player.media) ||\n      player.media.webkitPresentationMode === PresentationMode.PIP\n    )\n  }\n\n  isPIPAvailable () {\n    const video = this.player.media\n    const _isEnabled = Util.typeOf(document.pictureInPictureEnabled) === 'Boolean' ? document.pictureInPictureEnabled : false\n    return _isEnabled &&\n    ((Util.typeOf(video.disablePictureInPicture) === 'Boolean' && !video.disablePictureInPicture) ||\n     (video.webkitSupportsPresentationMode && Util.typeOf(video.webkitSetPresentationMode) === 'Function')) ||\n     this.isDocPIPAvailable()\n  }\n\n  isDocPIPAvailable () {\n    return 'documentPictureInPicture' in window && /^(https|file)/.test(location.protocol)\n  }\n\n  destroy () {\n    super.destroy()\n    const { player } = this\n    player.media.removeEventListener('enterpictureinpicture', this.enterPIPCallback)\n    player.media.removeEventListener('leavepictureinpicture', this.leavePIPCallback)\n    PIP.checkWebkitSetPresentationMode(player.media) && player.media.removeEventListener('webkitpresentationmodechanged', this.onWebkitpresentationmodechanged)\n    this.exitPIP()\n    this.unbind('click', this.btnClick)\n  }\n\n  render () {\n    if (!this.config.showIcon || !this.isPIPAvailable()) {\n      return\n    }\n    return `<xg-icon class=\"xgplayer-pip\">\n      <div class=\"xgplayer-icon xg-icon-disable\">\n      </div>\n      ${xgIconTips(this, 'PIP', this.playerConfig.isHideTips)}\n    </xg-icon>`\n  }\n}\nexport default PIP\n","/**\n * 下一个按钮组件\n */\nimport Plugin, { POSITIONS, Sniffer, Events } from '../../plugin'\nimport { xgIconTips } from '../common/iconTools'\nimport Next from '../assets/playNext.svg'\nimport './index.scss'\n\nexport default class PlayNextIcon extends Plugin {\n  static get pluginName () {\n    return 'playNext'\n  }\n\n  static get defaultConfig () {\n    return {\n      position: POSITIONS.CONTROLS_LEFT,\n      index: 1,\n      url: null,\n      urlList: []\n    }\n  }\n\n  constructor (options) {\n    super(options)\n    this.idx = -1\n  }\n\n  afterCreate () {\n    if (!this.config.urlList || this.config.urlList.length === 0) {\n      return\n    }\n    this.appendChild('.xgplayer-icon', this.icons.playNext)\n    this.initEvents()\n  }\n\n  registerIcons () {\n    return {\n      playNext: Next\n    }\n  }\n\n  initEvents () {\n    this.nextHandler = this.hook('nextClick', this.changeSrc)\n    const event = Sniffer.device === 'mobile' ? 'touchend' : 'click'\n    this.bind(event, this.playNext)\n    this.show()\n  }\n\n  playNext = (e) => {\n    const { player } = this\n    e.preventDefault()\n    e.stopPropagation()\n    if (this.idx + 1 < this.config.urlList.length) {\n      this.idx++\n      this.nextHandler(this.config.urlList[this.idx], this.idx)\n      player.emit(Events.PLAYNEXT, this.idx + 1)\n    } else {\n      this.nextHandler()\n      player.emit(Events.PLAYNEXT)\n    }\n  }\n\n  changeSrc (url) {\n    const { player } = this\n    if (!url) {\n      return\n    }\n    player.pause()\n    player.currentTime = 0\n    if (player.switchURL) {\n      player.switchURL(url)\n    } else {\n      player.src = url\n    }\n    player.config.url = url\n    player.play()\n  }\n\n  destroy () {\n    this.unbind(['touchend', 'click'], this.playNext)\n  }\n\n  render () {\n    if (!this.config.urlList || this.config.urlList.length === 0) {\n      return\n    }\n    return `\n     <xg-icon class=\"xgplayer-playnext\">\n      <div class=\"xgplayer-icon\">\n      </div>\n      ${xgIconTips(this, 'PLAYNEXT_TIPS', this.playerConfig.isHideTips)}\n     </xg-icon>\n    `\n  }\n}\n","//download.js v4.2, by dandavis; 2008-2016. [MIT] see http://danml.com/download.html for tests/usage\n// v1 landed a FF+Chrome compat way of downloading strings to local un-named files, upgraded to use a hidden frame and optional mime\n// v2 added named files via a[download], msSaveBlob, IE (10+) support, and window.URL support for larger+faster saves than dataURLs\n// v3 added dataURL and Blob Input, bind-toggle arity, and legacy dataURL fallback was improved with force-download mime and base64 support. 3.1 improved safari handling.\n// v4 adds AMD/UMD, commonJS, and plain browser support\n// v4.1 adds url download capability via solo URL argument (same domain/CORS only)\n// v4.2 adds semantic variable names, long (over 2MB) dataURL support, and hidden by default temp anchors\n// https://github.com/rndme/download\n\n(function (root, factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine([], factory);\n\t} else if (typeof exports === 'object') {\n\t\t// Node. Does not work with strict CommonJS, but\n\t\t// only CommonJS-like environments that support module.exports,\n\t\t// like Node.\n\t\tmodule.exports = factory();\n\t} else {\n\t\t// Browser globals (root is window)\n\t\troot.download = factory();\n  }\n}(this, function () {\n\n\treturn function download(data, strFileName, strMimeType) {\n\n\t\tvar self = window, // this script is only for browsers anyway...\n\t\t\tdefaultMime = \"application/octet-stream\", // this default mime also triggers iframe downloads\n\t\t\tmimeType = strMimeType || defaultMime,\n\t\t\tpayload = data,\n\t\t\turl = !strFileName && !strMimeType && payload,\n\t\t\tanchor = document.createElement(\"a\"),\n\t\t\ttoString = function(a){return String(a);},\n\t\t\tmyBlob = (self.Blob || self.MozBlob || self.WebKitBlob || toString),\n\t\t\tfileName = strFileName || \"download\",\n\t\t\tblob,\n\t\t\treader;\n\t\t\tmyBlob= myBlob.call ? myBlob.bind(self) : Blob ;\n\t  \n\t\tif(String(this)===\"true\"){ //reverse arguments, allowing download.bind(true, \"text/xml\", \"export.xml\") to act as a callback\n\t\t\tpayload=[payload, mimeType];\n\t\t\tmimeType=payload[0];\n\t\t\tpayload=payload[1];\n\t\t}\n\n\n\t\tif(url && url.length< 2048){ // if no filename and no mime, assume a url was passed as the only argument\n\t\t\tfileName = url.split(\"/\").pop().split(\"?\")[0];\n\t\t\tanchor.href = url; // assign href prop to temp anchor\n\t\t  \tif(anchor.href.indexOf(url) !== -1){ // if the browser determines that it's a potentially valid url path:\n        \t\tvar ajax=new XMLHttpRequest();\n        \t\tajax.open( \"GET\", url, true);\n        \t\tajax.responseType = 'blob';\n        \t\tajax.onload= function(e){ \n\t\t\t\t  download(e.target.response, fileName, defaultMime);\n\t\t\t\t};\n        \t\tsetTimeout(function(){ ajax.send();}, 0); // allows setting custom ajax headers using the return:\n\t\t\t    return ajax;\n\t\t\t} // end if valid url?\n\t\t} // end if url?\n\n\n\t\t//go ahead and download dataURLs right away\n\t\tif(/^data:([\\w+-]+\\/[\\w+.-]+)?[,;]/.test(payload)){\n\t\t\n\t\t\tif(payload.length > (1024*1024*1.999) && myBlob !== toString ){\n\t\t\t\tpayload=dataUrlToBlob(payload);\n\t\t\t\tmimeType=payload.type || defaultMime;\n\t\t\t}else{\t\t\t\n\t\t\t\treturn navigator.msSaveBlob ?  // IE10 can't do a[download], only Blobs:\n\t\t\t\t\tnavigator.msSaveBlob(dataUrlToBlob(payload), fileName) :\n\t\t\t\t\tsaver(payload) ; // everyone else can save dataURLs un-processed\n\t\t\t}\n\t\t\t\n\t\t}else{//not data url, is it a string with special needs?\n\t\t\tif(/([\\x80-\\xff])/.test(payload)){\t\t\t  \n\t\t\t\tvar i=0, tempUiArr= new Uint8Array(payload.length), mx=tempUiArr.length;\n\t\t\t\tfor(i;i<mx;++i) tempUiArr[i]= payload.charCodeAt(i);\n\t\t\t \tpayload=new myBlob([tempUiArr], {type: mimeType});\n\t\t\t}\t\t  \n\t\t}\n\t\tblob = payload instanceof myBlob ?\n\t\t\tpayload :\n\t\t\tnew myBlob([payload], {type: mimeType}) ;\n\n\n\t\tfunction dataUrlToBlob(strUrl) {\n\t\t\tvar parts= strUrl.split(/[:;,]/),\n\t\t\ttype= parts[1],\n\t\t\tdecoder= parts[2] == \"base64\" ? atob : decodeURIComponent,\n\t\t\tbinData= decoder( parts.pop() ),\n\t\t\tmx= binData.length,\n\t\t\ti= 0,\n\t\t\tuiArr= new Uint8Array(mx);\n\n\t\t\tfor(i;i<mx;++i) uiArr[i]= binData.charCodeAt(i);\n\n\t\t\treturn new myBlob([uiArr], {type: type});\n\t\t }\n\n\t\tfunction saver(url, winMode){\n\n\t\t\tif ('download' in anchor) { //html5 A[download]\n\t\t\t\tanchor.href = url;\n\t\t\t\tanchor.setAttribute(\"download\", fileName);\n\t\t\t\tanchor.className = \"download-js-link\";\n\t\t\t\tanchor.innerHTML = \"downloading...\";\n\t\t\t\tanchor.style.display = \"none\";\n\t\t\t\tdocument.body.appendChild(anchor);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tanchor.click();\n\t\t\t\t\tdocument.body.removeChild(anchor);\n\t\t\t\t\tif(winMode===true){setTimeout(function(){ self.URL.revokeObjectURL(anchor.href);}, 250 );}\n\t\t\t\t}, 66);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// handle non-a[download] safari as best we can:\n\t\t\tif(/(Version)\\/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari\\//.test(navigator.userAgent)) {\n\t\t\t\tif(/^data:/.test(url))\turl=\"data:\"+url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n\t\t\t\tif(!window.open(url)){ // popup blocked, offer direct download:\n\t\t\t\t\tif(confirm(\"Displaying New Document\\n\\nUse Save As... to download, then click back to return to this page.\")){ location.href=url; }\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t//do iframe dataURL download (old ch+FF):\n\t\t\tvar f = document.createElement(\"iframe\");\n\t\t\tdocument.body.appendChild(f);\n\n\t\t\tif(!winMode && /^data:/.test(url)){ // force a mime that will download:\n\t\t\t\turl=\"data:\"+url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n\t\t\t}\n\t\t\tf.src=url;\n\t\t\tsetTimeout(function(){ document.body.removeChild(f); }, 333);\n\n\t\t}//end saver\n\n\n\n\n\t\tif (navigator.msSaveBlob) { // IE10+ : (has Blob, but not a[download] or URL)\n\t\t\treturn navigator.msSaveBlob(blob, fileName);\n\t\t}\n\n\t\tif(self.URL){ // simple fast and modern way using Blob and URL:\n\t\t\tsaver(self.URL.createObjectURL(blob), true);\n\t\t}else{\n\t\t\t// handle non-Blob()+non-URL browsers:\n\t\t\tif(typeof blob === \"string\" || blob.constructor===toString ){\n\t\t\t\ttry{\n\t\t\t\t\treturn saver( \"data:\" +  mimeType   + \";base64,\"  +  self.btoa(blob)  );\n\t\t\t\t}catch(y){\n\t\t\t\t\treturn saver( \"data:\" +  mimeType   + \",\" + encodeURIComponent(blob)  );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Blob but not URL support:\n\t\t\treader=new FileReader();\n\t\t\treader.onload=function(e){\n\t\t\t\tsaver(this.result);\n\t\t\t};\n\t\t\treader.readAsDataURL(blob);\n\t\t}\n\t\treturn true;\n\t}; /* end download() */\n}));\n","import downloadUtil from 'downloadjs'\nimport { POSITIONS, Util } from '../../plugin'\nimport { xgIconTips } from '../common/iconTools'\nimport IconPlugin from '../common/iconPlugin'\nimport DownloadSvg from '../assets/download.svg'\nimport './index.scss'\n/**\n * @typedef { {\n *   position: string,\n *   index: number,\n *   disable: boolean,\n *   [propName: string]: any\n *  } } IDownloadConfig\n */\nexport default class Download extends IconPlugin {\n  static get pluginName () {\n    return 'download'\n  }\n\n  /**\n   * @type IDownloadConfig\n   */\n  static get defaultConfig () {\n    return {\n      position: POSITIONS.CONTROLS_RIGHT,\n      index: 3,\n      disable: true\n    }\n  }\n\n  constructor (args) {\n    super(args)\n    this.timer = null\n    this.isLock = false\n  }\n\n  afterCreate () {\n    super.afterCreate()\n    if (this.config.disable) {\n      return\n    }\n    this.appendChild('.xgplayer-icon', this.icons.download)\n    this._handler = this.hook('click', this.download, {\n      pre: (e) => {\n        e.preventDefault()\n        e.stopPropagation()\n      }\n    })\n    this.bind(['click', 'touchend'], this._handler)\n  }\n\n  registerIcons () {\n    return {\n      download: DownloadSvg\n    }\n  }\n  download = (e) => {\n    if (this.isLock) {\n      return\n    }\n    this.emitUserAction(e, 'download')\n    const { url } = this.playerConfig\n    let dUrl = ''\n    if (Util.typeOf(url) === 'String') {\n      dUrl = url\n    } else if (Util.typeOf(url) === 'Array' && url.length > 0) {\n      dUrl = url[0].src\n    }\n    const newUrl = this.getAbsoluteURL(dUrl)\n    downloadUtil(newUrl)\n    this.isLock = true\n    this.timer = window.setTimeout(() => {\n      this.isLock = false\n      window.clearTimeout(this.timer)\n      this.timer = null\n    }, 300)\n  }\n\n  getAbsoluteURL (url) {\n    // Check if absolute URL\n    if (!url.match(/^https?:\\/\\//)) {\n      const div = document.createElement('div')\n      div.innerHTML = `<a href=\"${url}\">x</a>`\n      url = div.firstChild.href\n    }\n    return url\n  }\n\n  destroy () {\n    super.destroy()\n    this.unbind(['click', 'touchend'], this.download)\n    window.clearTimeout(this.timer)\n    this.timer = null\n  }\n\n  render () {\n    if (this.config.disable) {\n      return\n    }\n    return `<xg-icon class=\"xgplayer-download\">\n   <div class=\"xgplayer-icon\">\n   </div>\n   ${xgIconTips(this, 'DOWNLOAD_TIPS', this.playerConfig.isHideTips)}\n    </xg-icon>`\n  }\n}\n","import { POSITIONS, Events } from '../../plugin'\nimport IconPlugin from '../common/iconPlugin'\nimport './index.scss'\n\nexport default class ScreenShot extends IconPlugin {\n  static get pluginName () {\n    return 'screenShot'\n  }\n\n  static get defaultConfig () {\n    return {\n      position: POSITIONS.CONTROLS_RIGHT,\n      index: 5,\n      quality: 0.92,\n      type: 'image/png',\n      format: '.png',\n      width: 600,\n      height: 337,\n      saveImg: true,\n      fitVideo: true,\n      disable: false,\n      name: 'screenshot'\n    }\n  }\n\n  beforeCreate (args) {\n    if (typeof args.player.config.screenShot === 'boolean') {\n      args.config.disable = !args.player.config.screenShot\n    }\n  }\n\n  afterCreate () {\n    super.afterCreate()\n    this.appendChild('.xgplayer-icon', this.icons.screenshotIcon)\n    const { config } = this\n    this.initSize = (data) => {\n      if (config.fitVideo) {\n        config.width = data.vWidth\n        config.height = data.vHeight\n      }\n    }\n    this.once(Events.VIDEO_RESIZE, this.initSize)\n  }\n\n  onPluginsReady () {\n    this.show()\n    this.onClickBtn = this.onClickBtn.bind(this)\n    this.bind(['click', 'touchend'], this.onClickBtn)\n  }\n\n  saveScreenShot (data, filename) {\n    const saveLink = document.createElement('a')\n    saveLink.href = data\n    saveLink.download = filename\n\n    let event\n    try {\n      if (typeof MouseEvent !== 'undefined') {\n        event = new MouseEvent('click', {\n          bubbles: true,\n          cancelable: true,\n          view: window\n        })\n      } else {\n        event = document.createEvent('MouseEvents')\n        event.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null)\n      }\n    } catch (e) {\n      console.error('MouseEvent unsupported', e)\n    }\n\n    if (event) {\n      saveLink.dispatchEvent(event)\n    }\n  }\n\n  createCanvas (width, height) {\n    const canvas = document.createElement('canvas')\n    const canvasCtx = canvas.getContext('2d')\n\n    this.canvasCtx = canvasCtx\n    this.canvas = canvas\n\n    canvas.width = width || this.config.width\n    canvas.height = height || this.config.height\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/imageSmoothingEnabled\n    // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/imageSmoothingQuality\n    canvasCtx.imageSmoothingEnabled = true\n    if (canvasCtx.imageSmoothingEnabled) {\n      canvasCtx.imageSmoothingQuality = 'high'\n    }\n  }\n\n  onClickBtn (e) {\n    e.preventDefault()\n    e.stopPropagation()\n    this.emitUserAction(e, 'shot')\n    const { config } = this\n    this.shot(config.width, config.height).then((data) => {\n      this.emit(Events.SCREEN_SHOT, data)\n      if (config.saveImg) {\n        this.saveScreenShot(data, config.name + config.format)\n      }\n    })\n  }\n\n  shot (width, height, option = { quality: 0.92, type: 'image/png' }) {\n    const { config, player } = this\n    const quality = option.quality || config.quality\n    const type = option.type || config.type\n    return new Promise((resolve, reject) => {\n      let canvas = null\n      let canvasCtx\n\n      if (player.media.canvas) {\n        canvas = player.media.canvas\n      } else {\n        if (!this.canvas) {\n          this.createCanvas(width, height)\n        } else {\n          this.canvas.width = width || config.width\n          this.canvas.height = height || config.height\n        }\n        canvas = this.canvas\n        canvasCtx = this.canvasCtx\n\n        const mediaRatio = player.media.videoWidth / player.media.videoHeight\n        const canvasRatio = canvas.width / canvas.height\n        const sx = 0, sy = 0, sw = player.media.videoWidth, sh = player.media.videoHeight\n        let dx, dy, dw, dh\n\n        if (mediaRatio > canvasRatio) {\n          dw = canvas.width\n          dh = canvas.width / mediaRatio\n          dx = 0\n          dy = Math.round((canvas.height - dh) / 2)\n        } else if (mediaRatio === canvasRatio) {\n          dw = canvas.width\n          dh = canvas.height\n          dx = 0\n          dy = 0\n        } else if (mediaRatio < canvasRatio) {\n          dw = canvas.height * mediaRatio\n          dh = canvas.height\n          dx = Math.round((canvas.width - dw) / 2)\n          dy = 0\n        }\n\n        // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage\n        canvasCtx.drawImage(player.media, sx, sy, sw, sh, dx, dy, dw, dh)\n      }\n      let src = canvas.toDataURL(type, quality).replace(type, 'image/octet-stream')\n      src = src.replace(/^data:image\\/[^;]+/, 'data:application/octet-stream')\n      resolve(src)\n    })\n  }\n\n  registerIcons () {\n    return {\n      screenshotIcon: null\n    }\n  }\n\n  destroy () {\n    super.destroy()\n    this.unbind(['click', 'touchend'], this.onClickBtn)\n    this.off(Events.VIDEO_RESIZE, this.initSize)\n  }\n\n  render () {\n    if (this.config.disable) {\n      return\n    }\n    const className = this.icons.screenshotIcon ? 'xgplayer-icon' : 'xgplayer-icon btn-text'\n    const langKey = 'SCREENSHOT'\n    return `\n      <xg-icon class=\"xgplayer-shot\">\n      <div class=\"${className}\">\n      ${this.icons.screenshotIcon ? '' : `<span lang-key=\"${this.i18nKeys[langKey]}\">${this.i18n[langKey]}</span>`}\n      </div>\n    </xg-icon>`\n  }\n}\n","import Plugin, { Util } from '../../plugin'\n\nexport default class OptionList {\n  constructor (args) {\n    this.config = args.config\n    this.parent = args.root\n    this.root = Util.createDom('ul', '', {}, `xg-options-list xg-list-slide-scroll ${this.config.className}`)\n    args.root.appendChild(this.root)\n    const { maxHeight } = this.config\n    if (maxHeight) {\n      this.setStyle({ maxHeight })\n    }\n    this.onItemClick = this.onItemClick.bind(this)\n    this.renderItemList()\n    const eventName = this.config.domEventType === 'touch' ? 'touchend' : 'click'\n    this._delegates = Plugin.delegate.call(this, this.root, 'li', eventName, this.onItemClick)\n  }\n\n  renderItemList (data) {\n    const { config, root } = this\n    if (data) {\n      config.data = data\n    } else {\n      data = config.data\n    }\n\n    if (config.style) {\n      Object.keys(config.style).map(key => {\n        root.style[key] = config[key]\n      })\n    }\n\n    if (data.length > 0) {\n      this.attrKeys = Object.keys(data[0])\n    }\n\n    this.root.innerHTML = ''\n\n    data.map((item, index) => {\n      const className = item.selected ? 'option-item selected' : 'option-item'\n      item['data-index'] = index\n      this.root.appendChild(Util.createDom('li', `<span>${item.showText}</span>`, item, className))\n    })\n  }\n\n  onItemClick (e) {\n    if (!e.delegateTarget) {\n      e.delegateTarget = e.target\n    }\n    const target = e.delegateTarget\n    if (target && Util.hasClass(target, 'selected')) {\n      return false\n    }\n    const changeCallback = typeof this.config.onItemClick === 'function' ? this.config.onItemClick : null\n    const curSelected = this.root.querySelector('.selected')\n    Util.addClass(target, 'selected')\n    curSelected && Util.removeClass(curSelected, 'selected')\n    changeCallback(e, {\n      from: curSelected ? this.getAttrObj(curSelected, this.attrKeys) : null,\n      to: this.getAttrObj(target, this.attrKeys)\n    })\n  }\n\n  getAttrObj (dom, keys) {\n    if (!dom || !keys) {\n      return {}\n    }\n    const obj = {}\n    keys.map(key => {\n      obj[key] = dom.getAttribute(key)\n    })\n    const index = dom.getAttribute('data-index')\n    if (index) {\n      obj.index = Number(index)\n    }\n    return obj\n  }\n\n\n  show () {\n    Util.removeClass(this.root, 'hide')\n    Util.addClass(this.root, 'active')\n  }\n\n  hide () {\n    Util.removeClass(this.root, 'active')\n    Util.addClass(this.root, 'hide')\n  }\n\n  setStyle (style) {\n    Object.keys(style).forEach((key) => {\n      this.root.style[key] = style[key]\n    })\n  }\n\n  destroy () {\n    if (this._delegates) {\n      this._delegates.map(item => {\n        item.destroy && item.destroy()\n      })\n      this._delegates = null\n    }\n    this.root.innerHTML = null\n    this.parent.removeChild(this.root)\n    this.root = null\n  }\n}\n","\nimport Plugin, { Events, Util, Sniffer, POSITIONS } from '../../plugin'\nimport OptionList from './optionList'\n// import './optionsIcon.scss'\n\nconst LIST_TYPES = {\n  SIDE: 'side',\n  MIDDLE: 'middle',\n  DEFAULT: 'default'\n}\n\nconst TOGGLE_MODES = {\n  CLICK: 'click',\n  HOVER: 'hover'\n}\n\nfunction getListClassName (listType, position) {\n  if (listType === LIST_TYPES.SIDE) {\n    return position === POSITIONS.CONTROLS_LEFT ? 'xg-side-list xg-left-side' : 'xg-side-list xg-right-side'\n  } else {\n    return ''\n  }\n}\n\n/**\n * @typedef {{\n *   isShow?: boolean,\n *   index?: number,\n *   list?: Array<any>,\n *   listType?: string,\n *   hidePortrait?: boolean,\n *   [propName: string]: any\n * }} IOptionsIconConfig\n */\n\nlet IS_MOBILE = Sniffer.device === 'mobile'\n\nexport default class OptionsIcon extends Plugin {\n  static get pluginName () {\n    return 'optionsIcon'\n  }\n\n  /**\n   * @type { IOptionsIconConfig }\n   */\n  static get defaultConfig () {\n    return {\n      position: POSITIONS.CONTROLS_RIGHT,\n      index: 100,\n      list: [],\n      listType: 'default', // 模式 side-右侧边栏  middle-中间显示\n      listStyle: {},\n      hidePortrait: true,\n      isShowIcon: false,\n      isItemClickHide: true, // 列表点击之后是否隐藏列表\n      toggleMode: TOGGLE_MODES.HOVER, // 激活状态切换模式\n      heightLimit: true\n    }\n  }\n\n  constructor (args) {\n    super(args)\n    this.isIcons = false\n    this.isActive = false\n    this.curValue = null // 当前值\n    this.curIndex = 0\n  }\n\n  updateLang (value) {\n    this.renderItemList(this.config.list, this.curIndex)\n  }\n\n  afterCreate () {\n    const { config } = this\n    this.initIcons()\n    IS_MOBILE = IS_MOBILE || this.domEventType === 'touch'\n    if (IS_MOBILE && Sniffer.device === 'mobile' && config.listType === LIST_TYPES.DEFAULT) {\n      config.listType = LIST_TYPES.SIDE\n    }\n\n    config.hidePortrait && Util.addClass(this.root, 'portrait')\n\n    this.on([Events.VIDEO_RESIZE, Events.FULLSCREEN_CHANGE], () => {\n      this._resizeList()\n    })\n\n    this.once(Events.CANPLAY, () => {\n      if (config.list && config.list.length > 0) {\n        this.renderItemList(config.list)\n        this.show()\n      }\n    })\n    // 移动端控制栏和列表互斥\n    IS_MOBILE && this.on(Events.PLAYER_FOCUS, () => {\n      if (!this.isActive) {\n        return\n      }\n      this.optionsList && this.optionsList.hide()\n      this.isActive = false\n    })\n\n    if (IS_MOBILE) {\n      config.toggleMode = TOGGLE_MODES.CLICK\n      this.activeEvent = 'touchend'\n    } else {\n      this.activeEvent = config.toggleMode === TOGGLE_MODES.CLICK ? 'click' : 'mouseenter'\n    }\n\n    if (config.toggleMode === TOGGLE_MODES.CLICK) {\n      this.bind(this.activeEvent, this.switchActiveState)\n    } else {\n      this.bind(this.activeEvent, this.onEnter)\n      this.bind('mouseleave', this.onLeave)\n    }\n    this.isIcons && this.bind('click', this.onIconClick)\n  }\n\n  initIcons () {\n    const { icons } = this\n    const _c = Object.keys(icons)\n    let _isIcons = false\n    if (_c.length > 0) {\n      _c.forEach(key => {\n        this.appendChild('.xgplayer-icon', icons[key])\n        !_isIcons && (_isIcons = icons[key])\n      })\n      this.isIcons = _isIcons\n    }\n    if (_isIcons) {\n      return\n    }\n    this.appendChild('.xgplayer-icon', Util.createDom('span', '', {}, 'icon-text'))\n    Util.addClass(this.find('.xgplayer-icon'), 'btn-text')\n  }\n\n  /**\n   * @param {string} [value]\n   * @returns\n   */\n  show (value) {\n    if (!this.config.list || this.config.list.length < 2) {\n      return\n    }\n    Util.addClass(this.root, 'show')\n  }\n\n  hide () {\n    Util.removeClass(this.root, 'show')\n  }\n\n  getTextByLang (item, key, lang) {\n    if (item === undefined) {\n      return ''\n    }\n    const { list } = this.config\n    !lang && (lang = this.player.lang)\n    key = (!key || Util.isUndefined(item[key])) ? 'text' : key\n    typeof item === 'number' && (item = list[item])\n    try {\n      if (typeof item[key] === 'object') {\n        return item[key][lang] || item[key].en\n      } else {\n        return item[key]\n      }\n    } catch (err) {\n      console.warn(err)\n      return ''\n    }\n  }\n\n  onEnter = (e) => {\n    e.stopPropagation()\n    this.emit('icon_mouseenter', {\n      pluginName: this.pluginName\n    })\n    this.switchActiveState(e)\n  }\n\n  switchActiveState = (e) => {\n    e.stopPropagation()\n    const { toggleMode } = this.config\n    if (toggleMode === TOGGLE_MODES.CLICK) {\n      this.toggle(!this.isActive)\n    } else {\n      this.toggle(true)\n    }\n  }\n\n  onLeave = (e) => {\n    e.stopPropagation()\n    this.emit('icon_mouseleave', {\n      pluginName: this.pluginName\n    })\n    if (this.config.listType !== LIST_TYPES.SIDE) {\n      this.isActive && this.toggle(false)\n    }\n  }\n\n  onListEnter = (e) => {\n    // console.log('onListEnter')\n    this.enterType = 2\n  }\n\n  onListLeave = (e) => {\n    // console.log('onListLeave', e.target)\n    this.enterType = 0\n    this.isActive && this.toggle(false)\n  }\n\n  // 状态切换\n  toggle (isActive) {\n    if (isActive === this.isActive || this.config.disable) return\n    const { controls } = this.player\n    const { listType } = this.config\n    if (isActive) {\n      listType === LIST_TYPES.SIDE ? controls.blur() : controls.focus()\n      this.optionsList && this.optionsList.show()\n    } else {\n      listType === LIST_TYPES.SIDE ? controls.focus() : controls.focusAwhile()\n      this.optionsList && this.optionsList.hide()\n    }\n    this.isActive = isActive\n  }\n\n  // 列表点击回调\n  onItemClick (e, data) {\n    e.stopPropagation()\n    const { listType, list } = this.config\n    this.curIndex = data.to.index\n    this.curItem = list[this.curIndex]\n    this.changeCurrentText()\n    const { isItemClickHide } = this.config;\n    (isItemClickHide || IS_MOBILE || listType === LIST_TYPES.SIDE) && this.toggle(false)\n  }\n\n  onIconClick (e) {\n    //\n  }\n\n  changeCurrentText () {\n    if (this.isIcons) {\n      return\n    }\n    const { list } = this.config\n    const index = this.curIndex < list.length ? this.curIndex : 0\n    const curItem = list[index]\n    if (!curItem) return\n    this.find('.icon-text').innerHTML = this.getTextByLang(curItem, 'iconText')\n  }\n\n  renderItemList (itemList, curIndex) {\n    const { config, optionsList, player } = this\n    if (typeof curIndex === 'number') {\n      this.curIndex = curIndex\n      this.curItem = config.list[curIndex]\n    }\n\n    if (optionsList) {\n      optionsList.renderItemList(itemList)\n      this.changeCurrentText()\n      return\n    }\n\n    const options = {\n      config: {\n        data: itemList || [],\n        className: getListClassName(config.listType, config.position), // config.listType === LIST_TYPES.SIDE ? 'xg-right-side' : '',\n        onItemClick: (e, data) => {\n          this.onItemClick(e, data)\n        },\n        domEventType: IS_MOBILE ? 'touch' : 'mouse'\n      },\n      root: config.listType === LIST_TYPES.SIDE ? (player.innerContainer || player.root) : this.root\n    }\n\n    if (this.config.isShowIcon) {\n      const { height } = this.player.root.getBoundingClientRect()\n      const _maxH = config.listType === LIST_TYPES.MIDDLE ? height - 50 : height\n      if (_maxH && config.heightLimit) {\n        options.config.maxHeight = `${_maxH}px`\n      }\n      this.optionsList = new OptionList(options)\n      this.changeCurrentText()\n      this.show()\n    }\n    this._resizeList()\n  }\n\n  _resizeList () {\n    if (!this.config.heightLimit) {\n      return\n    }\n    const { height } = this.player.root.getBoundingClientRect()\n    const _maxH = this.config.listType === LIST_TYPES.MIDDLE ? height - 50 : height\n    this.optionsList && this.optionsList.setStyle({ maxHeight: `${_maxH}px` })\n  }\n\n  destroy () {\n    const { config } = this\n    if (config.toggleMode === TOGGLE_MODES.CLICK) {\n      this.unbind(this.activeEvent, this.switchActiveState)\n    } else {\n      this.unbind(this.activeEvent, this.onEnter)\n      this.unbind('mouseleave', this.onLeave)\n    }\n    this.isIcons && this.unbind('click', this.onIconClick)\n    if (this.optionsList) {\n      this.optionsList.destroy()\n      this.optionsList = null\n    }\n  }\n\n  render () {\n    if (!this.config.isShowIcon) {\n      return\n    }\n    return `<xg-icon class=\"xg-options-icon ${this.config.className || ''}\">\n    <div class=\"xgplayer-icon\">\n    </div>\n   </xg-icon>`\n  }\n}\n","import { Events, POSITIONS, Util } from '../../plugin'\nimport OptionsIcon from '../common/optionsIcon'\nimport './index.scss'\n\n/**\n * @typedef {import('../../defaultConfig').IDefinition} IDefinition\n */\n\n/**\n * @typedef {{\n *   position?: string,\n *   index?: number,\n *   list?: Array<IDefinition>,\n *   defaultDefinition?: any,\n *   disable?: any,\n *   hidePortrait?: boolean,\n *   className?: string\n * }} IDefinitionConfig\n */\nexport default class DefinitionIcon extends OptionsIcon {\n  static get pluginName () {\n    return 'definition'\n  }\n\n  /**\n   * @type IDefinitionConfig\n   */\n  static get defaultConfig () {\n    return {\n      ...OptionsIcon.defaultConfig,\n      position: POSITIONS.CONTROLS_RIGHT,\n      index: 3,\n      list: [],\n      defaultDefinition: '',\n      disable: false,\n      hidePortrait: false, // Whether to hide in the vertical screen state of the mobile terminal\n      className: 'xgplayer-definition',\n      isShowIcon: true\n    }\n  }\n\n  beforeCreate (args) {\n    const { list } = args.config\n    if (Array.isArray(list) && list.length > 0) {\n      args.config.list = list.map(item => {\n        if (!item.text && item.name) {\n          item.text = item.name\n        }\n        if (!item.text) {\n          item.text = item.definition\n        }\n        return item\n      })\n    }\n  }\n\n  constructor (args) {\n    super(args)\n    // 记录切换的时候的播放器状态\n    this.curTime = 0\n    this.isPaused = true\n  }\n\n  afterCreate () {\n    super.afterCreate()\n    this.on('resourceReady', (list) => {\n      this.changeDefinitionList(list)\n    })\n\n    this.on(Events.DEFINITION_CHANGE, (data) => {\n      this.renderItemList(this.config.list, data.to)\n    })\n    if (this.player.definitionList.length < 2) {\n      this.hide()\n    }\n  }\n\n  /**\n   * @param {string} [value]\n   * @returns\n   */\n  show (value) {\n    if (!this.config.list || this.config.list.length < 2){\n      return\n    }\n    Util.addClass(this.root, 'show')\n  }\n\n  initDefinition () {\n    const { list, defaultDefinition } = this.config\n    if (list.length > 0) {\n      let to = null\n      list.map(item => {\n        if (item.definition === defaultDefinition) {\n          to = item\n        }\n      })\n      if (!to) {\n        to = list[0]\n      }\n      this.changeDefinition(to)\n    }\n  }\n\n  renderItemList (list = this.config.list || [], to) {\n    const targetDef = to && to.definition ? to.definition : this.config.defaultDefinition\n    if (to) {\n      list.forEach((item) => {\n        item.selected = false\n      })\n    }\n    let curIndex = 0\n    const items = list.map((item, index) => {\n      const showItem = {\n        ...item,\n        showText: this.getTextByLang(item) || item.definition,\n        selected: false\n      }\n\n      if (item.selected || (item.definition\n        // eslint-disable-next-line eqeqeq\n        && item.definition == targetDef)\n      ) {\n        showItem.selected = true\n        curIndex = index\n      }\n      return showItem\n    })\n    super.renderItemList(items, curIndex)\n  }\n\n  // 对外暴露 切换清晰度\n  changeDefinitionList (list) {\n    if (!Array.isArray(list)) {\n      return\n    }\n    this.config.list = list.map(item => {\n      if (!item.text && item.name) {\n        item.text = item.name\n      }\n      if (!item.text) {\n        item.text = item.definition\n      }\n      return item\n    })\n    this.renderItemList()\n    this.config.list.length < 2 ? this.hide() : this.show()\n  }\n\n  changeDefinition (to, from) {\n    this.player.changeDefinition(to, from)\n  }\n\n  onItemClick (e, data) {\n    const { definitionList } = this.player\n    super.onItemClick(...arguments)\n    this.emitUserAction(e, 'change_definition', { from: data.from, to: data.to })\n    for (let i = 0; i < definitionList.length; i++) {\n      if (data.to && definitionList[i].definition === data.to.definition) {\n        data.to.url = definitionList[i].url\n      }\n\n      if (data.from && (definitionList[i].definition === data.from.definition)) {\n        data.from.url = definitionList[i].url\n      }\n    }\n    this.player.changeDefinition(data.to, data.from)\n  }\n}\n","import { Events, POSITIONS } from '../../plugin'\nimport OptionsIcon from '../common/optionsIcon'\nimport './index.scss'\n\n/**\n * @typedef {{\n *  position?: string,\n *  index?: number,\n *  list?: Array<number | { [propName: string]: any }>,\n *  className?: string,\n *  hidePortrait?: boolean,\n *  [propName: string]: any\n * }} IPlaybackRateConfig\n */\n\nexport default class PlaybackRate extends OptionsIcon {\n  static get pluginName () {\n    return 'playbackRate'\n  }\n\n  /**\n   * @type IPlaybackRateConfig\n   */\n  static get defaultConfig () {\n    return {\n      ...OptionsIcon.defaultConfig,\n      position: POSITIONS.CONTROLS_RIGHT,\n      index: 4,\n      list: [2, 1.5, 1, 0.75, 0.5],\n      className: 'xgplayer-playbackrate',\n      isShowIcon: true,\n      hidePortrait: false\n    }\n  }\n\n  constructor (args) {\n    super(args)\n    this.curRate = 1\n  }\n\n  beforeCreate (args) {\n    const { playbackRate } = args.player.config\n    const list = !playbackRate ? [] : Array.isArray(playbackRate) ? playbackRate : args.config.list\n    if (Array.isArray(list)) {\n      args.config.list = list.map(item => {\n        if (typeof item === 'number') {\n          item = {\n            rate: item,\n            text: `${item}x`\n          }\n        } else if (!item.text && item.rate) {\n          item.text = `${item.rate}x`\n        }\n        return item\n      })\n    }\n  }\n\n  afterCreate () {\n    super.afterCreate()\n    this.on(Events.RATE_CHANGE, () => {\n      if (this.curValue === this.player.playbackRate) {\n        return\n      }\n      this.renderItemList()\n    })\n    this.renderItemList()\n  }\n\n  /**\n   * @param {string} [value]\n   * @returns\n   */\n  show (value) {\n    if (!this.config.list || this.config.list.length === 0) {\n      return\n    }\n    super.show()\n  }\n\n  onItemClick (e, _data) {\n    super.onItemClick(e, _data)\n    const target = e.delegateTarget\n    const rate = Number(target.getAttribute('rate'))\n    if (!rate || rate === this.curValue) {\n      return false\n    }\n    const props = {\n      playbackRate: {\n        from: this.player.playbackRate,\n        to: rate\n      }\n    }\n    this.emitUserAction(e, 'change_rate', { props })\n    this.curValue = rate\n    this.player.playbackRate = rate\n  }\n\n  renderItemList () {\n    const playbackRate = this.player.playbackRate || 1\n    this.curValue = playbackRate\n    let curIndex = -1\n    const items = this.config.list.map((item, index) => {\n      const itemInfo = {\n        rate: item.rate\n      }\n      if (itemInfo.rate === playbackRate) {\n        itemInfo.selected = true\n        curIndex = index\n      }\n      itemInfo.showText = this.getTextByLang(item)\n      return itemInfo\n    })\n    super.renderItemList(items, curIndex)\n  }\n\n  changeCurrentText () {\n    if (this.isIcons) {\n      return\n    }\n    const { list } = this.config\n    const index = this.curIndex < list.length ? this.curIndex : 0\n    const curItem = list[index]\n    let _text = ''\n    // 在列表中没有匹配的选项的时候，默认展示`${playbackRate}x'\n    if (!curItem || this.curIndex < 0) {\n      _text = `${this.player.playbackRate}x`\n    } else {\n      _text = this.getTextByLang(curItem, 'iconText')\n    }\n    this.find('.icon-text').innerHTML = _text\n  }\n\n  destroy () {\n    super.destroy()\n  }\n}\n","import Plugin, { Events } from '../../plugin'\nimport './index.scss'\n\nexport default class ErrorPlugin extends Plugin {\n  static get pluginName () {\n    return 'error'\n  }\n\n  afterCreate () {\n    this.clickHandler = this.hook('errorRetry', this.errorRetry, {\n      pre: (e) => {\n        e.preventDefault()\n        e.stopPropagation()\n      }\n    })\n\n    this.onError = this.hook('showError', this.handleError)\n\n    this.bind('.xgplayer-error-refresh', 'click', this.clickHandler)\n\n    this.on(Events.ERROR, (error) => {\n      this.onError(error)\n    })\n  }\n\n  errorRetry (e) {\n    this.emitUserAction(e, 'error_retry', {})\n    this.player.retry()\n  }\n\n  handleError (error = {}) {\n    const { player } = this\n    const type = error.errorType\n    let errorNote = player.errorNote ? this.i18n[player.errorNote] : ''\n    if (!errorNote) {\n      switch (type) {\n        case 'decoder':\n          errorNote = this.i18n.MEDIA_ERR_DECODE\n          break\n        case 'network':\n          errorNote = this.i18n.MEDIA_ERR_NETWORK\n          break\n        default:\n          errorNote = this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED\n      }\n    }\n    this.find('.xgplayer-error-text').innerHTML = errorNote\n    this.find('.xgplayer-error-tips').innerHTML = `${this.i18n.REFRESH_TIPS}<span class=\"xgplayer-error-refresh\">${this.i18n.REFRESH}</span>`\n  }\n\n  destroy () {\n    this.unbind('.xgplayer-error-refresh', 'click', this.clickHandler)\n  }\n\n  render () {\n    return `<xg-error class=\"xgplayer-error\">\n      <div class=\"xgplayer-errornote\">\n       <span class=\"xgplayer-error-text\"></span>\n       <span class=\"xgplayer-error-tips\"><em class=\"xgplayer-error-refresh\"></em></span>\n      </div>\n    </xg-error>`\n  }\n}\n","import Plugin, { STATE_CLASS, Util } from '../../plugin'\nimport './index.scss'\n\n/**\n * 消息组件\n */\nclass Prompt extends Plugin {\n  static get pluginName () {\n    return 'prompt'\n  }\n\n  static get defaultConfig () {\n    return {\n      interval: 3000,\n      style: {},\n      mode: 'arrow',\n      autoHide: true,\n      detail: {\n        text: '',\n        highlight: ''\n      },\n      onClick: () => {\n      }\n    }\n  }\n\n  afterCreate () {\n    /**\n     * @type {number}\n     */\n    this.intervalId = 0\n    this.customConfig = null\n    this.bind('.highlight', ['click', 'touchend'], (e) => {\n      if (this.config.onClick || this.customOnClick) {\n        e.preventDefault()\n        e.stopPropagation()\n        this.customOnClick ? this.customOnClick(e) : this.config.onClick(e)\n      }\n    })\n\n    this.player.showPrompt = (...args) => {\n      this.showPrompt(...args)\n    }\n\n    this.player.hidePrompt = () => {\n      this.hide()\n    }\n  }\n\n  setStyle (style) {\n    Object.keys(style).map(key => {\n      this.root.style[key] = style[key]\n    })\n  }\n\n  showPrompt (detail, config = {}, onClick = () => {}) {\n    if (!detail) {\n      return\n    }\n    this.customOnClick = onClick\n    const { interval } = this.config\n    if (this.intervalId) {\n      clearTimeout(this.intervalId)\n      this.intervalId = null\n    }\n    Util.addClass(this.root, 'show')\n    config.mode === 'arrow' && Util.addClass(this.root, 'arrow')\n    if (typeof detail === 'string') {\n      this.find('.xgplayer-prompt-detail').innerHTML = detail\n    } else {\n      this.find('.xgplayer-prompt-detail').innerHTML = `${detail.text || ''}` + `${detail.highlight ? `<i class=\"highlight\">${detail.highlight}</i>` : ''}`\n    }\n\n    config.style && this.setStyle(config.style)\n\n    const autoHide = typeof config.autoHide === 'boolean' ? config.autoHide : this.config.autoHide\n    if (autoHide) {\n      const hideinterval = config.interval || interval\n      this.intervalId = setTimeout(() => {\n        this.hide()\n      }, hideinterval)\n    }\n  }\n\n  hide () {\n    Util.removeClass(this.root, 'show')\n    Util.removeClass(this.root, 'arrow')\n    this.root.removeAttribute('style')\n    this.customOnClick = null\n  }\n\n  render () {\n    return `<xg-prompt class=\"xgplayer-prompt ${STATE_CLASS.CONTROLS_FOLLOW}\">\n    <span class=\"xgplayer-prompt-detail\"></span>\n    </xg-prompt>`\n  }\n}\n\nexport default Prompt\n","import { Util, Events } from '../../plugin'\n\nconst ISPOT = {\n  time: 0, // 进度条在此时间戳打点 单位为s\n  text: '', // 打点处的自定义文案\n  id: 1, // 标记唯一标识，用于删除的时候索引\n  duration: 1, // 进度条标识点的时长 默认1s【可选】单位为s\n  color: '#fff', // 进度条标识点的显示颜色【可选】\n  style: {}, // 指定样式\n  width: 6,\n  height: 6\n}\n\nfunction mergeISPOT (iSpot) {\n  Object.keys(ISPOT).map(key => {\n    if (iSpot[key] === undefined) {\n      iSpot[key] = ISPOT[key]\n    }\n  })\n}\n\nconst APIS = {\n  _updateDotDom (iSpot, dotDom) {\n    if (!dotDom) {\n      return\n    }\n    const ret = this.calcuPosition(iSpot.time, iSpot.duration)\n    const style = iSpot.style || {}\n    style.left = `${ret.left}%`\n    style.width = `${ret.width}%`\n    dotDom.setAttribute('data-text', iSpot.text)\n    dotDom.setAttribute('data-time', iSpot.time)\n    if (ret.isMini) {\n      Util.addClass(dotDom, 'mini')\n    } else {\n      Util.removeClass(dotDom, 'mini')\n    }\n    Object.keys(style).map(key => {\n      dotDom.style[key] = style[key]\n    })\n  },\n  initDots () {\n    this._ispots.map(item => {\n      this.createDot(item, false)\n    })\n    this.ispotsInit = true\n  },\n\n  /**\n   * 创建一个故事点\n   * @param { object } iSpot\n   * @param { boolean } isNew\n   */\n  createDot (iSpot, isNew = true) {\n    const { progress } = this.player.plugins\n    if (!progress) {\n      return\n    }\n    if (isNew) {\n      mergeISPOT(iSpot)\n      this._ispots.push(iSpot)\n    }\n    if (!this.ispotsInit && isNew) {\n      return\n    }\n    const ret = this.calcuPosition(iSpot.time, iSpot.duration)\n    const style = iSpot.style || {}\n    style.left = `${ret.left}%`\n    style.width = `${ret.width}%`\n    let className = `xgspot_${iSpot.id} xgplayer-spot`\n    ret.isMini && (className += ' mini')\n    const _t = iSpot.template ? `<div class=\"xgplayer-spot-pop\">${iSpot.template}</div>` : ''\n    const dotDom = Util.createDom('xg-spot', _t, {\n      'data-text': iSpot.text,\n      'data-time': iSpot.time,\n      'data-id': iSpot.id\n    }, className)\n    Object.keys(style).map(key => {\n      dotDom.style[key] = style[key]\n    })\n    progress.outer && progress.outer.appendChild(dotDom)\n    this.positionDot(dotDom, iSpot.id)\n  },\n\n  /**\n   * 根据id查找节点\n   * @param {string} id\n   */\n  findDot (id) {\n    if (!this.player.plugins.progress) {\n      return\n    }\n    const ret = this._ispots.filter((cur, index) => {\n      return cur.id === id\n    })\n    return ret.length > 0 ? ret[0] : null\n  },\n\n  /**\n   * 更新故事点\n   * @param {any} iSpot\n   * @param {boolean} needShow\n   */\n  updateDot (iSpot, needShow = false) {\n    const { progress } = this.player.plugins\n    if (!progress) {\n      return\n    }\n    const dot = this.findDot(iSpot.id)\n    if (dot) {\n      Object.keys(iSpot).map(key => {\n        dot[key] = iSpot[key]\n      })\n    }\n    if (!this.ispotsInit) {\n      return\n    }\n    const dotDom = progress.find(`xg-spot[data-id=\"${iSpot.id}\"]`)\n    if (!dotDom) {\n      return\n    }\n    this._updateDotDom(iSpot, dotDom)\n    if (needShow) {\n      this.showDot(iSpot.id)\n    }\n  },\n\n  /**\n   * 删除某个故事点\n   * @param {string | number } id\n   */\n  deleteDot (id) {\n    const { _ispots } = this\n    const { progress } = this.player.plugins\n    if (!progress) {\n      return\n    }\n    const del = []\n    for (let i = 0; i < _ispots.length; i++) {\n      if (_ispots[i].id === id) {\n        del.push(i)\n      }\n    }\n    const len = del.length\n    for (let i = len - 1; i >= 0; i--) {\n      _ispots.splice(del[i], 1)\n      if (this.ispotsInit) {\n        const dotDom = progress.find(`xg-spot[data-id=\"${id}\"]`)\n        if (dotDom) {\n          dotDom.parentElement.removeChild(dotDom)\n        }\n      }\n    }\n  },\n\n  /**\n   * 移除所有的故事点\n   */\n  deleteAllDots () {\n    const { progress } = this.player.plugins\n    if (!progress) {\n      return\n    }\n    if (!this.ispotsInit) {\n      this._ispots = []\n      return\n    }\n    const dotDoms = progress.root.getElementsByTagName('xg-spot')\n    for (let i = dotDoms.length - 1; i >= 0; i--) {\n      progress.outer.removeChild(dotDoms[i])\n    }\n    this._ispots = []\n  },\n  /**\n   * 批量全部更新当前故事点\n   * @param {Array} iSpots\n   */\n  updateAllDots (iSpots = []) {\n    const { progress } = this.player.plugins\n    if (!progress) {\n      return\n    }\n    if (!this.ispotsInit) {\n      this._ispots = iSpots\n      return\n    }\n    this._ispots = []\n    const dotDoms = progress.root.getElementsByTagName('xg-spot')\n    const len = dotDoms.length\n    if (len > iSpots.length) {\n      for (let i = len - 1; i > iSpots.length - 1; i--) {\n        progress.outer.removeChild(dotDoms[i])\n      }\n    }\n    iSpots.forEach((ispot, index) => {\n      if (index < len) {\n        dotDoms[index].setAttribute('data-id', `${ispot.id}`)\n        this._ispots.push(ispot)\n        this.updateDot(ispot)\n      } else {\n        this.createDot(ispot)\n      }\n    })\n  },\n\n  positionDots () {\n    const { _ispots, playerSize } = this\n    const { sizeInfo } = this.player\n    const { progress } = this.player.plugins\n    if (!progress || sizeInfo.width === playerSize.width) {\n      return\n    }\n    playerSize.width = sizeInfo.width\n    playerSize.left = sizeInfo.left\n    _ispots.forEach(item => {\n      const dotDom = progress.find(`xg-spot[data-id=\"${item.id}\"]`)\n      dotDom && this.positionDot(dotDom, item.id)\n    })\n  },\n\n  positionDot (dotDom, id) {\n    const _pop = Util.findDom(dotDom, '.xgplayer-spot-pop')\n    if (!_pop) {\n      return\n    }\n    const pRect = this.playerSize\n\n    const rect1 = dotDom.getBoundingClientRect()\n    const rect = _pop.getBoundingClientRect()\n    const _left = rect1.left - pRect.left\n    const _diff = pRect.width - _left - rect1.width / 2\n    if (_left < rect.width / 2 || pRect.width < rect.width) {\n      const t = rect.width / 2 - _left\n      _pop.style.left = `${t}px`\n    } else if (_diff < rect.width / 2) {\n      const t = _diff - rect.width / 2 + rect1.width / 2\n      _pop.style.left = `${t}px`\n    } else {\n      _pop.style.left = '50%'\n    }\n  },\n\n  updateDuration () {\n    const { progress } = this.player.plugins\n    if (!progress) {\n      return\n    }\n    const { _ispots } = this\n    _ispots.forEach(item => {\n      const dotDom = progress.find(`xg-spot[data-id=\"${item.id}\"]`)\n      this._updateDotDom(item, dotDom)\n    })\n  },\n\n  getAllDotsDom () {\n    const { progress } = this.player.plugins\n    if (!progress) {\n      return []\n    }\n    const dotDoms = progress.root.getElementsByTagName('xg-spot')\n    return dotDoms\n  },\n\n  getDotDom (id) {\n    const { progress } = this.player.plugins\n    if (!progress) {\n      return\n    }\n    return progress.find(`xg-spot[data-id=\"${id}\"]`)\n  }\n}\n\nexport default function initDotsAPI (plugin) {\n  const { config, player } = plugin\n  Object.keys(APIS).map(item => {\n    plugin[item] = APIS[item].bind(plugin)\n  })\n  const ispots = player.config.progressDot || config.ispots || []\n  plugin._ispots = ispots.map(item => {\n    mergeISPOT(item)\n    return item\n  })\n  plugin.ispotsInit = false\n  plugin.playerSize = {\n    left: player.sizeInfo.left,\n    width: player.sizeInfo.width\n  }\n  plugin.on(Events.DURATION_CHANGE, () => {\n    if (!plugin.ispotsInit) {\n      plugin.initDots()\n    } else {\n      // 更新节点\n      plugin.updateDuration()\n    }\n  })\n  plugin.on(Events.VIDEO_RESIZE, () => {\n    plugin.positionDots()\n  })\n}\n","import Plugin, { Util, Sniffer, Events } from '../../plugin'\nimport initDotsAPI from './dotsApi'\nimport './index.scss'\n/**\n * @typedef {{\n *   miniWidth?: number, // 故事点显示最小宽度\n *   ispots?: Array<{ //故事点列表\n *     time?: number, // 进度条在此时间戳打点 单位为s\n *     text?: string, // 打点处的自定义文案\n *     id?: number | string, // 标记唯一标识，用于删除的时候索引\n *     duration:? number, // 进度条标识点的时长 默认1s【可选】单位为s\n *     color?: string, // 进度条标识点的显示颜色【可选】\n *     style?: { [propName: string]: any }, // 指定样式\n *     width?: number,\n *     height?: number\n *    }>,\n *   defaultText?: '', // 故事点hover默认文案\n *   isFocusDots?: true, //\n *   isShowThumbnail?: true, // 是否显示预览图\n *   isShowCoverPreview?: false, // 进度条拖动时是否显示播放区域预览图\n *   mode?: 'short' | 'production', // short // production\n *   [propName: string]: any\n * }} IProgressPreviewConfig\n */\n\nconst CALLBACK_MAP = {\n  dragmove: 'onProgressMove',\n  dragstart: 'onProgressDragStart',\n  dragend: 'onProgressDragEnd',\n  click: 'onProgressClick',\n  mouseover: 'onProgressMouseOver',\n  mouseenter: 'onProgressMouseOver'\n}\n\n/** */\nexport default class ProgressPreview extends Plugin {\n  constructor (args) {\n    super(args)\n    this._ispots = []\n    this.videoPreview = null\n    this.videothumbnail = null\n    this.thumbnail = null\n    this.timeStr = ''\n    this._state = {\n      now: 0,\n      f: false\n    }\n  }\n\n  static get pluginName () {\n    return 'progresspreview'\n  }\n\n  /**\n   * @type IProgressPreviewConfig\n   */\n  static get defaultConfig () {\n    return {\n      index: 1,\n      miniWidth: 6, // 故事点显示最小宽度\n      ispots: [], // 故事点列表\n      defaultText: '', // 故事点hover默认文案\n      isFocusDots: true, //\n      isHideThumbnailHover: true, // 是否在hover在预览图的时候隐藏\n      isShowThumbnail: true, // 是否显示预览图\n      isShowCoverPreview: false, // 进度条拖动时是否显示播放区域预览图\n      mode: '', // short // production\n      disable: false,\n      width: 160, // 显示宽度\n      height: 90 // 显示高度\n    }\n  }\n\n  beforeCreate (args) {\n    const progress = args.player.plugins.progress\n    if (progress) {\n      args.root = progress.root\n    }\n  }\n\n  afterCreate () {\n    this._curDot = null\n    this.handlerSpotClick = this.hook('spotClick', (_event, data) => {\n      if (data.seekTime) {\n        this.player.seek(data.seekTime)\n      }\n    })\n    this.transformTimeHook = this.hook('transformTime', (time) => {\n      this.setTimeContent(Util.format(time))\n    })\n    initDotsAPI(this)\n\n    this.on(Events.DURATION_CHANGE, () => {\n      this.show()\n    })\n    if (this.config.disable) {\n      this.disable()\n    }\n    // 用于进度条预览的扩展\n    this.extTextRoot = this.find('.xg-spot-ext-text')\n  }\n\n  setConfig (config) {\n    if (!config) {\n      return\n    }\n    Object.keys(config).map(key => {\n      this.config[key] = config[key]\n    })\n  }\n\n  onPluginsReady () {\n    const { player } = this\n    if (!player.plugins.progress) {\n      return\n    }\n    this.previewLine = this.find('.xg-spot-line')\n    this.timePoint = this.find('.xgplayer-progress-point')\n    this.timeText = this.find('.xg-spot-time')\n    this.tipText = this.find('.spot-inner-text')\n\n    this._hasThumnail = false\n\n    this.registerThumbnail()\n\n    this.bindEvents()\n  }\n\n  bindEvents () {\n    const { progress } = this.player.plugins\n    if (!progress) {\n      return\n    }\n    Object.keys(CALLBACK_MAP).map(key => {\n      this[CALLBACK_MAP[key]] = this[CALLBACK_MAP[key]].bind(this)\n      progress.addCallBack(key, this[CALLBACK_MAP[key]])\n    })\n\n    if (Sniffer.device === 'mobile') return\n\n    this.bind('.xg-spot-info', 'mousemove', this.onMousemove)\n\n    this.bind('.xg-spot-info', 'mousedown', this.onMousedown)\n\n    this.bind('.xg-spot-info', 'mouseup', this.onMouseup)\n\n    const fun = this.hook('previewClick', (...args) => {\n      // console.log('args', args)\n    })\n\n    this.handlerPreviewClick = (e) => {\n      e.stopPropagation()\n      fun(parseInt(this._state.now * 1000, 10) / 1000, e)\n\n      if (progress) {\n        // Make sure the mouse event is unlocked, otherwise the progress bar will still slide\n        progress.onMouseUp(e)\n      }\n    }\n\n    this.bind('.xg-spot-content', 'mouseup', this.handlerPreviewClick)\n  }\n\n  onMousemove = (e) => {\n    if (this.config.disable) {\n      return\n    }\n    if (Util.hasClass(e.target, 'xg-spot-content') && this.config.isHideThumbnailHover) {\n      this.player.plugins.progress.onMouseLeave(e)\n      return\n    }\n    if (this._state.f || Util.hasClass(e.target, 'xg-spot-content')) {\n      Util.event(e)\n      e.stopPropagation()\n    }\n  }\n\n  onMousedown = (e) => {\n    if (this.config.disable) {\n      return\n    }\n    if (this._state.f || Util.hasClass(e.target, 'xg-spot-content')) {\n      Util.event(e)\n      e.stopPropagation()\n    }\n  }\n\n  onMouseup = (e) => {\n    if (!this.isDrag) {\n      return\n    }\n    const { progress } = this.player.plugins\n    if (progress && progress.pos) {\n      progress.onMouseUp(e)\n      !progress.pos.isEnter && progress.onMouseLeave(e)\n    }\n  }\n\n  onDotMouseLeave = (e) => {\n    if (this.config.disable) {\n      return\n    }\n    this._curDot.removeEventListener('mouseleave', this.onDotMouseLeave)\n    this.blurDot(e.target)\n    this._curDot = null\n    const { progress } = this.player.plugins\n    progress && progress.enableBlur()\n    this.show()\n  }\n\n  onProgressMouseOver = (data, e) => {\n    if (this.config.disable) {\n      return\n    }\n    if (Util.hasClass(e.target, 'xgplayer-spot') && !this._curDot) {\n      this._curDot = e.target\n      this.focusDot(e.target)\n      if (this._curDot.children.length > 0) {\n        this.hide()\n      }\n      const { progress } = this.player.plugins\n      progress && progress.disableBlur()\n      this._curDot.addEventListener('mouseleave', this.onDotMouseLeave)\n    }\n  }\n\n  onProgressMove (data, e) {\n    if (this.config.disable || !this.player.duration) {\n      return\n    }\n    this.updatePosition(data.offset, data.width, data.currentTime, data.e)\n  }\n\n  onProgressDragStart (data) {\n    if (this.config.disable || !this.player.duration) {\n      return\n    }\n    this.isDrag = true\n    this.videoPreview && Util.addClass(this.videoPreview, 'show')\n  }\n\n  onProgressDragEnd (data) {\n    if (this.config.disable || !this.player.duration) {\n      return\n    }\n    this.isDrag = false\n    this.videoPreview && Util.removeClass(this.videoPreview, 'show')\n  }\n\n  onProgressClick (data, e) {\n    if (this.config.disable) {\n      return\n    }\n    if (Util.hasClass(e.target, 'xgplayer-spot')) {\n      e.stopPropagation()\n      e.preventDefault();\n      ['time', 'id', 'text'].map(key => {\n        data[key] = e.target.getAttribute(`data-${key}`)\n      })\n      data.time && (data.time = Number(data.time))\n      this.handlerSpotClick(e, data)\n    }\n  }\n\n  updateLinePos (offset, cwidth) {\n    const { root, previewLine, player, config } = this\n    const { mode } = player.controls\n    const isflex = mode === 'flex'\n    let lwidth = root.getBoundingClientRect().width\n    // 如果当前预览图宽度获取不到，无法计算位移，不做渲染\n    if (!lwidth && this._hasThumnail) {\n      return\n    }\n    lwidth = this._hasThumnail && lwidth < config.width ? config.width : lwidth\n    let x = offset - lwidth / 2\n    let _t\n    if (x < 0 && !isflex) {\n      x = 0\n      _t = offset - lwidth / 2\n    } else if (x > cwidth - lwidth && !isflex) {\n      _t = x - (cwidth - lwidth)\n      x = cwidth - lwidth\n    } else {\n      _t = 0\n    }\n    _t !== undefined && (previewLine.style.transform = `translateX(${_t.toFixed(2)}px)`)\n    root.style.transform = `translateX(${x.toFixed(2)}px) translateZ(0)`\n  }\n\n  updateTimeText (timeStr) {\n    const { timeText, timePoint } = this\n    timeText.innerHTML = timeStr\n    !this.thumbnail && (timePoint.innerHTML = timeStr)\n  }\n\n  updatePosition (offset, cwidth, time, e) {\n    const { root, config, _state } = this\n    if (!root) {\n      return\n    }\n\n    // let now = offset / cwidth * player.duration\n    // now = now < 0 ? 0 : (now > player.duration ? player.duration : now)\n    _state.now = time\n    this.transformTimeHook(time)\n    const timeStr = this.timeStr\n    if (e && e.target && Util.hasClass(e.target, 'xgplayer-spot')) {\n      this.showTips(e.target.getAttribute('data-text'), false, timeStr)\n      this.focusDot(e.target)\n      _state.f = true\n      config.isFocusDots && _state.f && (_state.now = parseInt(e.target.getAttribute('data-time'), 10))\n    } else if (config.defaultText) {\n      _state.f = false\n      this.showTips(config.defaultText, true, timeStr)\n    } else {\n      _state.f = false\n      this.hideTips('')\n      // this.blurDot()\n    }\n    this.updateTimeText(timeStr)\n    this.updateThumbnails(_state.now)\n    this.updateLinePos(offset, cwidth)\n  }\n\n  /**\n   * @description 设置自定义时间显示字符串\n   * @param {string} str\n   */\n  setTimeContent (str) {\n    this.timeStr = str\n  }\n\n  updateThumbnails (time) {\n    const { player, videoPreview, config } = this\n    const { thumbnail } = player.plugins\n    if (thumbnail && thumbnail.usable) {\n      this.thumbnail && thumbnail.update(this.thumbnail, time, config.width, config.height)\n      const rect = videoPreview && videoPreview.getBoundingClientRect()\n      this.videothumbnail && thumbnail.update(this.videothumbnail, time, rect.width, rect.height)\n    }\n  }\n\n  registerThumbnail (thumbnailConfig = {}) {\n    if (Sniffer.device === 'mobile') {\n      return\n    }\n    const { player, config } = this\n    const thumbnail = player.getPlugin('thumbnail')\n    if (thumbnail) {\n      thumbnail.setConfig(thumbnailConfig)\n    }\n    if (!thumbnail || !thumbnail.usable || !config.isShowThumbnail) {\n      Util.addClass(this.root, 'short-line no-thumbnail')\n      return\n    } else {\n      Util.removeClass(this.root, 'short-line no-thumbnail')\n    }\n    if (config.mode === 'short') {\n      Util.addClass(this.root, 'short-line')\n    }\n    this._hasThumnail = true\n    const tRoot = this.find('.xg-spot-thumbnail')\n    this.thumbnail = thumbnail.createThumbnail(tRoot, 'progress-thumbnail')\n    if (config.isShowCoverPreview) {\n      this.videoPreview = Util.createDom('xg-video-preview', '', {}, 'xgvideo-preview')\n      player.root.appendChild(this.videoPreview)\n      this.videothumbnail = thumbnail.createThumbnail(this.videoPreview, 'xgvideo-thumbnail')\n    }\n    this.updateThumbnails(0)\n  }\n\n  calcuPosition (time, duration) {\n    const { progress } = this.player.plugins\n    const { player } = this\n    const totalWidth = progress.root.getBoundingClientRect().width\n    const widthPerSeconds = player.duration / totalWidth * 6\n    const ret = {}\n    if (time + duration > player.duration) {\n      duration = player.duration - time\n    }\n    ret.left = time / player.duration * 100\n    ret.width = duration / player.duration\n    ret.isMini = widthPerSeconds > duration\n    return {\n      left: time / player.duration * 100,\n      width: duration / player.duration * 100,\n      isMini: duration < widthPerSeconds\n    }\n  }\n\n  showDot (id) {\n    const dot = this.findDot(id)\n    if (dot) {\n      const rect = this.root.getBoundingClientRect()\n      const { width } = rect\n      const offset = dot.time / this.player.duration * width\n      this.updatePosition(offset, width, dot.time)\n    }\n  }\n\n  focusDot (target, id) {\n    if (!target) {\n      return\n    }\n    if (!id) {\n      id = target.getAttribute('data-id')\n    }\n    Util.addClass(target, 'active')\n    this._activeDotId = id\n  }\n\n  blurDot (target) {\n    if (!target) {\n      const id = this._activeDotId\n      target = this.getDotDom(id)\n    }\n    if (!target) {\n      return\n    }\n    Util.removeClass(target, 'active')\n    this._activeDotId = null\n  }\n\n  showTips (text, isDefault, timeStr = '') {\n    Util.addClass(this.root, 'no-timepoint')\n    if (!text) {\n      return\n    }\n    Util.addClass(this.find('.xg-spot-content'), 'show-text')\n    if (isDefault && this.config.mode === 'production') {\n      Util.addClass(this.root, 'product')\n      this.tipText.textContent = text\n    } else {\n      Util.removeClass(this.root, 'product')\n      this.tipText.textContent = this._hasThumnail ? text : `${timeStr} ${text}`\n    }\n  }\n\n  hideTips () {\n    Util.removeClass(this.root, 'no-timepoint')\n    this.tipText.textContent = ''\n    Util.removeClass(this.find('.xg-spot-content'), 'show-text')\n    Util.removeClass(this.root, 'product')\n  }\n\n  hide () {\n    Util.addClass(this.root, 'hide')\n  }\n\n  /**\n   * @param {string} [value]\n   * @returns\n   */\n  show (value) {\n    Util.removeClass(this.root, 'hide')\n  }\n\n  enable () {\n    const { config, playerConfig } = this\n    this.config.disable = false\n    this.show()\n    if (!this.thumbnail && config.isShowThumbnail) {\n      this.registerThumbnail(playerConfig.thumbnail || {})\n    }\n  }\n\n  disable () {\n    this.config.disable = true\n    this.hide()\n  }\n\n  destroy () {\n    const { progress } = this.player.plugins\n    progress && Object.keys(CALLBACK_MAP).map(key => {\n      progress.removeCallBack(key, this[CALLBACK_MAP[key]])\n    })\n    this.videothumbnail = null\n    this.thumbnail = null\n    this.videoPreview && this.player.root.removeChild(this.videoPreview)\n    this.unbind('.xg-spot-info', 'mousemove', this.onMousemove)\n    this.unbind('.xg-spot-info', 'mousedown', this.onMousedown)\n    this.unbind('.xg-spot-info', 'mouseup', this.onMouseup)\n    this.unbind('.xg-spot-content', 'mouseup', this.handlerPreviewClick)\n  }\n\n  render () {\n    if (Sniffer.device === 'mobile' || this.playerConfig.isMobileSimulateMode === 'mobile') {\n      return ''\n    }\n\n    return `<div class=\"xg-spot-info hide ${this.config.mode === 'short' ? 'short-line' : ''}\">\n      <div class=\"xg-spot-content\">\n        <div class=\"xg-spot-thumbnail\">\n          <span class=\"xg-spot-time\"></span>\n        </div>\n        <div class=\"xg-spot-text\"><span class=\"spot-inner-text\"></span></div>\n      </div>\n      <div class=\"xgplayer-progress-point\">00:00</div>\n      <div class=\"xg-spot-ext-text\"></div>\n      <div class=\"xg-spot-line\"></div>\n    </div>`\n  }\n}\n","/* eslint-disable camelcase */\nimport BasePlugin, { Util, Events } from '../../plugin'\n/**\n * @typedef {{\n *   isShow?: boolean,\n *   urls?: Array<string>, // 有多张大图就多个url\n *   pic_num?: number, // 每张图含有几个雪碧图\n *   col?: number, // 截图列数\n *   row?: number, // 截图行数\n *   height?: number, // 缩略图高度\n *   width?: number, // 缩略图宽度\n *   scale?: number, // 缩放\n *   className?: string, // 额外添加在dom上的class\n *   hidePortrait?: boolean, // 是否在竖屏的时候隐藏\n *   [propName: string]: any\n * }} IThumbnailConfig\n */\nexport default class Thumbnail extends BasePlugin {\n  static get pluginName () {\n    return 'thumbnail'\n  }\n\n  /**\n   * @type IThumbnailConfig\n   */\n  static get defaultConfig () {\n    return {\n      isShow: false,\n      urls: [], // 有多张大图就多个url就好\n      pic_num: 0, // 每张图含有几个雪碧图\n      col: 0, // 截图列数\n      row: 0, // 截图行数\n      height: 90, // 缩略图高度\n      width: 160, // 缩略图宽度\n      scale: 1, // 缩放\n      className: '', // 额外添加在dom上的class\n      hidePortrait: false // 是否在竖屏的时候隐藏\n    }\n  }\n\n  constructor (args) {\n    super(args)\n    this.ratio = 1\n    this.interval = null\n    this._preloadMark = {}\n  }\n\n  afterCreate () {\n    if (this.usable) {\n      this.initThumbnail()\n    }\n    this.on([Events.DURATION_CHANGE], () => {\n      const { pic_num, interval } = this.config\n      this.usable && (this.interval = interval > 0 ? interval : Math.round(this.player.duration * 1000 / pic_num) / 1000)\n    })\n  }\n\n  setConfig (config) {\n    if (!config) {\n      return\n    }\n    const keys = Object.keys(config)\n    if (keys.length < 1) {\n      return\n    }\n    keys.forEach(key => {\n      this.config[key] = config[key]\n    })\n    this.usable && this.initThumbnail()\n  }\n\n  get usable () {\n    const { urls, pic_num } = this.config\n    return urls && urls.length > 0 && pic_num > 0\n  }\n\n  initThumbnail () {\n    const { width, height, pic_num, interval } = this.config\n    this.ratio = width / height * 100\n    this.interval = interval || Math.round(this.player.duration / pic_num)\n    this._preloadMark = {}\n    // this.preload(0)\n    // this.preIndex = new Array(urls.length)\n    // this.interval = interval || Math.round(this.player.duration / pic_num)\n    // this.ratio = width / height * 100\n    // className && Util.addClass(this.root, className)\n    // hidePortrait && Util.addClass(this.root, 'portrait')\n    // width && (this.root.style.width = `${width}px`)\n    // height && (this.root.style.height = `${height}px`)\n    // this.root.style.backgroundSize = `${width * col}px auto`\n  }\n\n  getUrlByIndex (index) {\n    return index >= 0 && index < this.config.urls.length ? this.config.urls[index] : ''\n  }\n\n  preload (index) {\n    if (this._preloadMark[index]) {\n      return\n    }\n    const { urls } = this.config\n    const len = urls.length\n    const arr = []\n    index > 0 && arr.push(index - 1)\n    arr.push(index)\n    index > 0 && index < len - 1 && arr.push(index + 1)\n    arr.map(item => {\n      if (!this._preloadMark[item] && item >= 0 && item < len) {\n        this._preloadMark[item] = 1\n        Util.preloadImg(urls[item], () => {\n          this._preloadMark[item] = 2\n        })\n      }\n    })\n  }\n\n  getPosition (now, containerWidth = 0, containerHeight = 0) {\n    const { pic_num, row, col, width, height } = this.config\n    this.interval = Math.round(this.player.duration / pic_num)\n    let index = Math.ceil(now / this.interval) // 当前时间对应的图像索引\n    index = index > pic_num ? pic_num : index\n    const urlIndex = index < row * col ? 0 : (Math.ceil(index / (row * col)) - 1)// 当前图像所在的url索引\n    const indexInPage = index - urlIndex * (col * row) // 当前图像在当前url中的索引\n    const rowIndex = indexInPage > 0 ? Math.ceil(indexInPage / col) - 1 : 0// 当前图像在当前url中的行索引\n    const colIndex = indexInPage > 0 ? indexInPage - rowIndex * col - 1 : 0 // 当前图像在当前url中的列索引\n    let swidth = 0 // containerWidth || width\n    let sHeight = 0 // swidth * height / width\n\n    // 根据入参的宽高适配样式\n    if (containerWidth && containerHeight) {\n      const per = containerWidth / containerHeight\n      if (per < width / height) {\n        sHeight = containerHeight\n        swidth = sHeight * (width / height)\n        // swidth = containerWidth\n        // sHeight = swidth / (width / height)\n      } else {\n        swidth = containerWidth\n        sHeight = swidth / (width / height)\n      }\n    } else if (!containerHeight) {\n      swidth = containerWidth || width\n      sHeight = swidth / (width / height)\n    } else if (!containerWidth) {\n      sHeight = containerHeight || height\n      swidth = sHeight * (width / height)\n    }\n    const url = this.getUrlByIndex(urlIndex)\n    return {\n      urlIndex,\n      rowIndex,\n      colIndex,\n      url,\n      height: sHeight,\n      width: swidth,\n      style: {\n        backgroundImage: `url(${url})`,\n        backgroundSize: `${swidth * col}px auto`,\n        backgroundPosition: `-${colIndex * swidth}px -${rowIndex * sHeight}px`,\n        width: `${swidth}px`,\n        height: `${sHeight}px`\n      }\n    }\n  }\n\n  update (dom, now, containerWidth = 0, containerHeight = 0, customStyle = '') {\n    const { pic_num, urls } = this.config\n    if (pic_num <= 0 || !urls || urls.length === 0) {\n      return\n    }\n    const pos = this.getPosition(now, containerWidth, containerHeight)\n    this.preload(pos.urlIndex)\n\n    Object.keys(pos.style).map((key) => {\n      dom.style[key] = pos.style[key]\n    })\n    Object.keys(customStyle).map(key => {\n      dom.style[key] = customStyle[key]\n    })\n  }\n\n  // 对外暴露 切换缩略图配置\n  changeConfig (newConfig = {}) {\n    this.setConfig(newConfig)\n  }\n\n  createThumbnail (root, className) {\n    const dom = Util.createDom('xg-thumbnail', '', {}, `thumbnail ${className}`)\n    root && root.appendChild(dom)\n    return dom\n  }\n}\n","import Plugin, { Events, Util } from '../../plugin'\n\nfunction getBgColor (color) {\n  return color ? `background:${color};` : ''\n}\n\nclass MiniProgress extends Plugin {\n  static get pluginName () {\n    return 'MiniProgress'\n  }\n\n  static get defaultConfig () {\n    return {\n      mode: 'auto',\n      height: 2\n    }\n  }\n\n  get offsetDuration () {\n    return this.playerConfig.customDuration || this.player.offsetDuration || this.player.duration\n  }\n\n  get currentTime () {\n    const { offsetCurrentTime, currentTime } = this.player\n    return offsetCurrentTime >= 0 ? offsetCurrentTime : currentTime\n  }\n\n  afterCreate () {\n    if (!this.root) {\n      return\n    }\n    this.on(Events.TIME_UPDATE, this.onTimeupdate)\n    this.on(Events.EMPTIED, () => {\n      this.reset()\n    })\n  }\n\n  onTimeupdate = () => {\n    const { ended } = this.player\n    const { offsetDuration } = this\n    let time = this.currentTime\n    time = Util.adjustTimeByDuration(time, offsetDuration, ended)\n    this.update({ played: time }, offsetDuration)\n  }\n\n  reset () {\n    this.update({ played: 0, cached: 0 }, 0)\n  }\n\n  update (data = { cached: 0, played: 0 }, duration) {\n    if (!duration || !this.root) {\n      return\n    }\n    if (data.cached) {\n      this.find('xg-mini-progress-cache').style.width = `${data.cached / duration * 100}%`\n    }\n    if (data.played) {\n      this.find('xg-mini-progress-played').style.width = `${data.played / duration * 100}%`\n    }\n  }\n\n  render () {\n    const { commonStyle, miniprogress } = this.playerConfig\n    if (!miniprogress) {\n      return\n    }\n    const { mode, height } = this.config\n    const _style = {\n      cached: getBgColor(commonStyle.cachedColor),\n      played: getBgColor(commonStyle.playedColor),\n      progress: getBgColor(commonStyle.progressColor),\n      height: height > 0 && height !== 2 ? `height: ${height}px;` : ''\n    }\n    const stateClass = mode === 'show' ? 'xg-mini-progress-show' : ''\n    return `<xg-mini-progress class=\"xg-mini-progress ${stateClass}\" style=\"${_style.progress} ${_style.height}\">\n    <xg-mini-progress-cache class=\"xg-mini-progress-cache\" style=\"${_style.cached}\"></xg-mini-progress-cache>\n    <xg-mini-progress-played class=\"xg-mini-progress-played\" style=\"${_style.played}\"></xg-mini-progress-played>\n    </xg-mini-progress>`\n  }\n}\n\nexport default MiniProgress\n","import Plugin, { Events, Util, Sniffer } from '../../plugin'\nimport XG_DEBUG from '../../utils/debug'\nimport './index.scss'\n\nconst MODES = {\n  REAL_TIME: 'realtime',\n  FIRST_FRAME: 'firstframe',\n  FRAME_RATE: 'framerate',\n  POSTER: 'poster'\n}\n\nfunction nowTime () {\n  try {\n    return parseInt(window.performance.now(), 10)\n  } catch (e) {\n    return new Date().getTime()\n  }\n}\n\n/**\n * Check whether the current environment supports canvas\n * @returns { boolean }\n */\nfunction checkIsSupportCanvas () {\n  try {\n    const ctx = document.createElement('canvas').getContext\n    if (ctx) {\n      return true\n    }\n    return false\n  } catch (e) {\n    return false\n  }\n}\n\n/**\n * @typedef { {\n *   disable?: boolean,\n *   mode?: \"realtime\" | \"firstframe\" | \"framerate\",\n *   frameRate?: number\n *   filter?: string,\n *   addMask?: boolean,\n *   maskBg?: string,\n *    multiple? : number,\n *   [propName: string]: any\n * } } IDynamicBgConfig\n */\n\nlet isSupportCanvas = null\nclass DynamicBg extends Plugin {\n  static get pluginName () {\n    return 'dynamicBg'\n  }\n\n  /**\n   * @type IDynamicBgConfig\n   */\n  static get defaultConfig () {\n    return {\n      isInnerRender: false,\n      disable: true,\n      index: -1,\n      /**\n       * Rendering method\n       * realtime - Realtime rendering\n       * firstframe - Render only the first frame\n       * framerate - Render by frame\n       * poster - Render by poster only\n       */\n      mode: 'framerate',\n      frameRate: 10, // Frame rate when mode=framerate\n      filter: 'blur(50px)', // Filter settings\n      startFrameCount: 2, // 起始连续渲染次数\n      startInterval: 0, // 初始渲染间隔\n      addMask: true, // Whether need a mask\n      multiple: 1.2, // 画面放大倍数\n      maskBg: 'rgba(0,0,0,0.7)' // Mask background color\n    }\n  }\n\n  /**\n   * @type {boolean}\n   * @description Does the current environment support Canvas\n   */\n  static get isSupport () {\n    if (typeof isSupportCanvas === 'boolean') {\n      return isSupportCanvas\n    }\n    isSupportCanvas = checkIsSupportCanvas()\n    return isSupportCanvas\n  }\n\n  static supportCanvasFilter () {\n    return !(Sniffer.browser === 'safari' || Sniffer.browser === 'firefox')\n  }\n\n  afterCreate () {\n    if (this.playerConfig.dynamicBg === true) {\n      this.config.disable = false\n    }\n    if (!DynamicBg.isSupport) {\n      this.config.disable = true\n    }\n    const { disable, mode, frameRate } = this.config\n    if (disable) {\n      return\n    }\n    /**\n     * @private\n     */\n    this._pos = {\n      width: 0,\n      height: 0,\n      rwidth: 0,\n      rheight: 0,\n      x: 0,\n      y: 0,\n      pi: 0\n    }\n    /**\n     * @readonly\n     */\n    this.isStart = false\n\n    this._isLoaded = false\n    /**\n     * @readonly\n     */\n    this.videoPI = 0\n    /**\n     * @readonly\n     */\n    this.preTime = 0\n    /**\n     * @readonly\n     */\n    this.interval = parseInt(1000 / frameRate, 10)\n\n    /**\n     * @readonly\n     */\n    this.canvas = null\n    /**\n     * @readonly\n     */\n    this.canvasCtx = null\n\n    this._frameCount = 0\n\n    this._loopType = this.config.mode !== MODES.REAL_TIME && this.interval >= 1000 ? 'timer' : 'animation'\n\n    this.once(Events.COMPLETE, () => {\n      if (!this.player) {\n        return\n      }\n      this.init()\n      this.renderByPoster()\n      if (!this.player.paused) {\n        this.start()\n      }\n    })\n\n    if (mode === MODES.POSTER) {\n      return\n    }\n\n    if (mode !== MODES.FIRST_FRAME) {\n      this.on(Events.EMPTIED, () => {\n        this.stop()\n      })\n      this.on(Events.PLAY, () => {\n        const { startInterval } = this.config\n        this._checkIfCanStart() && this.start(0, startInterval)\n      })\n      this.on(Events.PAUSE, () => {\n        this.stop()\n      })\n    }\n\n    this.on(Events.LOADED_DATA, this.onLoadedData)\n    this.on(Events.LOAD_START, () => {\n      this._isLoaded = false\n      this.stop()\n    })\n    document.addEventListener('visibilitychange', this.onVisibilitychange)\n  }\n\n  setConfig (config) {\n    Object.keys(config).forEach(key => {\n      if (key === 'root' && config[key] !== this.config[key]) {\n        this.reRender(config[key])\n      } else if (key === 'frameRate') {\n        this.interval = parseInt(1000 / config[key], 10)\n      } else if (key === 'disable' && config[key]) {\n        this.stop()\n      }\n      this.config[key] = config[key]\n    })\n  }\n\n  onLoadedData = (e) => {\n    if (!this.player) { return }\n    this._frameCount = this.config.startFrameCount\n    this.stop()\n    this.renderOnTimeupdate(e)\n    this.off(Events.TIME_UPDATE, this.renderOnTimeupdate)\n    this.on(Events.TIME_UPDATE, this.renderOnTimeupdate)\n  }\n\n  onVisibilitychange = (e) => {\n    if (document.visibilityState === 'visible') {\n      this._checkIfCanStart() && this.start()\n    } else if (document.visibilityState === 'hidden') {\n      this.stop()\n    }\n  }\n\n  /**\n   * @private\n   * 初始化 canvas对象并使用海报图先渲染首帧w11\n   */\n  init (_root) {\n    const { player, config } = this\n    this.canvasFilter = DynamicBg.supportCanvasFilter()\n    try {\n      // 保证节点插入到video之前\n      let parent = _root || config.root\n      if (!parent) {\n        parent = !config.isInnerRender ? player.root : (player.innerContainer || player.root)\n      }\n      parent.insertAdjacentHTML('afterbegin',\n        `<div class=\"xgplayer-dynamic-bg\" data-index=\"${config.index}\"><canvas>\n        </canvas><xgmask></xgmask></div>`)\n      this.root = parent.children[0]\n      this.canvas = this.find('canvas')\n      // safari中canvas filter不生效, 使用css滤镜\n      if (!this.canvasFilter) {\n        this.canvas.style.filter = config.filter\n        this.canvas.style.webkitFilter = config.filter\n      }\n      this.mask = this.find('xgmask')\n\n      config.addMask && (this.mask.style.background = config.maskBg)\n      this.canvasCtx = this.canvas.getContext('2d')\n    } catch (e) {\n      XG_DEBUG.logError('plugin:DynamicBg', e)\n    }\n  }\n\n  reRender (root) {\n    const { disable } = this.config\n    if (!disable && !this.root) {\n      return\n    }\n    this.stop()\n    const _p = this.root ? this.root.parentElement : null\n    if (_p !== root) {\n      _p.removeChild(this.root)\n    }\n    if (!root) {\n      this.root = null\n      return\n    }\n    this.init(root)\n    this.renderOnce()\n    const { startInterval } = this.config\n    this._checkIfCanStart() && this.start(0, startInterval)\n  }\n\n  /**\n * Check whether the current video object supports screenshots\n * @param { Object } video\n * @returns { DomElement | null }\n */\n  checkVideoIsSupport (video) {\n    if (!video) {\n      return null\n    }\n    const _tVideo = video && video instanceof window.HTMLVideoElement ? video : (video.canvas ? video.canvas : (video.flyVideo ? video.flyVideo : null))\n    if (_tVideo && !(Sniffer.browser === 'safari' && Util.isMSE(_tVideo))) {\n      return _tVideo\n    }\n\n    const _tagName = _tVideo ? _tVideo.tagName.toLowerCase() : ''\n    if (_tagName === 'canvas' || _tagName === 'img') {\n      return _tVideo\n    }\n\n    return null\n  }\n\n  renderByPoster () {\n    const { poster } = this.playerConfig\n    if (poster) {\n      const url = Util.typeOf(poster) === 'String' ? poster : (Util.typeOf(poster.poster) === 'String' ? poster.poster : null)\n      this.updateImg(url)\n    }\n  }\n\n  renderOnTimeupdate = (e) => {\n    if (this._frameCount > 0) {\n      this.renderOnce()\n      this._frameCount--\n    } else {\n      this._isLoaded = true\n      this.off(Events.TIME_UPDATE, this.renderOnTimeupdate)\n      const { startInterval } = this.config\n      !this.player.paused && this._checkIfCanStart() && this.start(0, startInterval)\n    }\n  }\n\n  _checkIfCanStart () {\n    const { mode } = this.config\n    return this._isLoaded && !this.player.paused && mode !== MODES.FIRST_FRAME && mode !== MODES.POSTER\n  }\n\n  /**\n   * just render once\n   * @returns\n   */\n  renderOnce () {\n    const video = this.player.video\n    if (!video.videoWidth || !video.videoHeight) {\n      return\n    }\n    this.videoPI = parseInt(video.videoWidth / video.videoHeight * 100, 10)\n    const _sVideo = this.checkVideoIsSupport(video)\n    // console.log('>>>renderOnce, update', _sVideo, this.videoPI)\n    _sVideo && this.update(_sVideo, this.videoPI)\n  }\n\n  start = (time, interval) => {\n    const video = this.player.video\n    const _now = nowTime()\n    const _sVideo = this.checkVideoIsSupport(video)\n    if (!_sVideo || !this.canvasCtx) {\n      return\n    }\n\n    if (!interval) {\n      interval = this.interval\n    }\n    this.stop()\n    if (video.videoWidth && video.videoHeight) {\n      this.videoPI = video.videoHeight > 0 ? parseInt(video.videoWidth / video.videoHeight * 100, 10) : 0\n      if (this.config.mode === MODES.REAL_TIME) {\n        video && video.videoWidth && this.update(_sVideo, this.videoPI)\n        this.preTime = _now\n      } else if (_now - this.preTime >= interval) {\n        video && video.videoWidth && this.update(_sVideo, this.videoPI)\n        this.preTime = _now\n      }\n    }\n    this.frameId = this._loopType === 'timer' ? Util.setTimeout(this, this.start, interval) : Util.requestAnimationFrame(this.start)\n  }\n\n  stop = () => {\n    if (this.frameId) {\n      this._loopType === 'timer' ? Util.clearTimeout(this, this.frameId) : Util.cancelAnimationFrame(this.frameId)\n      // window.clearTimeout(this.frameId)\n      this.frameId = null\n    }\n  }\n\n  updateImg (url) {\n    // TODO: 需要改造，使用domcss样式渲染，不再使用canvas渲染\n    if (!url) {\n      return\n    }\n    // Render using the image\n    const { width, height } = this.canvas.getBoundingClientRect()\n    let image = new window.Image()\n    image.onload = () => {\n      if (!this.canvas || this.frameId || this.isStart) {\n        return\n      }\n      this.canvas.height = height\n      this.canvas.width = width\n      const pi = parseInt(width / height * 100, 10)\n      // console.log('>>>updateImg update', image, pi)\n      this.update(image, pi)\n      image = null\n    }\n    image.src = url\n  }\n\n  update (video, sourcePI) {\n    if (!this.canvas || !this.canvasCtx || !sourcePI) {\n      return\n    }\n    try {\n      const { _pos, config } = this\n      const { width, height } = this.canvas.getBoundingClientRect()\n      if (width !== _pos.width || height !== _pos.height || _pos.pi !== sourcePI) {\n        const pi = parseInt(width / height * 100, 10)\n        _pos.pi = sourcePI\n        _pos.width !== width && (_pos.width = this.canvas.width = width)\n        _pos.height !== height && (_pos.height = this.canvas.height = height)\n        let rheight = height\n        let rwidth = width\n        if (pi < sourcePI) {\n          rwidth = parseInt(height * sourcePI / 100, 10)\n        } else if (pi > sourcePI) {\n          rheight = parseInt(width * 100 / sourcePI, 10)\n        }\n        _pos.rwidth = rwidth * config.multiple\n        _pos.rheight = rheight * config.multiple\n        _pos.x = (width - _pos.rwidth) / 2\n        _pos.y = (height - _pos.rheight) / 2\n      }\n      // console.log(`x:${_pos.x} y:${_pos.y}  rwidth:${_pos.rwidth} rheight:${_pos.rheight}`)\n      this.canvasFilter && (this.canvasCtx.filter = config.filter)\n      this.canvasCtx.drawImage(video, _pos.x, _pos.y, _pos.rwidth, _pos.rheight)\n    } catch (e) {\n      XG_DEBUG.logError('plugin:DynamicBg', e)\n    }\n  }\n\n  destroy () {\n    this.stop()\n    document.removeEventListener('visibilitychange', this.onVisibilitychange)\n    this.canvasCtx = null\n    this.canvas = null\n  }\n\n  render () {\n    return ''\n  }\n}\n\nexport default DynamicBg\n","import { BasePlugin, Events } from '../../plugin'\nconst INFO = 'info'\n\nconst { STATS_EVENTS } = Events\nexport default class Stats extends BasePlugin {\n  static get pluginName () {\n    return 'stats'\n  }\n\n  static get defaultConfig () {\n    return {\n    }\n  }\n\n    _recordUserActions = (actionData) => {\n      const time = this._getTime()\n      const payload = Object.assign({}, actionData, { msg: actionData.msg || actionData.action })\n      this._stats[INFO].push({\n        type: 'userAction',\n        ...time,\n        payload\n      })\n    }\n\n    _getTime () {\n      return {\n        timestamp: Date.now(),\n        timeFormat: new Date().toISOString()\n      }\n    }\n\n    afterCreate () {\n      this.reset()\n      this.on(Events.USER_ACTION, this._recordUserActions)\n      this.on(STATS_EVENTS.STATS_INFO, this._recordInfo)\n      this.on(STATS_EVENTS.STATS_DOWNLOAD, this._downloadStats)\n      this.on(STATS_EVENTS.STATS_RESET, this._onReset)\n    }\n\n    destroy () {\n      this.offAll()\n    }\n\n    _onReset = () => {\n      this.reset()\n    }\n\n    _recordInfo = (data) => {\n      this.info(data)\n    }\n\n    _downloadStats = () => {\n      const stats = this.getStats()\n      const blob = new Blob([JSON.stringify(stats)], { type: 'application/json' })\n      const downloadUrl = window.URL.createObjectURL(blob)\n      const link = document.createElement('a')\n      link.style.display = 'none'\n      link.href = downloadUrl\n      link.download = 'player.txt'\n      link.disabled = false\n      link.click()\n    }\n\n    downloadStats () {\n      this._downloadStats()\n    }\n\n    /**\n     * @params type\n     */\n    info (data) {\n      if (data.profile) {\n        this._infoProfile(data)\n      } else {\n        this._info(data)\n      }\n    }\n\n    _info (data) {\n      const time = this._getTime()\n      this._stats[INFO].push({\n        ...time,\n        payload: data\n      })\n    }\n\n    _infoProfile (data) {\n      if (data && data.startMs) {\n        const endMs = Date.now()\n        const dur = endMs - data.startMs\n        const profile = {\n          cat: 'function',\n          dur: dur,\n          name: data.name || data.msg,\n          ph: 'X',\n          pid: 0,\n          tid: 0,\n          ts: data.startMs,\n          profile: true,\n          ...data\n        }\n        this._info(profile)\n      } else {\n        console.warn('infoProfile need object data, include startMs')\n      }\n    }\n\n    reset () {\n      this._stats = {\n        [INFO]: [],\n        media: {}\n      }\n    }\n\n    getStats () {\n      const { player } = this\n      const mediaElem = player.media\n      const buffered = []\n      for (let i = 0; i < mediaElem.buffered.length; i++) {\n        buffered.push({\n          start: mediaElem.buffered.start(i),\n          end: mediaElem.buffered.end(i)\n        })\n      }\n      const mediaInfo = {\n        currentTime: mediaElem.currentTime,\n        readyState: mediaElem.readyState,\n        buffered,\n        paused: mediaElem.paused,\n        ended: mediaElem.ended\n      }\n\n      this._stats.media = mediaInfo\n      return {\n        raw: this._stats,\n        timestat: this._getTimeStats(),\n        profile: this._getProfile()\n      }\n    }\n\n    _getTimeStats () {\n      const allStat = this._stats[INFO]\n      const msgs = allStat.map(stat => {\n        const data = stat.payload.data\n        let msg = ''\n        try {\n          if (data instanceof Error) {\n            msg = data.msg\n          } else if (data !== undefined) {\n            msg = JSON.stringify(data)\n          }\n        } catch (error) {\n          console.log('err', error)\n        }\n\n        return `[${stat.timeFormat}] : ${stat.payload.msg} ${msg} `\n      })\n      return msgs\n    }\n\n    _getProfile () {\n      const profile = {\n        traceEvents: []\n      }\n      const allStat = this._stats[INFO]\n      allStat.forEach(stat => {\n        if (stat.payload.profile) {\n          profile.traceEvents.push(stat.payload)\n        }\n      })\n      return profile\n    }\n}\n","import BasePlugin, { Events } from '../../plugin'\n\nexport default class GapJump extends BasePlugin {\n  static get pluginName () {\n    return 'gapJump'\n  }\n\n  static get defaultConfig () {\n    return {\n      useGapJump: false,\n      smallGapLimit: 0.5,\n      gapDetectionThreshold: 0.3\n    }\n  }\n\n  afterCreate () {\n    const { useGapJump } = this.config\n    if (useGapJump === false) {\n      return\n    }\n    this.hasPlayed = false\n    this.seekingEventReceived = false\n    this.isSafari = /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/BlackBerry/.test(navigator.platform)\n    this.on(Events.WAITING, this.onGapJump)\n\n    this.on(Events.PLAY, () => {\n      this.hasPlayed = true\n    })\n\n    this.on(Events.SEEKING, () => {\n      this.seekingEventReceived = true\n    })\n  }\n\n  onGapJump = () => {\n    const { player, config } = this\n    if (player.media.readyState === HTMLMediaElement.HAVE_NOTHING) {\n      return\n    }\n    if (player.media.seeking) {\n      if (!this.seekingEventReceived) { return }\n    } else {\n      this.seekingEventReceived = false\n    }\n\n    if (player.media.paused && player.media.currentTime !== 0 && this.hasPlayed) {\n      return\n    }\n\n    const buffered = player.media.buffered\n    const smallGapLimit = config.smallGapLimit || 0.5\n    const gapDetectionThreshold = config.gapDetectionThreshold || 0.3\n    const currentTime = player.media.currentTime\n    const idx = this._getIndex(buffered, currentTime, gapDetectionThreshold)\n    if (idx === null || idx === 0) {\n      return\n    }\n    console.log('GapJump  bufferRange ', buffered.start(idx), buffered.end(idx))\n    const jumpTo = buffered.start(idx) + 0.1\n    const seekEnd = player.media.duration\n\n    if (jumpTo > seekEnd) {\n      return\n    }\n    const jumpSize = jumpTo - currentTime\n    const isGapSmall = jumpSize <= smallGapLimit\n    if (jumpSize < GapJump.BROWSER_GAP_TOLERANCE) {\n      return\n    }\n\n    if (isGapSmall) {\n      if (config.useGapJump !== false) {\n        player.media.currentTime = this.isSafari ? jumpTo + 0.1 : jumpTo\n      }\n      this.player && this.player.emit('detectGap')\n      console.log('gapJump gapIndex', idx, ' isGapSamll:', isGapSmall, ' currentTime:', player.media.currentTime, ' jumpSize:', (currentTime - player.media.currentTime))\n      // 目前转码视频首个分片cts存在，在Safari下为0.08，先忽略\n      if (jumpTo !== 0.08) {\n        player && player.emit('log', {\n          type: 'oneevent', // 事件类型\n          end_type: 'gap',\n          vid: player.config.vid,\n          ext: {\n            video_postion: Math.floor(jumpTo * 1000) // ms\n          }\n        })\n      }\n    }\n  }\n\n  _getIndex (buffered, time, threshold) {\n    if (!buffered || !buffered.length) {\n      return null\n    }\n    if (buffered.length === 1 && buffered.end(0) - buffered.start(0) < 1e-6) {\n      return null\n    }\n    const bufferedInfo = this._getBuffered(buffered)\n    let idx = null\n    for (let i = 0; i < bufferedInfo.length; i++) {\n      const item = bufferedInfo[i]\n      if (item.start > time && (i === 0 || bufferedInfo[i - 1].end - time <= threshold)) {\n        idx = i\n        break\n      }\n    }\n    return idx\n  }\n\n  _getBuffered (b) {\n    if (!b) {\n      return []\n    }\n    const ret = []\n    for (let i = 0; i < b.length; i++) {\n      ret.push({\n        start: b.start(i),\n        end: b.end(i)\n      })\n    }\n    return ret\n  }\n}\nGapJump.BROWSER_GAP_TOLERANCE = 0.001\n","import BasePlugin, { Events } from '../../plugin'\n\nexport default class WaitingTimeoutJump extends BasePlugin {\n  static get pluginName () {\n    return 'waitingTimeoutJump'\n  }\n\n  static get defaultConfig () {\n    return {\n      useWaitingTimeoutJump: false,\n      waitingTime: 15, // wait超过此时间没恢复，则向前跳jumpSize,单位s\n      jumpSize: 2, // 单位s，\n      jumpCntMax: 4 // 一次播放最大向前跳几次\n    }\n  }\n\n  afterCreate () {\n    const { useWaitingTimeoutJump, jumpSize } = this.config\n    if (useWaitingTimeoutJump === false) {\n      return\n    }\n    this.hasPlayed = false\n    this.jumpCnt = 0\n    /**\n     * @type {null | number}\n     */\n    this.timer = null\n    this.jumpSize = jumpSize\n    this.on(Events.WAITING, this.onWaiting)\n    this.on([Events.PLAYING, Events.CANPLAY], () => {\n      clearTimeout(this.timer)\n      this.timer = null\n      this.jumpSize = this.config.jumpSize\n    })\n    this.on(Events.PLAY, () => {\n      this.hasPlayed = true\n    })\n  }\n\n  onWaiting = () => {\n    const { config } = this\n    if (this.jumpCnt > config.jumpCntMax || this.timer || config.useWaitingTimeoutJump === false) {\n      return\n    }\n    this.timer = setTimeout(this.onJump, config.waitingTime * 1000)\n  }\n\n  onJump = () => {\n    const { player, config } = this\n    clearTimeout(this.timer)\n    this.timer = null\n    if (this.jumpCnt > config.jumpCntMax || config.useWaitingTimeoutJump === false) {\n      return\n    }\n\n    if (player.media.paused && player.media.currentTime !== 0 && this.hasPlayed) {\n      return\n    }\n    this.jumpSize = config.jumpSize * (this.jumpCnt + 1)\n    if (this.jumpCnt === config.jumpSize && this.jumpSize < 6) {\n      this.jumpSize = 6\n    }\n    const jumpTo = player.currentTime + this.jumpSize\n    const seekEnd = player.media.duration\n\n    if (jumpTo > seekEnd) {\n      return\n    }\n    this.jumpCnt++\n    player.currentTime = jumpTo\n  }\n}\n","import BasePlugin, { Events, Util } from '../../plugin'\nconst DEFAULT_SPEED_TYPE = 'cdn'\nconst SPEED_TYPE = ['cdn'] // 默认的速度的种类，可以通过addSpeedTypeList再继续增加\nexport default class TestSpeed extends BasePlugin {\n  static get pluginName () {\n    return 'testspeed'\n  }\n\n  static get defaultConfig () {\n    return {\n      openSpeed: false, // 测速开关，默认关\n      testCnt: 3, // 一次播放的测速次数，默认1次\n      loadSize: 200 * 1024, // 一次播放的测速请求的数据量大小，单位字节，默认200k\n      testTimeStep: 3000, // 每次测速的时间间隔，第一次在开播后的testTimeStep 秒，默认是3s\n      url: '', // 每次测速的url，一般传播放的备用地址测速\n      saveSpeedMax: 5, // 保留最近多少次测速记录，最后的速度求这个记录列表平均值,默认5条\n      addSpeedTypeList:[] // 需要增加的speed的类型\n    }\n  }\n\n  getSpeed = (type = DEFAULT_SPEED_TYPE) => {\n    if (!this.speedListCache || !this.speedListCache[type]) return 0\n    if (this.speedListCache[type].length <= 0) return 0\n    let total = 0\n    this.speedListCache[type].map(item => {\n      total += item\n    })\n    return Math.floor(total / this.speedListCache[type].length)\n  }\n\n  afterCreate () {\n    const { openSpeed, addSpeedTypeList } = this.config\n    if (addSpeedTypeList?.length > 0) {\n      SPEED_TYPE.push(...addSpeedTypeList)\n    }\n    this.initSpeedList()\n    this.on('real_time_speed', this._onRealSpeedChange)\n    /**\n     * @type {null || number }\n     */\n    this.timer = null\n    this.cnt = 0\n    this.xhr = null\n    if (!openSpeed) {\n      return\n    }\n    this.on([Events.LOADED_DATA, Events.REPLAY], this.startTimer)\n  }\n  startTimer = () => {\n    if (Util.isMSE(this.player.video)) {\n      return\n    }\n    this.initSpeedList()\n    this.cnt = 0\n    this.timer = setTimeout(this.testSpeed, this.config.testTimeStep)\n  }\n\n  initSpeedList = () => {\n    this.speedListCache = {}\n    SPEED_TYPE.forEach((type)=> {\n      this.speedListCache[type] = []\n    })\n  }\n\n  _onRealSpeedChange = (data) => {\n    data.speed && this.appendList(data.speed, data.type || DEFAULT_SPEED_TYPE)\n  }\n\n  testSpeed = () => {\n    clearTimeout(this.timer)\n    this.timer = null\n    if (!this.player || !this.config.openSpeed) return\n    const { url, loadSize, testCnt, testTimeStep } = this.config\n    const testSpeedUrl = url + (url.indexOf('?') < 0 ? '?testst=' : '&testst=') + Date.now()\n    if (this.cnt >= testCnt) {\n      return\n    }\n    this.cnt++\n    try {\n      const start = new Date().getTime()\n      let end = null\n      const xhr = new XMLHttpRequest()\n      this.xhr = xhr\n      xhr.open('GET', testSpeedUrl)\n      const headers = {}\n      const random = Math.floor(Math.random() * 10)\n      headers.Range = 'bytes=' + random + '-' + (loadSize + random)\n      if (headers) {\n        Object.keys(headers).forEach(k => {\n          xhr.setRequestHeader(k, headers[k])\n        })\n      }\n      xhr.onreadystatechange = () => {\n        if (xhr.readyState === 4) {\n          this.xhr = null\n          end = new Date().getTime()\n          const size = xhr.getResponseHeader('Content-Length') / 1024 * 8\n          const speed = Math.round(size * 1000 / (end - start))\n          this.appendList(speed)\n          this.timer = setTimeout(this.testSpeed, testTimeStep)\n        }\n      }\n      xhr.send()\n    } catch (e) {\n      console.error(e)\n    }\n  }\n\n  appendList = (speed, type = DEFAULT_SPEED_TYPE) => {\n    if (!this.speedListCache || !this.speedListCache[type]) return\n    const { saveSpeedMax } = this.config\n    if (this.speedListCache[type].length >= saveSpeedMax) {\n      this.speedListCache[type].shift()\n    }\n    this.speedListCache[type].push(speed)\n    const { player } = this\n    if (player) {\n      type === DEFAULT_SPEED_TYPE ? (player.realTimeSpeed = speed) : (player[this.getSpeedName('realTime', type)] = speed)\n    }\n    this.updateSpeed(type)\n  }\n\n  getSpeedName (namePrefix, type){\n    return namePrefix + 'Speed' + type.toUpperCase()\n  }\n\n  updateSpeed = (type = DEFAULT_SPEED_TYPE) => {\n    const speed = this.getSpeed(type)\n    const { player } = this\n    if (player) {\n      if (type === DEFAULT_SPEED_TYPE) {\n        if ((!player.avgSpeed || speed !== player.avgSpeed)) {\n          player.avgSpeed = speed\n          player.emit(Events.DOWNLOAD_SPEED_CHANGE, {speed: speed, realTimeSpeed: player.realTimeSpeed})\n        }\n      } else {\n        const speedName = this.getSpeedName('avg', type)\n        if (!player[speedName] || speed !== player[speedName]) {\n          player[speedName] = speed\n          player.emit(Events.DOWNLOAD_SPEED_CHANGE, {speed: speed, realTimeSpeed: player.realTimeSpeed})\n        }\n      }\n    }\n  }\n\n  set openSpeed (value) {\n    this.config.openSpeed = value\n    if (!value && this.timer) {\n      clearTimeout(this.timer)\n      this.timer = null\n      return\n    }\n    if (this.config.openSpeed) {\n      if (this.timer) return\n      this.timer = setTimeout(this.testSpeed, this.config.testTimeStep)\n    }\n  }\n\n  get openSpeed () {\n    return this.config.openSpeed\n  }\n\n  destroy () {\n    this.off('real_time_speed', this._onRealSpeedChange)\n    this.off([Events.LOADED_DATA, Events.REPLAY], this.startTimer)\n    SPEED_TYPE.forEach((type)=> {\n      this.speedListCache && this.speedListCache[type] && (this.speedListCache[type] = [])\n    })\n    this.speedListCache && (this.speedListCache = {})\n    clearTimeout(this.timer)\n    this.timer = null\n    if (this.xhr && this.xhr.readyState !== 4) {\n      this.xhr.cancel && this.xhr.cancel()\n      this.xhr = null\n    }\n  }\n}\n","import BasePlugin, { Events } from '../../plugin'\n\n/**\n * @typedef { {\n *   tick?: number,\n *   stuckCount?: number,\n *   disable?: boolean,\n *   reportFrame?: number\n * } } IFullscreenConfig\n */\nexport default class FpsDetect extends BasePlugin {\n  static get pluginName () {\n    return 'FpsDetect'\n  }\n\n  static get defaultConfig () {\n    return {\n      disabled: false,\n      tick: 1000, // tick时间，默认1000 ms\n      stuckCount: 3, // 卡住次数\n      reportFrame: 0 // 每次解码帧率小于多少时统计\n    }\n  }\n\n  afterCreate () {\n    const { player, config } = this\n    const media = player.media || player.video\n    this.timer = null\n    this._lastDecodedFrames = 0\n    this._currentStuckCount = 0\n    this._lastCheckPoint = null\n    this._payload = []\n    if (config.disabled) return\n    const getVideoPlaybackQuality = media.getVideoPlaybackQuality\n    if (!getVideoPlaybackQuality) return\n    this.on(Events.PLAY, () => {\n      this._startTick()\n    })\n\n    this.on(Events.PAUSE, () => {\n      this._stopTick()\n    })\n\n    this.on(Events.ENDED, () => {\n      this._stopTick()\n    })\n\n    this.on(Events.EMPTIED, () => {\n      this._stopTick()\n    })\n  }\n\n  _startTick () {\n    this._stopTick()\n    this._timer = setTimeout(() => {\n      this._checkDecodeFPS()\n      this._startTick()\n    }, this.config.tick)\n  }\n\n  _stopTick () {\n    clearTimeout(this._timer)\n    this._timer = null\n  }\n\n  _checkBuffer (curTime, buffered) {\n    let enoughBuffer = false\n    const buffers = []\n    for (let i = 0; i < buffered.length; i++) {\n      const start = buffered.start(i)\n      const end = buffered.end(i)\n      buffers.push({ start, end })\n      if (start <= curTime && curTime <= end - 1) {\n        enoughBuffer = true\n        break\n      }\n    }\n    return {\n      enoughBuffer,\n      buffers\n    }\n  }\n\n  _checkStuck (curDecodedFrames, totalVideoFrames, droppedVideoFrames, checkInterval) {\n    const media = this.player.media || this.player.video\n    const hidden = document.hidden\n    const { paused, readyState, currentTime, buffered } = media\n\n    if (hidden || paused || readyState < 4) {\n      return\n    }\n    const { enoughBuffer, buffers } = this._checkBuffer(currentTime, buffered)\n    if (!enoughBuffer) {\n      return\n    }\n\n    if (curDecodedFrames <= this.config.reportFrame) {\n      this._currentStuckCount++\n      this._payload.push({ currentTime, buffers, curDecodedFrames, totalVideoFrames, droppedVideoFrames, checkInterval })\n\n      if (this._currentStuckCount >= this.config.stuckCount) {\n        this.emit(Events.FPS_STUCK, this._payload)\n        this._reset()\n      }\n    } else {\n      this._reset()\n    }\n  }\n\n  _reset () {\n    this._payload = []\n    this._currentStuckCount = 0\n  }\n\n  _checkDecodeFPS () {\n    const media = this.player.media || this.player.video\n    if (!media) {\n      return\n    }\n    const { totalVideoFrames, droppedVideoFrames } = media.getVideoPlaybackQuality()\n\n    const currTime = performance.now()\n    if (totalVideoFrames) {\n      if (this._lastCheckPoint) {\n        const curDecoded = totalVideoFrames - this._lastDecodedFrames\n        const checkInterval = currTime - this._lastCheckPoint\n        this._checkStuck(curDecoded, totalVideoFrames, droppedVideoFrames, checkInterval)\n      }\n    }\n    this._lastDecodedFrames = totalVideoFrames\n    this._lastCheckPoint = currTime\n  }\n\n  destroy () {\n    this._stopTick()\n  }\n}\n","import sniffer from '../utils/sniffer'\n// import Danmu from '../plugins/danmu'\nimport Xglogger from '../plugins/logger'\nimport Replay from '../plugins/replay'\nimport Poster from '../plugins/poster'\nimport Start from '../plugins/start'\nimport Enter from '../plugins/enter'\nimport Miniscreen from '../plugins/miniScreen'\nimport PC from '../plugins/pc'\nimport Mobile from '../plugins/mobile'\nimport Keyboard from '../plugins/keyboard'\nimport Loading from '../plugins/loading'\nimport Progress from '../plugins/progress'\nimport PlayIcon from '../plugins/play'\nimport FullScreen from '../plugins/fullscreen'\nimport TimeIcon from '../plugins/time'\nimport TimeSegments from '../plugins/time/timesegments'\nimport Volume from '../plugins/volume'\nimport RotateIcon from '../plugins/rotate'\nimport PIPIcon from '../plugins/pip'\nimport PlayNextIcon from '../plugins/playNext'\nimport DownLoadIcon from '../plugins/download'\nimport ScreenShotIcon from '../plugins/screenShot'\nimport DefinitionIcon from '../plugins/definition'\nimport PlaybackRateIcon from '../plugins/playbackRate'\nimport CssFullScreen from '../plugins/cssFullScreen'\nimport Error from '../plugins/error'\nimport Prompt from '../plugins/prompt'\nimport ProgressPreview from '../plugins/progressPreview'\nimport Thumbnail from '../plugins/common/thumbnail'\nimport MiniProgress from '../plugins/progress/miniProgress'\nimport DynamicBg from '../plugins/dynamicBg'\nimport ZH from '../lang/zh-cn'\nimport Stats from '../plugins/stats'\nimport GapJump from '../plugins/gapJump'\nimport WaitingTimeoutJump from '../plugins/waitingTimeoutJump'\nimport TestSpeed from '../plugins/testspeed'\nimport I18N from '../lang/i18n'\nimport FpsDetect from '../plugins/fpsDetect'\n// import Heatmap from '../plugins/heatmap'\n\nI18N.use(ZH)\n\nexport default class DefaultPreset {\n  constructor (options, playerConfig) {\n    const simulateMode = playerConfig && playerConfig.isMobileSimulateMode === 'mobile'\n    const { isLive } = playerConfig\n    const vodPlugins = isLive ? [] : [TimeSegments, Progress, MiniProgress, ProgressPreview, TimeIcon]\n\n    const contolsIcons = [...vodPlugins, PlayIcon, FullScreen,\n      RotateIcon, PlayNextIcon, DefinitionIcon, PlaybackRateIcon, DownLoadIcon, ScreenShotIcon, Volume, PIPIcon]\n\n    const layers = [Replay, Poster, Start, Loading, Enter, Error, Prompt, Thumbnail, Miniscreen]\n\n    this.plugins = [Stats, Xglogger, ...contolsIcons, ...layers, GapJump, WaitingTimeoutJump]\n    const mode = simulateMode ? 'mobile' : sniffer.device\n    switch (mode) {\n      case 'pc':\n        this.plugins.push(...[Keyboard, PC, CssFullScreen, TestSpeed, FpsDetect])\n        break\n      case 'mobile':\n        this.plugins.push(...[Mobile])\n        break\n      default:\n        this.plugins.push(...[Keyboard, PC, CssFullScreen])\n    }\n    if (sniffer.os.isIpad || mode === 'pc') {\n      this.plugins.push(DynamicBg)\n    }\n    if (sniffer.os.isIpad) {\n      this.plugins.push(PC)\n    }\n    this.ignores = []\n    this.i18n = []\n  }\n}\n","export default {\n  LANG: 'zh-cn',\n  TEXT: {\n    ERROR_TYPES: {\n      network: {\n        code: 1,\n        msg: '视频下载错误'\n      },\n      mse: {\n        code: 2,\n        msg: '流追加错误'\n      },\n      parse: {\n        code: 3,\n        msg: '解析错误'\n      },\n      format: {\n        code: 4,\n        msg: '格式错误'\n      },\n      decoder: {\n        code: 5,\n        msg: '解码错误'\n      },\n      runtime: {\n        code: 6,\n        msg: '语法错误'\n      },\n      timeout: {\n        code: 7,\n        msg: '播放超时'\n      },\n      other: {\n        code: 8,\n        msg: '其他错误'\n      }\n    },\n    HAVE_NOTHING: '没有关于音频/视频是否就绪的信息',\n    HAVE_METADATA: '音频/视频的元数据已就绪',\n    HAVE_CURRENT_DATA: '关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒',\n    HAVE_FUTURE_DATA: '当前及至少下一帧的数据是可用的',\n    HAVE_ENOUGH_DATA: '可用数据足以开始播放',\n    NETWORK_EMPTY: '音频/视频尚未初始化',\n    NETWORK_IDLE: '音频/视频是活动的且已选取资源，但并未使用网络',\n    NETWORK_LOADING: '浏览器正在下载数据',\n    NETWORK_NO_SOURCE: '未找到音频/视频来源',\n    MEDIA_ERR_ABORTED: '取回过程被用户中止',\n    MEDIA_ERR_NETWORK: '网络错误',\n    MEDIA_ERR_DECODE: '解码错误',\n    MEDIA_ERR_SRC_NOT_SUPPORTED: '不支持的音频/视频格式',\n    REPLAY: '重播',\n    ERROR: '网络连接似乎出现了问题',\n    PLAY_TIPS: '播放',\n    PAUSE_TIPS: '暂停',\n    PLAYNEXT_TIPS: '下一集',\n    DOWNLOAD_TIPS: '下载',\n    ROTATE_TIPS: '旋转',\n    RELOAD_TIPS: '重新载入',\n    FULLSCREEN_TIPS: '进入全屏',\n    EXITFULLSCREEN_TIPS: '退出全屏',\n    CSSFULLSCREEN_TIPS: '进入样式全屏',\n    EXITCSSFULLSCREEN_TIPS: '退出样式全屏',\n    TEXTTRACK: '字幕',\n    PIP: '画中画',\n    SCREENSHOT: '截图',\n    LIVE: '正在直播',\n    OFF: '关闭',\n    OPEN: '开启',\n    MINI_DRAG: '点击按住可拖动视频',\n    MINISCREEN: '小屏幕',\n    REFRESH_TIPS: '请试试',\n    REFRESH: '刷新',\n    FORWARD: '快进中',\n    LIVE_TIP: '直播'\n  }\n}\n","import Errors from './error'\nimport * as Events from './events'\nimport './index.scss'\nimport { InstManager } from './instManager'\nimport I18N from './lang/i18n'\nimport Player from './player'\nimport BasePlugin from './plugin/basePlugin'\nimport Plugin from './plugin/plugin'\nimport { default as CssFullscreenIcon } from './plugins/cssFullScreen'\nimport { default as FullscreenIcon } from './plugins/fullscreen'\nimport { default as PlayIcon } from './plugins/play'\nimport { default as Progress } from './plugins/progress'\nimport { default as TimeIcon } from './plugins/time'\nimport { default as VolumeIcon } from './plugins/volume'\nimport defaultPreset from './presets/default'\nimport STATE_CLASS from './stateClassMap'\nimport Sniffer from './utils/sniffer'\nimport Util from './utils/util'\n\nclass PresetPlayer extends Player {\n  static defaultPreset = defaultPreset;\n  static Util = Util;\n  static Sniffer = Sniffer\n  static Errors = Errors\n  static Events = Events\n  static Plugin = Plugin\n  static BasePlugin = BasePlugin\n  static I18N = I18N\n  static STATE_CLASS = STATE_CLASS\n  static InstManager = InstManager\n\n  // UI Exports\n  static PlayIcon = PlayIcon // For Ads Plugin\n  static TimeIcon = TimeIcon // For Ads Plugin\n  static Progress = Progress // For Ads Plugin\n  static FullscreenIcon = FullscreenIcon // For Ads Plugin\n  static CssFullscreenIcon = CssFullscreenIcon // For Ads Plugin\n  static VolumeIcon = VolumeIcon // For Ads Plugin\n}\n\nexport default PresetPlayer\n"],"names":["version","XG_DEBUG_OPEN","window","location","href","indexOf","STYLE","info","error","warn","XGTAG","XG_DEBUG","config","debug","logInfo","message","_console","_len","arguments","length","optionalParams","Array","_key","this","console","log","apply","concat","logWarn","_console2","_len2","_key2","logError","_console3","_fun","_len3","_key3","XgplayerTimeRange","bufferedList","_classCallCheck","_createClass","key","value","index","start","end","get","util","checkIsIn","list","i","len","isObject","type","_typeof","debounce","func","wait","options","lastArgs","lastThis","maxWait","result","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","useRAF","requestAnimationFrame","TypeError","invokeFunc","time","args","thisArg","undefined","startTimer","pendingFunc","cancelAnimationFrame","setTimeout","leadingEdge","timerExpired","shouldInvoke","timeSinceLastCall","Date","now","trailingEdge","timeSinceLastInvoke","timeWaiting","Math","min","remainingWait","debounced","isInvoking","max","cancel","id","clearTimeout","cancelTimer","flush","pending","createDom","el","tpl","attrs","cname","dom","document","createElement","className","innerHTML","Object","keys","forEach","item","setAttribute","createDomFromHtml","html","classname","doc","children","addClass","err","hasClass","prototype","some","call","classList","e","orgClassName","getAttribute","match","RegExp","replace","split","add","removeClass","remove","reg","toggleClass","classNames","_arguments","_loop","typeOf","push","map","join","findDom","sel","querySelector","getElementById","slice","getCss","currentStyle","defaultView","getComputedStyle","padStart","str","pad","charstr","String","maxlen","ceil","chars","r","substring","format","isNaN","round","hour","floor","minute","second","event","touches","touch","changedTouches","clientX","clientY","offsetX","pageX","target","offsetLeft","offsetY","pageY","offsetTop","_target","srcElement","obj","toString","deepCopy","dst","src","Node","deepMerge","_dst$key","_toConsumableArray","getBgImage","url","backgroundImage","a","copyDom","nodeType","back","tagName","attributes","node","name","setInterval","context","eventName","intervalFunc","frequency","_interval","bind","clearInterval","fun","_timers","splice","clearAllTimers","_timerIds","createImgBtn","imgUrl","width","height","w","h","unit","btn","style","every","parseFloat","trim","backgroundSize","margin","Hex2RGBA","hex","alpha","rgb","test","sixHex","kw","parseInt","getFullScreenEl","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","checkIsFunction","checkIsObject","hide","display","show","isUndefined","val","isNotNull","setStyleFromCsstext","text","arr","filterStyleFromText","_cssText","cssText","styleArr","ret","remain","getStyleFromCsstext","preloadImg","onload","onerror","img","Image","stopPropagation","scrollTop","pageYOffset","documentElement","body","scrollLeft","pageXOffset","checkTouchSupport","getBuffered2","vbuffered","maxHoleDuration","buffered","sort","b","diff","buffered2","buf2len","buf2end","getEventPos","zoom","x","y","callback","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","getHostFromUrl","results","domain","frameId","mozCancelAnimationFrame","cancelRequestAnimationFrame","isMSE","video","media","HTMLMediaElement","currentSrc","isBlob","generateSessionId","did","d","getTime","performance","uuid","c","random","createEvent","Event","initEvent","adjustTimeByDuration","duration","isEnded","createPositionBar","root","appendChild","getTransformStyle","pos","scale","rotate","transformValue","styles","translate","stylesKeys","fn","lastIndex","convertDeg","abs","getIndexByTime","segments","_index","getOffsetCurrentTime","currentTime","_segments$_index","cTime","offset","getCurrentTimeByOffset","offsetTime","ERROR_TYPE_MAP","ERROR_MAP","Errors","player","errorInfo","errorType","errorCode","errorMessage","originError","ext","mediaError","ERROR_TYPES","i18n","ended","_player$media","readyState","networkState","_errc","code","playerVersion","stack","host","Util","ex","msg","PLAY","PLAYING","ENDED","PAUSE","ERROR","SEEKING","SEEKED","TIME_UPDATE","WAITING","CANPLAY","DURATION_CHANGE","VOLUME_CHANGE","LOADED_DATA","RATE_CHANGE","PROGRESS","LOAD_START","EMPTIED","PLAYER_FOCUS","PLAYER_BLUR","READY","URL_NULL","AUTOPLAY_STARTED","AUTOPLAY_PREVENTED","COMPLETE","REPLAY","DESTROY","URL_CHANGE","DOWNLOAD_SPEED_CHANGE","LEAVE_PLAYER","ENTER_PLAYER","LOADING","FULLSCREEN_CHANGE","CSS_FULLSCREEN_CHANGE","MINI_STATE_CHANGE","DEFINITION_CHANGE","AFTER_DEFINITION_CHANGE","VIDEO_RESIZE","PIP_CHANGE","ROTATE","SCREEN_SHOT","PLAYNEXT","SHORTCUT","XGLOG","USER_ACTION","RESET","SOURCE_ERROR","SOURCE_SUCCESS","VIDEO_EVENTS","STATS_EVENTS","STATS_INFO","STATS_DOWNLOAD","STATS_RESET","FPS_STUCK","has","hasOwnProperty","prefix","Events","EE","once","addListener","emitter","listener","evt","_events","_eventsCount","clearEvent","EventEmitter","create","__proto__","eventNames","names","events","getOwnPropertySymbols","listeners","handlers","l","ee","listenerCount","emit","a1","a2","a3","a4","a5","removeListener","j","on","removeAllListeners","off","prefixed","module","exports","store","instance","InstManager","_EventEmitter","_inherits","_super","_createSuper","playerId","setActive","isUserActive","endEarly","_iterate","flag","isActive","inst","isInstNext","isNext","XGI18nLang","lang","langKeys","textKeys","_s","_t","updateKeys","en","use","langData","i18nLangs","_clang","LANG","texts","TEXT","network","mse","parse","decoder","runtime","timeout","other","HAVE_NOTHING","HAVE_METADATA","HAVE_CURRENT_DATA","HAVE_FUTURE_DATA","HAVE_ENOUGH_DATA","NETWORK_EMPTY","NETWORK_IDLE","NETWORK_LOADING","NETWORK_NO_SOURCE","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","PLAY_TIPS","PAUSE_TIPS","PLAYNEXT_TIPS","DOWNLOAD_TIPS","ROTATE_TIPS","RELOAD_TIPS","FULLSCREEN_TIPS","EXITFULLSCREEN_TIPS","CSSFULLSCREEN_TIPS","EXITCSSFULLSCREEN_TIPS","TEXTTRACK","PIP","SCREENSHOT","LIVE","OFF","OPEN","MINI_DRAG","MINISCREEN","REFRESH_TIPS","REFRESH","FORWARD","LIVE_TIP","I18N","zh","extend","i18nTextList","_i18nLangs","init","_ret$langKeys","pId","VERSION_REG","H264_MIMETYPES","sniffer","device","os","isPc","browser","navigator","ua","userAgent","toLowerCase","ie","firefox","chrome","opera","safari","filter","isWindowsPhone","isSymbian","isTizen","isWebOS","isAndroid","isFireFox","isIpad","platform","maxTouchPoints","isTablet","isPhone","isIos","osVersion","_match","exec","isWeixin","toLocaleLowerCase","isSupportMP4","isSupport","mime","supportResult","canPlayType","isMSESupport","MediaSource","isTypeSupported","_logger","isHevcSupported","probeConfigSupported","defaults","supported","smooth","powerEfficient","Promise","resolve","mediaCapabilities","decodingInfo","videoConfig","audioConfig","audio","videoSupported","contentType","audioSupported","emitVideoEvent","eventKey","errorHandler","getVideoEventHandler","_err","eData","originalEvent","detail","timeStamp","paused","isInternalOp","_internalOp","muted","volume","vtype","removeInnerOP","_currentTime","_rate","playbackRate","_duration","isMutedChange","_lastMuted","mediaEventMiddleware","MediaProxy","_this","_hasStart","mediaConfig","assign","controls","autoplay","playsinline","x5VideoPlayerFullscreen","x5VideoOrientation","airplay","tabindex","mediaType","videoAttributes","playerType","x5VideoPlayerType","Sniffer","loop","autoplayMuted","mediaEl","defaultPlaybackRate","attachVideoEvents","middlewares","_this2","_this3","_this4","_evHandlers","funName","charAt","toUpperCase","_defineProperty","addEventListener","_this5","removeEventListener","urls","_this6","removeAttribute","load","_c","_videoSourceCount","_videoSourceIndex","_vLoadeddata","_eHandler","_sourceError","_dIndex","removeChild","_e","srcObject","k","pause","detachVideoEvents","set","play","range","isTrue","_buffered","crossOrigin","defaultMuted","rate","Infinity","played","preload","seekable","seeking","onWaiting","_detachSourceEvents","_attachSourceEvents","vol","videoWidth","videoHeight","data","_get2","_get","_getPrototypeOf","_get3","_get4","_get5","_len4","_key4","INDEXDB","mydb","db","ojstore","keypath","indexedDB","webkitindexedDB","IDBKeyRange","webkitIDBKeyRange","myDB","self","request","open","onsuccess","onupgradeneeded","transaction","objectStoreNames","contains","createObjectStore","keyPath","deleteDatabase","close","storename","objectStore","put","delete","clear","FULLSCREEN_EVENTS","GET_FULLSCREEN_API","EXIT_FULLSCREEN_API","PLATER_ID","callHandler","handler","next","then","hook","hookName","preset","pre","__hooks","_preset$pre","pluginName","preRet","runHooks","isContinue","catch","findHookIndex","isArray","hookHandlers","useHooks","removeHooks","hooks","usePluginHooks","plugins","plugin","removePluginHooks","hooksDescriptor","presetHooks","defineProperty","delHooksDescriptor","_len5","_key5","runHooksRecursive","_len6","_key6","showErrorMsg","BasePlugin","beforeCreate","__args","__events","__onceEvents","playerConfig","__init","constructor","logger","i18nKeys","domEventType","_this$player","res","action","params","nParams","_objectSpread","emitUserAction","registerPlugin","getPlugin","offAll","destroy","unRegisterPlugin","Obj","configurable","Element","matches","proto","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","closest","element","selector","parentNode","_delegate","useCapture","listenerFn","delegateTarget","delegate_1","elements","querySelectorAll","ROOT_TYPES","CONTROLS","ROOT","POSITIONS","ROOT_LEFT","ROOT_RIGHT","ROOT_TOP","CONTROLS_LEFT","CONTROLS_RIGTH","CONTROLS_RIGHT","CONTROLS_CENTER","PLUGIN_STATE_CLASS","isUrl","createIcon","icon","attr","newIcon","tag","registerIconsObj","iconsConfig","_icons","icons","orgIcon","class","mergeIconClass","mergeIconAttr","Plugin","_BasePlugin","__delegates","_parent","_el","parent","extraEls","registerIcons","langText","textConfig","defaultTexConfig","registerLanguageTexts","renderStr","render","Error","insert","setAttr","setStyle","__registerChildren","_children","_plugin","checkChildren","langKey","langTextShow","disable","find","qs","eventType","bindEL","delegate","unbindEL","htmlStr","eventHandle","isBubble","getPropertyValue","pdom","child","_this7","insertIdx","Number","isDomElement","coordinate","mode","curIdx","insertBefore","insertAdjacentHTML","capture","dels","ResizeObserver","entries","t","__runHandler","__handlers","observer","throttle","__trigger","observe","_pid","_this$observer","unobserve","_this$observer2","disconnect","resizeObserver","pluginsManager","pluginGroup","cgid","_pluginInfoId","closeResizeObserver","resize","addObserver","_originalOptions","_plugins","formatPluginInfo","PLUFGIN","checkPluginIfExits","getRootByConfig","_pConfig","position","lazyRegister","lazyPlugin","race","loader","__esModule","default","register","reject","originalOptions","isSupported","codecType","defaultConfig","unRegister","_instance","afterCreate","__destroy","deletePlugin","getPlugins","findPlugin","cName","beforeInit","retPromise","prevTask","_loadingPlugins","all","pluginsRet","pName","beforePlayerInit","afterInit","afterPlayerInit","setLang","updateLang","reRender","_pList","onPluginsReady","unObserver","_resizeObserver","_i","_Object$keys","STATE_CLASS","DEFAULT","DEFAULT_SKIN","ENTER","PAUSED","NO_START","ACTIVE","INACTIVE","FULLSCREEN","CSS_FULLSCREEN","ROTATE_FULLSCREEN","PARENT_ROTATE_FULLSCREEN","PARENT_FULLSCREEN","INNER_FULLSCREEN","NO_CONTROLS","FLEX_CONTROLS","CONTROLS_FOLLOW","CONTROLS_AUTOHIDE","TOP_BAR_AUTOHIDE","NOT_ALLOW_AUTOPLAY","PC","MOBILE","MINI","getDefaultConfig","nullUrlStart","fluid","fitVideoSize","videoFillMode","isLive","videoInit","poster","isMobileSimulateMode","execBeforePluginsCall","allowSeekAfterEnded","enableContextmenu","closeVideoClick","closeVideoDblclick","closePlayerBlur","closeDelayBlur","leavePlayerTime","closePlayVideoFocus","closePauseVideoFocus","closeFocusVideoFocus","closeControlsBlur","topBarAutoHide","startTime","seekedStatus","miniprogress","disableSwipeHandler","enableSwipeHandler","preProcessUrl","ignores","whitelist","inactive","language","marginControls","fullscreenTarget","screenShot","pip","download","mini","cssFullscreen","keyShortcut","presets","definition","customDuration","timeOffset","thumbnail","isHideTips","minWaitDelay","commonStyle","progressColor","playedColor","cachedColor","sliderBtnStyle","volumeColor","STATES","STATE_ARRAY","Controls","_Plugin","_assertThisInitialized","_assertThisInitialize","focus","autoHide","_this$config","left","center","right","innerRoot","isMini","onMouseEnter","onMouseLeave","blur","ignorePaused","unbind","_this$config2","initShow","PlAYER_HOOKS","REAL_TIME_SPEED","AVG_SPEED","instManager","Player","_MediaProxy","__startTime","_seekToStartTime","_useAutoplay","mediaPlay","canPlayFunc","isFullScreen","delayResize","fullEl","_fullActionFrom","props","prop","from","to","isVideo","checkIsCurrentVideo","pid","_fullscreenEl","fullscreen","changeFullStyle","_fullScreenOffset","cssfullscreen","exitCssFullscreen","needFullscreenScroll","scrollTo","top","recoverFullStyle","onFullscreenChange","defaultPreset","defaultIdx","userTimer","waitTimer","handleSource","_state","isAd","isError","isSeeking","isCanplay","rotateDeg","isRotateFullscreen","timeSegments","_cssfullscreenEl","curDefinition","_orgCss","_videoHeight","_videoWidth","videoPos","pi","vy","vx","sizeInfo","_accPlayed","acc","loopAcc","_offsetInfo","innerContainer","topBar","__i18n","database","Database","_onceSeekCanplay","_isPauseBeforeSeek","innerStates","isActiveLocked","_initDOM","_possibleConstructorReturn","_this$config2$definit","defaultDefinitionObj","defaultDefinition","_bindEvents","_registerPresets","_registerPlugins","getInitDefinition","setState","onReady","hasStart","state","_instManager","vid","line","handle","p","checkPlayerRoot","_initBaseDoms","_root","_this$config3","_width","_height","_this$root$getBoundin","getBoundingClientRect","leftBar","rightBar","_onWebkitbeginfullscreen","_onWebkitendfullscreen","playFunc","mousemoveFunc","playSessionId","_playSessionId","firstChild","isInit","ignoresStr","cuPlugins","lazy","loadingPlugin","forceBeforeInit","Preset","_player$config$plugin","_player$config$ignore","_presetInst","_presetInst$plugins","_presetInst$ignores","_presetInst$icons","_presetInst$i18n","_ci18n","usePreset","_retPlugin","_this$controls","_getRootByPosition","removedFromConfig","deregister","removePluginFromConfig","_this8","_furl","_startInit","fileName","lineNumber","_this9","_src","curTime","isPaused","_error","_canplay","_this10","playPromise","onError","_errorTimer","_this11","_this12","status","_this13","_this$config4","isSeekedPlay","_status","_this14","_this$config5","_this15","bitrate","switchURL","seamless","reloadFunc","_this16","clsList","mediaPause","cls","_this17","unregisterPlugins","isResetConfig","resetState","pn","de","_instManager2","_this18","updateAcc","_unbindEvents","exitFullscreen","remainMediaAfterDestroy","cList","_this19","onPlay","_this20","cur","_srcRet","rootClass","pClassName","_orgPCss","webkitRequestFullscreen","ALLOW_KEYBOARD_INPUT","fullscreenEnabled","webkitSupportsFullscreen","webkitEnterFullscreen","exitRotateFullscreen","webkitExitFullScreen","_class","_this$config$fullscre","useCssFullscreen","_this$config$fullscre2","setRotateDeg","_rootStyle","isRotate90","orientation","screen","angle","innerWidth","innerHeight","deg","delay","onFocus","_clearUserTimer","onBlur","_this21","isLock","_ref","_ref$ignorePaused","_this22","_this23","_this24","endType","_at","startDiff","endDiff","_ref2","_ref2$startDiff","_ref2$endDiff","_this25","_this$videoPos","_pi","_pos","offsetWidth","offsetHeight","rHeight","rWidth","maxWidth","maxHeight","formStyle","transform","webkitTransform","resizePosition","_this26","setConfig","_this27","_this28","containerSize","_this$media","_this$config6","controlsHeight","videoFit","fit","_style","paddingTop","videoScale","vWidth","vHeight","cWidth","cHeight","updateObjectPosition","objectPosition","newState","_this$config7","preProcessUrlOptions","processUrlOptions","bool","_this29","curDef","targetDef","_this29$curDefinition","changeDefinition","total","dropped","corrupted","droppedRate","droppedDuration","getVideoPlaybackQuality","_quality","droppedVideoFrames","totalVideoFrames","corruptedVideoFrames","cumulateTime","_l","__url","posterUrl","update","_this$_accPlayed","isMuted","_instManager3","addInnerOP","Boolean","_instManager4","getActiveId","_instManager5","descriptor","xgIconTips","textKey","isShow","getInstance","Icon","_onMouseenter","_onMouseLeave","CssFullScreen","_IconPlugin","initIcons","isCssfullScreen","animate","btnClick","handleCssFullscreen","preventDefault","contentIcon","getCssFullscreen","switchTips","tipDom","changeLangTextKey","CssFullSceenSvg","ExitCssFullSceenSvg","IconPlugin","TopBackIcon","onClick","screenBack","BackSVG","Fullscreen","rotateFullscreen","getFullscreen","handleFullscreen","toggleFullScreen","tipsDom","needBackIcon","topBackIcon","_onOrientationChange","FullScreenSvg","ExitFullScreenSvg","getRotateFullscreen","switchCallback","useScreenOrientation","unlockScreen","aspectRatio","lockScreen","lockOrientationType","lock","unlock","Play","replay","listenEvents","PlaySvg","PauseSvg","TPL","styleKey","InnerList","fragments","percent","_callBack","actionCallback","fragConfig","fragFocusClass","fragAutoFocus","fragClass","cachedIndex","playedIndex","focusIndex","newIndex","curIndex","millisecond","progressList","curPFrag","per","newPIndex","findIndex","unHightLight","setHightLight","_data","preIndex","fragment","cached","updateDuration","updateProgress","newCIndex","newOptions","_this$fragConfig","inner","isFocus","FRAGMENT_FOCUS_CLASS","POINT","HIGHLIGHT","Progress","_ePos","moving","miniMoveStep","computeTime","triggerCallbacks","_updateInnerFocus","isLocked","updateWidth","seekTime","_assertThisInitialize3","forward","isDown","isPauseMoving","_assertThisInitialize4","closeMoveSeek","isPlaying","onMoveStart","prePlayTime","isProgressMoving","progressBtn","_mouseDownHandlerHook","onMouseMove","onMouseUp","onMoveOnly","_assertThisInitialize5","onMoveEnd","_mouseUpHandlerHook","isEnter","resetSeekState","_assertThisInitialize6","miniStartStep","_mouseMoveHandlerHook","_assertThisInitialize7","_this$pos","useable","__dragCallBacks","direc","_disableBlur","isDragingSeek","isDraggingSeek","offsetDuration","offsetCurrentTime","innerList","reset","outer","updateFocus","_initInner","isMobile","bindDomEvents","initCustomStyle","onTimeupdate","onCacheUpdate","onReset","onVideoResize","frags","boxShadow","_mouseDownHandler","_mouseUpHandler","_mouseMoveHandler","onMouseDown","onMouseOver","onMouseOut","onBodyClick","pauseAutoHide","recoverAutoHide","isCloseClickSeek","realTime","endedDiff","toFixed","updatePercent","updateTime","seek","rLeft","timeIcon","resetActive","notSeek","_end","bufferedPoint","thumbnailPlugin","controlsMode","Time","isActiving","_this$player2","constrolsMode","createCenterTime","durationDom","timeDom","onTimeUpdate","centerCurDom","centerDurDom","current","minWidthTime","timeStr","updateState","Volume","bar","barRect","barH","updateVolumePos","onBarMouseUp","_d","isStart","isMoving","unFocus","showValueLabel","updateVolumeValue","volumeSmall","volumeSmallSvg","volumeLarge","volumeLargeSvg","volumeMuted","volumeMutedSvg","_timerId","_this$playerConfig","backgroundColor","changeMutedHandler","changeMuted","_onMouseenterHandler","onMouseenter","_onMouseleaveHandler","onMouseleave","onBarMousedown","onBarMouseMove","onVolumeChange","drag","$labelValue","innerText","isForce","miniVolume","isShowVolumeValue","LOG_TYPES","XGLogger","isTimeUpdate","autoplayStart","_sendFF","vt","isFFLoading","isFFSend","isLs","pt","fvt","newPointTime","loadedCostTime","startCostTime","_isSeeking","seekingStart","waitingStart","fixedWaitingStart","_isWaiting","_waitTimer","_waittTimer","_waitType","suspendWaitingStatus","emitLog","suspendSeekingStatus","fixedStart","_startWaitTimeout","_onReset","_initOnceEvents","_onWaitingLoadStart","_this2$_state","_onSeeking","_onSeeked","endState","_onPlaying","_onWaiting","_onError","_onAutoplayStart","_onTimeupdate","s","_this$_state","costTime","waitTimeout","_now","_cost","_fixedCost","fixedCostTime","Replay","ReplaySvg","__handleReplay","path","Poster","isEndedShow","hideCanplay","_bg","fillMode","notHidden","getBgSize","AnimateMap","clearAnimation","Start","autoPlayStart","toggleTo","bindClickEvents","onAutoplayStart","onPlayerReset","clickHandler","switchPausePlay","cancelable","startPlay","startPause","isAnimate","endShow","_animateId","addAnimate","seconds","switchStatus","isShowPause","isShowEnd","endAnimate","disableAnimate","Enter","innerHtml","HTMLElement","barStr","logo","MiniScreenIcon","getMini","exitMini","getStyleSize","num","measurements","measurementsLength","getSize","elem","getStyle","size","outerWidth","outerHeight","getZeroSize","isBorderBox","boxSizing","measurement","paddingWidth","paddingLeft","paddingRight","paddingHeight","paddingBottom","marginWidth","marginLeft","marginRight","marginHeight","marginTop","marginBottom","borderWidth","borderLeftWidth","borderRightWidth","borderHeight","borderTopWidth","borderBottomWidth","isBorderBoxSizeOuter","styleWidth","styleHeight","getTouch","dentifier","identifier","EVENTS","POST_START_EVENTS","mousedown","touchstart","pointerdown","Draggabilly","isEnabled","isDragging","downPoint","dragPoint","startPos","_handlerDom","_bindStartEvent","_startKey","_boundPointerEvents","onUp","positionDrag","webKitTransform","dragStart","dragMove","dragEnd","touchIdentifier","pointerId","dragCancel","pointer","_getPosition","maxY","maxX","setLeftTop","_bindPostStartEvents","_unbindPostStartEvents","presetInfo","moveVector","hasDragStarted","dragRealStart","_this$startPos","_dragPointerMove","dragX","dragY","checkContain","_unbindStartEvent","axis","grid","_getPositionCoord","_addTransformPosition","matrixValues","xIndex","translateX","translateY","styleSide","measure","parentSize","MiniScreen","isClose","scrollY","scrollHeight","lastStyle","isShowIcon","onCancelClick","onCenterClick","disableDrag","_draggabilly","isScrollSwitch","onScroll","PlayIcon","PauseIcon","MOUSE_EVENTS","mouseenter","mouseleave","mousemove","HOOKS","PCPlugin","_assertThisInitialize2","__canvas","closeVideoStopPropagation","_clickCount","clickTimer","switchPlayPause","initEvents","onVideoClick","onVideoDblClick","onContextmenu","returnValue","cancelBubble","TOUCHS","move","MOUSES","Touche","__setPress","onTouchEnd","onTouchCancel","onTouchMove","trigger","__clearPress","press","__setDb","diffx","diffy","miniStep","pressDelay","dbClickDelay","disablePress","disableDbClick","needPreventDefault","pressIntrvalId","dbIntrvalId","_initEvent","onTouchStart","__clearDb","touchend","touchmove","ACTIONS","MobilePlugin","touche","getTouche","disableGesture","timer","rect","_x","_y","scopeL","scopeR","scopeM1","scopeM","scopeM2","hideControlsActive","scope","checkScope","gestureY","gestureX","executeMove","endLastMove","resetPos","changeAction","checkIsRootTarget","light","seekTipIcon","SeekTipIcon","closedbClick","xgMask","registerThumbnail","onRootTouchMove","onRootTouchEnd","moveDuration","_this2$pos","eventsMap","pressend","click","doubleclick","disableActive","progressPlugin","progress","addCallBack","activeSeekNote","usable","createThumbnail","timePreview","timePreviewStyle","curTimeColor","durationColor","previewDom","curColor","durColor","color","disableTimeProgress","startPlugin","recover","mold","updateBrightness","updateVolume","lastScope","hideControlsEnd","sendUseAction","focusVideoClick","dbClickHandler","pressRate","isTouchingSeek","darkness","maxDarkness","isForward","focusHide","updateThumbnails","gradient","disableSeekIcon","miniYPer","isDisableTag","isContentEditable","Keyboard","keyCode","_keyState","disableBodyTrigger","isIgnoreUserActive","checkIsVisible","metaKey","altKey","ctrlKey","isBodyKeyDown","repeat","isKeyDown","isGlobalTrigger","checkCode","onBodyKeyUp","handleKeyDown","handleKeyUp","disableRootTrigger","onKeyup","extendkeyCodeMap","keyCodeMap","key1","seekStep","space","noBodyTarget","up","down","pressAction","esc","mergekeyCodeMap","isPress","tt","onKeydown","onBodyKeyDown","newConfig","checkVisible","rec","bottom","isBodyTarget","_time","_step","_seekTime","handleKeyCode","curKeyCode","_this$keyCodeMap$arr$","_action","Loading","loadingIcon","TimeSegmentsControls","updateSegments","_checkIfEnabled","changeIndex","curPos","lastCurrentTime","_this$curPos","_this$player3","getSeekTime","_this$player4","_onDurationChange","_onLoadedData","_onPlay","_segs","formatTimeSegments","_item","_segDuration","segDuration","last","_timeSegments$index","diff2","Rotate","onBtnClick","innerRotate","updateRotateDeg","rootWidth","clientWidth","rootHeight","clientHeight","clockwise","videoRotateDeg","_transform","_styles","transformOrigin","times","factor","RotateSvg","PresentationMode","isPIPAvailable","isPip","exitPIP","requestPIP","showIcon","pMode","initPipEvents","switchPIP","pipIcon","PipIcon","pipIconExit","PipIconExit","leavePIPCallback","pipWindow","enterPIPCallback","pictureInPictureWindow","onWebkitpresentationmodechanged","webkitPresentationMode","checkWebkitSetPresentationMode","pipWin","textContent","styleSheets","cssRules","rule","link","rel","head","preferDocument","isDocPIPAvailable","pipOptions","playerRect","documentPictureInPicture","requestWindow","docPiPNode","docPiPStyle","pipRoot","parentElement","previousSibling","nextSibling","copyStyleIntoPiPWindow","append","cssContent","webkitSetPresentationMode","requestPictureInPicture","reason","_documentPictureInPic","exitPictureInPicture","_documentPictureInPic2","pictureInPictureElement","pictureInPictureEnabled","disablePictureInPicture","webkitSupportsPresentationMode","protocol","PlayNextIcon","idx","urlList","nextHandler","playNext","Next","changeSrc","strFileName","strMimeType","blob","reader","defaultMime","mimeType","payload","anchor","myBlob","Blob","MozBlob","WebKitBlob","pop","ajax","XMLHttpRequest","responseType","response","send","msSaveBlob","dataUrlToBlob","saver","tempUiArr","Uint8Array","mx","charCodeAt","strUrl","parts","binData","atob","decodeURIComponent","uiArr","winMode","URL","revokeObjectURL","confirm","f","createObjectURL","btoa","encodeURIComponent","FileReader","readAsDataURL","Download","dUrl","newUrl","getAbsoluteURL","downloadUtil","_handler","DownloadSvg","div","ScreenShot","screenshotIcon","initSize","fitVideo","onClickBtn","filename","saveLink","MouseEvent","bubbles","view","initMouseEvent","dispatchEvent","canvas","canvasCtx","getContext","imageSmoothingEnabled","imageSmoothingQuality","shot","saveImg","saveScreenShot","option","quality","createCanvas","dx","dy","dw","dh","mediaRatio","canvasRatio","sw","sh","drawImage","toDataURL","OptionList","onItemClick","renderItemList","_delegates","attrKeys","selected","showText","changeCallback","curSelected","getAttrObj","LIST_TYPES","TOGGLE_MODES","IS_MOBILE","OptionsIcon","switchActiveState","toggleMode","toggle","listType","enterType","isIcons","curValue","hidePortrait","_resizeList","optionsList","activeEvent","onEnter","onLeave","onIconClick","_isIcons","focusAwhile","curItem","changeCurrentText","isItemClickHide","getTextByLang","itemList","_maxH","heightLimit","listStyle","DefinitionIcon","_OptionsIcon","changeDefinitionList","definitionList","items","showItem","PlaybackRate","curRate","itemInfo","_text","ErrorPlugin","errorRetry","handleError","retry","errorNote","Prompt","intervalId","customConfig","customOnClick","showPrompt","hidePrompt","interval","highlight","hideinterval","ISPOT","mergeISPOT","iSpot","APIS","_updateDotDom","dotDom","calcuPosition","initDots","_ispots","createDot","ispotsInit","isNew","template","positionDot","findDot","updateDot","needShow","dot","showDot","deleteDot","del","deleteAllDots","dotDoms","getElementsByTagName","updateAllDots","iSpots","ispot","positionDots","playerSize","_pop","pRect","rect1","_left","_diff","getAllDotsDom","getDotDom","CALLBACK_MAP","dragmove","dragstart","dragend","mouseover","ProgressPreview","isHideThumbnailHover","isDrag","_curDot","onDotMouseLeave","blurDot","enableBlur","focusDot","disableBlur","videoPreview","videothumbnail","handlerSpotClick","_event","transformTimeHook","setTimeContent","ispots","progressDot","initDotsAPI","extTextRoot","previewLine","timePoint","timeText","tipText","_hasThumnail","bindEvents","onMousemove","onMousedown","onMouseup","handlerPreviewClick","updatePosition","cwidth","isflex","lwidth","showTips","isFocusDots","defaultText","hideTips","updateTimeText","updateLinePos","thumbnailConfig","isShowThumbnail","tRoot","isShowCoverPreview","totalWidth","widthPerSeconds","_activeDotId","isDefault","removeCallBack","miniWidth","Thumbnail","ratio","_preloadMark","initThumbnail","_this2$config","pic_num","containerWidth","containerHeight","row","col","urlIndex","indexInPage","rowIndex","colIndex","swidth","sHeight","getUrlByIndex","backgroundPosition","customStyle","getPosition","getBgColor","MiniProgress","MODES","nowTime","isSupportCanvas","DynamicBg","_frameCount","startFrameCount","stop","renderOnTimeupdate","visibilityState","_checkIfCanStart","renderOnce","_isLoaded","startInterval","_sVideo","checkVideoIsSupport","videoPI","preTime","_loopType","dynamicBg","frameRate","rwidth","rheight","renderByPoster","onLoadedData","onVisibilitychange","canvasFilter","supportCanvasFilter","isInnerRender","webkitFilter","mask","addMask","background","maskBg","_p","_tVideo","HTMLVideoElement","flyVideo","_tagName","updateImg","_this$canvas$getBound","image","sourcePI","_this$canvas$getBound2","multiple","checkIsSupportCanvas","INFO","Stats","actionData","_getTime","_stats","stats","getStats","JSON","stringify","downloadUrl","disabled","timestamp","timeFormat","toISOString","_recordUserActions","_recordInfo","_downloadStats","profile","_infoProfile","_info","startMs","endMs","cat","dur","ph","tid","ts","_this$_stats","mediaElem","mediaInfo","raw","timestat","_getTimeStats","_getProfile","msgs","stat","traceEvents","GapJump","seekingEventReceived","hasPlayed","smallGapLimit","gapDetectionThreshold","_getIndex","jumpTo","jumpSize","isGapSmall","BROWSER_GAP_TOLERANCE","useGapJump","isSafari","end_type","video_postion","onGapJump","threshold","bufferedInfo","_getBuffered","WaitingTimeoutJump","jumpCnt","jumpCntMax","useWaitingTimeoutJump","onJump","waitingTime","DEFAULT_SPEED_TYPE","SPEED_TYPE","TestSpeed","speedListCache","initSpeedList","cnt","testSpeed","testTimeStep","speed","appendList","openSpeed","loadSize","testCnt","testSpeedUrl","xhr","headers","Range","setRequestHeader","onreadystatechange","getResponseHeader","saveSpeedMax","shift","realTimeSpeed","getSpeedName","updateSpeed","getSpeed","avgSpeed","speedName","addSpeedTypeList","_onRealSpeedChange","namePrefix","FpsDetect","_lastDecodedFrames","_currentStuckCount","_lastCheckPoint","_payload","_startTick","_stopTick","_timer","_checkDecodeFPS","tick","enoughBuffer","buffers","curDecodedFrames","checkInterval","hidden","_this$_checkBuffer","_checkBuffer","reportFrame","stuckCount","_reset","_media$getVideoPlayba","currTime","curDecoded","_checkStuck","DefaultPreset","_this$plugins","_this$plugins2","_this$plugins3","simulateMode","contolsIcons","TimeSegments","TimeIcon","FullScreen","RotateIcon","PlaybackRateIcon","DownLoadIcon","ScreenShotIcon","PIPIcon","layers","Miniscreen","Xglogger","Mobile","PresetPlayer","_Player","FullscreenIcon","CssFullscreenIcon","VolumeIcon"],"mappings":"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"}