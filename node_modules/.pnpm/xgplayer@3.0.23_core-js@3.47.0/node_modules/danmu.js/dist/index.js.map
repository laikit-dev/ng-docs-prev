{"version":3,"file":"index.js","sources":["webpack://danmu.js/./src/style/index.scss","webpack://danmu.js/./node_modules/css-loader/dist/runtime/api.js","webpack://danmu.js/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://danmu.js/./node_modules/d/index.js","webpack://danmu.js/./node_modules/d/node_modules/type/function/is.js","webpack://danmu.js/./node_modules/d/node_modules/type/object/is.js","webpack://danmu.js/./node_modules/d/node_modules/type/plain-function/is.js","webpack://danmu.js/./node_modules/d/node_modules/type/prototype/is.js","webpack://danmu.js/./node_modules/d/node_modules/type/value/is.js","webpack://danmu.js/./node_modules/es5-ext/function/noop.js","webpack://danmu.js/./node_modules/es5-ext/object/assign/index.js","webpack://danmu.js/./node_modules/es5-ext/object/assign/is-implemented.js","webpack://danmu.js/./node_modules/es5-ext/object/assign/shim.js","webpack://danmu.js/./node_modules/es5-ext/object/is-value.js","webpack://danmu.js/./node_modules/es5-ext/object/keys/index.js","webpack://danmu.js/./node_modules/es5-ext/object/keys/is-implemented.js","webpack://danmu.js/./node_modules/es5-ext/object/keys/shim.js","webpack://danmu.js/./node_modules/es5-ext/object/normalize-options.js","webpack://danmu.js/./node_modules/es5-ext/object/valid-callable.js","webpack://danmu.js/./node_modules/es5-ext/object/valid-value.js","webpack://danmu.js/./node_modules/es5-ext/string/​#/contains/index.js","webpack://danmu.js/./node_modules/es5-ext/string/​#/contains/is-implemented.js","webpack://danmu.js/./node_modules/es5-ext/string/​#/contains/shim.js","webpack://danmu.js/./node_modules/event-emitter/index.js","webpack://danmu.js/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://danmu.js/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://danmu.js/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://danmu.js/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://danmu.js/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://danmu.js/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://danmu.js/webpack/runtime/compat_get_default_export","webpack://danmu.js/webpack/runtime/define_property_getters","webpack://danmu.js/webpack/runtime/has_own_property","webpack://danmu.js/webpack/runtime/make_namespace_object","webpack://danmu.js/webpack/runtime/nonce","webpack://danmu.js/./src/utils/logger.js","webpack://danmu.js/./src/baseClass.js","webpack://danmu.js/./src/utils/util.js","webpack://danmu.js/./src/bullet.js","webpack://danmu.js/./src/channel.js","webpack://danmu.js/./src/utils/validator.js","webpack://danmu.js/./src/main.js","webpack://danmu.js/./src/control.js","webpack://danmu.js/./src/domRecycle.js","webpack://danmu.js/./src/resizeObserver.js","webpack://danmu.js/./src/danmu.js","webpack://danmu.js/./src/style/index.scss?1a6d"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".danmu{overflow:hidden;user-select:none;-ms-user-select:none}.danmu>*{position:absolute;white-space:nowrap}.danmu-switch{width:32px;height:20px;border-radius:100px;background-color:#ccc;box-sizing:border-box;outline:none;cursor:pointer;position:relative;text-align:center;margin:10px auto}.danmu-switch.danmu-switch-active{padding-left:12px;background-color:#f85959}.danmu-switch span.txt{width:20px;height:20px;line-height:20px;text-align:center;display:block;border-radius:100px;background-color:#fff;box-shadow:-2px 0 0 0 rgba(0,0,0,.04);font-family:PingFangSC;font-size:10px;font-weight:500;color:#f44336}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/style/danmu.scss\"],\"names\":[],\"mappings\":\"AAAA,OACE,eAAA,CACA,gBAAA,CACA,oBAAA,CACA,SACE,iBAAA,CACA,kBAAA,CAIJ,cACE,UAAA,CACA,WAAA,CACA,mBAAA,CACA,qBAAA,CACA,qBAAA,CACA,YAAA,CACA,cAAA,CACA,iBAAA,CACA,iBAAA,CACA,gBAAA,CACA,kCACE,iBAAA,CACA,wBAAA,CAEF,uBACE,UAAA,CACA,WAAA,CACA,gBAAA,CACA,iBAAA,CACA,aAAA,CACA,mBAAA,CACA,qBAAA,CACA,qCAAA,CACA,sBAAA,CACA,cAAA,CACA,eAAA,CACA,aAAA\",\"sourcesContent\":[\".danmu {\\n  overflow: hidden;\\n  user-select: none;\\n  -ms-user-select: none;\\n  > * {\\n    position: absolute;\\n    white-space: nowrap;\\n  }\\n}\\n\\n.danmu-switch {\\n  width: 32px;\\n  height: 20px;\\n  border-radius: 100px;\\n  background-color: #ccc;\\n  box-sizing: border-box;\\n  outline: none;\\n  cursor: pointer;\\n  position: relative;\\n  text-align: center;\\n  margin: 10px auto;\\n  &.danmu-switch-active {\\n    padding-left: 12px;\\n    background-color: #f85959;\\n  }\\n  span.txt {\\n    width: 20px;\\n    height: 20px;\\n    line-height: 20px;\\n    text-align: center;\\n    display: block;\\n    border-radius: 100px;\\n    background-color: #ffffff;\\n    box-shadow: -2px 0 0 0 rgba(0, 0, 0, 0.04);\\n    font-family: PingFangSC;\\n    font-size: 10px;\\n    font-weight: 500;\\n    color: #f44336;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nvar isValue         = require(\"type/value/is\")\n  , isPlainFunction = require(\"type/plain-function/is\")\n  , assign          = require(\"es5-ext/object/assign\")\n  , normalizeOpts   = require(\"es5-ext/object/normalize-options\")\n  , contains        = require(\"es5-ext/string/#/contains\");\n\nvar d = (module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif (arguments.length < 2 || typeof dscr !== \"string\") {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t\tw = contains.call(dscr, \"w\");\n\t} else {\n\t\tc = w = true;\n\t\te = false;\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n});\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== \"string\") {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (!isValue(get)) {\n\t\tget = undefined;\n\t} else if (!isPlainFunction(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (!isValue(set)) {\n\t\tset = undefined;\n\t} else if (!isPlainFunction(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (isValue(dscr)) {\n\t\tc = contains.call(dscr, \"c\");\n\t\te = contains.call(dscr, \"e\");\n\t} else {\n\t\tc = true;\n\t\te = false;\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n","\"use strict\";\n\nvar isPrototype = require(\"../prototype/is\");\n\nmodule.exports = function (value) {\n\tif (typeof value !== \"function\") return false;\n\n\tif (!hasOwnProperty.call(value, \"length\")) return false;\n\n\ttry {\n\t\tif (typeof value.length !== \"number\") return false;\n\t\tif (typeof value.call !== \"function\") return false;\n\t\tif (typeof value.apply !== \"function\") return false;\n\t} catch (error) {\n\t\treturn false;\n\t}\n\n\treturn !isPrototype(value);\n};\n","\"use strict\";\n\nvar isValue = require(\"../value/is\");\n\n// prettier-ignore\nvar possibleTypes = { \"object\": true, \"function\": true, \"undefined\": true /* document.all */ };\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) return false;\n\treturn hasOwnProperty.call(possibleTypes, typeof value);\n};\n","\"use strict\";\n\nvar isFunction = require(\"../function/is\");\n\nvar classRe = /^\\s*class[\\s{/}]/, functionToString = Function.prototype.toString;\n\nmodule.exports = function (value) {\n\tif (!isFunction(value)) return false;\n\tif (classRe.test(functionToString.call(value))) return false;\n\treturn true;\n};\n","\"use strict\";\n\nvar isObject = require(\"../object/is\");\n\nmodule.exports = function (value) {\n\tif (!isObject(value)) return false;\n\ttry {\n\t\tif (!value.constructor) return false;\n\t\treturn value.constructor.prototype === value;\n\t} catch (error) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\n// ES3 safe\nvar _undefined = void 0;\n\nmodule.exports = function (value) { return value !== _undefined && value !== null; };\n","\"use strict\";\n\n// eslint-disable-next-line no-empty-function\nmodule.exports = function () {};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.assign : require(\"./shim\");\n","\"use strict\";\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== \"function\") return false;\n\tobj = { foo: \"raz\" };\n\tassign(obj, { bar: \"dwa\" }, { trzy: \"trzy\" });\n\treturn obj.foo + obj.bar + obj.trzy === \"razdwatrzy\";\n};\n","\"use strict\";\n\nvar keys  = require(\"../keys\")\n  , value = require(\"../valid-value\")\n  , max   = Math.max;\n\nmodule.exports = function (dest, src /*, …srcn*/) {\n\tvar error, i, length = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry {\n\t\t\tdest[key] = src[key];\n\t\t} catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < length; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n","\"use strict\";\n\nvar _undefined = require(\"../function/noop\")(); // Support ES3 engines\n\nmodule.exports = function (val) { return val !== _undefined && val !== null; };\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? Object.keys : require(\"./shim\");\n","\"use strict\";\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys(\"primitive\");\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n","\"use strict\";\n\nvar isValue = require(\"../is-value\");\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) { return keys(isValue(object) ? Object(object) : object); };\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function (opts1 /*, …options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (!isValue(options)) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n","\"use strict\";\n\nmodule.exports = function (fn) {\n\tif (typeof fn !== \"function\") throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")() ? String.prototype.contains : require(\"./shim\");\n","\"use strict\";\n\nvar str = \"razdwatrzy\";\n\nmodule.exports = function () {\n\tif (typeof str.contains !== \"function\") return false;\n\treturn str.contains(\"dwa\") === true && str.contains(\"foo\") === false;\n};\n","\"use strict\";\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString /*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n","'use strict';\n\nvar d        = require('d')\n  , callable = require('es5-ext/object/valid-callable')\n\n  , apply = Function.prototype.apply, call = Function.prototype.call\n  , create = Object.create, defineProperty = Object.defineProperty\n  , defineProperties = Object.defineProperties\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , descriptor = { configurable: true, enumerable: false, writable: true }\n\n  , on, once, off, emit, methods, descriptors, base;\n\non = function (type, listener) {\n\tvar data;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) {\n\t\tdata = descriptor.value = create(null);\n\t\tdefineProperty(this, '__ee__', descriptor);\n\t\tdescriptor.value = null;\n\t} else {\n\t\tdata = this.__ee__;\n\t}\n\tif (!data[type]) data[type] = listener;\n\telse if (typeof data[type] === 'object') data[type].push(listener);\n\telse data[type] = [data[type], listener];\n\n\treturn this;\n};\n\nonce = function (type, listener) {\n\tvar once, self;\n\n\tcallable(listener);\n\tself = this;\n\ton.call(this, type, once = function () {\n\t\toff.call(self, type, once);\n\t\tapply.call(listener, this, arguments);\n\t});\n\n\tonce.__eeOnceListener__ = listener;\n\treturn this;\n};\n\noff = function (type, listener) {\n\tvar data, listeners, candidate, i;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return this;\n\tdata = this.__ee__;\n\tif (!data[type]) return this;\n\tlisteners = data[type];\n\n\tif (typeof listeners === 'object') {\n\t\tfor (i = 0; (candidate = listeners[i]); ++i) {\n\t\t\tif ((candidate === listener) ||\n\t\t\t\t\t(candidate.__eeOnceListener__ === listener)) {\n\t\t\t\tif (listeners.length === 2) data[type] = listeners[i ? 0 : 1];\n\t\t\t\telse listeners.splice(i, 1);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif ((listeners === listener) ||\n\t\t\t\t(listeners.__eeOnceListener__ === listener)) {\n\t\t\tdelete data[type];\n\t\t}\n\t}\n\n\treturn this;\n};\n\nemit = function (type) {\n\tvar i, l, listener, listeners, args;\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return;\n\tlisteners = this.__ee__[type];\n\tif (!listeners) return;\n\n\tif (typeof listeners === 'object') {\n\t\tl = arguments.length;\n\t\targs = new Array(l - 1);\n\t\tfor (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\n\t\tlisteners = listeners.slice();\n\t\tfor (i = 0; (listener = listeners[i]); ++i) {\n\t\t\tapply.call(listener, this, args);\n\t\t}\n\t} else {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tcall.call(listeners, this);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tcall.call(listeners, this, arguments[1]);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tcall.call(listeners, this, arguments[1], arguments[2]);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tl = arguments.length;\n\t\t\targs = new Array(l - 1);\n\t\t\tfor (i = 1; i < l; ++i) {\n\t\t\t\targs[i - 1] = arguments[i];\n\t\t\t}\n\t\t\tapply.call(listeners, this, args);\n\t\t}\n\t}\n};\n\nmethods = {\n\ton: on,\n\tonce: once,\n\toff: off,\n\temit: emit\n};\n\ndescriptors = {\n\ton: d(on),\n\tonce: d(once),\n\toff: d(off),\n\temit: d(emit)\n};\n\nbase = defineProperties({}, descriptors);\n\nmodule.exports = exports = function (o) {\n\treturn (o == null) ? create(base) : defineProperties(Object(o), descriptors);\n};\nexports.methods = methods;\n","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","// getDefaultExport function for compatibility with non-ESM modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};\n","__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n        if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n            Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n        }\n    }\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nc = undefined;","const DEBUG = typeof window !== 'undefined' && window.location.href.indexOf('danmu-debug') > -1\n\nclass Logger {\n  constructor(constructorName) {\n    this.constructorName = constructorName || ''\n  }\n  info(message, ...optionalParams) {\n    DEBUG && console.log(`[Danmu Log][${this.constructorName}]`, message, ...optionalParams)\n  }\n}\n\nexport default Logger\n","import Log from './utils/logger'\n\nclass BaseClass {\n  setLogger(logger) {\n    this.logger = logger instanceof Log ? logger : new Log((logger || '') + '.js')\n  }\n}\n\nexport default BaseClass\n\n/**\n * @typedef {{\n *  id: string\n *  start: number\n *  duration: number\n *  prior: boolean\n *  score?: number // 积分越高，越容易展示\n *  txt?: string\n *  el?: HTMLElement | Function\n *  elLazyInit?: boolean // 配置了elLazyInit后，则通过hooks提供的时机进行el创建，该方式可减少dom数量\n *  mode: 'scroll' | 'top' | 'bottom'\n *  attached_: boolean // 内部属性，标记弹幕是否已经被入轨\n *  realTime?: boolean,\n *  color?: string,\n *  bookChannelId?: [number, any]\n * }} CommentData\n */\n\n/**\n * @typedef {{\n *  bulletCreateEl?: (item: CommentData) => HTMLElement | {\n *      el: HTMLElement\n *  } & GlobalHooks\n *  bulletAttaching?: (item: CommentData) => void\n *  bulletAttached?: (item: CommentData) => void\n *  bulletDetaching?: (item: CommentData) => void\n *  bulletDetached?: (item: CommentData, HTMLElement) => void\n * }} GlobalHooks\n */\n","export const hasOwnProperty = Object.prototype.hasOwnProperty\n\nexport function createDom(el = 'div', tpl = '', attrs = {}, cname = '') {\n  const dom = document.createElement(el)\n  dom.className = cname\n  dom.innerHTML = tpl\n  Object.keys(attrs).forEach((item) => {\n    const key = item\n    const value = attrs[item]\n    if (el === 'video' || el === 'audio') {\n      if (value) {\n        dom.setAttribute(key, value)\n      }\n    } else {\n      dom.setAttribute(key, value)\n    }\n  })\n  return dom\n}\n\nexport function hasClass(el, className) {\n  if (el.classList) {\n    return Array.prototype.some.call(el.classList, (item) => item === className)\n  } else {\n    return !!el.className.match(new RegExp('(\\\\s|^)' + className + '(\\\\s|$)'))\n  }\n}\n\nexport function addClass(el, className) {\n  if (el.classList) {\n    className\n      .replace(/(^\\s+|\\s+$)/g, '')\n      .split(/\\s+/g)\n      .forEach((item) => {\n        item && el.classList.add(item)\n      })\n  } else if (!hasClass(el, className)) {\n    el.className += ' ' + className\n  }\n}\n\nexport function removeClass(el, className) {\n  if (el.classList) {\n    className.split(/\\s+/g).forEach((item) => {\n      el.classList.remove(item)\n    })\n  } else if (hasClass(el, className)) {\n    className.split(/\\s+/g).forEach((item) => {\n      const reg = new RegExp('(\\\\s|^)' + item + '(\\\\s|$)')\n      el.className = el.className.replace(reg, ' ')\n    })\n  }\n}\n\nexport function toggleClass(el, className) {\n  className.split(/\\s+/g).forEach((item) => {\n    if (hasClass(el, item)) {\n      removeClass(el, item)\n    } else {\n      addClass(el, item)\n    }\n  })\n}\n\nexport function findDom(el = document, sel) {\n  let dom\n  // fix querySelector IDs that start with a digit\n  // https://stackoverflow.com/questions/37270787/uncaught-syntaxerror-failed-to-execute-queryselector-on-document\n  try {\n    dom = el.querySelector(sel)\n  } catch (e) {\n    if (sel.startsWith('#')) {\n      dom = el.getElementById(sel.slice(1))\n    }\n  }\n  return dom\n}\n\nexport function deepCopy(dst, src) {\n  if (typeOf(src) === 'Object' && typeOf(dst) === 'Object') {\n    Object.keys(src).forEach((key) => {\n      if (typeOf(src[key]) === 'Object' && !(src[key] instanceof Node)) {\n        if (!dst[key]) {\n          dst[key] = src[key]\n        } else {\n          deepCopy(dst[key], src[key])\n        }\n      } else if (typeOf(src[key]) === 'Array') {\n        dst[key] = typeOf(dst[key]) === 'Array' ? dst[key].concat(src[key]) : src[key]\n      } else {\n        dst[key] = src[key]\n      }\n    })\n    return dst\n  }\n}\n\nexport function typeOf(obj) {\n  return Object.prototype.toString.call(obj).match(/([^\\s.*]+)(?=]$)/g)[0]\n}\n\nexport function copyDom(dom) {\n  if (dom && dom.nodeType === 1) {\n    const back = document.createElement(dom.tagName)\n    Array.prototype.forEach.call(dom.attributes, (node) => {\n      back.setAttribute(node.name, node.value)\n    })\n    if (dom.innerHTML) {\n      back.innerHTML = dom.innerHTML\n    }\n    return back\n  } else {\n    return ''\n  }\n}\n\nfunction offInDestroy(object, event, fn, offEvent) {\n  function onDestroy() {\n    object.off(event, fn)\n    object.off(offEvent, onDestroy)\n  }\n  object.once(offEvent, onDestroy)\n}\n\nexport function attachEventListener(object, event, fn, offEvent) {\n  if (offEvent) {\n    object.on(event, fn)\n    offInDestroy(object, event, fn, offEvent)\n  } else {\n    const _fn = (data) => {\n      fn(data)\n      object.off(event, _fn)\n    }\n    object.on(event, _fn)\n  }\n}\n\n/**\n * @param {HTMLElement} elem\n * @param {string} name\n * @param {string} value\n */\nexport function styleUtil(elem, name, value) {\n  const style = elem.style\n  try {\n    style[name] = value\n  } catch (error) {\n    style.setProperty(name, value)\n  }\n}\n\n/**\n * @param {HTMLElement} elem\n * @param {string} value\n */\nexport function styleCSSText(elem, value) {\n  const style = elem.style\n  try {\n    style.cssText = value\n  } catch (error) {}\n}\n\nexport function isNumber(val) {\n  return typeof val === 'number' && !Number.isNaN(val)\n}\n\nexport function isFunction(val) {\n  return typeof val === 'function'\n}\n\n/**\n * Simple throttle\n * @param {() => void} func\n * @param {number} wait\n * @returns\n */\nexport function throttle(func, wait) {\n  let timer = 0\n  return (...args) => {\n    clearTimeout(timer)\n    timer = setTimeout(() => func.apply(this, args), wait)\n  }\n}\n","import BaseClass from './baseClass'\nimport Log from './utils/logger'\nimport { copyDom, isFunction, isNumber, styleCSSText, styleUtil } from './utils/util'\n\n// 减少频繁的内存创建\nconst logger = new Log('bullet')\n\n/**\n * [Bullet 弹幕构造类]\n *\n * @description\n *  1. 几乎所有事件都可以被代理（包括CSS事件），Bullet内不要进行事件绑定。所有事件绑定均在main层处理\n */\nexport class Bullet extends BaseClass {\n  /**\n   * @param {import('./danmu').DanmuJs} danmu\n   * @param {import('./baseClass').CommentData} options\n   */\n  constructor(danmu, options = {}) {\n    super()\n    const { container, recycler, config } = danmu\n\n    this.setLogger(logger)\n    // this.logger && this.logger.info('options.moveV', options.moveV)\n    this.danmu = danmu\n    this.options = options\n    /** @type {number} - milliseconds */\n    this.duration = options.duration\n    this.id = options.id\n    this.container = container\n    /** @type {'scroll' | 'top' | 'bottom'} */\n    this.mode = options.mode === 'top' || options.mode === 'bottom' ? options.mode : 'scroll'\n    this.start = options.start\n    this.prior = options.prior\n    this.realTime = options.realTime\n    this.color = options.color\n    this.bookChannelId = options.bookChannelId\n    this.reuseDOM = true\n    this.noCopyEl = !!(config.disableCopyDOM || options.disableCopyDOM)\n    this.recycler = recycler\n    /**\n     * @type {number} - seconds\n     * @private\n     */\n    this._fullySlideInScreenDuration = undefined\n    /**\n     * @type {number} - milliseconds\n     * @private\n     */\n    this._lastMoveTime = undefined\n    /** @type {'waiting'|'start'|'end'} */\n    this.status = 'waiting'\n\n    if (!options.elLazyInit) {\n      this.bulletCreateFail = !this._makeEl()\n    }\n  }\n  get moveV() {\n    const self = this\n    const { danmu, options } = self\n    let v = self._moveV\n\n    if (!v) {\n      if (options.moveV) {\n        v = options.moveV\n      } else {\n        if (self.elPos) {\n          const ctPos = danmu.containerPos\n          const distance =\n            self.direction === 'b2t'\n              ? ctPos.height + (danmu.config.chaseEffect ? self.height : 0)\n              : ctPos.width + (danmu.config.chaseEffect ? self.width : 0)\n\n          v = (distance / self.duration) * 1000\n        }\n      }\n\n      if (v) {\n        v *= danmu.main.playRate\n\n        // 固化速度，否则resize时外部获取当前弹幕时会重新计算速度，导致布局异常（重叠），同时提高性能。\n        self._moveV = v\n      }\n    }\n    return v\n  }\n  get direction() {\n    return this.danmu.direction\n  }\n  get fullySlideIntoScreen() {\n    const self = this\n    let flag = true\n\n    if (self.mode === 'scroll' && self._lastMoveTime && self._fullySlideInScreenDuration > 0) {\n      const now = new Date().getTime()\n      const diff = (now - self._lastMoveTime) / 1000\n\n      if (diff >= self._fullySlideInScreenDuration) {\n        flag = true\n      } else {\n        flag = false\n      }\n    }\n    return flag\n  }\n\n  /**\n   * @private\n   * @returns {Boolean}\n   */\n  _makeEl() {\n    const { danmu, options } = this\n    const { config, globalHooks } = danmu\n    /**\n     * @type {HTMLElement}\n     */\n    let el\n    let cssText = ''\n    let style = options.style || {}\n\n    // The use of translate3d pushes css animations into hardware acceleration for more power!\n    // Use 'perspective' to try to fix flickering problem after switching to the transform above\n    style['perspective'] = '500em'\n\n    // !!! 'backface-visibility' will cause translateX/Y stop rendering in firefox\n    // style['backfaceVisibility'] = 'hidden'\n    // style['webkitBackfaceVisibility'] = 'hidden'\n\n    if (options.el || options.elLazyInit) {\n      if (this.noCopyEl) {\n        this.reuseDOM = false\n      }\n\n      if (options.elLazyInit) {\n        if (isFunction(globalHooks.bulletCreateEl)) {\n          try {\n            const result = globalHooks.bulletCreateEl(options)\n\n            if (result instanceof HTMLElement) {\n              el = result\n            } else {\n              el = result.el\n            }\n          } catch (e) {}\n        }\n      } else {\n        if (options.el.nodeType === 1 && !options.el.parentNode) {\n          if (this.reuseDOM) {\n            let copyDOM = copyDom(options.el)\n            if (options.eventListeners && options.eventListeners.length > 0) {\n              options.eventListeners.forEach((eventListener) => {\n                copyDOM.addEventListener(eventListener.event, eventListener.listener, eventListener.useCapture || false)\n              })\n            }\n            el = this.recycler.use()\n            if (el.childNodes.length > 0) {\n              el.innerHTML = ''\n            }\n            if (el.textContent) {\n              el.textContent = ''\n            }\n            el.appendChild(copyDOM)\n          } else {\n            el = options.el\n          }\n        }\n      }\n    } else if (typeof options.txt === 'string') {\n      el = this.recycler.use()\n      el.textContent = options.txt\n    }\n\n    if (!el || !danmu.main) {\n      return false\n    }\n\n    let offset\n    if (isNumber(config.bulletOffset) && config.bulletOffset >= 0) {\n      offset = config.bulletOffset\n    } else {\n      const containerPos = danmu.containerPos\n      offset = containerPos.width / 10 > 100 ? 100 : containerPos.width / 10\n    }\n    const random = options.realTime ? 0 : Math.floor(Math.random() * offset)\n    const left = this.updateOffset(random, true)\n\n    style.left = left\n    Object.keys(style).forEach((key) => {\n      const bbqKey = key.replace(/[A-Z]/g, (val) => {\n        return '-' + val.toLowerCase()\n      })\n      cssText += `${bbqKey}:${style[key]};`\n    })\n    styleCSSText(el, cssText)\n\n    /**\n     * @type {HTMLElement}\n     */\n    this.el = el\n    if (options.like && options.like.el) {\n      this.setLikeDom(options.like.el, options.like.style)\n    }\n\n    return true\n  }\n\n  updateOffset(val, dryRun = false) {\n    this.random = val\n    const left = this.danmu.containerPos.width + val + 'px'\n\n    if (!dryRun) {\n      styleUtil(this.el, 'left', this.danmu.containerPos.width + val + 'px')\n    }\n\n    return left\n  }\n  attach() {\n    // this.logger && this.logger.info(`attach #${this.options.txt || '[DOM Element]'}#`)\n    const self = this\n\n    if (self.options.elLazyInit && !self.el) {\n      self._makeEl()\n    }\n\n    // 防止外部钩子进行弹幕实例销毁，或者其他异常操作\n    if (!self.danmu || !self.danmu.main) {\n      return\n    }\n\n    const { danmu, options, el } = self\n    const { globalHooks } = danmu\n\n    if (globalHooks.bulletAttaching) {\n      globalHooks.bulletAttaching(options)\n    }\n\n    if (!self.container.contains(el)) {\n      self.container.appendChild(el)\n    }\n    self.elPos = el.getBoundingClientRect()\n    if (self.direction === 'b2t') {\n      self.width = self.elPos.height\n      self.height = self.elPos.width\n    } else {\n      self.width = self.elPos.width\n      self.height = self.elPos.height\n    }\n    if (self.moveV) {\n      self.duration = ((self.danmu.containerPos.width + self.random + self.width) / self.moveV) * 1000\n    }\n\n    if (globalHooks.bulletAttached) {\n      globalHooks.bulletAttached(options, el)\n    }\n  }\n  detach() {\n    // this.logger && this.logger.info(`detach #${this.options.txt || '[DOM Element]'}#`)\n    const self = this\n    const { el, danmu, options } = self\n    const { globalHooks } = danmu\n\n    if (el) {\n      // run hooks\n      if (globalHooks.bulletDetaching) {\n        globalHooks.bulletDetaching(options)\n      }\n\n      if (self.reuseDOM) {\n        self.recycler.unused(el)\n      } else {\n        if (el.parentNode) {\n          el.parentNode.removeChild(el)\n        }\n      }\n\n      // run hooks\n      if (globalHooks.bulletDetached) {\n        globalHooks.bulletDetached(options, el)\n      }\n\n      self.el = null\n    }\n\n    self.elPos = undefined\n  }\n  topInit() {\n    this.logger && this.logger.info(`topInit #${this.options.txt || '[DOM Element]'}#`)\n    if (this.direction === 'b2t') {\n      styleUtil(this.el, 'transformOrigin', 'left top')\n      styleUtil(\n        this.el,\n        'transform',\n        `translateX(-${this.top}px) translateY(${this.danmu.containerPos.height}px) translateZ(0px) rotate(90deg)`\n      )\n      styleUtil(this.el, 'transition', 'transform 0s linear 0s')\n    } else {\n      styleUtil(this.el, 'top', `${this.top}px`)\n    }\n  }\n  pauseMove(isFullscreen = false) {\n    // this.logger && this.logger.info(`pauseMove #${this.options.txt || '[DOM Element]'}#`)\n    const self = this\n    if (self.status === 'paused') {\n      return\n    }\n    if (self.status !== 'forcedPause') {\n      this.status = 'paused'\n    }\n\n    // 将记忆速度删除，以备通过接口调整速度或duration时重计速度\n    self._moveV = undefined\n\n    if (!this.el) {\n      return\n    }\n    if (this.mode === 'scroll') {\n      const ctPos = self.danmu.containerPos\n      if (isFullscreen) {\n        let pastDuration = (new Date().getTime() - self._lastMoveTime) / 1000\n        let pastS = pastDuration * this.moveV\n        let ratio = 0\n        let nowS = 0\n        if (self.moveMoreS - pastS >= 0) {\n          if (this.direction === 'b2t') {\n            ratio = (self.moveMoreS - pastS) / self.moveContainerHeight\n            nowS = ratio * ctPos.height\n          } else {\n            ratio = (self.moveMoreS - pastS) / self.moveContainerWidth\n            nowS = ratio * ctPos.width\n          }\n        } else {\n          nowS = self.moveMoreS - pastS\n        }\n        if (this.direction === 'b2t') {\n          styleUtil(\n            this.el,\n            'transform',\n            `translateX(-${this.top}px) translateY(${nowS}px) translateZ(0px) rotate(90deg)`\n          )\n        } else {\n          styleUtil(this.el, 'left', `${nowS}px`)\n        }\n      } else {\n        if (this.direction === 'b2t') {\n          styleUtil(\n            this.el,\n            'transform',\n            `translateX(-${this.top}px) translateY(${\n              this.el.getBoundingClientRect().top - ctPos.top\n            }px) translateZ(0px) rotate(90deg)`\n          )\n        } else {\n          styleUtil(this.el, 'left', `${this.el.getBoundingClientRect().left - ctPos.left}px`)\n        }\n      }\n      if (this.direction === 'b2t') {\n        // this.el.style.transform = `translateX(-${this.top}px) translateY(${nowS}px) translateZ(0px) rotate(90deg)`\n        styleUtil(this.el, 'transition', 'transform 0s linear 0s')\n      } else {\n        styleUtil(this.el, 'transform', 'translateX(0px) translateY(0px) translateZ(0px)')\n        styleUtil(this.el, 'transition', 'transform 0s linear 0s')\n      }\n    } else {\n      if (!this.pastDuration || !this.startTime) {\n        this.pastDuration = 1\n      } else {\n        this.pastDuration = this.pastDuration + new Date().getTime() - this.startTime\n      }\n    }\n  }\n  startMove(force) {\n    // this.logger && this.logger.info(`startMove #${this.options.txt || '[DOM Element]'}#`)\n    const self = this\n    if (!self.hasMove) {\n      self.danmu.emit('bullet_start', self)\n      self.hasMove = true\n    }\n    if (self.status === 'forcedPause' && !force) return\n    if (!this.el) return\n    if (this.status === 'start') return\n\n    this.status = 'start'\n\n    if (this.mode === 'scroll') {\n      const ctPos = self.danmu.containerPos\n      if (!self.el) {\n        return\n      }\n      const bulletPos = self.el.getBoundingClientRect()\n      let fullyMovedToScreenDistance\n\n      if (this.direction === 'b2t') {\n        fullyMovedToScreenDistance = bulletPos.bottom - ctPos.bottom\n\n        let leftDuration = (bulletPos.bottom - ctPos.top) / this.moveV\n        styleUtil(self.el, 'transition', `transform ${leftDuration}s linear 0s`)\n        styleUtil(\n          self.el,\n          'transform',\n          `translateX(-${self.top}px) translateY(-${self.height}px) translateZ(0px) rotate(90deg)`\n        )\n        self._lastMoveTime = new Date().getTime()\n        self.moveMoreS = bulletPos.top - ctPos.top\n        self.moveContainerHeight = ctPos.height\n      } else {\n        fullyMovedToScreenDistance = bulletPos.right - ctPos.right\n        const leftDistance = bulletPos.right - ctPos.left\n        const leftDuration = leftDistance / self.moveV\n\n        if (bulletPos.right > ctPos.left) {\n          styleUtil(self.el, 'transition', `transform ${leftDuration}s linear 0s`)\n          styleUtil(self.el, 'transform', `translateX(-${leftDistance}px) translateY(0px) translateZ(0px)`)\n\n          self._lastMoveTime = new Date().getTime()\n          self.moveMoreS = bulletPos.left - ctPos.left\n          self.moveContainerWidth = ctPos.width\n        } else {\n          self.status = 'end'\n          self.remove()\n        }\n      }\n\n      self._fullySlideInScreenDuration = fullyMovedToScreenDistance / self.moveV\n    } else {\n      const newTimestamp = new Date().getTime()\n      const leftDuration =\n        (this.startTime && newTimestamp - this.startTime > this.duration\n          ? newTimestamp - this.startTime\n          : this.duration) / 1000\n      styleUtil(self.el, 'left', '50%')\n      styleUtil(self.el, 'margin', `0 0 0 -${this.width / 2}px`)\n      styleUtil(self.el, 'visibility', 'hidden')\n      styleUtil(self.el, 'transition', `visibility ${leftDuration}s 0s`)\n      if (!this.pastDuration) {\n        this.pastDuration = 1\n      }\n      this.startTime = newTimestamp\n    }\n  }\n  remove(needPause = true) {\n    this.logger && this.logger.info(`remove #${this.options.txt || '[DOM Element]'}#`)\n    const self = this\n\n    if (needPause) {\n      self.pauseMove()\n    }\n\n    if (self.el && self.el.parentNode) {\n      self.detach()\n      if (this.options.el && this.options.el.nodeType === 1 && this.noCopyEl) {\n        styleUtil(this.options.el, 'transform', 'none')\n      }\n      self.danmu.emit('bullet_remove', {\n        bullet: self\n      })\n    }\n  }\n\n  setFontSize(size) {\n    if (this.el) {\n      this.el.style['fontSize'] = size\n    }\n  }\n  setLikeDom(el, style) {\n    if (el) {\n      Object.keys(style).forEach(function (key) {\n        el.style[key] = style[key]\n      })\n      let likeClass = 'danmu-like'\n      el.className = likeClass\n      if (this.el) {\n        let children = this.el.querySelector('.' + likeClass)\n        if (children) {\n          this.el.removeChild(children)\n        }\n        this.el.innerHTML = `${this.el.innerHTML}${el.outerHTML}`\n      }\n    }\n    return el\n  }\n}\n\nexport default Bullet\n","import BaseClass from './baseClass'\nimport { attachEventListener, hasOwnProperty, isNumber } from './utils/util'\nimport { validAreaLineRule } from './utils/validator'\n\n/**\n * @typedef {import('./bullet').Bullet} Bullet\n */\n\n/**\n * [Channel 弹幕轨道控制]\n */\nclass Channel extends BaseClass {\n  /**\n   * @param {import('./danmu').DanmuJs} danmu\n   */\n  constructor(danmu) {\n    super()\n    const self = this\n\n    self.setLogger('channel')\n    self.danmu = danmu\n    self.width = 0\n    self.height = 0\n    self.reset(true)\n    /** @type {Array.<{id: number, queue: {scroll: Array.<Bullet>, top: Array.<Bullet>, bottom: Array.<Bullet>}, operating: {scroll: boolean, top: boolean, bottom: boolean}, bookId: {}}>} */\n    self.channels = []\n    self.updatePos()\n\n    attachEventListener(\n      this.danmu,\n      'bullet_remove',\n      (r) => {\n        self.removeBullet(r.bullet)\n      },\n      'destroy'\n    )\n    attachEventListener(\n      this.danmu,\n      'channel_resize',\n      () => {\n        self.resize()\n      },\n      'destroy'\n    )\n  }\n\n  get direction() {\n    return this.danmu.direction\n  }\n\n  checkAvailableTrack(mode = 'scroll') {\n    const { channels } = this\n    let flag = false\n\n    if (mode === 'scroll') {\n      for (let i = 0, channel; i < channels.length; i++) {\n        channel = channels[i]\n        flag = true\n        if (channel.operating[mode]) {\n          flag = false\n          continue\n        }\n\n        // 当前轨道 - 最后入轨弹幕\n        const curBullet = channel.queue[mode][0]\n        if (curBullet && !curBullet.fullySlideIntoScreen) {\n          flag = false\n          continue\n        }\n        if (flag) {\n          break\n        }\n      }\n    } else {\n      flag = true\n    }\n\n    return flag\n  }\n\n  destroy() {\n    this.logger && this.logger.info('destroy')\n    this.channels.splice(0, this.channels.length)\n    this._cancelResizeTimer()\n\n    // clear prop at end\n    for (const k in this) {\n      if (hasOwnProperty.call(this, k)) {\n        delete this[k]\n      }\n    }\n  }\n\n  reset(isInit = false) {\n    this.logger && this.logger.info('reset')\n    const self = this\n    const { container, bulletBtn } = self.danmu\n\n    self.container = container\n\n    // bullet on waiting room\n    if (bulletBtn && bulletBtn.main) {\n      bulletBtn.main.queue.forEach((item) => {\n        item.remove()\n      })\n    }\n    // bullet on track\n    if (self.channels && self.channels.length > 0) {\n      // eslint-disable-next-line no-extra-semi\n      ;['scroll', 'top', 'bottom'].forEach((key) => {\n        for (let i = 0; i < self.channels.length; i++) {\n          self.channels[i].queue[key].forEach((item) => {\n            item.remove()\n          })\n        }\n      })\n    }\n    if (bulletBtn && bulletBtn.main && bulletBtn.main.data) {\n      bulletBtn.main.data.forEach((item) => {\n        item.attached_ = false\n      })\n    }\n\n    function channelReset() {\n      if (!self.danmu || !self.danmu.container) {\n        return\n      }\n      const { container } = self.danmu\n      let size = container.getBoundingClientRect()\n      self.width = size.width\n      self.height = size.height\n\n      if (self.resetId) {\n        cancelAnimationFrame(self.resetId)\n        self.resetId = null\n      }\n\n      const { channelSize, channelCount, channels } = self._initChannels()\n\n      self.channelCount = channelCount\n      self.channels = channels\n      if (self.direction === 'b2t') {\n        self.channelWidth = channelSize\n      } else {\n        self.channelHeight = channelSize\n      }\n    }\n\n    if (isInit) {\n      this.resetId = requestAnimationFrame(channelReset)\n    } else {\n      channelReset()\n    }\n  }\n\n  getRealOccupyArea() {\n    return {\n      width: this.width,\n      height: this.height\n    }\n  }\n\n  updatePos() {\n    const pos = this.container.getBoundingClientRect()\n\n    this.containerPos = pos\n    this.containerWidth = pos.width\n    this.containerHeight = pos.height\n    this.containerTop = pos.top\n    this.containerBottom = pos.bottom\n    this.containerLeft = pos.left\n    this.containerRight = pos.right\n  }\n\n  /**\n   * Feature:\n   * 1. 长弹幕速度较快，更容易出现追击问题，需要调整Offset\n   * 2. 需要按实时性RealTime展示的弹幕，则不能再用duration来计算速度，这样会产生追击重叠问题\n   *\n   * @param {import('./bullet').Bullet} bullet\n   */\n  addBullet(bullet) {\n    // this.logger && this.logger.info(`addBullet ${bullet.options.txt || '[DOM Element]'}`)\n    const self = this\n    const danmu = this.danmu\n    const channels = this.channels\n    let channelHeight, channelWidth, occupy\n\n    if (self.direction === 'b2t') {\n      channelWidth = this.channelWidth\n      occupy = Math.ceil(bullet.width / channelWidth)\n    } else {\n      channelHeight = this.channelHeight\n      occupy = Math.ceil(bullet.height / channelHeight)\n    }\n    if (occupy > channels.length) {\n      return {\n        result: false,\n        message: `exceed channels.length, occupy=${occupy},channelsSize=${channels.length}`\n      }\n    } else {\n      let flag = true,\n        channel,\n        pos = -1\n      for (let i = 0, max = channels.length; i < max; i++) {\n        if (channels[i].queue[bullet.mode].some((item) => item.id === bullet.id)) {\n          return {\n            result: false,\n            message: `exited, channelOrder=${i},danmu_id=${bullet.id}`\n          }\n        }\n      }\n      if (bullet.mode === 'scroll') {\n        for (let i = 0, max = channels.length - occupy; i <= max; i += occupy) {\n          flag = true\n          for (let j = i; j < i + occupy; j++) {\n            channel = channels[j]\n            if (channel.operating.scroll || (channel.bookId.scroll && channel.bookId.scroll !== bullet.id)) {\n              flag = false\n              break\n            }\n            channel.operating.scroll = true\n\n            // 当前轨道 - 最后入轨弹幕\n            const curBullet = channel.queue.scroll[0]\n\n            if (curBullet) {\n              const curBulletPos = curBullet.el.getBoundingClientRect()\n\n              // 1. 检测最后入轨弹幕是否已经完全飘入容器区域\n              if (self.direction === 'b2t') {\n                if (curBulletPos.bottom >= self.containerPos.bottom) {\n                  flag = false\n                  channel.operating.scroll = false\n                  break\n                }\n              } else {\n                if (curBulletPos.right >= self.containerPos.right) {\n                  flag = false\n                  channel.operating.scroll = false\n                  break\n                }\n              }\n\n              let curS,\n                curV = curBullet.moveV,\n                curT,\n                newV = bullet.moveV,\n                catchS\n              if (self.direction === 'b2t') {\n                curS = curBulletPos.bottom - self.containerTop\n                curT = curS / curV\n\n                catchS = self.containerHeight + bullet.random - curS\n              } else {\n                curS = curBulletPos.right - self.containerLeft\n                curT = curS / curV\n\n                catchS = self.containerWidth + bullet.random - curS\n              }\n\n              // 2. 当前轨道内，新弹幕速度大于最后一个入轨弹幕速度，考虑碰撞问题\n              if (newV > curV) {\n                let catchT = catchS / (newV - curV)\n\n                if (!danmu.config.bOffset) {\n                  danmu.config.bOffset = 0\n                }\n\n                // 3. 相遇时间小于最后弹幕飘出时间\n                if (curT + danmu.config.bOffset >= catchT) {\n                  // 根据前一个弹幕剩余飘出时间，计算新弹幕需要增加的offset\n                  const offset = curT * newV - self.containerPos.width\n                  if (offset > 0) {\n                    bullet.updateOffset(offset + (1 + Math.ceil(5 * Math.random())) /* 防止最后过于接近 */)\n                  }\n                }\n              }\n            }\n            channel.operating.scroll = false\n          }\n          if (flag) {\n            pos = i\n            break\n          }\n        }\n      } else if (bullet.mode === 'top') {\n        for (let i = 0, max = channels.length - occupy; i <= max; i++) {\n          flag = true\n          for (let j = i; j < i + occupy; j++) {\n            if (j > Math.floor(channels.length / 2)) {\n              flag = false\n              break\n            }\n            channel = channels[j]\n            if (channel.operating[bullet.mode]) {\n              flag = false\n              break\n            }\n            if ((channel.bookId[bullet.mode] || bullet.prior) && channel.bookId[bullet.mode] !== bullet.id) {\n              flag = false\n              break\n            }\n            channel.operating[bullet.mode] = true\n            if (channel.queue[bullet.mode].length > 0) {\n              flag = false\n              channel.operating[bullet.mode] = false\n              break\n            }\n            channel.operating[bullet.mode] = false\n          }\n          if (flag) {\n            pos = i\n            break\n          }\n        }\n      } else if (bullet.mode === 'bottom') {\n        for (let i = channels.length - occupy; i >= 0; i--) {\n          flag = true\n          for (let j = i; j < i + occupy; j++) {\n            if (j <= Math.floor(channels.length / 2)) {\n              flag = false\n              break\n            }\n            channel = channels[j]\n            if (channel.operating[bullet.mode]) {\n              flag = false\n              break\n            }\n            if ((channel.bookId[bullet.mode] || bullet.prior) && channel.bookId[bullet.mode] !== bullet.id) {\n              flag = false\n              break\n            }\n            channel.operating[bullet.mode] = true\n            if (channel.queue[bullet.mode].length > 0) {\n              flag = false\n              channel.operating[bullet.mode] = false\n              break\n            }\n            channel.operating[bullet.mode] = false\n          }\n          if (flag) {\n            pos = i\n            break\n          }\n        }\n      }\n\n      if (pos !== -1) {\n        for (let i = pos, max = pos + occupy; i < max; i++) {\n          channel = channels[i]\n          channel.operating[bullet.mode] = true\n          channel.queue[bullet.mode].unshift(bullet)\n          if (bullet.prior) {\n            delete channel.bookId[bullet.mode]\n            self.logger && self.logger.info(i + '号轨道恢复正常使用')\n          }\n          channel.operating[bullet.mode] = false\n        }\n        if (bullet.prior) {\n          self.logger && self.logger.info(bullet.id + '号优先弹幕运行完毕')\n          delete bullet['bookChannelId']\n          if (danmu.player) {\n            let dataList = danmu.bulletBtn.main.data\n            dataList.some(function (item) {\n              if (item.id === bullet.id) {\n                delete item['bookChannelId']\n                return true\n              } else {\n                return false\n              }\n            })\n          }\n        }\n        bullet.channel_id = [pos, occupy]\n        bullet.el.setAttribute('data-line-index', pos + 1)\n\n        if (self.direction === 'b2t') {\n          bullet.top = pos * channelWidth\n          if (self.danmu.config.area && self.danmu.config.area.start) {\n            bullet.top += self.containerWidth * self.danmu.config.area.start\n          }\n        } else {\n          bullet.top = pos * channelHeight\n          if (self.danmu.config.area && self.danmu.config.area.start) {\n            bullet.top += self.containerHeight * self.danmu.config.area.start\n          }\n        }\n        return {\n          result: bullet,\n          message: 'success'\n        }\n      } else {\n        if (bullet.options.realTime) {\n          // 找到应该被删的 danmu\n          let start = 0\n          let deleteIndex = -1\n          let deleteItem = null\n          self.danmu.bulletBtn.main.queue.forEach((item, index) => {\n            if (\n              !item.prior &&\n              !item.options.realTime &&\n              item.el &&\n              item.el.getBoundingClientRect().left > self.containerPos.right &&\n              item.start >= start\n            ) {\n              start = item.start\n              deleteIndex = index\n              deleteItem = item\n            }\n          })\n          if (deleteItem) {\n            deleteItem.remove()\n            self.removeBullet(deleteItem)\n            self.danmu.bulletBtn.main.queue.splice(deleteIndex, 1)\n            bullet.channel_id = deleteItem.channel_id\n            for (\n              let i = deleteItem.channel_id[0], max = deleteItem.channel_id[0] + deleteItem.channel_id[1];\n              i < max;\n              i++\n            ) {\n              channel = channels[i]\n              channel.operating[bullet.mode] = true\n              channel.queue[bullet.mode].unshift(bullet)\n              if (bullet.prior) {\n                delete channel.bookId[bullet.mode]\n              }\n              channel.operating[bullet.mode] = false\n            }\n            bullet.top = deleteItem.top\n            if (self.danmu.config.area && self.danmu.config.area.start) {\n              bullet.top += self.containerHeight * self.danmu.config.area.start\n            }\n            return {\n              result: bullet,\n              message: 'success'\n            }\n          }\n        }\n\n        if (bullet.prior) {\n          if (!bullet.bookChannelId && !self.danmu.live) {\n            pos = -1\n            for (let i = 0, max = channels.length - occupy; i <= max; i++) {\n              flag = true\n              for (let j = i; j < i + occupy; j++) {\n                if (channels[j].bookId[bullet.mode]) {\n                  flag = false\n                  break\n                }\n              }\n              if (flag) {\n                pos = i\n                break\n              }\n            }\n            if (pos !== -1) {\n              for (let j = pos; j < pos + occupy; j++) {\n                channels[j].bookId[bullet.mode] = bullet.id\n                self.logger && self.logger.info(j + '号轨道被' + bullet.id + '号优先弹幕预定')\n              }\n              let nextAddTime = 2\n              if (danmu.player) {\n                let dataList = danmu.bulletBtn.main.data\n                dataList.some(function (item) {\n                  if (item.id === bullet.id) {\n                    self.logger && self.logger.info(bullet.id + '号优先弹幕将于' + nextAddTime + '秒后再次请求注册')\n                    item.start += nextAddTime * 1000\n                    item.bookChannelId = [pos, occupy]\n                    self.logger && self.logger.info(`${bullet.id}号优先弹幕预定了${pos}~${pos + occupy - 1}号轨道`)\n                    return true\n                  } else {\n                    return false\n                  }\n                })\n              }\n            }\n          } else {\n            let nextAddTime = 2\n            if (danmu.player) {\n              let dataList = danmu.bulletBtn.main.data\n              dataList.some(function (item) {\n                if (item.id === bullet.id) {\n                  self.logger && self.logger.info(bullet.id + '号优先弹幕将于' + nextAddTime + '秒后再次请求注册')\n                  item.start += nextAddTime * 1000\n                  return true\n                } else {\n                  return false\n                }\n              })\n            }\n          }\n        }\n\n        return {\n          result: false,\n          message: 'no surplus will right'\n        }\n      }\n    }\n  }\n  removeBullet(bullet) {\n    this.logger && this.logger.info(`removeBullet ${bullet.options.txt || '[DOM Element]'}`)\n\n    let channels = this.channels\n    let channelId = bullet.channel_id\n    let channel\n    for (let i = channelId[0], max = channelId[0] + channelId[1]; i < max; i++) {\n      channel = channels[i]\n      if (channel) {\n        channel.operating[bullet.mode] = true\n        let i = -1\n        channel.queue[bullet.mode].some((item, index) => {\n          if (item.id === bullet.id) {\n            i = index\n            return true\n          } else {\n            return false\n          }\n        })\n        if (i > -1) {\n          channel.queue[bullet.mode].splice(i, 1)\n        }\n        channel.operating[bullet.mode] = false\n      }\n    }\n    if (bullet.options.loop) {\n      this.danmu.bulletBtn.main.playedData.push(bullet.options)\n    }\n  }\n\n  resizeSync() {\n    this.resize(true)\n  }\n\n  /**\n   * @private\n   */\n  _initChannels() {\n    if (!this.danmu || !this.danmu.config) {\n      return\n    }\n    const self = this\n    const { config } = self.danmu\n    const channelSize = config.channelSize || (/mobile/gi.test(navigator.userAgent) ? 10 : 12)\n    /** @type {number} */\n    let channelCount\n\n    if (config.area) {\n      const { lines, start, end } = config.area\n      if (validAreaLineRule(lines)) {\n        channelCount = lines\n\n        if (self.direction === 'b2t') {\n          self.width = channelCount * channelSize\n        } else {\n          self.height = channelCount * channelSize\n        }\n      } else {\n        if (start >= 0 && end >= start) {\n          const modulus = end - start\n          if (self.direction === 'b2t') {\n            self.width = Math.floor(self.width * modulus)\n          } else {\n            self.height = Math.floor(self.height * modulus)\n          }\n        }\n      }\n    }\n\n    if (!isNumber(channelCount)) {\n      if (self.direction === 'b2t') {\n        channelCount = Math.floor(self.width / channelSize)\n      } else {\n        channelCount = Math.floor(self.height / channelSize)\n      }\n    }\n\n    let channels = []\n    for (let i = 0; i < channelCount; i++) {\n      channels[i] = {\n        id: i,\n        queue: {\n          scroll: [],\n          top: [],\n          bottom: []\n        },\n        operating: {\n          scroll: false,\n          top: false,\n          bottom: false\n        },\n        bookId: {}\n      }\n    }\n\n    return {\n      channelSize,\n      channelCount,\n      channels\n    }\n  }\n\n  resize(sync = false) {\n    this.logger && this.logger.info('resize')\n    let self = this\n    if (self.resizing) {\n      return\n    }\n    self.resizing = true\n\n    function setItem(channels, i) {\n      channels[i] = {\n        id: i,\n        queue: {\n          scroll: [],\n          top: [],\n          bottom: []\n        },\n        operating: {\n          scroll: false,\n          top: false,\n          bottom: false\n        },\n        bookId: {}\n      }\n    }\n\n    function updateChannelsLower(channels, fontSize) {\n      function updateTopScrollQueue(i) {\n        const items = ['scroll', 'top']\n        items.forEach((key_) => {\n          self.channels[i].queue[key_].forEach((item) => {\n            if (item.el) {\n              channels[i].queue[key_].push(item)\n            }\n          })\n        })\n      }\n      function updateBottomQueue(i) {\n        self.channels[i].queue['bottom'].forEach((item) => {\n          if (item.el) {\n            channels[i + channels.length - self.channels.length].queue['bottom'].push(item)\n            if (item.channel_id[0] + item.channel_id[1] - 1 === i) {\n              let channel_id = [].concat(item.channel_id)\n              item.channel_id = [channel_id[0] - self.channels.length + channels.length, channel_id[1]]\n              item.top = item.channel_id[0] * fontSize\n              if (self.danmu.config.area && self.danmu.config.area.start) {\n                item.top += self.containerHeight * self.danmu.config.area.start\n              }\n              item.topInit()\n            }\n          }\n        })\n      }\n\n      for (let i = 0; i < self.channels.length; i++) {\n        setItem(channels, i)\n        updateTopScrollQueue(i)\n        updateBottomQueue(i)\n      }\n\n      for (let i = 0; i < channels.length; i++) {\n        const items = ['scroll', 'top', 'bottom']\n        items.forEach((key) => {\n          channels[i].queue[key].forEach((item) => {\n            item.resized = false\n          })\n        })\n      }\n      self.channels = channels\n      if (self.direction === 'b2t') {\n        self.channelWidth = fontSize\n      } else {\n        self.channelHeight = fontSize\n      }\n    }\n\n    function updateChannelsGreater(channels, fontSize) {\n      const items = ['scroll', 'top', 'bottom']\n\n      for (let i = 0; i < channels.length; i++) {\n        setItem(channels, i)\n\n        items.forEach((key) => {\n          if (key === 'top' && i > Math.floor(channels.length / 2)) {\n            //\n          } else if (key === 'bottom' && i <= Math.floor(channels.length / 2)) {\n            //\n          } else {\n            let num = key === 'bottom' ? i - channels.length + self.channels.length : i\n            self.channels[num].queue[key].forEach((item, index) => {\n              if (!item.el) {\n                return\n              }\n              channels[i].queue[key].push(item)\n              if (key === 'bottom') {\n                if (item.channel_id[0] + item.channel_id[1] - 1 === num) {\n                  let channel_id = [].concat(item.channel_id)\n                  item.channel_id = [channel_id[0] - self.channels.length + channels.length, channel_id[1]]\n                  item.top = item.channel_id[0] * fontSize\n                  if (self.danmu.config.area && self.danmu.config.area.start) {\n                    item.top += self.containerHeight * self.danmu.config.area.start\n                  }\n                  item.topInit()\n                }\n              }\n              self.channels[num].queue[key].splice(index, 1)\n            })\n          }\n        })\n      }\n      for (let i = 0; i < channels.length; i++) {\n        items.forEach((key) => {\n          channels[i].queue[key].forEach((item) => {\n            item.resized = false\n          })\n        })\n      }\n      self.channels = channels\n\n      if (self.direction === 'b2t') {\n        self.channelWidth = fontSize\n      } else {\n        self.channelHeight = fontSize\n      }\n    }\n\n    function layout() {\n      const { container, bulletBtn } = self.danmu\n\n      self.container = container\n      self.updatePos()\n      self._cancelResizeTimer()\n\n      if (bulletBtn.main.data) {\n        bulletBtn.main.data.forEach((item) => {\n          if (item.bookChannelId) {\n            delete item['bookChannelId']\n            self.logger && self.logger.info('resize导致' + item.id + '号优先弹幕预定取消')\n          }\n        })\n      }\n      self.logger && self.logger.info('resize导致所有轨道恢复正常使用')\n      self.width = self.containerWidth\n      self.height = self.containerHeight\n\n      const { channelSize, channels } = self._initChannels()\n\n      if (self.channels) {\n        if (self.channels.length <= channels.length) {\n          updateChannelsLower(channels, channelSize)\n        } else {\n          updateChannelsGreater(channels, channelSize)\n        }\n      }\n      self.resizing = false\n    }\n\n    if (sync) {\n      layout()\n    } else {\n      this._cancelResizeTimer()\n      this.resizeId = requestAnimationFrame(layout)\n    }\n  }\n\n  /**\n   * @private\n   */\n  _cancelResizeTimer() {\n    if (this.resizeId) {\n      cancelAnimationFrame(this.resizeId)\n      this.resizeId = null\n    }\n  }\n}\n\nexport default Channel\n","export function validAreaLineRule(line) {\n  return typeof line === 'number' && line >= 0 && Number.isInteger(line)\n}\n","import BaseClass from './baseClass'\nimport Bullet from './bullet'\nimport Channel from './channel'\nimport { hasOwnProperty } from './utils/util'\n\n// 单次尝试入轨弹幕数量越多，长任务及CPU耗时越多\nconst MAX_TRY_COUNT = 0\n\n/**\n * @typedef {import('./baseClass').CommentData} CommentData\n */\n\n/**\n * [Main 弹幕主进程]\n * @type {Class}\n */\nclass Main extends BaseClass {\n  /**\n   * @param {import('./danmu').DanmuJs} danmu\n   */\n  constructor(danmu) {\n    super()\n    this.setLogger('main')\n    this.danmu = danmu\n    this.container = danmu.container\n    this.channel = new Channel(danmu) // 弹幕轨道实例\n\n    /**\n     * @type {Array<CommentData>}\n     */\n    this.data = [].concat(danmu.config.comments)\n    this.playedData = []\n\n    /**\n     * @type {Array<Bullet>}\n     */\n    this.queue = [] // 等待播放的弹幕队列\n    this.timer = null // 弹幕动画定时器句柄\n\n    /**\n     * 弹幕播放速率\n     * @type {number}\n     */\n    this.playRate = 1\n\n    /**\n     * @type {'normal'|'stop'}\n     */\n    this.retryStatus = 'normal'\n    this.interval = danmu.config.interval // 弹幕队列缓存间隔\n    /**\n     * @type {'idle' | 'paused' | 'playing' | 'closed'}\n     */\n    this._status = 'idle' // 当前弹幕正在闲置\n    /**\n     * @type {Array<[HTMLElement, string, Function]>}\n     */\n    this._events = []\n\n    this._bindEvents()\n  }\n\n  get status() {\n    return this._status\n  }\n\n  destroy() {\n    this.logger && this.logger.info('destroy')\n    this._unbindEvents()\n    this._cancelTick()\n    this.channel && this.channel.destroy()\n    this.data = []\n    for (let k in this) {\n      delete this[k]\n    }\n  }\n\n  /**\n   * @private\n   */\n  _bindEvents() {\n    const { danmu, container } = this\n    this._unbindEvents()\n\n    /**\n     * 在渲染队列中移除已经展示完的弹幕对象\n     * @param {{\n     *   bullet: Bullet\n     * }} data\n     */\n    const updateQueue = ({ bullet }) => {\n      const { data, queue } = this\n      queue.some((item, index) => {\n        if (item.id === bullet.id) {\n          queue.splice(index, 1)\n          return true\n        } else {\n          return false\n        }\n      })\n      data.some((item) => {\n        if (item.id === bullet.id) {\n          item.attached_ = false\n          return true\n        } else {\n          return false\n        }\n      })\n    }\n    this._events.push([danmu, 'bullet_remove', updateQueue])\n\n    /**\n     * @param {TransitionEvent} e\n     */\n    const onTransitionEnd = (e) => {\n      const bullet = this._getBulletByEvt(e)\n\n      if (bullet) {\n        bullet.status = 'end'\n        bullet.remove(false)\n      }\n    }\n    this._events.push([container, 'transitionend', onTransitionEnd])\n\n    if (danmu.config.mouseControl || danmu.config.mouseEnterControl) {\n      /**\n       * @param {MouseEvent} e\n       */\n      const onMouseover = (e) => {\n        const { danmu } = this\n        let bullet\n\n        if (!danmu || (danmu.mouseControl && danmu.config.mouseControlPause)) {\n          return\n        }\n\n        bullet = this._getBulletByEvt(e)\n\n        if (bullet) {\n          if (bullet.status !== 'waiting' && bullet.status !== 'end') {\n            danmu.emit('bullet_hover', {\n              bullet: bullet,\n              event: e\n            })\n          }\n        }\n      }\n      this._events.push([container, 'mouseover', onMouseover])\n    }\n\n    this._events.forEach((item) => {\n      if (item[0].addEventListener) {\n        item[0].addEventListener(item[1], item[2], false)\n      } else if (item[0].on) {\n        item[0].on(item[1], item[2])\n      }\n    })\n  }\n\n  /**\n   * @private\n   */\n  _unbindEvents() {\n    if (this._events.length) {\n      this._events.forEach((item) => {\n        if (item[0].removeEventListener) {\n          item[0].removeEventListener(item[1], item[2], false)\n        } else if (item[0].off) {\n          item[0].off(item[1], item[2])\n        }\n      })\n      this._events = []\n    }\n  }\n\n  /**\n   * @private\n   */\n  _cancelTick() {\n    if (this.handleTimer) {\n      clearTimeout(this.handleTimer)\n      this.handleTimer = null\n    }\n  }\n\n  /**\n   * @private\n   */\n  _startTick() {\n    const self = this\n    self.retryStatus = 'normal'\n\n    self._cancelTick()\n    self.sortData()\n\n    function dataHandle() {\n      if (self._status === 'closed' && self.retryStatus === 'stop') {\n        self._cancelTick()\n        return\n      }\n      if (self._status === 'playing') {\n        self.readData()\n        self.dataHandle()\n      }\n      if (self.retryStatus !== 'stop' || self._status === 'paused') {\n        self.handleTimer = setTimeout(dataHandle, 250)\n      }\n    }\n    dataHandle()\n  }\n  // 启动弹幕渲染主进程\n  start() {\n    this.logger && this.logger.info('start')\n    const self = this\n\n    if (self._status === 'playing') {\n      return\n    }\n\n    self._status = 'playing'\n    self.queue = []\n    self.container.innerHTML = ''\n    self.channel.reset()\n    self._startTick()\n  }\n  stop() {\n    this.logger && this.logger.info('stop')\n    const self = this\n\n    if (self._status === 'closed') {\n      return\n    }\n\n    self._status = 'closed'\n    self.retryStatus = 'stop'\n    self.queue = []\n\n    if (self.container) {\n      self.container.innerHTML = ''\n    }\n    self.channel && self.channel.reset()\n    self._cancelTick()\n  }\n  clear() {\n    this.logger && this.logger.info('clear')\n    this.channel && this.channel.reset()\n    this.data = []\n    this.queue = []\n    if (this.container) {\n      this.container.innerHTML = ''\n    }\n  }\n  play() {\n    if (this._status === 'closed') {\n      this.logger && this.logger.info('play ignored')\n      return\n    }\n\n    this.logger && this.logger.info('play')\n    this._status = 'playing'\n    let channels = this.channel.channels\n    if (channels && channels.length > 0) {\n      // eslint-disable-next-line no-extra-semi\n      ;['scroll', 'top', 'bottom'].forEach((key) => {\n        this.queue.forEach((item) => {\n          item.startMove()\n          item.resized = true\n        })\n        for (let i = 0; i < channels.length; i++) {\n          channels[i].queue[key].forEach((item) => {\n            item.resized = false\n          })\n        }\n      })\n    }\n    this._startTick()\n  }\n  pause() {\n    if (this._status === 'closed') {\n      this.logger && this.logger.info('pause ignored')\n      return\n    }\n\n    this.logger && this.logger.info('pause')\n    this._status = 'paused'\n    this._cancelTick()\n\n    let channels = this.channel.channels\n    if (channels && channels.length > 0) {\n      // ['scroll', 'top', 'bottom'].forEach( key => {\n      //   for (let i = 0; i < channels.length; i++) {\n      //     channels[i].queue[key].forEach(item => {\n      //       item.pauseMove()\n      //     })\n      //   }\n      // })\n      this.queue.forEach((item) => {\n        item.pauseMove()\n      })\n    }\n  }\n  dataHandle() {\n    const self = this\n    if (this._status === 'paused' || this._status === 'closed') {\n      return\n    }\n    if (self.queue.length) {\n      self.queue.forEach((item) => {\n        if (item.status === 'waiting') {\n          item.startMove()\n        }\n      })\n    }\n  }\n  readData() {\n    const self = this\n    const { danmu, interval, channel } = self,\n      player = danmu.player\n    let result,\n      /**\n       * @type {Bullet}\n       */\n      bullet,\n      /**\n       * @type {Array<CommentData>}\n       */\n      list\n\n    if (!danmu.isReady || !danmu.main) return\n\n    if (player) {\n      const currentTime = player.currentTime ? Math.floor(player.currentTime * 1000) : 0\n\n      list = self.data.filter((item) => {\n        if (!item.start && danmu.hideArr.indexOf(item.mode) < 0) {\n          if (!item.color || danmu.hideArr.indexOf('color') < 0) {\n            item.start = currentTime\n          }\n        }\n        return (\n          !item.attached_ &&\n          danmu.hideArr.indexOf(item.mode) < 0 &&\n          (!item.color || danmu.hideArr.indexOf('color') < 0) &&\n          item.start - interval <= currentTime &&\n          currentTime <= item.start + interval\n        )\n      })\n\n      if (danmu.config.highScorePriority) {\n        // 高积分弹幕优先展示\n        list.sort((prev, cur) => (cur.prior && !prev.prior) || (cur.score || -1) - (prev.score || -1))\n      }\n\n      if (danmu.live) {\n        self.data = []\n      }\n    } else {\n      list = self.data.splice(0, 1)\n      if (list.length === 0) list = self.playedData.splice(0, 1)\n    }\n\n    if (list.length > 0 && channel.checkAvailableTrack(list[0].mode)) {\n      // 提前更新轨道位置信息, 减少Bullet频繁读取容器dom信息\n      channel.updatePos()\n\n      let tryCount = MAX_TRY_COUNT\n\n      ListLoop: for (let i = 0, item; i < list.length; i++) {\n        item = list[i]\n        if (self.forceDuration && self.forceDuration !== item.duration) {\n          item.duration = self.forceDuration\n        }\n        bullet = new Bullet(danmu, item)\n        if (!bullet.bulletCreateFail) {\n          bullet.attach()\n          item.attached_ = true\n          result = channel.addBullet(bullet)\n\n          if (result.result) {\n            self.queue.push(bullet)\n            bullet.topInit()\n\n            tryCount = MAX_TRY_COUNT\n          } else {\n            bullet.detach()\n            for (let k in bullet) {\n              if (hasOwnProperty.call(bullet, k)) {\n                delete bullet[k]\n              }\n            }\n            bullet = null\n            item.attached_ = false\n            if (item.noDiscard) {\n              if (item.prior) {\n                self.data.unshift(item)\n              } else {\n                self.data.push(item)\n              }\n            }\n\n            if (tryCount === 0) {\n              break ListLoop\n            } else {\n              tryCount--\n            }\n          }\n        } else {\n          if (tryCount === 0) {\n            break ListLoop\n          } else {\n            tryCount--\n          }\n        }\n      }\n    }\n  }\n  sortData() {\n    this.data.sort((prev, cur) => (prev.start || -1) - (cur.start || -1))\n  }\n\n  keepPoolWatermark() {\n    const { config, player } = this.danmu\n    const { data } = this\n    const priorComments = []\n    let deleteCount = 0\n\n    // Support data pool to control watermark automatically\n    if (typeof config.maxCommentsLength === 'number' && data.length > config.maxCommentsLength) {\n      deleteCount = data.length - config.maxCommentsLength\n\n      for (let i = 0, comment; i < deleteCount; i++) {\n        comment = data[i]\n        if (comment.prior && !comment.attached_) {\n          priorComments.push(data[i])\n        }\n      }\n    } else if (config.dropStaleComments && player && player.currentTime) {\n      const currentTime = Math.floor(player.currentTime * 1000),\n        timePoint = currentTime - config.interval\n\n      if (timePoint > 0) {\n        for (let i = 0, comment; i < data.length; i++) {\n          comment = data[i]\n          if (comment.prior && !comment.attached_) {\n            priorComments.push(data[i])\n          }\n\n          if (comment.start > timePoint) {\n            deleteCount = i\n            break\n          }\n        }\n      }\n    }\n\n    if (deleteCount > 0) {\n      data.splice(0, deleteCount)\n\n      // Keep high-priority comments data.\n      this.data = priorComments.concat(data)\n    }\n  }\n\n  /**\n   * @param {EventTarget} e\n   * @private\n   */\n  _getBulletByEvt(e) {\n    const target = e.target || e.srcElement\n    const { queue } = this\n\n    let bullet\n    for (let i = 0, item; i < queue.length; i++) {\n      item = queue[i]\n      if (item && item.el && (item.el === target || item.el.contains(target))) {\n        bullet = item\n        break\n      }\n    }\n\n    return bullet\n  }\n}\n\nexport default Main\n","import BaseClass from './baseClass'\nimport Main from './main'\nimport { createDom, hasOwnProperty } from './utils/util'\n\nclass Control extends BaseClass {\n  /**\n   * @param {import('./danmu').DanmuJs} danmu\n   */\n  constructor(danmu) {\n    super()\n    this.setLogger('control')\n    this.danmu = danmu\n    this.main = new Main(danmu)\n    if (!danmu.config.defaultOff) {\n      this.main.start()\n    }\n  }\n\n  createSwitch(state = true) {\n    this.logger && this.logger.info('createSwitch')\n    this.switchBtn = createDom(\n      'dk-switch',\n      '<span class=\"txt\">弹</span>',\n      {},\n      `danmu-switch ${state ? 'danmu-switch-active' : ''}`\n    )\n    return this.switchBtn\n  }\n\n  destroy() {\n    this.logger && this.logger.info('destroy')\n    this.main.destroy()\n    for (const k in this) {\n      if (hasOwnProperty.call(this, k)) {\n        delete this[k]\n      }\n    }\n  }\n}\n\nexport default Control\n","import { hasOwnProperty, styleUtil } from './utils/util'\n\nexport default class RecyclableDOMList {\n  constructor(options) {\n    options = {\n      initDOM: () => document.createElement('div'),\n      initSize: 10\n    }\n    this.init(options)\n  }\n\n  init(options) {\n    this.idleList = []\n    this.usingList = []\n    this._id = 0\n    this.options = options\n    this._expand(options.initSize)\n  }\n\n  use() {\n    if (!this.idleList.length) {\n      this._expand(1)\n    }\n    const firseIdle = this.idleList.shift()\n    this.usingList.push(firseIdle)\n    return firseIdle\n  }\n\n  unused(dom) {\n    const idx = this.usingList.indexOf(dom)\n    if (idx < 0) {\n      return\n    }\n    this.usingList.splice(idx, 1)\n    dom.style.opacity = 0\n    this.idleList.push(dom)\n  }\n\n  _expand(size) {\n    for (let i = 0; i < size; i++) {\n      this.idleList.push(this.options.initDOM(this._id++))\n    }\n  }\n\n  destroy() {\n    for (let i = 0; i < this.idleList.length; i++) {\n      this.idleList[i].innerHTML = ''\n      this.idleList[i].textcontent = ''\n      this.clearElementStyle(this.idleList[i])\n    }\n    for (let i = 0; i < this.usingList.length; i++) {\n      this.usingList[i].innerHTML = ''\n      this.usingList[i].textcontent = ''\n      this.clearElementStyle(this.usingList[i])\n    }\n    for (let k in this) {\n      if (hasOwnProperty.call(this, k)) {\n        delete this[k]\n      }\n    }\n  }\n\n  clearElementStyle(element) {\n    const ua = typeof window !== 'undefined' ? window.navigator.userAgent : null\n    if (!ua) {\n      return\n    }\n    if (ua.indexOf('MSIE ') > -1 || ua.indexOf('Trident/') > -1) {\n      styleUtil(element, 'transform', 'none')\n    } else {\n      element.setAttribute('style', '')\n    }\n  }\n}\n","import { throttle } from './utils/util'\n\nclass ResizeObserverWrapper {\n  constructor() {\n    this.__handlers = []\n    if (typeof ResizeObserver === 'undefined') {\n      return\n    }\n    try {\n      this.observer = new ResizeObserver(\n        throttle((entries) => {\n          this.__trigger(entries)\n        }, 100)\n      )\n      // eslint-disable-next-line no-empty\n    } catch (err) {}\n  }\n\n  addObserver(target, handler) {\n    if (!this.observer || !target) {\n      return\n    }\n    this.observer && this.observer.observe(target)\n    const { __handlers } = this\n    let index = -1\n    for (let i = 0; i < __handlers.length; i++) {\n      if (__handlers[i] && target === __handlers[i].target) {\n        index = i\n      }\n    }\n    if (index > -1) {\n      this.__handlers[index].handler.push(handler)\n    } else {\n      this.__handlers.push({\n        target,\n        handler: [handler]\n      })\n    }\n  }\n\n  unObserver(target) {\n    if (!target) {\n      return\n    }\n    let i = -1\n    this.__handlers.map((item, index) => {\n      if (target === item.target) {\n        i = index\n      }\n    })\n    this.observer && this.observer.unobserve(target)\n    i > -1 && this.__handlers.splice(i, 1)\n  }\n\n  destroyObserver() {\n    this.observer && this.observer.disconnect()\n    this.observer = null\n    this.__handlers = null\n  }\n\n  __runHandler(target) {\n    const { __handlers } = this\n    for (let i = 0; i < __handlers.length; i++) {\n      if (__handlers[i] && target === __handlers[i].target) {\n        __handlers[i].handler &&\n          __handlers[i].handler.map((handler) => {\n            try {\n              handler()\n            } catch (error) {\n              console.error(error)\n            }\n          })\n        break\n      }\n    }\n  }\n\n  __trigger(entries) {\n    entries.map((item) => {\n      this.__runHandler(item.target)\n    })\n  }\n}\n\nconst resizeObserver = new ResizeObserverWrapper()\n\nfunction addObserver(target, handler) {\n  resizeObserver.addObserver(target, handler)\n}\n\nfunction unObserver(target, handler) {\n  resizeObserver.unObserver(target, handler)\n}\n\nfunction destroyObserver(target, handler) {\n  resizeObserver.destroyObserver(target, handler)\n}\n\nexport { addObserver, unObserver, destroyObserver }\n","import EventEmitter from 'event-emitter'\nimport BaseClass from './baseClass'\nimport Control from './control'\nimport RecyclableDomList from './domRecycle'\nimport { addObserver, unObserver } from './resizeObserver'\nimport { addClass, deepCopy, isNumber, styleUtil } from './utils/util'\n\n/**\n * @typedef {import('./baseClass').CommentData} CommentData\n */\n/**\n * @typedef {import('./baseClass').GlobalHooks} GlobalHooks\n */\n\nexport class DanmuJs extends BaseClass {\n  constructor(options) {\n    super()\n\n    // logger\n    this.setLogger('danmu')\n    this.logger && this.logger.info(`danmu.js version: ${__VERSION__}`)\n\n    // configure\n    const config = (this.config = {\n      overlap: false,\n      area: {\n        start: 0,\n        end: 1,\n        lines: undefined\n      },\n      hooks: undefined,\n      live: false,\n      comments: [],\n      direction: 'r2l',\n      needResizeObserver: false,\n      dropStaleComments: false,\n      channelSize: undefined,\n      maxCommentsLength: undefined,\n      bulletOffset: undefined,\n      interval: 2000,\n      highScorePriority: true, // 高积分优先展示\n      chaseEffect: true // 滚动弹幕追逐效果\n    })\n    deepCopy(config, options)\n\n    // Add event subscription handler\n    EventEmitter(this)\n\n    /**\n     * @type {GlobalHooks}\n     */\n    this.globalHooks = {}\n    if (config.hooks) {\n      this.hooks(config.hooks)\n    }\n\n    this.hideArr = []\n    this.recycler = new RecyclableDomList()\n\n    // freezed comment\n    this.freezeId = null\n\n    config.comments.forEach((comment) => {\n      comment.duration = comment.duration ? comment.duration : 5000\n      if (!comment.mode) {\n        comment.mode = 'scroll'\n      }\n    })\n\n    /**\n     * @type {HTMLElement}\n     */\n    this.container = config.container && config.container.nodeType === 1 ? config.container : null\n    if (!this.container) {\n      // eslint-disable-next-line quotes\n      this.emit('error', \"container id can't be empty\")\n      return false\n    }\n    if (config.containerStyle) {\n      const style = config.containerStyle\n      Object.keys(style).forEach((key) => {\n        this.container.style[key] = style[key]\n      })\n    }\n    addClass(this.container, 'danmu')\n    this.live = config.live\n    this.player = config.player\n    this.direction = config.direction\n    this.bulletBtn = new Control(this)\n    this.main = this.bulletBtn.main\n    this.isReady = true\n    this.emit('ready')\n    this.logger && this.logger.info('ready')\n    this.addResizeObserver()\n  }\n\n  get status() {\n    return this.main.status\n  }\n\n  get state() {\n    const main = this.main\n    return {\n      status: main.status,\n      comments: main.data,\n      bullets: main.queue,\n      displayArea: main.channel.getRealOccupyArea()\n    }\n  }\n\n  get containerPos() {\n    return this.main.channel.containerPos\n  }\n\n  /**\n   * @param {GlobalHooks} options\n   */\n  hooks(options) {\n    deepCopy(this.globalHooks, options)\n  }\n\n  addResizeObserver() {\n    if (this.config.needResizeObserver && this.container) {\n      addObserver(this.container, () => {\n        this.logger && this.logger.info('needResizeObserver')\n        this.resize()\n      })\n    }\n  }\n\n  start() {\n    this.logger && this.logger.info('start')\n    this.main && this.main.start()\n  }\n\n  pause() {\n    this.logger && this.logger.info('pause')\n    this.main && this.main.pause()\n  }\n\n  play() {\n    this.logger && this.logger.info('play')\n    this.main && this.main.play()\n  }\n\n  stop() {\n    this.logger && this.logger.info('stop')\n    this.main && this.main.stop()\n  }\n\n  clear() {\n    this.logger && this.logger.info('clear')\n    this.main && this.main.clear()\n  }\n\n  destroy() {\n    unObserver(this.container)\n    this.logger && this.logger.info('destroy')\n    this.stop()\n    this.bulletBtn && this.bulletBtn.destroy()\n    this.recycler && this.recycler.destroy()\n    for (let k in this) {\n      delete this[k]\n    }\n    this.emit('destroy')\n  }\n\n  /**\n   * @param {CommentData} comment\n   */\n  sendComment(comment) {\n    const { main, logger } = this\n    logger && logger.info(`sendComment: ${comment.txt || '[DOM Element]'}`)\n\n    if (!main) return\n\n    // Set a default bullet show time\n    if (!comment.duration) {\n      comment.duration = 15000\n    }\n\n    if (comment && comment.id && comment.duration && (comment.el || comment.elLazyInit || comment.txt)) {\n      comment.duration = comment.duration ? comment.duration : 5000\n      if (!comment.style) {\n        comment.style = {\n          opacity: undefined,\n          fontSize: undefined\n        }\n      }\n      if (comment.style) {\n        if (this.opacity && this.opacity !== comment.style.opacity) {\n          comment.style.opacity = this.opacity\n        }\n        if (this.fontSize && this.fontSize !== comment.style.fontSize) {\n          comment.style.fontSize = this.fontSize\n        }\n      }\n      if (comment.prior || comment.realTime) {\n        main.data.unshift(comment)\n        if (comment.realTime) {\n          main.readData()\n          main.dataHandle()\n        }\n      } else {\n        main.data.push(comment)\n      }\n\n      main.sortData()\n      main.keepPoolWatermark()\n    }\n  }\n\n  setCommentID(oldID, newID) {\n    this.logger && this.logger.info(`setCommentID: oldID ${oldID} newID ${newID}`)\n    if (oldID && newID) {\n      this.main.data.some((data) => {\n        if (data.id === oldID) {\n          data.id = newID\n          return true\n        } else {\n          return false\n        }\n      })\n      this.main.queue.some((item) => {\n        if (item.id === oldID) {\n          item.id = newID\n          item.pauseMove()\n          this.main.status !== 'paused' && item.startMove()\n          return true\n        } else {\n          return false\n        }\n      })\n    }\n  }\n\n  setCommentDuration(id, duration) {\n    this.logger && this.logger.info(`setCommentDuration: id ${id} duration ${duration}`)\n\n    if (id && duration) {\n      duration = duration ? duration : 5000\n      this.main.data.some((data) => {\n        if (data.id === id) {\n          data.duration = duration\n          return true\n        } else {\n          return false\n        }\n      })\n      this.main.queue.some((item) => {\n        if (item.id === id) {\n          item.duration = duration\n          item.pauseMove()\n          this.main.status !== 'paused' && item.startMove()\n          return true\n        } else {\n          return false\n        }\n      })\n    }\n  }\n\n  setCommentLike(id, like) {\n    this.logger && this.logger.info(`setCommentLike: id ${id} like ${like}`)\n    if (id && like) {\n      this.main.data.some((data) => {\n        if (data.id === id) {\n          data.like = like\n          return true\n        } else {\n          return false\n        }\n      })\n      this.main.queue.some((item) => {\n        if (item.id === id) {\n          item.pauseMove()\n          item.setLikeDom(like.el, like.style)\n          if (item.danmu.main.status !== 'paused') {\n            item.startMove()\n          }\n          return true\n        } else {\n          return false\n        }\n      })\n    }\n  }\n\n  restartComment(id) {\n    this.logger && this.logger.info(`restartComment: id ${id}`)\n\n    if (id) {\n      const self = this\n      const main = self.main\n\n      self._releaseCtrl(id)\n\n      if (main.status === 'closed') {\n        // The main process has been stopped, there is no need to drive the barrage to run\n        return\n      }\n\n      main.queue.some((item) => {\n        if (item.id === id) {\n          if (main.status !== 'paused') {\n            item.startMove(true)\n          } else {\n            item.status = 'paused'\n          }\n          return true\n        } else {\n          return false\n        }\n      })\n    }\n  }\n\n  /**\n   * @private\n   */\n  _releaseCtrl(id) {\n    const self = this\n\n    if (self.freezeId && id === self.freezeId) {\n      self.mouseControl = false\n      self.freezeId = null\n    }\n  }\n\n  /**\n   * @private\n   */\n  _freezeCtrl(id) {\n    this.mouseControl = true\n    this.freezeId = id\n  }\n\n  freezeComment(id) {\n    this.logger && this.logger.info(`freezeComment: id ${id}`)\n\n    if (id) {\n      const self = this\n\n      self._freezeCtrl(id)\n\n      self.main.queue.some((item) => {\n        if (item.id === id) {\n          item.status = 'forcedPause'\n          item.pauseMove()\n          if (item.el && item.el.style) {\n            styleUtil(item.el, 'zIndex', 10)\n          }\n          return true\n        } else {\n          return false\n        }\n      })\n    }\n  }\n\n  removeComment(id) {\n    this.logger && this.logger.info(`removeComment: id ${id}`)\n\n    if (id) {\n      const self = this\n      const { main } = self\n      \n      self._releaseCtrl(id)\n\n      // remove bullet from the queue list\n      main.queue = main.queue.filter((item) => {\n        if (item.id === id) {\n          item.remove()\n          return false\n        } else {\n          return true\n        }\n      })\n\n      // remove comment from the data list\n      main.data = main.data.filter((item) => item.id !== id)\n    }\n  }\n\n  /**\n   * @param {Array<CommentData>} comments\n   * @param {boolean} isClear\n   */\n  updateComments(comments, isClear = true) {\n    this.logger && this.logger.info(`updateComments: ${comments.length}, isClear ${isClear}`)\n    const { main } = this\n    if (typeof isClear === 'boolean' && isClear) {\n      main.data = []\n    }\n    main.data = main.data.concat(comments)\n    main.sortData()\n    main.keepPoolWatermark()\n  }\n\n  /**\n   * 设置所有弹幕播放时长\n   * @param {number} duration\n   */\n  setAllDuration(mode = 'scroll', duration, force = true) {\n    this.logger && this.logger.info(`setAllDuration: mode ${mode} duration ${duration} force ${force}`)\n    if (duration) {\n      duration = duration ? duration : 5000\n      if (force) {\n        this.main.forceDuration = duration\n      }\n      this.main.data.forEach((data) => {\n        if (mode === data.mode) {\n          data.duration = duration\n        }\n      })\n      this.main.queue.forEach((item) => {\n        if (mode === item.mode) {\n          item.duration = duration\n          item.pauseMove()\n          if (this.main.status !== 'paused') {\n            item.startMove()\n          }\n        }\n      })\n    }\n  }\n\n  /**\n   * 设置弹幕播放速率，在弹幕播放速度上乘以一个系数，控制速度的变化\n   * @param {number} val\n   */\n  setPlayRate(mode = 'scroll', val) {\n    this.logger && this.logger.info(`setPlayRate: ${val}`)\n    if (isNumber(val) && val > 0) {\n      this.main.playRate = val\n      this.main.queue.forEach((item) => {\n        if (mode === item.mode) {\n          item.pauseMove()\n          if (this.main.status !== 'paused') {\n            item.startMove()\n          }\n        }\n      })\n    }\n  }\n\n  setOpacity(opacity) {\n    this.logger && this.logger.info(`setOpacity: opacity ${opacity}`)\n\n    if (this.container) {\n      this.container.style.opacity = opacity\n    }\n  }\n\n  setFontSize(\n    size,\n    channelSize,\n    options = {\n      reflow: true\n    }\n  ) {\n    this.logger && this.logger.info(`setFontSize: size ${size} channelSize ${channelSize}`)\n    this.fontSize = `${size}px`\n    if (size) {\n      this.main.data.forEach((data) => {\n        if (data.style) {\n          data.style.fontSize = this.fontSize\n        }\n      })\n      this.main.queue.forEach((item) => {\n        if (!item.options.style) {\n          item.options.style = {}\n        }\n\n        item.options.style.fontSize = this.fontSize\n        item.setFontSize(this.fontSize)\n        if (channelSize) {\n          item.top = item.channel_id[0] * channelSize\n          item.topInit()\n        }\n      })\n    }\n    if (channelSize) {\n      this.config.channelSize = channelSize\n\n      if (options.reflow) {\n        this.main.channel.resizeSync()\n      }\n    }\n  }\n\n  setArea(area) {\n    this.logger && this.logger.info(`setArea: area ${area}`)\n    this.config.area = area\n\n    if (area.reflow !== false) {\n      this.main.channel.resizeSync()\n    }\n  }\n\n  hide(mode = 'scroll') {\n    this.logger && this.logger.info(`hide: mode ${mode}`)\n    if (this.hideArr.indexOf(mode) < 0) {\n      this.hideArr.push(mode)\n    }\n    let arr = this.main.queue.filter((item) => mode === item.mode || (mode === 'color' && item.color))\n    arr.forEach((item) => item.remove())\n  }\n\n  show(mode = 'scroll') {\n    this.logger && this.logger.info(`show: mode ${mode}`)\n    let index = this.hideArr.indexOf(mode)\n    if (index > -1) {\n      this.hideArr.splice(index, 1)\n    }\n  }\n\n  /**\n   * @param {'r2l'|'b2t'} direction\n   */\n  setDirection(direction = 'r2l') {\n    this.logger && this.logger.info(`setDirection: direction ${direction}`)\n    this.direction = direction\n    // this.main.channel.resize()\n    this.emit('changeDirection', direction)\n  }\n\n  resize() {\n    this.logger && this.logger.info('resize')\n    this.emit('channel_resize')\n  }\n}\n\nexport default DanmuJs\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./index.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn.bind(null, \"head\");\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./index.scss\";\n       export default content && content.locals ? content.locals : undefined;\n"],"names":["btoa","unescape","encodeURIComponent","JSON","i","arguments","hasOwnProperty","e","Function","Object","Math","a","l","Array","TypeError","String","o","c","document","window","Error","Symbol","DEBUG","Logger","constructorName","info","message","_key","_console","optionalParams","BaseClass","setLogger","logger","_instanceof","deepCopy","dst","src","typeOf","key","Node","obj","attachEventListener","object","event","fn","offEvent","onDestroy","_fn","data","styleUtil","elem","name","value","style","error","isNumber","val","Number","Bullet","danmu","options","container","recycler","config","undefined","self","v","ctPos","distance","flag","diff","now","Date","_makeEl","el","offset","_this","globalHooks","cssText","result","HTMLElement","copyDOM","copyDom","dom","back","node","eventListener","containerPos","random","bbqKey","updateOffset","dryRun","left","attach","detach","topInit","pauseMove","isFullscreen","pastS","pastDuration","nowS","ratio","startMove","force","fullyMovedToScreenDistance","bulletPos","leftDuration","leftDistance","leftDuration1","newTimestamp","leftDuration2","remove","needPause","setFontSize","size","setLikeDom","likeClass","children","Channel","r","checkAvailableTrack","mode","channels","channel","curBullet","destroy","k","reset","isInit","_self_danmu","bulletBtn","channelReset","cancelAnimationFrame","_self__initChannels","channelSize","channelCount","item","requestAnimationFrame","getRealOccupyArea","updatePos","pos","addBullet","bullet","channelWidth","occupy","channelHeight","max","i1","max1","j","curBulletPos","curS","curV","curT","newV","catchS","catchT","i2","max2","j1","i3","j2","i4","max3","dataList","start","deleteIndex","deleteItem","index","i5","max4","dataList2","nextAddTime1","i6","max5","j3","j4","dataList1","nextAddTime","removeBullet","channelId","resizeSync","_initChannels","navigator","_config_area","lines","end","line","modulus","resize","sync","setItem","layout","updateChannelsLower","items","updateTopScrollQueue","key_","updateBottomQueue","channel_id","updateChannelsGreater","fontSize","num","_cancelResizeTimer","Main","t","_bindEvents","_this1","queue","_unbindEvents","_cancelTick","clearTimeout","_startTick","dataHandle","setTimeout","stop","clear","play","pause","readData","interval","player","currentTime","list","prev","cur","tryCount","sortData","keepPoolWatermark","_this_danmu","priorComments","deleteCount","comment","timePoint","comment1","_getBulletByEvt","target","Control","createSwitch","state","createDom","tpl","attrs","cname","RecyclableDOMList","init","use","firseIdle","unused","idx","_expand","clearElementStyle","element","ua","resizeObserver","ResizeObserverWrapper","ResizeObserver","throttle","func","wait","timer","args","entries","err","addObserver","handler","__handlers","unObserver","destroyObserver","__runHandler","console","__trigger","DanmuJs","__VERSION__","EventEmitter","RecyclableDomList","className","RegExp","main","hooks","addResizeObserver","sendComment","setCommentID","oldID","newID","setCommentDuration","id","duration","setCommentLike","like","restartComment","_releaseCtrl","_freezeCtrl","freezeComment","removeComment","updateComments","comments","isClear","setAllDuration","setPlayRate","setOpacity","opacity","setArea","area","hide","arr","show","setDirection","direction"],"mappings":"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"}